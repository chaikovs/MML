function varargout = Booster_victor(varargin)
% from Victor's input
global FAMLIST THERING GLOBVAL

if nargin >=1
   Energy = varargin{1};
else
  Energy = 3e9;
end

RF = rfcavity('RFCA', 0.000001, 1.2E6, 499654086.264, 264,  'ThinCavityPass');
BD = rbend('CSBEND', 1.3, 0.146452252679, 0.073226126339, 0.073226126339, -0.554856162494,  'BndMPoleSymplectic4Pass');
BF = rbend('CSBEND', 1.24, 0.057025472195, 0.028512736097, 0.028512736097, 0.820065436,  'BndMPoleSymplectic4Pass');
QD = quadrupole('KQUAD', 0.3, -1.309077677853,  'StrMPoleSymplectic4Pass');
QF = quadrupole('KQUAD', 0.3, 2.007214978555,  'StrMPoleSymplectic4Pass');
QG = quadrupole('KQUAD', 0.3, 1.223904061423,  'StrMPoleSymplectic4Pass');
SF = sextupole('KSEXT', 0.12, 0.240904079074,  'StrMPoleSymplectic4Pass');
SD = sextupole('KSEXT', 0.12, -0.252024665228,  'StrMPoleSymplectic4Pass');
ISP2 = drift('MONITOR', 0.04, 'DriftPass');
A1P1 = drift('MONITOR', 0.04, 'DriftPass');
A1P2 = drift('MONITOR', 0.04, 'DriftPass');
A1P3 = drift('MONITOR', 0.04, 'DriftPass');
A1P4 = drift('MONITOR', 0.04, 'DriftPass');
A1P5 = drift('MONITOR', 0.04, 'DriftPass');
A1P6 = drift('MONITOR', 0.04, 'DriftPass');
A1P7 = drift('MONITOR', 0.04, 'DriftPass');
DSP1 = drift('MONITOR', 0.04, 'DriftPass');
DSP2 = drift('MONITOR', 0.04, 'DriftPass');
A2P1 = drift('MONITOR', 0.04, 'DriftPass');
A2P2 = drift('MONITOR', 0.04, 'DriftPass');
A2P3 = drift('MONITOR', 0.04, 'DriftPass');
A2P4 = drift('MONITOR', 0.04, 'DriftPass');
A2P5 = drift('MONITOR', 0.04, 'DriftPass');
A2P6 = drift('MONITOR', 0.04, 'DriftPass');
A2P7 = drift('MONITOR', 0.04, 'DriftPass');
CSP1 = drift('MONITOR', 0.04, 'DriftPass');
CSP2 = drift('MONITOR', 0.04, 'DriftPass');
A3P1 = drift('MONITOR', 0.04, 'DriftPass');
A3P2 = drift('MONITOR', 0.04, 'DriftPass');
A3P3 = drift('MONITOR', 0.04, 'DriftPass');
A3P4 = drift('MONITOR', 0.04, 'DriftPass');
A3P5 = drift('MONITOR', 0.04, 'DriftPass');
A3P6 = drift('MONITOR', 0.04, 'DriftPass');
A3P7 = drift('MONITOR', 0.04, 'DriftPass');
XSP1 = drift('MONITOR', 0.04, 'DriftPass');
XSP2 = drift('MONITOR', 0.04, 'DriftPass');
A4P1 = drift('MONITOR', 0.04, 'DriftPass');
A4P2 = drift('MONITOR', 0.04, 'DriftPass');
A4P3 = drift('MONITOR', 0.04, 'DriftPass');
A4P4 = drift('MONITOR', 0.04, 'DriftPass');
A4P5 = drift('MONITOR', 0.04, 'DriftPass');
A4P6 = drift('MONITOR', 0.04, 'DriftPass');
A4P7 = drift('MONITOR', 0.04, 'DriftPass');
ISP1 = drift('MONITOR', 0.04, 'DriftPass');
A1CX1 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A1CX2 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A1CX3 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A1CX4 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A1CX5 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A2CX1 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A2CX2 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A2CX3 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A2CX4 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A2CX5 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A3CX1 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A3CX2 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A3CX3 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A3CX4 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A3CX5 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A4CX1 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A4CX2 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A4CX3 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A4CX4 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A4CX5 = corrector('HKICK', 0.15, [0 0],  'CorrectorPass');
A1CY1 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A1CY2 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A1CY3 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A1CY4 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A2CY1 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A2CY2 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A2CY3 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A2CY4 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A3CY1 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A3CY2 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A3CY3 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A3CY4 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A4CY1 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A4CY2 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A4CY3 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
A4CY4 = corrector('VKICK', 0.15, [0 0],  'CorrectorPass');
KCK = drift('DRIFT', 0.775, 'DriftPass');
B1 = drift('DRIFT', 0.2, 'DriftPass');
B2 = drift('DRIFT', 0.2, 'DriftPass');
B3 = drift('DRIFT', 0.2, 'DriftPass');
B4 = drift('DRIFT', 0.2, 'DriftPass');
BR1 = drift('DRIFT', 0.2, 'DriftPass');
BR2 = drift('DRIFT', 0.2, 'DriftPass');
BR3 = drift('DRIFT', 0.2, 'DriftPass');
BR4 = drift('DRIFT', 0.2, 'DriftPass');
DA = drift('DRIFT', 4.31, 'DriftPass');
DB = drift('DRIFT', 0.413, 'DriftPass');
DQ = drift('DRIFT', 2.081, 'DriftPass');
DKM = drift('DRIFT', 0.497, 'DriftPass');
DS = drift('DRIFT', 0.6, 'DriftPass');
D1 = drift('DRIFT', 0.465, 'DriftPass');
DAIN1 = drift('DRIFT', 0.515, 'DriftPass');
DAIN2 = drift('DRIFT', 0.985, 'DriftPass');
DAIN3 = drift('DRIFT', 1.37, 'DriftPass');
DAIN4 = drift('DRIFT', 0.2, 'DriftPass');
DAIN5 = drift('DRIFT', 0.2, 'DriftPass');
DAIN6 = drift('DRIFT', 0.45, 'DriftPass');
DQ1 = drift('DRIFT', 0.285, 'DriftPass');
DQ2 = drift('DRIFT', 0.096, 'DriftPass');
DQ3 = drift('DRIFT', 0.2, 'DriftPass');
DQ4 = drift('DRIFT', 0.18, 'DriftPass');
DQ5 = drift('DRIFT', 0.18, 'DriftPass');
DQ6 = drift('DRIFT', 0.2, 'DriftPass');
DQKM = drift('DRIFT', 0.421, 'DriftPass');
DQK = drift('DRIFT', 0.51, 'DriftPass');
DS1 = drift('DRIFT', 0.17, 'DriftPass');
DS2 = drift('DRIFT', 0.17, 'DriftPass');
DS3 = drift('DRIFT', 0.1, 'DriftPass');
DKMX = drift('DRIFT', 0.1735, 'DriftPass');
DKMY = drift('DRIFT', 0.1735, 'DriftPass');
DKMM = drift('DRIFT', 0.2285, 'DriftPass');
DA1 = drift('DRIFT', 0.2, 'DriftPass');
DA2 = drift('DRIFT', 1.77, 'DriftPass');
DA3 = drift('DRIFT', 2.15, 'DriftPass');
DAEX1 = drift('DRIFT', 0.2, 'DriftPass');
DAEX2 = drift('DRIFT', 0.275, 'DriftPass');
DAEX3 = drift('DRIFT', 0.275, 'DriftPass');
DAEX4 = drift('DRIFT', 0.7, 'DriftPass');
DAEX5 = drift('DRIFT', 0.2, 'DriftPass');
DAEX6 = drift('DRIFT', 0.3, 'DriftPass');
DAEX7 = drift('DRIFT', 0.995, 'DriftPass');
KICKD = drift('DRIFT', 0.775, 'DriftPass');
MK1 = marker('MARKER', 'IdentityPass');
MK2 = marker('MARKER', 'IdentityPass');
INJ = marker('MARKER', 'IdentityPass');
EXTR = marker('MARKER', 'IdentityPass');
QUAT1= [ MK1  DAIN1  INJ  DAIN2  BR3  DAIN3  ISP2  DAIN4  BR4  DAIN5  A1CX1  DAIN6  QF  DB  BD  DQ1  A1P1  DQ2  A1CY1  DQ3  QG  DQ4  A1CX2  DQ5  QD  DQ6  BF  DS1  SF  DS2  A1P2  DS3  BD  DKMX  A1CX3  DKMX  BF  DKMM  A1P3  DKMM  BD  DKMY  A1CY2  DKMY  BF  DS1  SD  DS2  A1P4  DS3  BD  D1  BF  D1  BD  DS1  SD  DS2  A1P5  DS3  BF  DKMY  A1CY3  DKMY  BD  DKMM  A1P6  DKMM  BF  DKMX  A1CX4  DKMX  BD  DS1  SF  DS2  A1P7  DS3  BF  DQ6  QD  DQK  QG  DQ3  A1CY4  DQKM  BD  DB  QF  DA1  A1CX5  DA2  DSP1  DA3  MK2];
QUAT2= [ MK1  DA3  DSP2  DA2  A2CX1  DA1  QF  DB  BD  DQKM  A2CY1  DQ3  QG  DQK  QD  DQ6  BF  DS1  SF  DS2  A2P1  DS3  BD  DKMX  A2CX2  DKMX  BF  DKMM  A2P2  DKMM  BD  DKMY  A2CY2  DKMY  BF  DS1  SD  DS2  A2P3  DS3  BD  D1  BF  D1  BD  DS1  SD  DS2  A2P4  DS3  BF  DKMY  A2CY3  DKMY  BD  DKMM  A2P5  DKMM  BF  DKMX  A2CX3  DKMX  BD  DS1  SF  DS2  A2P6  DS3  BF  DQ6  QD  DQ5  A2CX4  DQ4  QG  DQ3  A2CY4  DQ2  A2P7  DQ1  BD  DB  QF  DAEX1  B1  DAEX2  KCK  DAEX3  A2CX5  DAEX4  XSP1  DAEX5  B2  DAEX6  EXTR  DAEX7  MK2];
QUAT3= [ MK1  DAEX7  DAEX6  B3  DAEX5  XSP2  DAEX4  A3CX1  DAEX3  KICKD  DAEX2  B4  DAEX1  QF  DB  BD  DQ1  A3P1  DQ2  A3CY1  DQ3  QG  DQ4  A3CX2  DQ5  QD  DQ6  BF  DS1  SF  DS2  A3P2  DS3  BD  DKMX  A3CX3  DKMX  BF  DKMM  A3P3  DKMM  BD  DKMY  A3CY2  DKMY  BF  DS1  SD  DS2  A3P4  DS3  BD  D1  BF  D1  BD  DS1  SD  DS2  A3P5  DS3  BF  DKMY  A3CY3  DKMY  BD  DKMM  A3P6  DKMM  BF  DKMX  A3CX4  DKMX  BD  DS1  SF  DS2  A3P7  DS3  BF  DQ6  QD  DQK  QG  DQ3  A3CY4  DQKM  BD  DB  QF  DA1  A3CX5  DA2  CSP1  DA3  MK2];
QUAT4= [ MK1  DA3  CSP2  DA2  A4CX1  DA1  QF  DB  BD  DQKM  A4CY1  DQ3  QG  DQK  QD  DQ6  BF  DS1  SF  DS2  A4P1  DS3  BD  DKMX  A4CX2  DKMX  BF  DKMM  A4P2  DKMM  BD  DKMY  A4CY2  DKMY  BF  DS1  SD  DS2  A4P3  DS3  BD  D1  BF  D1  BD  DS1  SD  DS2  A4P4  DS3  BF  DKMY  A4CY3  DKMY  BD  DKMM  A4P5  DKMM  BF  DKMX  A4CX3  DKMX  BD  DS1  SF  DS2  A4P6  DS3  BF  DQ6  QD  DQ5  A4CX4  DQ4  QG  DQ3  A4CY4  DQ2  A4P7  DQ1  BD  DB  QF  DAIN6  A4CX5  DAIN5  BR1  DAIN4  ISP1  DAIN3  BR2  DAIN2  DAIN1  MK2];
RING= [ QUAT1  QUAT2  QUAT3  QUAT4  RF];
buildlat(RING);
evalin('caller','global THERING FAMLIST GLOBVAL');
THERING = setcellstruct(THERING, 'Energy', 1:length(THERING), Energy);
L0 = findspos(THERING, length(THERING)+1);
fprintf(' Total Length = %.6f meters \n ', L0)
