<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plotidfftable2</title>
  <meta name="keywords" content="plotidfftable2">
  <meta name="description" content="">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">machine</a> &gt; <a href="#">Soleil</a> &gt; <a href="index.html">StorageRing</a> &gt; plotidfftable2.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for machine/Soleil/StorageRing&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>plotidfftable2
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong></strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function ffcompare </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"></pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function ffcompare</a>
0002 
0003 
0004 BLeffHCM = 410;  <span class="comment">% gauss cm / amp;</span>
0005 BLeffVCM = 171;  <span class="comment">% gauss cm / amp;</span>
0006 Leff = 55;       <span class="comment">% cm</span>
0007 labelmat = [];
0008 
0009 DirStart = pwd;
0010 gotodata
0011 cd gaptrack
0012 cd archive
0013 
0014 figure
0015 ha=subplot(2,2,1);
0016 hb=subplot(2,2,2);
0017 hc=subplot(2,2,3);
0018 hd=subplot(2,2,4);
0019 
0020 SectorIn = menu(<span class="string">'Which Sector?'</span>,<span class="string">'4'</span>,<span class="string">'5'</span>,<span class="string">'7'</span>,<span class="string">'8'</span>,<span class="string">'9'</span>,<span class="string">'10'</span>,<span class="string">'12'</span>,<span class="string">'Cancel'</span>);   
0021 <span class="keyword">if</span> SectorIn == 1
0022    Sector = 4;
0023 <span class="keyword">elseif</span> SectorIn == 2
0024    Sector = 5;
0025 <span class="keyword">elseif</span> SectorIn == 3
0026    Sector = 7;
0027 <span class="keyword">elseif</span> SectorIn == 4
0028    Sector = 8;
0029 <span class="keyword">elseif</span> SectorIn == 5
0030    Sector = 9;
0031 <span class="keyword">elseif</span> SectorIn == 6
0032    Sector = 10;
0033 <span class="keyword">elseif</span> SectorIn == 7
0034    Sector = 12;
0035 <span class="keyword">elseif</span> SectorIn == 8
0036    <span class="keyword">return</span>
0037 <span class="keyword">end</span>
0038 <span class="keyword">if</span> Sector == 0
0039    <span class="keyword">return</span>;
0040 <span class="keyword">end</span>
0041 
0042 <span class="keyword">for</span> i = 1:100000
0043    <span class="comment">% Load the table1</span>
0044    [Datafn, DirStr] = uigetfile(sprintf(<span class="string">'id%02d*.mat'</span>, Sector), <span class="string">'Choose the desired feed forward file (Cancel to stop).'</span>);
0045    <span class="keyword">if</span> Datafn == 0
0046       <span class="comment">% Return of original directory</span>
0047       eval([<span class="string">'cd '</span>, DirStart]);
0048       
0049       <span class="comment">%subplot(2,2,1);</span>
0050       axes(ha);
0051       title(<span class="string">''</span>);
0052       hold off
0053       axis tight
0054       <span class="comment">%subplot(2,2,2);</span>
0055       axes(hb);
0056       title(<span class="string">''</span>);
0057       hold off
0058       axis tight
0059       <span class="comment">%subplot(2,2,3);</span>
0060       axes(hc);
0061       title(<span class="string">''</span>);
0062       hold off
0063       axis tight
0064       <span class="comment">%subplot(2,2,4);</span>
0065       axes(hd);
0066       title(<span class="string">''</span>);
0067       hold off
0068       axis tight
0069       orient landscape
0070       
0071       h=addlabel(.5,1,sprintf(<span class="string">'Sector %d Feed Forward Tables'</span>, Sector1),12);
0072       set(h,<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>);
0073       
0074       <span class="keyword">for</span> j = 1:size(labelmat,1)
0075          h=addlabel(1,1-.02*(j-1),labelmat(j,:),7);
0076          set(h,<span class="string">'color'</span>,labelcmat(j,:));
0077          <span class="comment">%set(h(j),'EraseMode','background');</span>
0078          <span class="comment">%set(h(j),'EraseMode','Normal');</span>
0079          <span class="comment">%set(h(j),'EraseMode','xor');</span>
0080       <span class="keyword">end</span>
0081       
0082       <span class="keyword">return</span>
0083    <span class="keyword">end</span>
0084    
0085    
0086    eval([<span class="string">'load '</span>, DirStr, Datafn]);
0087    h1 = tableX;
0088    v1 = tableY;
0089    Sector1 = str2num(Datafn(3:4));
0090    GeVnum1 = str2num(Datafn(6:7))/10;
0091    
0092    
0093    cmat = get(gca,<span class="string">'ColorOrder'</span>);
0094    icolor=rem(i-1,size(cmat,1))+1;
0095    
0096    <span class="comment">%ha=subplot(2,2,1);</span>
0097    axes(ha);
0098    plot(h1(:,1),h1(:,2),<span class="string">'color'</span>,cmat(icolor,:));
0099    xlabel(<span class="string">'Gap Position [mm]'</span>);
0100    ylabel(sprintf(<span class="string">'HCM(%d,%d) [amps]'</span>,Sector1-1,4));
0101    title(sprintf(<span class="string">'Sector %d Table at %.1f GeV'</span>, Sector1, GeVnum1));
0102    hold on
0103    
0104    <span class="comment">%hb=subplot(2,2,3);</span>
0105    axes(hb);
0106    plot(h1(:,1),h1(:,3),<span class="string">'color'</span>,cmat(icolor,:));
0107    xlabel(<span class="string">'Gap Position [mm]'</span>);
0108    ylabel(sprintf(<span class="string">'HCM(%d,%d) [amps]'</span>,Sector1,1));
0109    title(sprintf(<span class="string">'Sector %d Table at %.1f GeV'</span>, Sector1, GeVnum1));
0110    hold on
0111    
0112    <span class="comment">%hc=subplot(2,2,2);</span>
0113    axes(hc);
0114    plot(v1(:,1),v1(:,2),<span class="string">'color'</span>,cmat(icolor,:));
0115    xlabel(<span class="string">'Gap Position [mm]'</span>);
0116    ylabel(sprintf(<span class="string">'VCM(%d,%d) [amps]'</span>,Sector1-1,4));
0117    title(sprintf(<span class="string">'Sector %d Table at %.1f GeV'</span>, Sector1, GeVnum1));
0118    hold on
0119    
0120    <span class="comment">%hd=subplot(2,2,4);</span>
0121    axes(hd);
0122    plot(v1(:,1),v1(:,3),<span class="string">'color'</span>,cmat(icolor,:));
0123    xlabel(<span class="string">'Gap Position [mm]'</span>);
0124    ylabel(sprintf(<span class="string">'VCM(%d,%d) [amps]'</span>,Sector1,1));
0125    title(sprintf(<span class="string">'Sector %d Table at %.1f GeV'</span>, Sector1, GeVnum1));
0126    hold on
0127    
0128    fprintf(<span class="string">'  %d.  %s  Sector %d  %.1f GeV\n'</span>, i, FFDate, Sector1, GeVnum1);
0129    
0130    labelmat = strvcat(labelmat, sprintf(<span class="string">'%s, Sector %d, %.1f GeV'</span>, FFDate, Sector1, GeVnum1));
0131    labelcmat(i,:) = cmat(icolor,:);
0132    <span class="comment">%h(i)=addlabel(1,1-.03*i,sprintf('%s  Sector %d  %.1f GeV', FFDate, Sector1, GeVnum1),7);</span>
0133    <span class="comment">%set(h(i),'color',cmat(icolor,:));</span>
0134    
0135    <span class="keyword">for</span> j = 1:i
0136       h=addlabel(1,1-.02*(j-1),labelmat(j,:),7);
0137       set(h,<span class="string">'color'</span>,labelcmat(j,:));
0138       <span class="comment">%set(h(j),'EraseMode','background');</span>
0139       <span class="comment">%set(h(j),'EraseMode','Normal');</span>
0140       <span class="comment">%set(h(j),'EraseMode','xor');</span>
0141    <span class="keyword">end</span>
0142    
0143    drawnow
0144 <span class="keyword">end</span>
0145 
0146 
0147 
0148 <span class="keyword">return</span>
0149 
0150 
0151 
0152 
0153 
0154 <span class="comment">% Load the table2</span>
0155 [Datafn, DirStr] = uigetfile(<span class="string">'*.mat'</span>, <span class="string">'Choose the desired feed forward file.'</span>);
0156 eval([<span class="string">'load '</span>, DirStr, Datafn]);
0157 h1 = tableX;
0158 v1 = tableY;
0159 Sector2 = str2num(Datafn(3:4));
0160 GeVnum2 = str2num(Datafn(6:7))/10;
0161 
0162 
0163 subplot(2,1,1);
0164 plot(h1(:,1),h1(:,2),<span class="string">'-.r'</span>, h1(:,1),h1(:,3),<span class="string">':g'</span>);
0165 hold off;
0166 xlabel(<span class="string">'Gap Position [mm]'</span>);
0167 ylabel(<span class="string">'Horizontal Corrector Strength [amps]'</span>);
0168 title([<span class="string">'Insertion Device Feedfoward Tables'</span>]);
0169 legend([<span class="string">'HCM4, Sector '</span>,num2str(Sector1-1),<span class="string">'  '</span>, num2str(GeVnum1), <span class="string">' GeV'</span>], <span class="keyword">...</span>
0170        [<span class="string">'HCM1, Sector '</span>,num2str(Sector1),<span class="string">'  '</span>,   num2str(GeVnum1), <span class="string">' GeV'</span>], <span class="keyword">...</span>
0171        [<span class="string">'HCM4, Sector '</span>,num2str(Sector2-1),<span class="string">'  '</span>, num2str(GeVnum2), <span class="string">' GeV'</span>], <span class="keyword">...</span>
0172        [<span class="string">'HCM1, Sector '</span>,num2str(Sector2),<span class="string">'  '</span>,   num2str(GeVnum2), <span class="string">' GeV'</span>]);
0173 
0174 
0175 subplot(2,1,2);
0176 plot(v1(:,1),v1(:,2),<span class="string">'-.r'</span>, v1(:,1),v1(:,3),<span class="string">':g'</span>);
0177 hold off;
0178 xlabel(<span class="string">'Gap Position [mm]'</span>);
0179 ylabel(<span class="string">'Vertical Corrector Strength [amps]'</span>);
0180 title([<span class="string">'Insertion Device Feedfoward Tables'</span>]);
0181 legend([<span class="string">'VCM4, Sector '</span>,num2str(Sector1-1),<span class="string">'  '</span>, num2str(GeVnum1), <span class="string">' GeV'</span>], <span class="keyword">...</span>
0182        [<span class="string">'VCM1, Sector '</span>,num2str(Sector1),<span class="string">'  '</span>,   num2str(GeVnum1), <span class="string">' GeV'</span>], <span class="keyword">...</span>
0183        [<span class="string">'VCM4, Sector '</span>,num2str(Sector2-1),<span class="string">'  '</span>, num2str(GeVnum2), <span class="string">' GeV'</span>], <span class="keyword">...</span>
0184        [<span class="string">'VCM1, Sector '</span>,num2str(Sector2),<span class="string">'  '</span>,   num2str(GeVnum2), <span class="string">' GeV'</span>]);</pre></div>
<hr><address>Generated on Mon 21-May-2007 15:35:27 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>