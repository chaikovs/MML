<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of synchro_injecteur8_rafale</title>
  <meta name="keywords" content="synchro_injecteur8_rafale">
  <meta name="description" content="SYNCHRO_INJECTEUR8_RAFALE M-file for synchro_injecteur8_rafale.fig">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="#">machine</a> &gt; <a href="#">Soleil</a> &gt; <a href="../index.html">common</a> &gt; <a href="index.html">synchro</a> &gt; synchro_injecteur8_rafale.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for machine/Soleil/common/synchro&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>synchro_injecteur8_rafale
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>SYNCHRO_INJECTEUR8_RAFALE M-file for synchro_injecteur8_rafale.fig</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function varargout = synchro_injecteur8_rafale(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> SYNCHRO_INJECTEUR8_RAFALE M-file for synchro_injecteur8_rafale.fig
      SYNCHRO_INJECTEUR8_RAFALE, by itself, creates a new SYNCHRO_INJECTEUR8_RAFALE or raises the existing
      singleton*.

      H = SYNCHRO_INJECTEUR8_RAFALE returns the handle to a new SYNCHRO_INJECTEUR8_RAFALE or the handle to
      the existing singleton*.

      SYNCHRO_INJECTEUR8_RAFALE('CALLBACK',hObject,eventData,handles,...) calls the local
      function named CALLBACK in SYNCHRO_INJECTEUR8_RAFALE.M with the given input arguments.

      SYNCHRO_INJECTEUR8_RAFALE('Property','Value',...) creates a new SYNCHRO_INJECTEUR8_RAFALE or raises the
      existing singleton*.  Starting from the left, property value pairs are
      applied to the GUI before synchro_injecteur8_rafale_OpeningFunction gets called.  An
      unrecognized property name or invalid value makes property application
      stop.  All inputs are passed to synchro_injecteur8_rafale_OpeningFcn via varargin.

      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one
      instance to run (singleton)&quot;.

 See also: GUIDE, GUIDATA, GUIHANDLES</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>	BUCKETNUMBER - Computes n1 n2 for timing system master board for a bucket</li><li><a href="check_boo_synchro.html" class="code" title="function [flag]=check_boo_synchro">check_boo_synchro</a>	Estime amplitude sur tune synchro</li><li><a href="do_update.html" class="code" title="function do_update">do_update</a>	</li><li><a href="fire_injection.html" class="code" title="function [r1,r2]=fire_injection(handles)">fire_injection</a>	</li><li><a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>	fix premier quart</li><li><a href="get_synchro_address.html" class="code" title="function get_synchro_address(handles)">get_synchro_address</a>	</li><li><a href="get_synchro_delay.html" class="code" title="function get_synchro_delay(handles)">get_synchro_delay</a>	</li><li><a href="get_synchro_delay_nooffset.html" class="code" title="function get_synchro_delay_nooffset(handles)">get_synchro_delay_nooffset</a>	</li><li><a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>	step and address</li><li><a href="get_synchro_trigstatus.html" class="code" title="function get_synchro_trigstatus(handles)">get_synchro_trigstatus</a>	</li><li><a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function synchro_injecteur8_rafale_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = synchro_injecteur8_rafale_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function boo_alim_dipole_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function boo_alim_dipole_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function boo_alim_qf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function boo_alim_qf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function boo_alim_qd_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function boo_alim_qd_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function boo_alim_sf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function boo_alim_sf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function boo_alim_sd_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function boo_alim_sd_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function boo_rf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function boo_rf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function lin_canon_lpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function lin_canon_lpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function lt1_emittance_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function lt1_emittance_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function lt1_MC1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function lt1_MC1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function lt1_MC2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function lt1_MC2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function lt1_osc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function lt1_osc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function sdc1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function sdc1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function boo_inj_septum_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function boo_inj_septum_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function boo_inj_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function boo_inj_kicker_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function boo_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function boo_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function boo_nod_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function boo_nod_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function boo_dcct_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function boo_dcct_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function lin_canon_spm_fin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function lin_canon_spm_fin_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function central_spare_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function central_spare_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function central_inj_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function central_inj_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function central_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function central_soft_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function button_acquisition_nooffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function button_acquisition_delay_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function button_injection_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function periode_edit_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function periode_edit_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)</a></li><li><a href="#_sub51" class="code">function fonction_alex1(arg1,arg2,hObject,eventdata,handles)</a></li><li><a href="#_sub52" class="code">function fonction_alex2(arg1,arg2,hObject,eventdata,handles)</a></li><li><a href="#_sub53" class="code">function Closinggui(obj, event, handles, figure1)</a></li><li><a href="#_sub54" class="code">function button_softmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function button_softplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function button_injmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function button_injplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function boo_ext_sept_p_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function boo_ext_sept_p_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function boo_ext_dof_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function boo_ext_dof_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function boo_ext_sept_a_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function boo_ext_sept_a_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function boo_ext_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function boo_ext_kicker_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function ans_inj_sept_p_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function ans_inj_sept_p_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function ans_inj_sept_a_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function ans_inj_sept_a_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function ans_inj_k1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function ans_inj_k1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function ans_inj_k2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function ans_inj_k2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function ans_inj_k3_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function ans_inj_k3_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function ans_inj_k4_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function ans_inj_k4_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function ans_dcct_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function ans_dcct_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function ans_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function ans_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function central_ext_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function central_ext_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function central_soft1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function central_soft1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function button_extmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function button_extplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function sdc2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function sdc2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function lt2_emittance_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function lt2_emittance_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub92" class="code">function lt2_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub93" class="code">function lt2_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub94" class="code">function lt2_osc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub95" class="code">function lt2_osc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub96" class="code">function lin_modulateur_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub97" class="code">function lin_modulateur_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub98" class="code">function inj_offset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub99" class="code">function inj_offset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub100" class="code">function ext_offset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub101" class="code">function ext_offset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub102" class="code">function button_acquisition_address_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub103" class="code">function button_offinj_moins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub104" class="code">function button_offinj_plus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub105" class="code">function button_offext_moins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub106" class="code">function button_offext_plus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub107" class="code">function button_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub108" class="code">function ans_bpm_c01_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub109" class="code">function ans_bpm_c01_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub110" class="code">function ans_bpm_c02_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub111" class="code">function ans_bpm_c02_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub112" class="code">function ans_bpm_c03_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub113" class="code">function ans_bpm_c03_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub114" class="code">function ans_bpm_c04_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub115" class="code">function ans_bpm_c04_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub116" class="code">function ans_bpm_c05_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub117" class="code">function ans_bpm_c05_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub118" class="code">function ans_bpm_c06_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub119" class="code">function ans_bpm_c06_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub120" class="code">function ans_bpm_c07_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub121" class="code">function ans_bpm_c07_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub122" class="code">function ans_bpm_c08_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub123" class="code">function ans_bpm_c08_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub124" class="code">function ans_bpm_c09_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub125" class="code">function ans_bpm_c09_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub126" class="code">function ans_bpm_c10_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub127" class="code">function ans_bpm_c10_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub128" class="code">function ans_bpm_c11_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub129" class="code">function ans_bpm_c11_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub130" class="code">function ans_bpm_c12_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub131" class="code">function ans_bpm_c12_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub132" class="code">function ans_bpm_c13_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub133" class="code">function ans_bpm_c13_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub134" class="code">function ans_bpm_c14_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub135" class="code">function ans_bpm_c14_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub136" class="code">function ans_bpm_c15_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub137" class="code">function ans_bpm_c15_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub138" class="code">function ans_bpm_c16_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub139" class="code">function ans_bpm_c16_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub140" class="code">function edit_filling_relecture_tables_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub141" class="code">function edit_filling_relecture_tables_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub142" class="code">function edit_filling_relecture_bunch_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub143" class="code">function edit_filling_relecture_bunch_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub144" class="code">function edit_filling_entrer_bunch_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub145" class="code">function edit_filling_entrer_bunch_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub146" class="code">function button_update_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub147" class="code">function button_acquisition_trigstatus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub148" class="code">function togglebutton2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub149" class="code">function listbox_fillingmode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub150" class="code">function listbox_fillingmode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub151" class="code">function button_fix_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub152" class="code">function edit_Ncycle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub153" class="code">function edit_Ncycle_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub154" class="code">function edit_Ncoup_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub155" class="code">function edit_Ncoup_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub156" class="code">function edit_qlt1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub157" class="code">function edit_qlt1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub158" class="code">function edit_iboo_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub159" class="code">function edit_iboo_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub160" class="code">function edit_dians_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub161" class="code">function edit_dians_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub162" class="code">function edit_rlt1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub163" class="code">function edit_rlt1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub164" class="code">function edit_rboo_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub165" class="code">function edit_rboo_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub166" class="code">function edit_rans_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub167" class="code">function edit_rans_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub168" class="code">function edit_dians1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub169" class="code">function edit_dians1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub170" class="code">function edit_cycle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub171" class="code">function edit_cycle_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub172" class="code">function edit_courant_total_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub173" class="code">function edit_courant_total_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub174" class="code">function lin_canon_spm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub175" class="code">function lin_canon_spm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub176" class="code">function  uipanel_mode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub177" class="code">function edit_filling_entrer_bunch1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub178" class="code">function edit_filling_entrer_bunch1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub179" class="code">function edit_Imin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub180" class="code">function edit_Imin_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub181" class="code">function uipanel_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub182" class="code">function uipanel_lpm_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub183" class="code">function uipanel_central_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub184" class="code">function  [etat]=test_central_mode(handles)</a></li><li><a href="#_sub185" class="code">function  [etat]=test_injection_mode(handles)</a></li><li><a href="#_sub186" class="code">function  [etat]=test_lpm_spm_mode(handles)</a></li><li><a href="#_sub187" class="code">function  [etat]=test_spm_mode(handles)</a></li><li><a href="#_sub188" class="code">function  [etat]=test_cond_inj(handles)</a></li><li><a href="#_sub189" class="code">function  test_modes(handles)</a></li><li><a href="#_sub190" class="code">function edit_modes_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub191" class="code">function edit_modes_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub192" class="code">function ans_k_pc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub193" class="code">function ans_k_pc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub194" class="code">function ans_k_h_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub195" class="code">function ans_k_h_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub196" class="code">function ans_k_v_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub197" class="code">function ans_k_v_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub198" class="code">function button_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub199" class="code">function button_save_golden_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub200" class="code">function button_load_golden_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub201" class="code">function button_load_golden_3Hz_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub202" class="code">function button_save_golden_3Hz_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub203" class="code">function button_load_golden_3Hz_66MeV_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub204" class="code">function button_save_golden_66MeV_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub205" class="code">function boo_mrsv_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub206" class="code">function boo_mrsv_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub207" class="code">function central_pc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub208" class="code">function central_pc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub209" class="code">function lin_alim_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub210" class="code">function lin_alim_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub211" class="code">function ans_nod_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub212" class="code">function ans_nod_CreateFcn(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = synchro_injecteur8_rafale(varargin)</a>
0002 <span class="comment">% SYNCHRO_INJECTEUR8_RAFALE M-file for synchro_injecteur8_rafale.fig</span>
0003 <span class="comment">%      SYNCHRO_INJECTEUR8_RAFALE, by itself, creates a new SYNCHRO_INJECTEUR8_RAFALE or raises the existing</span>
0004 <span class="comment">%      singleton*.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">%      H = SYNCHRO_INJECTEUR8_RAFALE returns the handle to a new SYNCHRO_INJECTEUR8_RAFALE or the handle to</span>
0007 <span class="comment">%      the existing singleton*.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%      SYNCHRO_INJECTEUR8_RAFALE('CALLBACK',hObject,eventData,handles,...) calls the local</span>
0010 <span class="comment">%      function named CALLBACK in SYNCHRO_INJECTEUR8_RAFALE.M with the given input arguments.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%      SYNCHRO_INJECTEUR8_RAFALE('Property','Value',...) creates a new SYNCHRO_INJECTEUR8_RAFALE or raises the</span>
0013 <span class="comment">%      existing singleton*.  Starting from the left, property value pairs are</span>
0014 <span class="comment">%      applied to the GUI before synchro_injecteur8_rafale_OpeningFunction gets called.  An</span>
0015 <span class="comment">%      unrecognized property name or invalid value makes property application</span>
0016 <span class="comment">%      stop.  All inputs are passed to synchro_injecteur8_rafale_OpeningFcn via varargin.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">%      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one</span>
0019 <span class="comment">%      instance to run (singleton)&quot;.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% See also: GUIDE, GUIDATA, GUIHANDLES</span>
0022 
0023 <span class="comment">% For the compiler</span>
0024 <span class="comment">%#function aoinit setao setoperationalmode</span>
0025 <span class="comment">%#function boosterinit</span>
0026 <span class="comment">%#function magnetcoefficients</span>
0027 <span class="comment">%</span>
0028 
0029 <span class="comment">% Edit the above text to modify the response to help synchro_injecteur8_rafale</span>
0030 
0031 <span class="comment">% Last Modified by GUIDE v2.5 18-May-2009 18:08:47</span>
0032 
0033 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0034 gui_Singleton = 1;
0035 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0036                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0037                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction synchro_injecteur8_rafale_OpeningFcn(hObject, eventdata, handles, varargin)">synchro_injecteur8_rafale_OpeningFcn</a>, <span class="keyword">...</span>
0038                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = synchro_injecteur8_rafale_OutputFcn(hObject, eventdata, handles)">synchro_injecteur8_rafale_OutputFcn</a>, <span class="keyword">...</span>
0039                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0040                    <span class="string">'gui_Callback'</span>,   []);
0041 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0042     gui_State.gui_Callback = str2func(varargin{1});
0043 <span class="keyword">end</span>
0044 
0045 <span class="keyword">if</span> nargout
0046     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0047 <span class="keyword">else</span>
0048     gui_mainfcn(gui_State, varargin{:});
0049 <span class="keyword">end</span>
0050 <span class="comment">% End initialization code - DO NOT EDIT</span>
0051 
0052 
0053 <span class="comment">% --- Executes just before synchro_injecteur8_rafale is made visible.</span>
0054 <a name="_sub1" href="#_subfunctions" class="code">function synchro_injecteur8_rafale_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0055 <span class="comment">% This function has no output args, see OutputFcn.</span>
0056 <span class="comment">% hObject    handle to figure</span>
0057 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0058 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0059 <span class="comment">% varargin   command line arguments to synchro_injecteur8_rafale (see VARARGIN)</span>
0060 
0061 <span class="comment">% Choose default command line output for synchro_injecteur8_rafale</span>
0062 handles.output = hObject;
0063 
0064 <span class="comment">% list les devices annexe pour etat</span>
0065 fprintf(<span class="string">'Liste devices annexes \n'</span>);
0066 <span class="comment">% name={'ANS-C03/DG/DCCT','LT1/DG/MC','BOO-C01/DG/DCCT',...</span>
0067 <span class="comment">%     'ANS/DG/PUB-FillingMode', 'ANS/FC/INJ_COND'};</span>
0068 name={<span class="string">'ANS/DG/DCCT-CTRL'</span>,<span class="string">'LT1/DG/MC'</span>,<span class="string">'BOO-C01/DG/DCCT'</span>,<span class="keyword">...</span>
0069     <span class="string">'ANS/DG/PUB-FillingMode'</span>, <span class="string">'ANS/FC/INJ_COND'</span>};
0070 <span class="keyword">for</span> i=1:4
0071     <span class="keyword">try</span>
0072         txt=tango_command_inout2(name{2},<span class="string">'State'</span>);
0073         <span class="comment">%temp=tango_read_attribute(name{i},'State');</span>
0074         <span class="comment">%temp=tango_read_attribute(name{i},'Status');txt=temp.value;</span>
0075     <span class="keyword">catch</span>
0076         txt=<span class="string">'bug_device'</span>;
0077     <span class="keyword">end</span>
0078     fprintf(<span class="string">'%s   :   %s \n'</span>,name{i},txt);
0079 <span class="keyword">end</span>
0080 
0081 <span class="comment">% Added by Laurent</span>
0082 <span class="keyword">if</span> isdeployed
0083     cd(getenv(<span class="string">'MLROOT'</span>)); 
0084     setpathsoleil(<span class="string">'Booster'</span>); 
0085 <span class="keyword">end</span>
0086 <span class="comment">% End</span>
0087 
0088 <span class="comment">% Directories</span>
0089 <span class="comment">%Directory='/home/matlabML/measdata/SOLEIL/Boosterdata/Datatemp'; % ALEX</span>
0090 Directory =  [getfamilydata(<span class="string">'Directory'</span>,<span class="string">'DataRoot'</span>) <span class="string">'../Boosterdata/Datatemp'</span>]; <span class="comment">% Laurent</span>
0091 handles.Directory=Directory;  <span class="comment">% for saved data</span>
0092 
0093 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin_alim');</span>
0094 <span class="comment">% DirName ='/home/matlabML/machine/SOLEIL/common/synchro/'; % ALEX</span>
0095 DirName = getfamilydata(<span class="string">'Directory'</span>, <span class="string">'Synchro'</span>); <span class="comment">% Laurent</span>
0096 handles.DirName=DirName;      <span class="comment">% for offset &amp; table</span>
0097 
0098 <span class="comment">% Charge les offset</span>
0099 FileName = [DirName <span class="string">'synchro_offset_lin'</span>];
0100 fprintf(<span class="string">'Laurent:%s\n'</span>, FileName');
0101 load(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0102 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
0103 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
0104 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
0105 <span class="comment">% Periode linac fin</span>
0106 handles.lin_fin_step=0.090;                   <span class="comment">% En ns  (90 ps)</span>
0107 handles.one_bunch=2.84/handles.lin_fin_step;  <span class="comment">% Nombre de pas pour sauter un paquet</span>
0108 
0109 <span class="comment">% Periode du trigger par defaut = 10 s</span>
0110 handles.periode = 10;
0111 set(handles.periode_edit,<span class="string">'String'</span>,num2str(handles.periode));
0112 set(handles.edit_Ncycle,<span class="string">'String'</span>,num2str(1));
0113 set(handles.edit_Ncoup,<span class="string">'String'</span>,1.0);
0114 
0115 <span class="comment">%Memorise les dÃ©lais spare et soft initiaux</span>
0116 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprStepDelay'</span>);
0117 clk1=temp.value(1);
0118 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
0119 clk2=temp.value(1);
0120 
0121 <span class="comment">%Stocke les sauts pour les 4 quarts mode LPM</span>
0122 jump=int32([0 39 26 13]);
0123 handles.clk_spare  =jump +  int32(clk1);
0124 handles.clk_soft=jump  + int32(clk2);
0125 handles.quart=1;
0126 
0127 <span class="comment">% Table initiale sur paquet 1</span>
0128 bunch=[1];
0129 [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);
0130 offset_linac=lin_fin/handles.lin_fin_step; 
0131 bjump=handles.one_bunch;
0132 dpaquet=dpaquet*bjump+offset_linac;
0133 handles.table=int32([length(bunch) dtour dpaquet]);
0134 handles.table0=handles.table;
0135 handles.bunch=bunch;
0136 
0137 handles.mode = <span class="string">'Mode=???'</span>;
0138 set(handles.edit_filling_relecture_tables,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0139 set(handles.edit_filling_relecture_bunch,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0140 
0141 <span class="comment">% Verifie le mode selectionnÃ© en SPM ou LPM</span>
0142 <span class="comment">% Verifie le mode central selectionnÃ©  : rafale ou continue</span>
0143 <span class="comment">% Verifie le mode selectionnÃ© en SPM : 1 2 ou 3 paquets</span>
0144 <span class="comment">% Verifie le mode d'injection selectionnÃ© : soft ou 3Hz</span>
0145 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
0146 
0147 
0148 <span class="comment">% Choix des events</span>
0149 handles.event0 =int32(0);
0150 handles.event00=int32(100);  <span class="comment">%SpÃ©ciale EP</span>
0151 
0152 <span class="comment">% Cache le tableau des dÃ©lais BPM</span>
0153 set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0154 set(handles.uipanel_kicker_machine,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0155 
0156 <span class="comment">% text affichage</span>
0157 handles.txt_inj=  <span class="string">' INJECTION AUTOMATIQUE EN COURS '</span>; <span class="comment">% txt injection auto en cours</span>
0158 handles.txt_noinj=<span class="string">' INJECTION INTERDITE '</span>;            <span class="comment">% txt injection non autorise (Grp fonctionnement)</span>
0159 
0160 <span class="comment">% Publisher - fonctionnement (gere sur injection en boucle)</span>
0161 tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(0))         <span class="comment">% flag injection auto</span>
0162 tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'courant_consigne'</span>,uint8(0))  <span class="comment">% flag courant consigne atteint</span>
0163   
0164 <span class="comment">% tango parser ANS/FC/INJ_COND</span>
0165 <span class="comment">% temp=tango_read_attribute2('ANS/FC/INJ_COND', 'COND_INJ');</span>
0166 <span class="comment">% handles.cond_inj=temp.value;   % 0 no injection,  1 injection</span>
0167 <span class="comment">% try temp=tango_read_attribute2('ANS/FC/INJ_COND', 'COND_INJ'); % 0 no injection,  1 injection</span>
0168 <span class="comment">% val=temp.value; catch val=1 ; end ; if val~=0 ; val=1; end;</span>
0169 <span class="comment">% handles.cond_inj=val;</span>
0170 
0171 
0172 <span class="comment">% Fonction timer pour injection en boucle</span>
0173 <span class="comment">% Creates timer Infinite loop</span>
0174 timer2=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
0175     <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,3,<span class="string">'TasksToExecute'</span>,Inf);
0176 timer2.TimerFcn = {@<a href="#_sub52" class="code" title="subfunction fonction_alex2(arg1,arg2,hObject,eventdata,handles)">fonction_alex2</a>, hObject,eventdata, handles};
0177 setappdata(handles.figure1,<span class="string">'Timer2'</span>,timer2);
0178 
0179 <span class="comment">% Creates timer Infinite loop</span>
0180 timer1=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
0181     <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,handles.periode,<span class="string">'TasksToExecute'</span>,Inf);
0182 timer1.TimerFcn = {@<a href="#_sub51" class="code" title="subfunction fonction_alex1(arg1,arg2,hObject,eventdata,handles)">fonction_alex1</a>, hObject,eventdata, handles};
0183 setappdata(handles.figure1,<span class="string">'Timer1'</span>,timer1);
0184 
0185 <span class="comment">% button group sur on/off timer du trigger</span>
0186 h = uibuttongroup(<span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="string">'Position'</span>,[0.7275 0.72 0.125 0.145],<span class="keyword">...</span>
0187     <span class="string">'Title'</span>,<span class="string">''</span>,<span class="string">'TitlePosition'</span>,<span class="string">'centertop'</span>,<span class="keyword">...</span>
0188     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0189 u1 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' OFF'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton1'</span>,<span class="keyword">...</span>
0190     <span class="string">'pos'</span>,[05 85 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0191     <span class="string">'BackgroundColor'</span>,[1 0.3 0  ]);
0192 u2 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' Laps :'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton2'</span>,<span class="keyword">...</span>
0193     <span class="string">'pos'</span>,[05 45 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0194     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0195 u3 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' Imin :'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton3'</span>,<span class="keyword">...</span>
0196     <span class="string">'pos'</span>,[05 05 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0197     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0198 
0199 set(h,<span class="string">'SelectionChangeFcn'</span>,<span class="keyword">...</span>
0200     {@<a href="#_sub50" class="code" title="subfunction uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)">uibuttongroup_SelectionChangeFcn</a>,handles});
0201 
0202 handles.off = u1;
0203 handles.on1 = u2;
0204 handles.on2 = u3;
0205 
0206 set(h,<span class="string">'SelectedObject'</span>,u1); 
0207 set(h,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
0208 
0209 <span class="comment">%% Set closing gui function</span>
0210 set(handles.figure1,<span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub53" class="code" title="subfunction Closinggui(obj, event, handles, figure1)">Closinggui</a>,timer1,handles.figure1});
0211 set(handles.figure1,<span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub53" class="code" title="subfunction Closinggui(obj, event, handles, figure1)">Closinggui</a>,timer2,handles.figure1});
0212 
0213 
0214 <span class="comment">% Update handles structure</span>
0215 guidata(hObject, handles);
0216 
0217 <span class="comment">% UIWAIT makes synchro_injecteur8_rafale wait for user response (see UIRESUME)</span>
0218 <span class="comment">% uiwait(handles.figure1);</span>
0219 
0220 
0221 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0222 <a name="_sub2" href="#_subfunctions" class="code">function varargout = synchro_injecteur8_rafale_OutputFcn(hObject, eventdata, handles) </a>
0223 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0224 <span class="comment">% hObject    handle to figure</span>
0225 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0226 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0227 
0228 <span class="comment">% Get default command line output from handles structure</span>
0229 varargout{1} = handles.output;
0230 
0231 
0232 
0233 <a name="_sub3" href="#_subfunctions" class="code">function boo_alim_dipole_Callback(hObject, eventdata, handles)</a>
0234 <span class="comment">% hObject    handle to boo_alim_dipole (see GCBO)</span>
0235 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0236 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0237 
0238 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_dipole as text</span>
0239 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_dipole as a double</span>
0240 <span class="comment">%h=gcf</span>
0241 delay=str2double(get(hObject,<span class="string">'String'</span>));
0242 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpTimeDelay'</span>,delay);
0243 
0244 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0245 <a name="_sub4" href="#_subfunctions" class="code">function boo_alim_dipole_CreateFcn(hObject, eventdata, handles)</a>
0246 <span class="comment">% hObject    handle to boo_alim_dipole (see GCBO)</span>
0247 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0248 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0249 
0250 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0251 <span class="comment">%       See ISPC and COMPUTER.</span>
0252 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0253     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0254 <span class="keyword">end</span>
0255 
0256 
0257 <a name="_sub5" href="#_subfunctions" class="code">function boo_alim_qf_Callback(hObject, eventdata, handles)</a>
0258 <span class="comment">% hObject    handle to boo_alim_qf (see GCBO)</span>
0259 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0260 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0261 
0262 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_qf as text</span>
0263 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_qf as a double</span>
0264 
0265 delay=str2double(get(hObject,<span class="string">'String'</span>));
0266 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfTimeDelay'</span>,delay);
0267 
0268 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0269 <a name="_sub6" href="#_subfunctions" class="code">function boo_alim_qf_CreateFcn(hObject, eventdata, handles)</a>
0270 <span class="comment">% hObject    handle to boo_alim_qf (see GCBO)</span>
0271 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0272 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0273 
0274 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0275 <span class="comment">%       See ISPC and COMPUTER.</span>
0276 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0277     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0278 <span class="keyword">end</span>
0279 
0280 
0281 
0282 <a name="_sub7" href="#_subfunctions" class="code">function boo_alim_qd_Callback(hObject, eventdata, handles)</a>
0283 <span class="comment">% hObject    handle to boo_alim_qd (see GCBO)</span>
0284 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0285 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0286 
0287 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_qd as text</span>
0288 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_qd as a double</span>
0289 
0290 delay=str2double(get(hObject,<span class="string">'String'</span>));
0291 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdTimeDelay'</span>,delay);
0292 
0293 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0294 <a name="_sub8" href="#_subfunctions" class="code">function boo_alim_qd_CreateFcn(hObject, eventdata, handles)</a>
0295 <span class="comment">% hObject    handle to boo_alim_qd (see GCBO)</span>
0296 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0297 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0298 
0299 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0300 <span class="comment">%       See ISPC and COMPUTER.</span>
0301 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0302     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0303 <span class="keyword">end</span>
0304 
0305 
0306 
0307 <a name="_sub9" href="#_subfunctions" class="code">function boo_alim_sf_Callback(hObject, eventdata, handles)</a>
0308 <span class="comment">% hObject    handle to boo_alim_sf (see GCBO)</span>
0309 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0310 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0311 
0312 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_sf as text</span>
0313 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_sf as a double</span>
0314 
0315 delay=str2double(get(hObject,<span class="string">'String'</span>));
0316 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfTimeDelay'</span>,delay);
0317 
0318 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0319 <a name="_sub10" href="#_subfunctions" class="code">function boo_alim_sf_CreateFcn(hObject, eventdata, handles)</a>
0320 <span class="comment">% hObject    handle to boo_alim_sf (see GCBO)</span>
0321 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0322 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0323 
0324 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0325 <span class="comment">%       See ISPC and COMPUTER.</span>
0326 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0327     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0328 <span class="keyword">end</span>
0329 
0330 
0331 
0332 <a name="_sub11" href="#_subfunctions" class="code">function boo_alim_sd_Callback(hObject, eventdata, handles)</a>
0333 <span class="comment">% hObject    handle to boo_alim_sd (see GCBO)</span>
0334 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0335 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0336 
0337 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_sd as text</span>
0338 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_sd as a double</span>
0339 
0340 delay=str2double(get(hObject,<span class="string">'String'</span>));
0341 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdTimeDelay'</span>,delay);
0342 
0343 
0344 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0345 <a name="_sub12" href="#_subfunctions" class="code">function boo_alim_sd_CreateFcn(hObject, eventdata, handles)</a>
0346 <span class="comment">% hObject    handle to boo_alim_sd (see GCBO)</span>
0347 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0348 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0349 
0350 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0351 <span class="comment">%       See ISPC and COMPUTER.</span>
0352 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0353     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0354 <span class="keyword">end</span>
0355 
0356 
0357 
0358 <a name="_sub13" href="#_subfunctions" class="code">function boo_rf_Callback(hObject, eventdata, handles)</a>
0359 <span class="comment">% hObject    handle to boo_rf (see GCBO)</span>
0360 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0361 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0362 
0363 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_rf as text</span>
0364 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_rf as a double</span>
0365 
0366 delay=str2double(get(hObject,<span class="string">'String'</span>));
0367 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfTimeDelay'</span>,delay);
0368 
0369 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0370 <a name="_sub14" href="#_subfunctions" class="code">function boo_rf_CreateFcn(hObject, eventdata, handles)</a>
0371 <span class="comment">% hObject    handle to boo_rf (see GCBO)</span>
0372 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0373 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0374 
0375 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0376 <span class="comment">%       See ISPC and COMPUTER.</span>
0377 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0378     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0379 <span class="keyword">end</span>
0380 
0381 
0382 
0383 <a name="_sub15" href="#_subfunctions" class="code">function lin_canon_lpm_Callback(hObject, eventdata, handles)</a>
0384 <span class="comment">% hObject    handle to lin_alim_canon_lpm (see GCBO)</span>
0385 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0386 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0387 
0388 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_alim_canon_lpm as text</span>
0389 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_alim_canon_lpm as a double</span>
0390 
0391 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0392 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0393 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>,delay);
0394 
0395 
0396 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0397 <a name="_sub16" href="#_subfunctions" class="code">function lin_canon_lpm_CreateFcn(hObject, eventdata, handles)</a>
0398 <span class="comment">% hObject    handle to lin_alim_canon_lpm (see GCBO)</span>
0399 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0400 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0401 
0402 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0403 <span class="comment">%       See ISPC and COMPUTER.</span>
0404 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0405     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0406 <span class="keyword">end</span>
0407 
0408 
0409 
0410 <a name="_sub17" href="#_subfunctions" class="code">function lt1_emittance_Callback(hObject, eventdata, handles)</a>
0411 <span class="comment">% hObject    handle to lt1_emittance (see GCBO)</span>
0412 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0413 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0414 
0415 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_emittance as text</span>
0416 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_emittance as a double</span>
0417 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0418 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0419 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
0420 
0421 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0422 <a name="_sub18" href="#_subfunctions" class="code">function lt1_emittance_CreateFcn(hObject, eventdata, handles)</a>
0423 <span class="comment">% hObject    handle to lt1_emittance (see GCBO)</span>
0424 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0425 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0426 
0427 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0428 <span class="comment">%       See ISPC and COMPUTER.</span>
0429 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0430     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0431 <span class="keyword">end</span>
0432 
0433 
0434 
0435 <a name="_sub19" href="#_subfunctions" class="code">function lt1_MC1_Callback(hObject, eventdata, handles)</a>
0436 <span class="comment">% hObject    handle to lt1_MC1 (see GCBO)</span>
0437 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0438 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0439 
0440 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_MC1 as text</span>
0441 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_MC1 as a double</span>
0442 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0443 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0444 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>,delay);
0445 
0446 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0447 <a name="_sub20" href="#_subfunctions" class="code">function lt1_MC1_CreateFcn(hObject, eventdata, handles)</a>
0448 <span class="comment">% hObject    handle to lt1_MC1 (see GCBO)</span>
0449 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0450 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0451 
0452 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0453 <span class="comment">%       See ISPC and COMPUTER.</span>
0454 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0455     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0456 <span class="keyword">end</span>
0457 
0458 
0459 
0460 <a name="_sub21" href="#_subfunctions" class="code">function lt1_MC2_Callback(hObject, eventdata, handles)</a>
0461 <span class="comment">% hObject    handle to lt1_MC2 (see GCBO)</span>
0462 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0463 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0464 
0465 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_MC2 as text</span>
0466 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_MC2 as a double</span>
0467 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0468 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0469 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>,delay);
0470 
0471 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0472 <a name="_sub22" href="#_subfunctions" class="code">function lt1_MC2_CreateFcn(hObject, eventdata, handles)</a>
0473 <span class="comment">% hObject    handle to lt1_MC2 (see GCBO)</span>
0474 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0475 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0476 
0477 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0478 <span class="comment">%       See ISPC and COMPUTER.</span>
0479 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0480     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0481 <span class="keyword">end</span>
0482 
0483 
0484 
0485 <a name="_sub23" href="#_subfunctions" class="code">function lt1_osc_Callback(hObject, eventdata, handles)</a>
0486 <span class="comment">% hObject    handle to lt1_osc (see GCBO)</span>
0487 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0488 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0489 
0490 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_osc as text</span>
0491 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_osc as a double</span>
0492 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0493 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0494 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
0495 
0496 
0497 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0498 <a name="_sub24" href="#_subfunctions" class="code">function lt1_osc_CreateFcn(hObject, eventdata, handles)</a>
0499 <span class="comment">% hObject    handle to lt1_osc (see GCBO)</span>
0500 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0501 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0502 
0503 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0504 <span class="comment">%       See ISPC and COMPUTER.</span>
0505 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0506     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0507 <span class="keyword">end</span>
0508 
0509 
0510 
0511 <a name="_sub25" href="#_subfunctions" class="code">function sdc1_Callback(hObject, eventdata, handles)</a>
0512 <span class="comment">% hObject    handle to sdc1 (see GCBO)</span>
0513 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0514 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0515 
0516 <span class="comment">% Hints: get(hObject,'String') returns contents of sdc1 as text</span>
0517 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sdc1 as a double</span>
0518 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0519 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0520 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
0521 
0522 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0523 <a name="_sub26" href="#_subfunctions" class="code">function sdc1_CreateFcn(hObject, eventdata, handles)</a>
0524 <span class="comment">% hObject    handle to sdc1 (see GCBO)</span>
0525 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0526 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0527 
0528 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0529 <span class="comment">%       See ISPC and COMPUTER.</span>
0530 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0531     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0532 <span class="keyword">end</span>
0533 
0534 
0535 
0536 <a name="_sub27" href="#_subfunctions" class="code">function boo_inj_septum_Callback(hObject, eventdata, handles)</a>
0537 <span class="comment">% hObject    handle to boo_inj_septum (see GCBO)</span>
0538 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0539 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0540 
0541 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_inj_septum as text</span>
0542 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_inj_septum as a double</span>
0543 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0544 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0545 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
0546 
0547 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0548 <a name="_sub28" href="#_subfunctions" class="code">function boo_inj_septum_CreateFcn(hObject, eventdata, handles)</a>
0549 <span class="comment">% hObject    handle to boo_inj_septum (see GCBO)</span>
0550 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0551 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0552 
0553 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0554 <span class="comment">%       See ISPC and COMPUTER.</span>
0555 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0556     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0557 <span class="keyword">end</span>
0558 
0559 
0560 
0561 <a name="_sub29" href="#_subfunctions" class="code">function boo_inj_kicker_Callback(hObject, eventdata, handles)</a>
0562 <span class="comment">% hObject    handle to boo_inj_kicker (see GCBO)</span>
0563 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0564 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0565 
0566 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_inj_kicker as text</span>
0567 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_inj_kicker as a double</span>
0568 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0569 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0570 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
0571 
0572 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0573 <a name="_sub30" href="#_subfunctions" class="code">function boo_inj_kicker_CreateFcn(hObject, eventdata, handles)</a>
0574 <span class="comment">% hObject    handle to boo_inj_kicker (see GCBO)</span>
0575 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0576 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0577 
0578 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0579 <span class="comment">%       See ISPC and COMPUTER.</span>
0580 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0581     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0582 <span class="keyword">end</span>
0583 
0584 
0585 
0586 <a name="_sub31" href="#_subfunctions" class="code">function boo_bpm_Callback(hObject, eventdata, handles)</a>
0587 <span class="comment">% hObject    handle to boo_bpm (see GCBO)</span>
0588 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0589 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0590 
0591 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_bpm as text</span>
0592 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_bpm as a double</span>
0593 
0594 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0595 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0596 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>,delay);
0597 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigTimeDelay'</span>,delay);
0598 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigTimeDelay'</span>,delay);
0599 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigTimeDelay'</span>,delay);
0600 
0601 
0602 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0603 <a name="_sub32" href="#_subfunctions" class="code">function boo_bpm_CreateFcn(hObject, eventdata, handles)</a>
0604 <span class="comment">% hObject    handle to boo_bpm (see GCBO)</span>
0605 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0606 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0607 
0608 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0609 <span class="comment">%       See ISPC and COMPUTER.</span>
0610 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0611     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0612 <span class="keyword">end</span>
0613 
0614 
0615 
0616 <a name="_sub33" href="#_subfunctions" class="code">function boo_nod_Callback(hObject, eventdata, handles)</a>
0617 <span class="comment">% hObject    handle to boo_nod (see GCBO)</span>
0618 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0619 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0620 
0621 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_nod as text</span>
0622 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_nod as a double</span>
0623 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0624 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0625 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>,delay);
0626 
0627 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0628 <a name="_sub34" href="#_subfunctions" class="code">function boo_nod_CreateFcn(hObject, eventdata, handles)</a>
0629 <span class="comment">% hObject    handle to boo_nod (see GCBO)</span>
0630 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0631 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0632 
0633 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0634 <span class="comment">%       See ISPC and COMPUTER.</span>
0635 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0636     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0637 <span class="keyword">end</span>
0638 
0639 
0640 
0641 <a name="_sub35" href="#_subfunctions" class="code">function boo_dcct_Callback(hObject, eventdata, handles)</a>
0642 <span class="comment">% hObject    handle to boo_dcct (see GCBO)</span>
0643 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0644 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0645 
0646 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_dcct as text</span>
0647 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_dcct as a double</span>
0648 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0649 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0650 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTimeDelay'</span>,delay);
0651 
0652 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0653 <a name="_sub36" href="#_subfunctions" class="code">function boo_dcct_CreateFcn(hObject, eventdata, handles)</a>
0654 <span class="comment">% hObject    handle to boo_dcct (see GCBO)</span>
0655 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0656 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0657 
0658 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0659 <span class="comment">%       See ISPC and COMPUTER.</span>
0660 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0661     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0662 <span class="keyword">end</span>
0663 
0664 
0665 
0666 <a name="_sub37" href="#_subfunctions" class="code">function lin_canon_spm_fin_Callback(hObject, eventdata, handles)</a>
0667 <span class="comment">% hObject    handle to lin_alim_canon_spm_fin (see GCBO)</span>
0668 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0669 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0670 
0671 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_alim_canon_spm_fin as text</span>
0672 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_alim_canon_spm_fin as a double</span>
0673 
0674 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0675 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
0676 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
0677 
0678 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin_alim');</span>
0679 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
0680 save(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0681 
0682 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0683 <a name="_sub38" href="#_subfunctions" class="code">function lin_canon_spm_fin_CreateFcn(hObject, eventdata, handles)</a>
0684 <span class="comment">% hObject    handle to lin_alim_canon_spm_fin (see GCBO)</span>
0685 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0686 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0687 
0688 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0689 <span class="comment">%       See ISPC and COMPUTER.</span>
0690 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0691     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0692 <span class="keyword">end</span>
0693 
0694 
0695 
0696 <a name="_sub39" href="#_subfunctions" class="code">function central_spare_Callback(hObject, eventdata, handles)</a>
0697 <span class="comment">% hObject    handle to central_spare (see GCBO)</span>
0698 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0699 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0700 
0701 <span class="comment">% Hints: get(hObject,'String') returns contents of central_spare as text</span>
0702 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_spare as a double</span>
0703 
0704 delay=str2double(get(hObject,<span class="string">'String'</span>));
0705 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>,delay);
0706 
0707 <span class="comment">%status soft checked on linac</span>
0708 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0709 <span class="keyword">if</span> (temp.value(1)==2)
0710    <span class="comment">%</span>
0711 <span class="keyword">elseif</span> (temp.value(1)==5)
0712     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
0713     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0714     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>);
0715     delay=dt.value(1)-dt1.value(1)+inj_offset;
0716     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
0717     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
0718     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
0719 <span class="keyword">end</span>
0720 
0721 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0722 <a name="_sub40" href="#_subfunctions" class="code">function central_spare_CreateFcn(hObject, eventdata, handles)</a>
0723 <span class="comment">% hObject    handle to central_spare (see GCBO)</span>
0724 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0725 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0726 
0727 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0728 <span class="comment">%       See ISPC and COMPUTER.</span>
0729 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0730     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0731 <span class="keyword">end</span>
0732 
0733 
0734 
0735 <a name="_sub41" href="#_subfunctions" class="code">function central_inj_Callback(hObject, eventdata, handles)</a>
0736 <span class="comment">% hObject    handle to central_inj (see GCBO)</span>
0737 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0738 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0739 
0740 <span class="comment">% Hints: get(hObject,'String') returns contents of central_inj as text</span>
0741 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_inj as a double</span>
0742 
0743 delay=str2double(get(hObject,<span class="string">'String'</span>));
0744 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>,delay);
0745 
0746 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0747 <a name="_sub42" href="#_subfunctions" class="code">function central_inj_CreateFcn(hObject, eventdata, handles)</a>
0748 <span class="comment">% hObject    handle to central_inj (see GCBO)</span>
0749 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0750 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0751 
0752 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0753 <span class="comment">%       See ISPC and COMPUTER.</span>
0754 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0755     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0756 <span class="keyword">end</span>
0757 
0758 
0759 
0760 
0761 <a name="_sub43" href="#_subfunctions" class="code">function central_soft_Callback(hObject, eventdata, handles)</a>
0762 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
0763 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0764 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0765 
0766 <span class="comment">% Hints: get(hObject,'String') returns contents of central_soft as text</span>
0767 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_soft as a double</span>
0768 
0769 delay=str2double(get(hObject,<span class="string">'String'</span>));
0770 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>,delay);
0771 
0772 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftStepDelay');</span>
0773 <span class="comment">% clkinj=int32(temp.value(1)+5*52);</span>
0774 <span class="comment">% clkext=int32(temp.value(1)/52+10);</span>
0775 <span class="comment">% tango_write_attribute2('ANS/SY/CENTRAL', 'TInjStepDelay',clkinj);</span>
0776 <span class="comment">% tango_write_attribute2('ANS/SY/CENTRAL', 'ExtractionOffsetClkStepValue',clkext);</span>
0777 <span class="comment">%</span>
0778 <span class="comment">% %status soft checked on linac</span>
0779 <span class="comment">% temp=tango_read_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareEvent');</span>
0780 <span class="comment">% if (temp.value(1)==2)</span>
0781 <span class="comment">%    %</span>
0782 <span class="comment">% elseif (temp.value(1)==1)</span>
0783 <span class="comment">%     dt=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftTimeDelay');</span>
0784 <span class="comment">%     inj_offset=str2double(get(handles.inj_offset,'String'));</span>
0785 <span class="comment">%     dt1=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprTimeDelay');</span>
0786 <span class="comment">%     delay=dt.value(1)-dt1.value(1)+inj_offset;</span>
0787 <span class="comment">%     tango_write_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareTimeDelay',delay);</span>
0788 <span class="comment">%     temp=tango_read_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareTimeDelay');</span>
0789 <span class="comment">%     set(handles.lin_alim_modulateur,'String',num2str(temp.value(1)-inj_offset));</span>
0790 <span class="comment">% end</span>
0791 
0792 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0793 <a name="_sub44" href="#_subfunctions" class="code">function central_soft_CreateFcn(hObject, eventdata, handles)</a>
0794 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
0795 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0796 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0797 
0798 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0799 <span class="comment">%       See ISPC and COMPUTER.</span>
0800 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0801     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0802 <span class="keyword">end</span>
0803 
0804 
0805 <span class="comment">% --- Executes on button press in button_acquisition_nooffset.</span>
0806 <a name="_sub45" href="#_subfunctions" class="code">function button_acquisition_nooffset_Callback(hObject, eventdata, handles)</a>
0807 <span class="comment">% hObject    handle to button_acquisition_nooffset (see GCBO)</span>
0808 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0809 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0810 
0811 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
0812 
0813 
0814 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0815 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0816 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0817 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0818 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0819 set(handles.lin_alim,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0820 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0821 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0822 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0823 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0824 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0825 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0826 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0827 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0828 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0829 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0830 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0831 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0832 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0833 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0834 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0835 set(handles.boo_mrsv,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0836 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0837 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0838 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0839 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0840 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0841 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0842 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0843 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0844 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0845 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0846 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0847 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0848 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0849 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0850 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0851 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0852 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0853 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0854 set(handles.ans_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0855 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0856 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0857 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0858 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0859 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0860 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0861 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0862 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0863 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0864 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0865 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0866 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0867 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0868 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0869 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0870 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0871 
0872 <a href="get_synchro_delay_nooffset.html" class="code" title="function get_synchro_delay_nooffset(handles)">get_synchro_delay_nooffset</a>(handles)
0873 n=1;
0874 
0875 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'libre.1TimeDelay'</span>);
0876 <span class="keyword">try</span> txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=<span class="string">'Bug device'</span> ; <span class="keyword">end</span>
0877 set(handles.lin_alim,<span class="string">'String'</span>,txt);
0878 
0879 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceTimeDelay'</span>);
0880 <span class="keyword">try</span> ;txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=bug_device ; <span class="keyword">end</span>
0881 set(handles.boo_mrsv,<span class="string">'String'</span>,txt);
0882 
0883 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'perteTimeDelay'</span>);
0884 <span class="keyword">try</span> ;txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=bug_device ; <span class="keyword">end</span>
0885 set(handles.ans_nod,<span class="string">'String'</span>,txt);
0886 
0887 
0888 <span class="comment">%status soft checked on linac</span>
0889 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0890 <span class="keyword">if</span> (temp.value(n)==2)
0891     <span class="comment">%set(handles.soft_button,'Value',0);</span>
0892 <span class="keyword">elseif</span> (temp.value(n)==5)
0893     <span class="comment">%set(handles.soft_button,'Value',1);</span>
0894 <span class="keyword">end</span>
0895 
0896 <span class="comment">%status tables</span>
0897 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
0898 offset=temp.value(1)*52;
0899 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
0900 n=temp.value;
0901 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
0902 table=temp.value(1:n)-offset;
0903 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[<span class="string">'T='</span> , num2str(table)]);  
0904 
0905 
0906 
0907 <span class="comment">% --- Executes on button press in button_acquisition_delay.</span>
0908 <a name="_sub46" href="#_subfunctions" class="code">function button_acquisition_delay_Callback(hObject, eventdata, handles)</a>
0909 <span class="comment">% hObject    handle to button_acquisition_delay (see GCBO)</span>
0910 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0911 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0912 bug_device=<span class="string">'Bug device'</span>;
0913 
0914 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
0915 
0916 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0917 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0918 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0919 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0920 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0921 set(handles.lin_alim,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0922 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0923 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0924 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0925 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0926 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0927 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0928 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0929 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0930 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0931 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0932 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0933 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0934 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0935 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0936 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0937 set(handles.boo_mrsv,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0938 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0939 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0940 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0941 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0942 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0943 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0944 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0945 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0946 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0947 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0948 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0949 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0950 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0951 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0952 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0953 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0954 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0955 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0956 set(handles.ans_nod,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0957 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0958 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0959 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0960 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0961 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0962 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0963 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0964 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0965 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0966 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0967 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0968 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0969 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0970 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0971 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0972 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0973 set(handles.ans_k_pc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0974 set(handles.ans_k_h,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0975 set(handles.ans_k_v,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0976 
0977 
0978 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin_alim');</span>
0979 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
0980 load(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0981 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
0982 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
0983 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
0984 
0985 <a href="get_synchro_delay.html" class="code" title="function get_synchro_delay(handles)">get_synchro_delay</a>(handles)
0986 n=1;
0987 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
0988 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
0989 set(handles.central_pc,<span class="string">'String'</span>,num2str(temp.value(n)));
0990 
0991 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'libre.1TimeDelay'</span>);
0992 <span class="keyword">try</span> txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=<span class="string">'Bug device'</span> ; <span class="keyword">end</span>
0993 set(handles.lin_alim,<span class="string">'String'</span>,txt);
0994 
0995 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceTimeDelay'</span>);
0996 <span class="keyword">try</span> ;txt=num2str(temp.value(n)-ext_offset); <span class="keyword">catch</span> txt=bug_device ; <span class="keyword">end</span>
0997 set(handles.boo_mrsv,<span class="string">'String'</span>,txt);
0998 
0999 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'perteTimeDelay'</span>);
1000 <span class="keyword">try</span> ;txt=num2str(temp.value(n)-ext_offset); <span class="keyword">catch</span> txt=bug_device ; <span class="keyword">end</span>
1001 set(handles.ans_nod,<span class="string">'String'</span>,txt);
1002 
1003 
1004 <span class="comment">%status soft checked on linac</span>
1005 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
1006 <span class="keyword">if</span> (temp.value(n)==2)
1007     <span class="comment">%set(handles.soft_button,'Value',0);</span>
1008 <span class="keyword">elseif</span> (temp.value(n)==5)
1009     <span class="comment">%set(handles.uipanel_mode,'String','Mode Soft');</span>
1010 <span class="keyword">end</span>
1011 
1012 <span class="comment">%status tables</span>
1013 <span class="comment">%temp=tango_read_attribute('ANS/SY/CENTRAL', 'ExtractionOffsetClkStepValue');</span>
1014 <span class="comment">%offset=temp.value(1)*52;</span>
1015 offset_linac=10*lin_fin;
1016 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
1017 n=temp.value;
1018 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
1019 table_ext=temp.value(1:n); <span class="comment">%-offset_ext;</span>
1020 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'LinacDelayTable'</span>);
1021 table_linac=(temp.value(1:n)-offset_linac)/28;
1022 table=[];
1023 <span class="keyword">for</span> i=1:n
1024     table=[table <span class="string">' '</span> <span class="string">'('</span> num2str([table_ext(i)])  <span class="string">' '</span>  num2str([table_linac(i)]) <span class="string">')'</span>];
1025 <span class="keyword">end</span>
1026 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[num2str(table)]);
1027 set(handles.edit_filling_relecture_bunch, <span class="string">'String'</span>,<span class="string">'??'</span>);
1028 
1029 
1030 
1031 <span class="comment">% --- Executes on button press in button_injection_soft.</span>
1032 <a name="_sub47" href="#_subfunctions" class="code">function button_injection_soft_Callback(hObject, eventdata, handles)</a>
1033 <span class="comment">% hObject    handle to button_injection_soft (see GCBO)</span>
1034 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1035 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1036 
1037 <span class="comment">% verifie si inj autorisé</span>
1038 <span class="comment">% try temp=tango_read_attribute2('ANS/FC/INJ_COND', 'COND_INJ'); % 0 no injection,  1 injection</span>
1039 <span class="comment">% val=temp.value; catch val=1 ; end ; if val~=0 ; val=1; end;</span>
1040 <span class="comment">%</span>
1041 <span class="comment">% if (val==1)</span>
1042 <span class="comment">%</span>
1043 <span class="comment">%     tic</span>
1044 <span class="comment">%    [r1,r2]=fire_injection(handles);</span>
1045 <span class="comment">%     toc</span>
1046 <span class="comment">% else</span>
1047 <span class="comment">%     % pas d'injection, tir non autorise</span>
1048 <span class="comment">%     fprintf('%s\n','Gap U20  &lt; limite    dans ANS/EI/GAP_U20_SECURITY');</span>
1049 <span class="comment">% end</span>
1050 
1051 [r1,r2]=<a href="fire_injection.html" class="code" title="function [r1,r2]=fire_injection(handles)">fire_injection</a>(handles);
1052 
1053 <span class="comment">% check synchro booster</span>
1054 <span class="comment">%flag=0 : OK</span>
1055 <span class="comment">%falg=1 : mauvais delais</span>
1056 [flag]=<a href="check_boo_synchro.html" class="code" title="function [flag]=check_boo_synchro">check_boo_synchro</a>;
1057 <span class="keyword">if</span> flag==1 &amp;&amp; r1&gt; 20
1058     set(handles.central_inj,<span class="string">'Backgroundcolor'</span>, [1 0 0]); <span class="comment">% KO</span>
1059 <span class="keyword">else</span>
1060     set(handles.central_inj,<span class="string">'Backgroundcolor'</span>, [1 1 1]); <span class="comment">% OK</span>
1061 <span class="keyword">end</span>
1062 
1063 <span class="comment">% % Warning mauvais rendement booster</span>
1064 <span class="comment">% if r1 &lt; 90</span>
1065 <span class="comment">%     set(handles.edit_rboo,'Backgroundcolor', [1 0 0]); % KO</span>
1066 <span class="comment">%     set(handles.edit_rboo,'Foregroundcolor', [0 0 0]);</span>
1067 <span class="comment">% else</span>
1068 <span class="comment">%     set(handles.edit_rboo,'Backgroundcolor', [1 1 1]); % OK</span>
1069 <span class="comment">%     set(handles.edit_rboo,'Foregroundcolor', [1 0 0]);</span>
1070 <span class="comment">% end</span>
1071 
1072 <span class="comment">%</span>
1073 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
1074 
1075 <a name="_sub48" href="#_subfunctions" class="code">function periode_edit_Callback(hObject, eventdata, handles)</a>
1076 <span class="comment">% hObject    handle to periode_edit (see GCBO)</span>
1077 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1078 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1079 
1080 <span class="comment">% Hints: get(hObject,'String') returns contents of periode_edit as text</span>
1081 <span class="comment">%        str2double(get(hObject,'String')) returns contents of periode_edit as a double</span>
1082 
1083 val_multishot = get(handles.on1,<span class="string">'Value'</span>);
1084 
1085 <span class="keyword">if</span> val_multishot
1086     errordlg(<span class="string">'positionner le trigger a OFF !'</span>,<span class="string">'Attention'</span>);
1087     <span class="keyword">return</span>
1088 <span class="keyword">else</span>
1089     periode = str2double(get(hObject,<span class="string">'String'</span>));
1090 
1091     <span class="comment">% change timer Infinite loop</span>
1092     timer1=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
1093         <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,periode,<span class="string">'TasksToExecute'</span>,Inf);
1094     timer1.TimerFcn = {@<a href="#_sub51" class="code" title="subfunction fonction_alex1(arg1,arg2,hObject,eventdata,handles)">fonction_alex1</a>, hObject,eventdata, handles};
1095     setappdata(handles.figure1,<span class="string">'Timer1'</span>,timer1);
1096 
1097     <span class="comment">% Update handles structure</span>
1098     guidata(hObject, handles);
1099     
1100     <span class="comment">%getappdata(handles.figure1,'Timer1')</span>
1101     
1102 <span class="keyword">end</span>
1103 
1104 
1105 
1106 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1107 <a name="_sub49" href="#_subfunctions" class="code">function periode_edit_CreateFcn(hObject, eventdata, handles)</a>
1108 <span class="comment">% hObject    handle to periode_edit (see GCBO)</span>
1109 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1110 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1111 
1112 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1113 <span class="comment">%       See ISPC and COMPUTER.</span>
1114 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1115     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1116 <span class="keyword">end</span>
1117 
1118 <a name="_sub50" href="#_subfunctions" class="code">function uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)</a>
1119 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1120 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1121 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1122 
1123 <span class="comment">%handles = guidata(gcbo);</span>
1124 timer1 = getappdata(handles.figure1,<span class="string">'Timer1'</span>);
1125 timer2 = getappdata(handles.figure1,<span class="string">'Timer2'</span>);
1126 
1127 <span class="comment">%txt1=' INJECTION EN COURS ';</span>
1128 
1129 <span class="keyword">switch</span> get(get(hObject,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>)  <span class="comment">% Get Tag of selected object</span>
1130     <span class="keyword">case</span> <span class="string">'radiobutton1'</span>
1131         <span class="comment">% stop du trigger</span>
1132         stop(timer1);
1133         stop(timer2);
1134         set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 0]);
1135         <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
1136         tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(0))
1137         tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'courant_consigne'</span>,uint8(0))
1138     <span class="keyword">case</span> <span class="string">'radiobutton2'</span>
1139         <span class="comment">% dÃ©marrage  du trigger 1</span>
1140         start(timer1);
1141         set(handles.edit_modes,<span class="string">'String'</span>,handles.txt_inj);
1142         tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(1))
1143     <span class="keyword">case</span> <span class="string">'radiobutton3'</span>
1144         <span class="comment">% dÃ©marrage du trigger 2</span>
1145         temp=tango_read_attribute2(<span class="string">'ANS/DG/DCCT-CTRL'</span>,<span class="string">'current'</span>);anscur=temp.value;
1146         <span class="keyword">if</span> (anscur&gt;1.) 
1147            start(timer2);      
1148            set(handles.edit_modes,<span class="string">'String'</span>,handles.txt_inj);
1149            tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(1)) 
1150         <span class="keyword">else</span>
1151             <span class="comment">% ne fait rien, en cas de perte faisceau</span>
1152         <span class="keyword">end</span>
1153 <span class="keyword">end</span>
1154 
1155 
1156 <a name="_sub51" href="#_subfunctions" class="code">function fonction_alex1(arg1,arg2,hObject,eventdata,handles)</a>
1157 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1160 
1161 color=get(handles.uipanel6,<span class="string">'Backgroundcolor'</span>);
1162 <span class="keyword">if</span> color==[1 0.3 0]
1163     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 1]);
1164 <span class="keyword">elseif</span> color==[1 0.3 1]
1165     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 0]);
1166 <span class="keyword">end</span>
1167 
1168 <a href="#_sub47" class="code" title="subfunction button_injection_soft_Callback(hObject, eventdata, handles)">button_injection_soft_Callback</a>(hObject,eventdata,handles)
1169 
1170 
1171 <a name="_sub52" href="#_subfunctions" class="code">function fonction_alex2(arg1,arg2,hObject,eventdata,handles)</a>
1172 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1173 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1174 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1175 
1176 
1177 temp=tango_read_attribute2(<span class="string">'ANS/DG/DCCT-CTRL'</span>,<span class="string">'current'</span>);anscur=temp.value;
1178 set(handles.edit_courant_total,<span class="string">'String'</span>, num2str(anscur,<span class="string">'%5.2f'</span>));
1179 Imin=str2double(get(handles.edit_Imin,<span class="string">'String'</span>));
1180 
1181 color=get(handles.uipanel6,<span class="string">'Backgroundcolor'</span>);
1182 <span class="keyword">if</span> color==[1 0.3 0]
1183     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 1]);
1184 <span class="keyword">elseif</span> color==[1 0.3 1]
1185     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 0]);
1186 <span class="keyword">end</span>
1187 
1188 
1189 <span class="keyword">if</span>     (anscur&gt;Imin)
1190     <span class="comment">%on attend</span>
1191     <span class="comment">%fprintf('Cur = %g \n',anscur)</span>
1192     tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'courant_consigne'</span>,uint8(1))
1193 <span class="keyword">else</span>
1194     <span class="comment">%inject le cycle en cours</span>
1195     <span class="comment">%fprintf('Cur = %g : Injection \n',anscur)</span>
1196     <span class="comment">%set(handles.uipanel6,'Backgroundcolor', [1 1 0]);</span>
1197     <a href="#_sub47" class="code" title="subfunction button_injection_soft_Callback(hObject, eventdata, handles)">button_injection_soft_Callback</a>(hObject, eventdata, handles)
1198 <span class="keyword">end</span>
1199 
1200 
1201 
1202 <span class="comment">%% What to do before closing the application</span>
1203 <a name="_sub53" href="#_subfunctions" class="code">function Closinggui(obj, event, handles, figure1)</a>
1204 
1205 <span class="comment">% Get default command line output from handles structure</span>
1206 answer = questdlg(<span class="string">'Fermer softsynchro ?'</span>,<span class="keyword">...</span>
1207     <span class="string">'Exit softsynchro'</span>,<span class="keyword">...</span>
1208     <span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'Yes'</span>);
1209 
1210 <span class="keyword">switch</span> answer
1211     <span class="keyword">case</span> <span class="string">'Yes'</span>           
1212         delete(handles); <span class="comment">%Delete Timer</span>
1213         delete(figure1); <span class="comment">%Close gui</span>
1214     <span class="keyword">otherwise</span>
1215         disp(<span class="string">'Closing aborted'</span>)
1216 <span class="keyword">end</span>
1217 
1218 
1219 
1220 <span class="comment">% --- Executes on button press in button_softmoins.</span>
1221 <a name="_sub54" href="#_subfunctions" class="code">function button_softmoins_Callback(hObject, eventdata, handles)</a>
1222 <span class="comment">% hObject    handle to button_softmoins (see GCBO)</span>
1223 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1224 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1225 tt=0.6;
1226 
1227 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
1228 step=temp.value(1)-52;
1229 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,step);
1230 pause(2*tt)
1231 
1232 <span class="comment">%status soft checked on linac</span>
1233 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1234 <span class="keyword">if</span> (temp.value(1)==2)
1235     pause(tt)
1236     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1237     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1238 <span class="keyword">elseif</span> (temp.value(1)==5)
1239     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1240     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1241     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>);
1242     delay=dt.value(1)-dt1.value(1)+inj_offset;
1243     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1244 
1245     pause(tt)
1246     <span class="comment">% read again for possible delay</span>
1247     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1248     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
1249     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1250     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1251 <span class="keyword">end</span>
1252 
1253 
1254 
1255 <span class="comment">% --- Executes on button press in button_softplus.</span>
1256 <a name="_sub55" href="#_subfunctions" class="code">function button_softplus_Callback(hObject, eventdata, handles)</a>
1257 <span class="comment">% hObject    handle to button_softplus (see GCBO)</span>
1258 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1259 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1260 tt=0.6;
1261 
1262 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
1263 step=temp.value(1)+52;
1264 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,step);
1265 pause(2*tt)
1266 
1267 <span class="comment">%status soft checked on linac</span>
1268 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1269 <span class="keyword">if</span> (temp.value(1)==2)
1270     pause(tt)
1271     <span class="comment">% read again for possible delay</span>
1272     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1273     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1274 <span class="keyword">elseif</span> (temp.value(1)==5)
1275     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1276     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1277     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>);
1278     delay=dt.value(1)-dt1.value(1)+inj_offset;
1279     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1280 
1281     pause(tt)
1282     <span class="comment">% read again for possible delay</span>
1283     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1284     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
1285     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1286     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1287 <span class="keyword">end</span>
1288 
1289 
1290 
1291 <span class="comment">% --- Executes on button press in button_injmoins.</span>
1292 <a name="_sub56" href="#_subfunctions" class="code">function button_injmoins_Callback(hObject, eventdata, handles)</a>
1293 <span class="comment">% hObject    handle to button_injmoins (see GCBO)</span>
1294 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1295 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1296 tt=0.6;
1297 
1298 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>);
1299 step=temp.value(1)-52;
1300 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,step);
1301 pause(2*tt)
1302 
1303 <span class="comment">%status soft checked on linac</span>
1304 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1305 <span class="keyword">if</span> (temp.value(1)==5)
1306     pause(tt)
1307     <span class="comment">% read again for possible delay</span>
1308     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1309     set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1310 <span class="keyword">elseif</span> (temp.value(1)==2)
1311 <span class="comment">%    commented With address spare = 2</span>
1312 <span class="comment">%     dt=tango_read_attribute2('ANS/SY/CENTRAL', 'TInjTimeDelay');</span>
1313 <span class="comment">%     inj_offset=str2double(get(handles.inj_offset,'String'));</span>
1314 <span class="comment">%     dt1=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprTimeDelay');</span>
1315 <span class="comment">%     delay=dt.value(1)-dt1.value(1)+inj_offset;</span>
1316 <span class="comment">%     tango_write_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareTimeDelay',delay);</span>
1317 <span class="comment">%</span>
1318 <span class="comment">%     pause(tt)</span>
1319 <span class="comment">%     % read again for possible delay</span>
1320 <span class="comment">%     temp=tango_read_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareTimeDelay');</span>
1321 <span class="comment">%     set(handles.lin_alim_modulateur,'String',num2str(temp.value(1)-inj_offset));</span>
1322      temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1323      set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1324 <span class="keyword">end</span>
1325 
1326 
1327 <span class="comment">% --- Executes on button press in button_injplus.</span>
1328 <a name="_sub57" href="#_subfunctions" class="code">function button_injplus_Callback(hObject, eventdata, handles)</a>
1329 <span class="comment">% hObject    handle to button_injplus (see GCBO)</span>
1330 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1331 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1332 tt=0.6;
1333 
1334 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>);
1335 step=temp.value(1)+52;
1336 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,step);
1337 pause(2*tt)
1338 
1339 <span class="comment">%status soft checked on linac</span>
1340 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1341 <span class="keyword">if</span> (temp.value(1)==5)
1342     pause(tt)
1343     <span class="comment">% read again for possible delay</span>
1344     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1345     set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1346 <span class="keyword">elseif</span> (temp.value(1)==2)
1347 <span class="comment">%    commented With address spare = 2</span>
1348 <span class="comment">%     dt=tango_read_attribute2('ANS/SY/CENTRAL', 'TInjTimeDelay');</span>
1349 <span class="comment">%     inj_offset=str2double(get(handles.inj_offset,'String'));</span>
1350 <span class="comment">%     dt1=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprTimeDelay');</span>
1351 <span class="comment">%     delay=dt.value(1)-dt1.value(1)+inj_offset;</span>
1352 <span class="comment">%     tango_write_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareTimeDelay',delay);</span>
1353 <span class="comment">%</span>
1354 <span class="comment">%     pause(tt)</span>
1355 <span class="comment">%     % read again for possible delay</span>
1356 <span class="comment">%     temp=tango_read_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareTimeDelay');</span>
1357 <span class="comment">%     set(handles.lin_alim_modulateur,'String',num2str(temp.value(1)-inj_offset));</span>
1358      temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1359      set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1360 <span class="keyword">end</span>
1361 
1362 
1363 
1364 
1365 
1366 
1367 <a name="_sub58" href="#_subfunctions" class="code">function boo_ext_sept_p_Callback(hObject, eventdata, handles)</a>
1368 <span class="comment">% hObject    handle to boo_ext_sept_p (see GCBO)</span>
1369 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1370 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1371 
1372 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_sept_p as text</span>
1373 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_sept_p as a double</span>
1374 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1375 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1376 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1377 
1378 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1379 <a name="_sub59" href="#_subfunctions" class="code">function boo_ext_sept_p_CreateFcn(hObject, eventdata, handles)</a>
1380 <span class="comment">% hObject    handle to boo_ext_sept_p (see GCBO)</span>
1381 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1382 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1383 
1384 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1385 <span class="comment">%       See ISPC and COMPUTER.</span>
1386 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1387     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1388 <span class="keyword">end</span>
1389 
1390 
1391 <a name="_sub60" href="#_subfunctions" class="code">function boo_ext_dof_Callback(hObject, eventdata, handles)</a>
1392 <span class="comment">% hObject    handle to boo_ext_dof (see GCBO)</span>
1393 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1394 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1395 
1396 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_dof as text</span>
1397 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_dof as a double</span>
1398 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1399 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1400 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>,delay);
1401 
1402 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1403 <a name="_sub61" href="#_subfunctions" class="code">function boo_ext_dof_CreateFcn(hObject, eventdata, handles)</a>
1404 <span class="comment">% hObject    handle to boo_ext_dof (see GCBO)</span>
1405 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1406 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1407 
1408 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1409 <span class="comment">%       See ISPC and COMPUTER.</span>
1410 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1411     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1412 <span class="keyword">end</span>
1413 
1414 
1415 <a name="_sub62" href="#_subfunctions" class="code">function boo_ext_sept_a_Callback(hObject, eventdata, handles)</a>
1416 <span class="comment">% hObject    handle to boo_ext_sept_a (see GCBO)</span>
1417 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1418 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1419 
1420 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_sept_a as text</span>
1421 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_sept_a as a double</span>
1422 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1423 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1424 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1425 
1426 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1427 <a name="_sub63" href="#_subfunctions" class="code">function boo_ext_sept_a_CreateFcn(hObject, eventdata, handles)</a>
1428 <span class="comment">% hObject    handle to boo_ext_sept_a (see GCBO)</span>
1429 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1430 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1431 
1432 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1433 <span class="comment">%       See ISPC and COMPUTER.</span>
1434 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1435     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1436 <span class="keyword">end</span>
1437 
1438 
1439 
1440 <a name="_sub64" href="#_subfunctions" class="code">function boo_ext_kicker_Callback(hObject, eventdata, handles)</a>
1441 <span class="comment">% hObject    handle to boo_ext_kicker (see GCBO)</span>
1442 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1443 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1444 
1445 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_kicker as text</span>
1446 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_kicker as a double</span>
1447 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1448 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1449 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
1450 
1451 
1452 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1453 <a name="_sub65" href="#_subfunctions" class="code">function boo_ext_kicker_CreateFcn(hObject, eventdata, handles)</a>
1454 <span class="comment">% hObject    handle to boo_ext_kicker (see GCBO)</span>
1455 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1456 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1457 
1458 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1459 <span class="comment">%       See ISPC and COMPUTER.</span>
1460 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1461     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1462 <span class="keyword">end</span>
1463 
1464 
1465 
1466 <a name="_sub66" href="#_subfunctions" class="code">function ans_inj_sept_p_Callback(hObject, eventdata, handles)</a>
1467 <span class="comment">% hObject    handle to ans_inj_sept_p (see GCBO)</span>
1468 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1469 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1470 
1471 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_sept_p as text</span>
1472 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_sept_p as a double</span>
1473 
1474 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1475 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1476 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1477 
1478 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1479 <a name="_sub67" href="#_subfunctions" class="code">function ans_inj_sept_p_CreateFcn(hObject, eventdata, handles)</a>
1480 <span class="comment">% hObject    handle to ans_inj_sept_p (see GCBO)</span>
1481 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1482 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1483 
1484 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1485 <span class="comment">%       See ISPC and COMPUTER.</span>
1486 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1487     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1488 <span class="keyword">end</span>
1489 
1490 
1491 
1492 <a name="_sub68" href="#_subfunctions" class="code">function ans_inj_sept_a_Callback(hObject, eventdata, handles)</a>
1493 <span class="comment">% hObject    handle to ans_inj_sept_a (see GCBO)</span>
1494 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1495 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1496 
1497 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_sept_a as text</span>
1498 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_sept_a as a double</span>
1499 
1500 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1501 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1502 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1503 
1504 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1505 <a name="_sub69" href="#_subfunctions" class="code">function ans_inj_sept_a_CreateFcn(hObject, eventdata, handles)</a>
1506 <span class="comment">% hObject    handle to ans_inj_sept_a (see GCBO)</span>
1507 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1508 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1509 
1510 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1511 <span class="comment">%       See ISPC and COMPUTER.</span>
1512 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1513     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1514 <span class="keyword">end</span>
1515 
1516 
1517 
1518 <a name="_sub70" href="#_subfunctions" class="code">function ans_inj_k1_Callback(hObject, eventdata, handles)</a>
1519 <span class="comment">% hObject    handle to ans_inj_k1 (see GCBO)</span>
1520 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1521 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1522 
1523 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k1 as text</span>
1524 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k1 as a double</span>
1525 
1526 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1527 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1528 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>,delay);
1529 
1530 
1531 
1532 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1533 <a name="_sub71" href="#_subfunctions" class="code">function ans_inj_k1_CreateFcn(hObject, eventdata, handles)</a>
1534 <span class="comment">% hObject    handle to ans_inj_k1 (see GCBO)</span>
1535 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1536 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1537 
1538 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1539 <span class="comment">%       See ISPC and COMPUTER.</span>
1540 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1541     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1542 <span class="keyword">end</span>
1543 
1544 
1545 
1546 <a name="_sub72" href="#_subfunctions" class="code">function ans_inj_k2_Callback(hObject, eventdata, handles)</a>
1547 <span class="comment">% hObject    handle to ans_inj_k2 (see GCBO)</span>
1548 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1549 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1550 
1551 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k2 as text</span>
1552 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k2 as a double</span>
1553 
1554 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1555 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1556 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>,delay);
1557 
1558 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1559 <a name="_sub73" href="#_subfunctions" class="code">function ans_inj_k2_CreateFcn(hObject, eventdata, handles)</a>
1560 <span class="comment">% hObject    handle to ans_inj_k2 (see GCBO)</span>
1561 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1562 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1563 
1564 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1565 <span class="comment">%       See ISPC and COMPUTER.</span>
1566 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1567     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1568 <span class="keyword">end</span>
1569 
1570 
1571 
1572 <a name="_sub74" href="#_subfunctions" class="code">function ans_inj_k3_Callback(hObject, eventdata, handles)</a>
1573 <span class="comment">% hObject    handle to ans_inj_k3 (see GCBO)</span>
1574 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1575 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1576 
1577 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k3 as text</span>
1578 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k3 as a double</span>
1579 
1580 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1581 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1582 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>,delay);
1583 
1584 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1585 <a name="_sub75" href="#_subfunctions" class="code">function ans_inj_k3_CreateFcn(hObject, eventdata, handles)</a>
1586 <span class="comment">% hObject    handle to ans_inj_k3 (see GCBO)</span>
1587 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1588 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1589 
1590 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1591 <span class="comment">%       See ISPC and COMPUTER.</span>
1592 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1593     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1594 <span class="keyword">end</span>
1595 
1596 
1597 
1598 <a name="_sub76" href="#_subfunctions" class="code">function ans_inj_k4_Callback(hObject, eventdata, handles)</a>
1599 <span class="comment">% hObject    handle to ans_inj_k4 (see GCBO)</span>
1600 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1601 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1602 
1603 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k4 as text</span>
1604 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k4 as a double</span>
1605 
1606 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1607 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1608 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>,delay);
1609 
1610 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1611 <a name="_sub77" href="#_subfunctions" class="code">function ans_inj_k4_CreateFcn(hObject, eventdata, handles)</a>
1612 <span class="comment">% hObject    handle to ans_inj_k4 (see GCBO)</span>
1613 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1614 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1615 
1616 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1617 <span class="comment">%       See ISPC and COMPUTER.</span>
1618 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1619     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1620 <span class="keyword">end</span>
1621 
1622 
1623 
1624 <a name="_sub78" href="#_subfunctions" class="code">function ans_dcct_Callback(hObject, eventdata, handles)</a>
1625 <span class="comment">% hObject    handle to ans_dcct (see GCBO)</span>
1626 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1627 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1628 
1629 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_dcct as text</span>
1630 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_dcct as a double</span>
1631 
1632 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1633 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1634 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctTimeDelay'</span>,delay);
1635 
1636 
1637 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1638 <a name="_sub79" href="#_subfunctions" class="code">function ans_dcct_CreateFcn(hObject, eventdata, handles)</a>
1639 <span class="comment">% hObject    handle to ans_dcct (see GCBO)</span>
1640 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1641 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1642 
1643 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1644 <span class="comment">%       See ISPC and COMPUTER.</span>
1645 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1646     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1647 <span class="keyword">end</span>
1648 
1649 
1650 
1651 <a name="_sub80" href="#_subfunctions" class="code">function ans_bpm_Callback(hObject, eventdata, handles)</a>
1652 <span class="comment">% hObject    handle to ans_bpm (see GCBO)</span>
1653 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1654 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1655 
1656 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm as text</span>
1657 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm as a double</span>
1658 
1659 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1660 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1661 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1662 tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1663 tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1664 tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1665 tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1666 tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1667 tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1668 tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1669 tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1670 tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1671 tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1672 tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1673 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1674 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1675 tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1676 tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1677 
1678 
1679 
1680 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1681 <a name="_sub81" href="#_subfunctions" class="code">function ans_bpm_CreateFcn(hObject, eventdata, handles)</a>
1682 <span class="comment">% hObject    handle to ans_bpm (see GCBO)</span>
1683 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1684 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1685 
1686 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1687 <span class="comment">%       See ISPC and COMPUTER.</span>
1688 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1689     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1690 <span class="keyword">end</span>
1691 
1692 
1693 
1694 <a name="_sub82" href="#_subfunctions" class="code">function central_ext_Callback(hObject, eventdata, handles)</a>
1695 <span class="comment">% hObject    handle to central_ext (see GCBO)</span>
1696 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1697 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1698 
1699 <span class="comment">% Hints: get(hObject,'String') returns contents of central_ext as text</span>
1700 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_ext as a double</span>
1701 <span class="comment">%'ANS/SY/CENTRAL', 'ExtractionOffsetTimeValue'</span>
1702 
1703 delay=str2double(get(hObject,<span class="string">'String'</span>));
1704 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>,delay);
1705 
1706 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1707 <a name="_sub83" href="#_subfunctions" class="code">function central_ext_CreateFcn(hObject, eventdata, handles)</a>
1708 <span class="comment">% hObject    handle to central_ext (see GCBO)</span>
1709 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1710 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1711 
1712 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1713 <span class="comment">%       See ISPC and COMPUTER.</span>
1714 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1715     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1716 <span class="keyword">end</span>
1717 
1718 
1719 
1720 <a name="_sub84" href="#_subfunctions" class="code">function central_soft1_Callback(hObject, eventdata, handles)</a>
1721 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
1722 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1723 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1724 
1725 <span class="comment">% Hints: get(hObject,'String') returns contents of central_soft as text</span>
1726 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_soft as a double</span>
1727 
1728 
1729 
1730 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1731 <a name="_sub85" href="#_subfunctions" class="code">function central_soft1_CreateFcn(hObject, eventdata, handles)</a>
1732 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
1733 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1734 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1735 
1736 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1737 <span class="comment">%       See ISPC and COMPUTER.</span>
1738 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1739     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1740 <span class="keyword">end</span>
1741 
1742 
1743 <span class="comment">% --- Executes on button press in button_extmoins.</span>
1744 <a name="_sub86" href="#_subfunctions" class="code">function button_extmoins_Callback(hObject, eventdata, handles)</a>
1745 <span class="comment">% hObject    handle to button_extmoins (see GCBO)</span>
1746 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1747 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1748 
1749 dclk=10;
1750 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
1751 step=temp.value(1)-dclk;
1752 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,int32(step));
1753 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'ExtractionOffsetTimeValue'</span>);
1754 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(1)));
1755 
1756 <span class="comment">% on fait suivre les septa actif</span>
1757 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>);boo=temp.value(1);
1758 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(boo-dclk*52*184/2));
1759 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>);ans=temp.value(1);
1760 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(ans-dclk*52*184/2))
1761 
1762 <span class="comment">% --- Executes on button press in button_extplus.</span>
1763 <a name="_sub87" href="#_subfunctions" class="code">function button_extplus_Callback(hObject, eventdata, handles)</a>
1764 <span class="comment">% hObject    handle to button_extplus (see GCBO)</span>
1765 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1766 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1767 
1768 dclk=10;
1769 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
1770 step=temp.value(1)+dclk;
1771 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,int32(step));
1772 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'ExtractionOffsetTimeValue'</span>);
1773 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(1)));
1774 
1775 <span class="comment">% on fait suivre les septa actif</span>
1776 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>);boo=temp.value(1);
1777 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(boo+dclk*52*184/2));
1778 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>);ans=temp.value(1);
1779 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(ans+dclk*52*184/2))
1780 
1781 <a name="_sub88" href="#_subfunctions" class="code">function sdc2_Callback(hObject, eventdata, handles)</a>
1782 <span class="comment">% hObject    handle to sdc2 (see GCBO)</span>
1783 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1784 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1785 
1786 <span class="comment">% Hints: get(hObject,'String') returns contents of sdc2 as text</span>
1787 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sdc2 as a double</span>
1788 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1789 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1790 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1791 
1792 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1793 <a name="_sub89" href="#_subfunctions" class="code">function sdc2_CreateFcn(hObject, eventdata, handles)</a>
1794 <span class="comment">% hObject    handle to sdc2 (see GCBO)</span>
1795 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1796 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1797 
1798 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1799 <span class="comment">%       See ISPC and COMPUTER.</span>
1800 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1801     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1802 <span class="keyword">end</span>
1803 
1804 
1805 
1806 <a name="_sub90" href="#_subfunctions" class="code">function lt2_emittance_Callback(hObject, eventdata, handles)</a>
1807 <span class="comment">% hObject    handle to lt2_emittance (see GCBO)</span>
1808 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1809 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1810 
1811 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_emittance as text</span>
1812 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_emittance as a double</span>
1813 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1814 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1815 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>,delay);
1816 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
1817 
1818 
1819 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1820 <a name="_sub91" href="#_subfunctions" class="code">function lt2_emittance_CreateFcn(hObject, eventdata, handles)</a>
1821 <span class="comment">% hObject    handle to lt2_emittance (see GCBO)</span>
1822 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1823 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1824 
1825 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1826 <span class="comment">%       See ISPC and COMPUTER.</span>
1827 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1828     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1829 <span class="keyword">end</span>
1830 
1831 
1832 
1833 <a name="_sub92" href="#_subfunctions" class="code">function lt2_bpm_Callback(hObject, eventdata, handles)</a>
1834 <span class="comment">% hObject    handle to lt2_bpm (see GCBO)</span>
1835 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1836 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1837 
1838 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_bpm as text</span>
1839 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_bpm as a double</span>
1840 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1841 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1842 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1843 
1844 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1845 <a name="_sub93" href="#_subfunctions" class="code">function lt2_bpm_CreateFcn(hObject, eventdata, handles)</a>
1846 <span class="comment">% hObject    handle to lt2_bpm (see GCBO)</span>
1847 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1848 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1849 
1850 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1851 <span class="comment">%       See ISPC and COMPUTER.</span>
1852 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1853     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1854 <span class="keyword">end</span>
1855 
1856 
1857 
1858 <a name="_sub94" href="#_subfunctions" class="code">function lt2_osc_Callback(hObject, eventdata, handles)</a>
1859 <span class="comment">% hObject    handle to lt2_osc (see GCBO)</span>
1860 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1861 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1862 
1863 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_osc as text</span>
1864 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_osc as a double</span>
1865 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1866 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1867 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>,delay);
1868 
1869 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1870 <a name="_sub95" href="#_subfunctions" class="code">function lt2_osc_CreateFcn(hObject, eventdata, handles)</a>
1871 <span class="comment">% hObject    handle to lt2_osc (see GCBO)</span>
1872 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1873 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1874 
1875 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1876 <span class="comment">%       See ISPC and COMPUTER.</span>
1877 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1878     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1879 <span class="keyword">end</span>
1880 
1881 
1882 
1883 <a name="_sub96" href="#_subfunctions" class="code">function lin_modulateur_Callback(hObject, eventdata, handles)</a>
1884 <span class="comment">% hObject    handle to lin_alim_modulateur (see GCBO)</span>
1885 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1886 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1887 
1888 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_alim_modulateur as text</span>
1889 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_alim_modulateur as a double</span>
1890 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1891 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
1892 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1893 
1894 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1895 <a name="_sub97" href="#_subfunctions" class="code">function lin_modulateur_CreateFcn(hObject, eventdata, handles)</a>
1896 <span class="comment">% hObject    handle to lin_alim_modulateur (see GCBO)</span>
1897 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1898 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1899 
1900 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1901 <span class="comment">%       See ISPC and COMPUTER.</span>
1902 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1903     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1904 <span class="keyword">end</span>
1905 
1906 
1907 
1908 <a name="_sub98" href="#_subfunctions" class="code">function inj_offset_Callback(hObject, eventdata, handles)</a>
1909 <span class="comment">% hObject    handle to inj_offset (see GCBO)</span>
1910 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1911 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1912 
1913 <span class="comment">% Hints: get(hObject,'String') returns contents of inj_offset as text</span>
1914 <span class="comment">%        str2double(get(hObject,'String')) returns contents of inj_offset as a double</span>
1915 
1916 inj_offset=str2double(get(hObject,<span class="string">'String'</span>));
1917 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1918 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
1919 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin_alim');</span>
1920 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
1921 save(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>)
1922 
1923 <span class="comment">%lin_alim</span>
1924 delay=str2double(get(handles.lin_canon_lpm,<span class="string">'String'</span>))+inj_offset;
1925 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>,delay);
1926 
1927 delay=str2double(get(handles.lin_canon_spm,<span class="string">'String'</span>))+inj_offset;
1928 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>,delay);
1929 
1930 delay=str2double(get(handles.lin_modulateur,<span class="string">'String'</span>))+inj_offset;
1931 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1932 
1933 delay=str2double(get(handles.sdc1,<span class="string">'String'</span>))+inj_offset;
1934 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
1935 
1936 
1937 <span class="comment">% LT1</span>
1938 delay=str2double(get(handles.lt1_MC2,<span class="string">'String'</span>))+inj_offset;
1939 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>,delay);
1940 
1941 delay=str2double(get(handles.lt1_MC1,<span class="string">'String'</span>))+inj_offset;
1942 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>,delay);
1943 
1944 delay=str2double(get(handles.lt1_emittance,<span class="string">'String'</span>))+inj_offset;
1945 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
1946 
1947 delay=str2double(get(handles.lt1_osc,<span class="string">'String'</span>))+inj_offset;
1948 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
1949 
1950 
1951 <span class="comment">% BOO</span>
1952 delay=str2double(get(handles.boo_inj_septum,<span class="string">'String'</span>))+inj_offset;
1953 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1954 
1955 delay=str2double(get(handles.boo_inj_kicker,<span class="string">'String'</span>))+inj_offset;
1956 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
1957 
1958 delay=str2double(get(handles.boo_bpm,<span class="string">'String'</span>))+inj_offset;
1959 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>,delay);
1960 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigTimeDelay'</span>,delay);
1961 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigTimeDelay'</span>,delay);
1962 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigTimeDelay'</span>,delay);
1963 
1964 
1965 delay=str2double(get(handles.boo_nod,<span class="string">'String'</span>))+inj_offset;
1966 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>,delay);
1967 
1968 <span class="comment">% delay=str2double(get(handles.boo_dcct,'String'))+inj_offset;</span>
1969 <span class="comment">% tango_write_attribute2('LT1/SY/LOCAL.DG.1', 'dcct-booTimeDelay',delay);</span>
1970 
1971 
1972 
1973 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1974 <a name="_sub99" href="#_subfunctions" class="code">function inj_offset_CreateFcn(hObject, eventdata, handles)</a>
1975 <span class="comment">% hObject    handle to inj_offset (see GCBO)</span>
1976 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1977 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1978 
1979 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1980 <span class="comment">%       See ISPC and COMPUTER.</span>
1981 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1982     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1983 <span class="keyword">end</span>
1984 
1985 
1986 
1987 <a name="_sub100" href="#_subfunctions" class="code">function ext_offset_Callback(hObject, eventdata, handles)</a>
1988 <span class="comment">% hObject    handle to ext_offset (see GCBO)</span>
1989 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1990 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1991 
1992 <span class="comment">% Hints: get(hObject,'String') returns contents of ext_offset as text</span>
1993 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ext_offset as a double</span>
1994 
1995 ext_offset=str2double(get(hObject,<span class="string">'String'</span>));
1996 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1997 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
1998 
1999 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin_alim');</span>
2000 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
2001 save(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
2002 
2003 
2004 <span class="comment">%BOO</span>
2005 delay=str2double(get(handles.boo_ext_dof,<span class="string">'String'</span>))+ext_offset;
2006 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>,delay);
2007 
2008 delay=str2double(get(handles.boo_ext_sept_p,<span class="string">'String'</span>))+ext_offset;
2009 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
2010 
2011 delay=str2double(get(handles.boo_ext_sept_a,<span class="string">'String'</span>))+ext_offset;
2012 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
2013 
2014 delay=str2double(get(handles.boo_ext_kicker,<span class="string">'String'</span>))+ext_offset;
2015 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
2016 
2017 delay=str2double(get(handles.sdc2,<span class="string">'String'</span>))+ext_offset;
2018 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
2019 
2020 <span class="comment">%LT2</span>
2021 delay=str2double(get(handles.lt2_bpm,<span class="string">'String'</span>))+ext_offset;
2022 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2023 
2024 delay=str2double(get(handles.lt2_osc,<span class="string">'String'</span>))+ext_offset;
2025 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>,delay);
2026 
2027 delay=str2double(get(handles.lt2_emittance,<span class="string">'String'</span>))+ext_offset;
2028 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>,delay);
2029 
2030 <span class="comment">%ANS</span>
2031 
2032 delay=str2double(get(handles.ans_inj_sept_a,<span class="string">'String'</span>))+ext_offset;
2033 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
2034 
2035 delay=str2double(get(handles.ans_inj_sept_p,<span class="string">'String'</span>))+ext_offset;
2036 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
2037 
2038 delay=str2double(get(handles.ans_inj_k1,<span class="string">'String'</span>))+ext_offset;
2039 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>,delay);
2040 
2041 delay=str2double(get(handles.ans_inj_k2,<span class="string">'String'</span>))+ext_offset;
2042 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>,delay);
2043 
2044 delay=str2double(get(handles.ans_inj_k3,<span class="string">'String'</span>))+ext_offset;
2045 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>,delay);
2046 
2047 delay=str2double(get(handles.ans_inj_k4,<span class="string">'String'</span>))+ext_offset;
2048 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>,delay);
2049 
2050 
2051 
2052 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2053 <a name="_sub101" href="#_subfunctions" class="code">function ext_offset_CreateFcn(hObject, eventdata, handles)</a>
2054 <span class="comment">% hObject    handle to ext_offset (see GCBO)</span>
2055 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2056 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2057 
2058 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2059 <span class="comment">%       See ISPC and COMPUTER.</span>
2060 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2061     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2062 <span class="keyword">end</span>
2063 
2064 
2065 <span class="comment">% --- Executes on button press in button_acquisition_address.</span>
2066 <a name="_sub102" href="#_subfunctions" class="code">function button_acquisition_address_Callback(hObject, eventdata, handles)</a>
2067 <span class="comment">% hObject    handle to button_acquisition_address (see GCBO)</span>
2068 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2069 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2070 
2071 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
2072 
2073 
2074 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2075 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2076 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2077 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2078 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2079 set(handles.lin_alim,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2080 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2081 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2082 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2083 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2084 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2085 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2086 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2087 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2088 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2089 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2090 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2091 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2092 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2093 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2094 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2095 set(handles.boo_mrsv,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2096 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2097 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2098 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2099 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2100 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2101 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2102 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2103 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2104 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2105 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2106 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2107 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2108 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2109 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2110 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2111 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2112 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2113 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2114 set(handles.ans_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2115 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2116 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2117 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2118 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2119 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2120 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2121 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2122 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2123 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2124 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2125 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2126 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2127 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2128 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2129 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2130 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2131 
2132 
2133 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin_alim');</span>
2134 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
2135 load(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
2136 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
2137 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
2138 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
2139 
2140 <a href="get_synchro_address.html" class="code" title="function get_synchro_address(handles)">get_synchro_address</a>(handles)
2141 n=1;
2142 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'libre.1Event'</span>);
2143 <span class="keyword">try</span> txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=<span class="string">'Bug device'</span> ; <span class="keyword">end</span>
2144 set(handles.lin_alim,<span class="string">'String'</span>,txt);
2145 
2146 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceEvent'</span>);
2147 <span class="keyword">try</span> ;txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=bug_device ; <span class="keyword">end</span>
2148 set(handles.boo_mrsv,<span class="string">'String'</span>,txt);
2149 
2150 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'perteEvent'</span>);
2151 <span class="keyword">try</span> ;txt=num2str(temp.value(n)); <span class="keyword">catch</span> txt=bug_device ; <span class="keyword">end</span>
2152 set(handles.ans_nod,<span class="string">'String'</span>,txt);
2153 
2154 
2155 <span class="comment">% --- Executes on button press in button_offinj_moins.</span>
2156 <a name="_sub103" href="#_subfunctions" class="code">function button_offinj_moins_Callback(hObject, eventdata, handles)</a>
2157 <span class="comment">% hObject    handle to button_offinj_moins (see GCBO)</span>
2158 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2159 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2160 
2161 temp=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2162 step=temp-52*0.52243;
2163 set(handles.inj_offset,<span class="string">'String'</span>,step);
2164 <a href="#_sub98" class="code" title="subfunction inj_offset_Callback(hObject, eventdata, handles)">inj_offset_Callback</a>(handles.inj_offset, eventdata, handles);
2165 
2166 <span class="comment">% --- Executes on button press in button_offinj_plus.</span>
2167 <a name="_sub104" href="#_subfunctions" class="code">function button_offinj_plus_Callback(hObject, eventdata, handles)</a>
2168 <span class="comment">% hObject    handle to button_offinj_plus (see GCBO)</span>
2169 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2170 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2171 
2172 temp=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2173 step=temp+52*0.52243;
2174 set(handles.inj_offset,<span class="string">'String'</span>,step);
2175 <a href="#_sub98" class="code" title="subfunction inj_offset_Callback(hObject, eventdata, handles)">inj_offset_Callback</a>(handles.inj_offset, eventdata, handles);
2176 
2177 <span class="comment">% --- Executes on button press in button_offext_moins.</span>
2178 <a name="_sub105" href="#_subfunctions" class="code">function button_offext_moins_Callback(hObject, eventdata, handles)</a>
2179 <span class="comment">% hObject    handle to button_offext_moins (see GCBO)</span>
2180 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2181 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2182 
2183 temp=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2184 step=temp-52*0.52243;
2185 set(handles.ext_offset,<span class="string">'String'</span>,step);
2186 <a href="#_sub100" class="code" title="subfunction ext_offset_Callback(hObject, eventdata, handles)">ext_offset_Callback</a>(handles.ext_offset, eventdata, handles);
2187 
2188 <span class="comment">% --- Executes on button press in button_offext_plus.</span>
2189 <a name="_sub106" href="#_subfunctions" class="code">function button_offext_plus_Callback(hObject, eventdata, handles)</a>
2190 <span class="comment">% hObject    handle to button_offext_plus (see GCBO)</span>
2191 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2192 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2193 
2194 temp=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2195 step=temp+52*0.52243;
2196 set(handles.ext_offset,<span class="string">'String'</span>,step);
2197 <a href="#_sub100" class="code" title="subfunction ext_offset_Callback(hObject, eventdata, handles)">ext_offset_Callback</a>(handles.ext_offset, eventdata, handles);
2198 
2199 
2200 <span class="comment">% --- Executes on button press in button_bpm.</span>
2201 <a name="_sub107" href="#_subfunctions" class="code">function button_bpm_Callback(hObject, eventdata, handles)</a>
2202 <span class="comment">% hObject    handle to button_bpm (see GCBO)</span>
2203 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2204 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2205 
2206 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of button_bpm</span>
2207 
2208 bpm=get(hObject,<span class="string">'Value'</span>);
2209 
2210 <span class="keyword">if</span> (bpm==0)
2211    set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
2212 <span class="keyword">elseif</span> (bpm==1)
2213     set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
2214 <span class="keyword">end</span>
2215 
2216 
2217 
2218 <a name="_sub108" href="#_subfunctions" class="code">function ans_bpm_c01_Callback(hObject, eventdata, handles)</a>
2219 <span class="comment">% hObject    handle to ans_bpm_c01 (see GCBO)</span>
2220 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2221 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2222 
2223 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c01 as text</span>
2224 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c01 as a double</span>
2225 
2226 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2227 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2228 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2229 
2230 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2231 <a name="_sub109" href="#_subfunctions" class="code">function ans_bpm_c01_CreateFcn(hObject, eventdata, handles)</a>
2232 <span class="comment">% hObject    handle to ans_bpm_c01 (see GCBO)</span>
2233 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2234 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2235 
2236 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2237 <span class="comment">%       See ISPC and COMPUTER.</span>
2238 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2239     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2240 <span class="keyword">end</span>
2241 
2242 
2243 <a name="_sub110" href="#_subfunctions" class="code">function ans_bpm_c02_Callback(hObject, eventdata, handles)</a>
2244 <span class="comment">% hObject    handle to ans_bpm_c02 (see GCBO)</span>
2245 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2246 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2247 
2248 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c02 as text</span>
2249 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c02 as a double</span>
2250 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2251 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2252 tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2253 
2254 
2255 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2256 <a name="_sub111" href="#_subfunctions" class="code">function ans_bpm_c02_CreateFcn(hObject, eventdata, handles)</a>
2257 <span class="comment">% hObject    handle to ans_bpm_c02 (see GCBO)</span>
2258 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2259 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2260 
2261 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2262 <span class="comment">%       See ISPC and COMPUTER.</span>
2263 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2264     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2265 <span class="keyword">end</span>
2266 
2267 
2268 
2269 <a name="_sub112" href="#_subfunctions" class="code">function ans_bpm_c03_Callback(hObject, eventdata, handles)</a>
2270 <span class="comment">% hObject    handle to ans_bpm_c03 (see GCBO)</span>
2271 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2272 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2273 
2274 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c03 as text</span>
2275 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c03 as a double</span>
2276 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2277 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2278 tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2279 
2280 
2281 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2282 <a name="_sub113" href="#_subfunctions" class="code">function ans_bpm_c03_CreateFcn(hObject, eventdata, handles)</a>
2283 <span class="comment">% hObject    handle to ans_bpm_c03 (see GCBO)</span>
2284 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2285 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2286 
2287 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2288 <span class="comment">%       See ISPC and COMPUTER.</span>
2289 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2290     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2291 <span class="keyword">end</span>
2292 
2293 
2294 
2295 <a name="_sub114" href="#_subfunctions" class="code">function ans_bpm_c04_Callback(hObject, eventdata, handles)</a>
2296 <span class="comment">% hObject    handle to ans_bpm_c04 (see GCBO)</span>
2297 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2298 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2299 
2300 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c04 as text</span>
2301 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c04 as a double</span>
2302 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2303 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2304 tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2305 
2306 
2307 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2308 <a name="_sub115" href="#_subfunctions" class="code">function ans_bpm_c04_CreateFcn(hObject, eventdata, handles)</a>
2309 <span class="comment">% hObject    handle to ans_bpm_c04 (see GCBO)</span>
2310 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2311 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2312 
2313 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2314 <span class="comment">%       See ISPC and COMPUTER.</span>
2315 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2316     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2317 <span class="keyword">end</span>
2318 
2319 
2320 
2321 <a name="_sub116" href="#_subfunctions" class="code">function ans_bpm_c05_Callback(hObject, eventdata, handles)</a>
2322 <span class="comment">% hObject    handle to ans_bpm_c05 (see GCBO)</span>
2323 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2324 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2325 
2326 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c05 as text</span>
2327 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c05 as a double</span>
2328 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2329 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2330 tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2331 
2332 
2333 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2334 <a name="_sub117" href="#_subfunctions" class="code">function ans_bpm_c05_CreateFcn(hObject, eventdata, handles)</a>
2335 <span class="comment">% hObject    handle to ans_bpm_c05 (see GCBO)</span>
2336 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2337 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2338 
2339 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2340 <span class="comment">%       See ISPC and COMPUTER.</span>
2341 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2342     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2343 <span class="keyword">end</span>
2344 
2345 
2346 
2347 <a name="_sub118" href="#_subfunctions" class="code">function ans_bpm_c06_Callback(hObject, eventdata, handles)</a>
2348 <span class="comment">% hObject    handle to ans_bpm_c06 (see GCBO)</span>
2349 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2350 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2351 
2352 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c06 as text</span>
2353 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c06 as a double</span>
2354 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2355 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2356 tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2357 
2358 
2359 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2360 <a name="_sub119" href="#_subfunctions" class="code">function ans_bpm_c06_CreateFcn(hObject, eventdata, handles)</a>
2361 <span class="comment">% hObject    handle to ans_bpm_c06 (see GCBO)</span>
2362 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2363 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2364 
2365 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2366 <span class="comment">%       See ISPC and COMPUTER.</span>
2367 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2368     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2369 <span class="keyword">end</span>
2370 
2371 
2372 
2373 <a name="_sub120" href="#_subfunctions" class="code">function ans_bpm_c07_Callback(hObject, eventdata, handles)</a>
2374 <span class="comment">% hObject    handle to ans_bpm_c07 (see GCBO)</span>
2375 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2376 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2377 
2378 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c07 as text</span>
2379 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c07 as a double</span>
2380 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2381 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2382 tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2383 
2384 
2385 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2386 <a name="_sub121" href="#_subfunctions" class="code">function ans_bpm_c07_CreateFcn(hObject, eventdata, handles)</a>
2387 <span class="comment">% hObject    handle to ans_bpm_c07 (see GCBO)</span>
2388 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2389 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2390 
2391 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2392 <span class="comment">%       See ISPC and COMPUTER.</span>
2393 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2394     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2395 <span class="keyword">end</span>
2396 
2397 
2398 
2399 <a name="_sub122" href="#_subfunctions" class="code">function ans_bpm_c08_Callback(hObject, eventdata, handles)</a>
2400 <span class="comment">% hObject    handle to ans_bpm_c08 (see GCBO)</span>
2401 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2402 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2403 
2404 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c08 as text</span>
2405 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c08 as a double</span>
2406 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2407 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2408 tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2409 
2410 
2411 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2412 <a name="_sub123" href="#_subfunctions" class="code">function ans_bpm_c08_CreateFcn(hObject, eventdata, handles)</a>
2413 <span class="comment">% hObject    handle to ans_bpm_c08 (see GCBO)</span>
2414 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2415 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2416 
2417 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2418 <span class="comment">%       See ISPC and COMPUTER.</span>
2419 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2420     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2421 <span class="keyword">end</span>
2422 
2423 
2424 
2425 <a name="_sub124" href="#_subfunctions" class="code">function ans_bpm_c09_Callback(hObject, eventdata, handles)</a>
2426 <span class="comment">% hObject    handle to ans_bpm_c09 (see GCBO)</span>
2427 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2428 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2429 
2430 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c09 as text</span>
2431 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c09 as a double</span>
2432 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2433 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2434 tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2435 
2436 
2437 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2438 <a name="_sub125" href="#_subfunctions" class="code">function ans_bpm_c09_CreateFcn(hObject, eventdata, handles)</a>
2439 <span class="comment">% hObject    handle to ans_bpm_c09 (see GCBO)</span>
2440 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2441 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2442 
2443 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2444 <span class="comment">%       See ISPC and COMPUTER.</span>
2445 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2446     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2447 <span class="keyword">end</span>
2448 
2449 
2450 
2451 <a name="_sub126" href="#_subfunctions" class="code">function ans_bpm_c10_Callback(hObject, eventdata, handles)</a>
2452 <span class="comment">% hObject    handle to ans_bpm_c10 (see GCBO)</span>
2453 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2454 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2455 
2456 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c10 as text</span>
2457 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c10 as a double</span>
2458 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2459 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2460 tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2461 
2462 
2463 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2464 <a name="_sub127" href="#_subfunctions" class="code">function ans_bpm_c10_CreateFcn(hObject, eventdata, handles)</a>
2465 <span class="comment">% hObject    handle to ans_bpm_c10 (see GCBO)</span>
2466 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2467 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2468 
2469 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2470 <span class="comment">%       See ISPC and COMPUTER.</span>
2471 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2472     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2473 <span class="keyword">end</span>
2474 
2475 
2476 
2477 <a name="_sub128" href="#_subfunctions" class="code">function ans_bpm_c11_Callback(hObject, eventdata, handles)</a>
2478 <span class="comment">% hObject    handle to ans_bpm_c11 (see GCBO)</span>
2479 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2480 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2481 
2482 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c11 as text</span>
2483 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c11 as a double</span>
2484 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2485 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2486 tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2487 
2488 
2489 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2490 <a name="_sub129" href="#_subfunctions" class="code">function ans_bpm_c11_CreateFcn(hObject, eventdata, handles)</a>
2491 <span class="comment">% hObject    handle to ans_bpm_c11 (see GCBO)</span>
2492 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2493 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2494 
2495 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2496 <span class="comment">%       See ISPC and COMPUTER.</span>
2497 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2498     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2499 <span class="keyword">end</span>
2500 
2501 
2502 
2503 <a name="_sub130" href="#_subfunctions" class="code">function ans_bpm_c12_Callback(hObject, eventdata, handles)</a>
2504 <span class="comment">% hObject    handle to ans_bpm_c12 (see GCBO)</span>
2505 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2506 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2507 
2508 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c12 as text</span>
2509 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c12 as a double</span>
2510 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2511 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2512 tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2513 
2514 
2515 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2516 <a name="_sub131" href="#_subfunctions" class="code">function ans_bpm_c12_CreateFcn(hObject, eventdata, handles)</a>
2517 <span class="comment">% hObject    handle to ans_bpm_c12 (see GCBO)</span>
2518 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2519 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2520 
2521 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2522 <span class="comment">%       See ISPC and COMPUTER.</span>
2523 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2524     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2525 <span class="keyword">end</span>
2526 
2527 
2528 
2529 <a name="_sub132" href="#_subfunctions" class="code">function ans_bpm_c13_Callback(hObject, eventdata, handles)</a>
2530 <span class="comment">% hObject    handle to ans_bpm_c13 (see GCBO)</span>
2531 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2532 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2533 
2534 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c13 as text</span>
2535 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c13 as a double</span>
2536 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2537 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2538 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2539 
2540 
2541 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2542 <a name="_sub133" href="#_subfunctions" class="code">function ans_bpm_c13_CreateFcn(hObject, eventdata, handles)</a>
2543 <span class="comment">% hObject    handle to ans_bpm_c13 (see GCBO)</span>
2544 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2545 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2546 
2547 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2548 <span class="comment">%       See ISPC and COMPUTER.</span>
2549 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2550     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2551 <span class="keyword">end</span>
2552 
2553 
2554 
2555 <a name="_sub134" href="#_subfunctions" class="code">function ans_bpm_c14_Callback(hObject, eventdata, handles)</a>
2556 <span class="comment">% hObject    handle to ans_bpm_c14 (see GCBO)</span>
2557 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2558 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2559 
2560 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c14 as text</span>
2561 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c14 as a double</span>
2562 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2563 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2564 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2565 
2566 
2567 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2568 <a name="_sub135" href="#_subfunctions" class="code">function ans_bpm_c14_CreateFcn(hObject, eventdata, handles)</a>
2569 <span class="comment">% hObject    handle to ans_bpm_c14 (see GCBO)</span>
2570 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2571 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2572 
2573 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2574 <span class="comment">%       See ISPC and COMPUTER.</span>
2575 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2576     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2577 <span class="keyword">end</span>
2578 
2579 
2580 
2581 <a name="_sub136" href="#_subfunctions" class="code">function ans_bpm_c15_Callback(hObject, eventdata, handles)</a>
2582 <span class="comment">% hObject    handle to ans_bpm_c15 (see GCBO)</span>
2583 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2584 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2585 
2586 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c15 as text</span>
2587 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c15 as a double</span>
2588 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2589 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2590 tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2591 
2592 
2593 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2594 <a name="_sub137" href="#_subfunctions" class="code">function ans_bpm_c15_CreateFcn(hObject, eventdata, handles)</a>
2595 <span class="comment">% hObject    handle to ans_bpm_c15 (see GCBO)</span>
2596 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2597 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2598 
2599 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2600 <span class="comment">%       See ISPC and COMPUTER.</span>
2601 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2602     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2603 <span class="keyword">end</span>
2604 
2605 
2606 
2607 <a name="_sub138" href="#_subfunctions" class="code">function ans_bpm_c16_Callback(hObject, eventdata, handles)</a>
2608 <span class="comment">% hObject    handle to ans_bpm_c16 (see GCBO)</span>
2609 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2610 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2611 
2612 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c16 as text</span>
2613 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c16 as a double</span>
2614 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2615 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2616 tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2617 
2618 
2619 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2620 <a name="_sub139" href="#_subfunctions" class="code">function ans_bpm_c16_CreateFcn(hObject, eventdata, handles)</a>
2621 <span class="comment">% hObject    handle to ans_bpm_c16 (see GCBO)</span>
2622 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2623 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2624 
2625 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2626 <span class="comment">%       See ISPC and COMPUTER.</span>
2627 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2628     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2629 <span class="keyword">end</span>
2630 
2631 
2632 
2633 <a name="_sub140" href="#_subfunctions" class="code">function edit_filling_relecture_tables_Callback(hObject, eventdata, handles)</a>
2634 <span class="comment">% hObject    handle to edit_filling_relecture_tables (see GCBO)</span>
2635 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2636 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2637 
2638 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_relecture_tables as text</span>
2639 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_relecture_tables as a double</span>
2640 
2641 
2642 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2643 <a name="_sub141" href="#_subfunctions" class="code">function edit_filling_relecture_tables_CreateFcn(hObject, eventdata, handles)</a>
2644 <span class="comment">% hObject    handle to edit_filling_relecture_tables (see GCBO)</span>
2645 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2646 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2647 
2648 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2649 <span class="comment">%       See ISPC and COMPUTER.</span>
2650 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2651     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2652 <span class="keyword">end</span>
2653 
2654 
2655 
2656 <a name="_sub142" href="#_subfunctions" class="code">function edit_filling_relecture_bunch_Callback(hObject, eventdata, handles)</a>
2657 <span class="comment">% hObject    handle to edit_filling_relecture_bunch (see GCBO)</span>
2658 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2659 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2660 
2661 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_relecture_bunch as text</span>
2662 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_relecture_bunch as a double</span>
2663 
2664 
2665 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2666 <a name="_sub143" href="#_subfunctions" class="code">function edit_filling_relecture_bunch_CreateFcn(hObject, eventdata, handles)</a>
2667 <span class="comment">% hObject    handle to edit_filling_relecture_bunch (see GCBO)</span>
2668 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2669 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2670 
2671 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2672 <span class="comment">%       See ISPC and COMPUTER.</span>
2673 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2674     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2675 <span class="keyword">end</span>
2676 
2677 
2678 
2679 <a name="_sub144" href="#_subfunctions" class="code">function edit_filling_entrer_bunch_Callback(hObject, eventdata, handles)</a>
2680 <span class="comment">% hObject    handle to edit_filling_entrer_bunch (see GCBO)</span>
2681 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2682 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2683 
2684 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_entrer_bunch as text</span>
2685 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_entrer_bunch as a double</span>
2686 
2687 <span class="comment">%set(handles.listbox_fillingmode,'value',12);</span>
2688 <span class="comment">%listbox_fillingmode_Callback;</span>
2689 
2690 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2691 <a name="_sub145" href="#_subfunctions" class="code">function edit_filling_entrer_bunch_CreateFcn(hObject, eventdata, handles)</a>
2692 <span class="comment">% hObject    handle to edit_filling_entrer_bunch (see GCBO)</span>
2693 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2694 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2695 
2696 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2697 <span class="comment">%       See ISPC and COMPUTER.</span>
2698 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2699     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2700 <span class="keyword">end</span>
2701 
2702 
2703 <span class="comment">% --- Executes on button press in button_update.</span>
2704 <a name="_sub146" href="#_subfunctions" class="code">function button_update_Callback(hObject, eventdata, handles)</a>
2705 <span class="comment">% hObject    handle to button_update (see GCBO)</span>
2706 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2707 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2708 
2709 <a href="do_update.html" class="code" title="function do_update">do_update</a>
2710 
2711 <span class="comment">% --- Executes on button press in button_acquisition_trigstatus.</span>
2712 <a name="_sub147" href="#_subfunctions" class="code">function button_acquisition_trigstatus_Callback(hObject, eventdata, handles)</a>
2713 <span class="comment">% hObject    handle to button_acquisition_trigstatus (see GCBO)</span>
2714 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2715 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2716 
2717 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
2718 
2719 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2720 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2721 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2722 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2723 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2724 set(handles.lin_alim,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2725 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2726 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2727 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2728 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2729 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2730 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2731 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2732 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2733 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2734 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2735 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2736 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2737 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2738 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2739 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2740 set(handles.boo_mrsv,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2741 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2742 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2743 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2744 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2745 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2746 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2747 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2748 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2749 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2750 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2751 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2752 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2753 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2754 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2755 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2756 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2757 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2758 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2759 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2760 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2761 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2762 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2763 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2764 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2765 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2766 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2767 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2768 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2769 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2770 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2771 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2772 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2773 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2774 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2775 
2776 <a href="get_synchro_trigstatus.html" class="code" title="function get_synchro_trigstatus(handles)">get_synchro_trigstatus</a>(handles)
2777 
2778 
2779 <span class="comment">% --- Executes on button press in togglebutton2.</span>
2780 <a name="_sub148" href="#_subfunctions" class="code">function togglebutton2_Callback(hObject, eventdata, handles)</a>
2781 <span class="comment">% hObject    handle to togglebutton2 (see GCBO)</span>
2782 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2783 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2784 
2785 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of togglebutton2</span>
2786 
2787 
2788 <span class="comment">% --- Executes on selection change in listbox_fillingmode.</span>
2789 <a name="_sub149" href="#_subfunctions" class="code">function listbox_fillingmode_Callback(hObject, eventdata, handles)</a>
2790 <span class="comment">% hObject    handle to listbox_fillingmode (see GCBO)</span>
2791 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2792 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2793 
2794 <span class="comment">% Hints: contents = get(hObject,'String') returns listbox_fillingmode contents as cell array</span>
2795 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from listbox_fillingmode</span>
2796 pattern=get(hObject,<span class="string">'String'</span>);
2797 mode=get(hObject,<span class="string">'Value'</span>);
2798 fprintf(<span class="string">'***************************************************\n'</span>)
2799 fprintf(<span class="string">'Mode de remplissage sÃ©lectionnÃ© : %s\n'</span>,pattern{mode})
2800 fprintf(<span class="string">'***************************************************\n'</span>)
2801 
2802 
2803 <span class="comment">% PrÃ©pare les tables pour le 3 Hz</span>
2804 quart=[1 105 209 313];
2805 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
2806 offset_ext=temp.value(1)*52;
2807 offset_linac=str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>)) ;<span class="comment">% dÃ©lai fin de rÃ©glage en ns</span>
2808 offset_linac=offset_linac/handles.lin_fin_step;                   <span class="comment">% dÃ©lai fin de rÃ©glage en pas de handles.lin_fin_step ps</span>
2809 bjump=handles.one_bunch;
2810 
2811 
2812 <span class="keyword">if</span> (mode&lt;=4)    <span class="comment">%LPM</span>
2813     bunch=quart(mode);
2814     fillingmode=<span class="string">'1/4'</span>;
2815 <span class="keyword">elseif</span> (mode&gt;4)&amp;&amp;(mode&lt;=7) <span class="comment">%LPM</span>
2816     bunch=quart(1:(mode-3));
2817     <span class="keyword">if</span> mode==5 ; fillingmode=<span class="string">'1/2'</span>; <span class="keyword">end</span>
2818     <span class="keyword">if</span> mode==6 ; fillingmode=<span class="string">'3/4'</span>; <span class="keyword">end</span>
2819     <span class="keyword">if</span> mode==7 ; fillingmode=<span class="string">'4/4'</span>; <span class="keyword">end</span>
2820 <span class="keyword">elseif</span> (mode==8)    <span class="comment">%LPM</span>
2821     bunch=[365];      <span class="comment">% SPM hybride</span>
2822     <span class="comment">%bunch=[0 104+32 2*(104+40)]+1; % spÃ©cial 3/4</span>
2823     fillingmode=<span class="string">'3/4'</span>;
2824 <span class="keyword">elseif</span> (mode==9)   <span class="comment">% SPM    1 paquet</span>
2825     bunch=[1];
2826     fillingmode=<span class="string">'1 bunch'</span>;
2827 <span class="keyword">elseif</span> (mode==10)  <span class="comment">% SPM    8 paquets</span>
2828     bunch=[0:7]*52+1;
2829     fillingmode=<span class="string">'8 bunches'</span>;
2830 <span class="keyword">elseif</span> (mode==11)  <span class="comment">% SPM    16 paquets</span>
2831     <span class="comment">%bunch=[0:15]*26+1;</span>
2832     fillingmode=<span class="string">'16 bunches'</span>;
2833     <span class="comment">% Ludo, tu remplis bunch ici</span>
2834      bunch=[1:25];
2835 <span class="comment">%</span>
2836     bunch=[bunch  ([1:25]+1*32)];
2837     bunch=[bunch  ([1:25]+2*32)];
2838     bunch=[bunch  ([1:25]+3*32)];
2839     bunch=[bunch  ([1:25]+4*32)];
2840     bunch=[bunch  ([1:25]+5*32)];
2841     bunch=[bunch  ([1:25]+6*32)];
2842     bunch=[bunch  ([1:25]+7*32)];
2843     bunch=[bunch  ([1:25]+8*32)];
2844     bunch=[bunch  ([1:25]+9*32)];
2845     bunch=[bunch  ([1:25]+10*32)];
2846     bunch=[bunch  ([1:25]+11*32)];
2847     bunch=[bunch  ([1:25]+12*32)];
2848     
2849 <span class="keyword">elseif</span> (mode==12)  <span class="comment">% SPM    n paquets</span>
2850 <span class="comment">%     bunch=str2num(get(handles.edit_filling_entrer_bunch,'String'));</span>
2851 <span class="comment">%     if isempty(bunch)</span>
2852 <span class="comment">%         set(handles.edit_filling_entrer_bunch,'String','Bug format');</span>
2853 <span class="comment">%     end</span>
2854 <span class="comment">%     fillingmode='Few bunches';</span>
2855 
2856 <span class="comment">%     bunch=[0:12]*32+1;</span>
2857 <span class="comment">%     fillingmode='3/4';</span>
2858     
2859 <span class="comment">%     bunch=[0 136 272]+1;</span>
2860 <span class="comment">%     fillingmode='LPM spaced 3/4';</span>
2861 
2862     bunch=[0 2 4 6]*52+1;
2863     fillingmode=<span class="string">'LPM 8 pulses'</span>;
2864 
2865 <span class="comment">%     bunch=[1 105 209 313  1 105 209];</span>
2866 <span class="comment">%     fillingmode='3.5/4';</span>
2867 
2868 <span class="keyword">elseif</span> (mode==13)  <span class="comment">% SPM    n paquets</span>
2869 <span class="comment">%     paq=str2num(get(handles.edit_filling_entrer_bunch1,'String'));</span>
2870 <span class="comment">%     if (length(paq) == 2)</span>
2871 <span class="comment">%        bunch=paq(1):paq(2);</span>
2872 <span class="comment">%     else</span>
2873 <span class="comment">%        set(handles.edit_filling_entrer_bunch1,'String','Bug format')</span>
2874 <span class="comment">%     end</span>
2875 <span class="comment">%     fillingmode='Few bunches';</span>
2876 
2877     bunch=[1 3 5 7]*52+1 + 8;
2878     fillingmode=<span class="string">'LPM 8 pulses'</span>;
2879 <span class="keyword">end</span>
2880 
2881 <span class="comment">% Renseigne le filling Mode</span>
2882 tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>, <span class="string">'fillingMode'</span>,fillingmode)
2883 
2884 <span class="comment">% Charge la longueur de la rafale par dÃ©faut sur un cycle</span>
2885 Ncoup=length(bunch);
2886 boucle=int16(str2double(get(handles.edit_Ncycle,<span class="string">'String'</span>)));
2887 <span class="keyword">if</span> Ncoup&gt;=1
2888     set(handles.edit_Ncoup,<span class="string">'String'</span>,num2str(Ncoup));
2889     tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'burstSize'</span>,int32(Ncoup*boucle));
2890 <span class="keyword">end</span>
2891     
2892     
2893 [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);
2894 dpaquet=dpaquet*bjump+offset_linac;
2895 table=int32([length(bunch) dtour dpaquet]);
2896 handles.table=table;
2897 handles.bunch=bunch;
2898 
2899 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'table');</span>
2900 FileName = [handles.DirName <span class="string">'table.mat'</span>];
2901 save(FileName, <span class="string">'table'</span>); <span class="comment">% pour palier aux handles via timer non mis Ã  jour !!!!!!</span>
2902 
2903 modeinj=<span class="string">'togglebutton_3Hz'</span>;
2904 <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)  <span class="comment">% on rempli la table sur paquet 1 par dÃ©faut, pas utilisÃ©e</span>
2905     table=handles.table0;
2906     tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table);
2907     
2908 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>) <span class="comment">% on rempli la table associÃ©e au remplissage</span>
2909     tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table);
2910     pause(1); <span class="comment">% mise a jour table ATK</span>
2911     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
2912     n=temp.value;
2913     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
2914     table_ext=temp.value(1:n); <span class="comment">%-offset_ext;</span>
2915     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'LinacDelayTable'</span>);
2916     table_linac=(temp.value(1:n)-offset_linac)/bjump;
2917     table=[];
2918     <span class="keyword">for</span> i=1:n
2919         table=[table <span class="string">' '</span> <span class="string">'('</span> num2str([table_ext(i)])  <span class="string">' '</span>  num2str([table_linac(i)]) <span class="string">')'</span>];
2920     <span class="keyword">end</span>
2921 <span class="keyword">end</span>
2922 
2923 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[num2str(table)]);
2924 set(handles.edit_filling_relecture_bunch, <span class="string">'String'</span>,[num2str(bunch)]);
2925 
2926 
2927 guidata(hObject, handles);
2928 
2929 
2930 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2931 <a name="_sub150" href="#_subfunctions" class="code">function listbox_fillingmode_CreateFcn(hObject, eventdata, handles)</a>
2932 <span class="comment">% hObject    handle to listbox_fillingmode (see GCBO)</span>
2933 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2934 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2935 
2936 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
2937 <span class="comment">%       See ISPC and COMPUTER.</span>
2938 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2939     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2940 <span class="keyword">end</span>
2941 
2942 
2943 <span class="comment">% --- Executes on button press in button_fix.</span>
2944 <a name="_sub151" href="#_subfunctions" class="code">function button_fix_Callback(hObject, eventdata, handles)</a>
2945 <span class="comment">% hObject    handle to button_fix (see GCBO)</span>
2946 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2947 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2948 
2949 [clk_spare,clk_soft]=<a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>;
2950 handles.clk_spare  =clk_spare;
2951 handles.clk_soft=clk_soft;
2952 
2953 <span class="comment">% n=1;</span>
2954 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprStepDelay');</span>
2955 <span class="comment">% clk1=temp.value(n);</span>
2956 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftStepDelay');</span>
2957 <span class="comment">% clk2=temp.value(n);</span>
2958 <span class="comment">%</span>
2959 <span class="comment">% jump=int32([0 39 26 13]);</span>
2960 <span class="comment">% handles.clk_spare  =jump +  int32(clk1);</span>
2961 <span class="comment">% handles.clk_soft=jump  + int32(clk2);</span>
2962 
2963 guidata(hObject, handles);
2964 
2965 
2966 
2967 <a name="_sub152" href="#_subfunctions" class="code">function edit_Ncycle_Callback(hObject, eventdata, handles)</a>
2968 <span class="comment">% hObject    handle to edit_Ncycle (see GCBO)</span>
2969 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2970 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2971 
2972 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Ncycle as text</span>
2973 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Ncycle as a double</span>
2974 boucle=str2double(get(hObject,<span class="string">'String'</span>));
2975 Ncoup=str2double(get(handles.edit_Ncoup,<span class="string">'String'</span>));
2976 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'burstSize'</span>,int32(Ncoup*boucle));
2977 
2978 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2979 <a name="_sub153" href="#_subfunctions" class="code">function edit_Ncycle_CreateFcn(hObject, eventdata, handles)</a>
2980 <span class="comment">% hObject    handle to edit_Ncycle (see GCBO)</span>
2981 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2982 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2983 
2984 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2985 <span class="comment">%       See ISPC and COMPUTER.</span>
2986 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2987     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2988 <span class="keyword">end</span>
2989 
2990 
2991 
2992 <a name="_sub154" href="#_subfunctions" class="code">function edit_Ncoup_Callback(hObject, eventdata, handles)</a>
2993 <span class="comment">% hObject    handle to edit_Ncoup (see GCBO)</span>
2994 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2995 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2996 
2997 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Ncoup as text</span>
2998 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Ncoup as a double</span>
2999 Ncoup=str2double(get(hObject,<span class="string">'String'</span>));
3000 boucle=str2double(get(handles.edit_Ncycle,<span class="string">'String'</span>));
3001 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'burstSize'</span>,int32(Ncoup*boucle));
3002 
3003 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3004 <a name="_sub155" href="#_subfunctions" class="code">function edit_Ncoup_CreateFcn(hObject, eventdata, handles)</a>
3005 <span class="comment">% hObject    handle to edit_Ncoup (see GCBO)</span>
3006 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3007 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3008 
3009 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3010 <span class="comment">%       See ISPC and COMPUTER.</span>
3011 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3012     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3013 <span class="keyword">end</span>
3014 
3015 
3016 
3017 <a name="_sub156" href="#_subfunctions" class="code">function edit_qlt1_Callback(hObject, eventdata, handles)</a>
3018 <span class="comment">% hObject    handle to edit_qlt1 (see GCBO)</span>
3019 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3020 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3021 
3022 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_qlt1 as text</span>
3023 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_qlt1 as a double</span>
3024 
3025 
3026 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3027 <a name="_sub157" href="#_subfunctions" class="code">function edit_qlt1_CreateFcn(hObject, eventdata, handles)</a>
3028 <span class="comment">% hObject    handle to edit_qlt1 (see GCBO)</span>
3029 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3030 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3031 
3032 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3033 <span class="comment">%       See ISPC and COMPUTER.</span>
3034 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3035     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3036 <span class="keyword">end</span>
3037 
3038 
3039 
3040 <a name="_sub158" href="#_subfunctions" class="code">function edit_iboo_Callback(hObject, eventdata, handles)</a>
3041 <span class="comment">% hObject    handle to edit_iboo (see GCBO)</span>
3042 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3043 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3044 
3045 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_iboo as text</span>
3046 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_iboo as a double</span>
3047 
3048 
3049 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3050 <a name="_sub159" href="#_subfunctions" class="code">function edit_iboo_CreateFcn(hObject, eventdata, handles)</a>
3051 <span class="comment">% hObject    handle to edit_iboo (see GCBO)</span>
3052 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3053 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3054 
3055 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3056 <span class="comment">%       See ISPC and COMPUTER.</span>
3057 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3058     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3059 <span class="keyword">end</span>
3060 
3061 
3062 
3063 <a name="_sub160" href="#_subfunctions" class="code">function edit_dians_Callback(hObject, eventdata, handles)</a>
3064 <span class="comment">% hObject    handle to edit_dians (see GCBO)</span>
3065 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3066 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3067 
3068 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_dians as text</span>
3069 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_dians as a double</span>
3070 
3071 
3072 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3073 <a name="_sub161" href="#_subfunctions" class="code">function edit_dians_CreateFcn(hObject, eventdata, handles)</a>
3074 <span class="comment">% hObject    handle to edit_dians (see GCBO)</span>
3075 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3076 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3077 
3078 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3079 <span class="comment">%       See ISPC and COMPUTER.</span>
3080 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3081     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3082 <span class="keyword">end</span>
3083 
3084 
3085 
3086 <a name="_sub162" href="#_subfunctions" class="code">function edit_rlt1_Callback(hObject, eventdata, handles)</a>
3087 <span class="comment">% hObject    handle to edit_rlt1 (see GCBO)</span>
3088 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3089 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3090 
3091 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rlt1 as text</span>
3092 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rlt1 as a double</span>
3093 
3094 
3095 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3096 <a name="_sub163" href="#_subfunctions" class="code">function edit_rlt1_CreateFcn(hObject, eventdata, handles)</a>
3097 <span class="comment">% hObject    handle to edit_rlt1 (see GCBO)</span>
3098 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3099 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3100 
3101 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3102 <span class="comment">%       See ISPC and COMPUTER.</span>
3103 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3104     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3105 <span class="keyword">end</span>
3106 
3107 
3108 
3109 <a name="_sub164" href="#_subfunctions" class="code">function edit_rboo_Callback(hObject, eventdata, handles)</a>
3110 <span class="comment">% hObject    handle to edit_rboo (see GCBO)</span>
3111 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3112 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3113 
3114 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rboo as text</span>
3115 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rboo as a double</span>
3116 
3117 
3118 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3119 <a name="_sub165" href="#_subfunctions" class="code">function edit_rboo_CreateFcn(hObject, eventdata, handles)</a>
3120 <span class="comment">% hObject    handle to edit_rboo (see GCBO)</span>
3121 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3122 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3123 
3124 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3125 <span class="comment">%       See ISPC and COMPUTER.</span>
3126 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3127     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3128 <span class="keyword">end</span>
3129 
3130 
3131 
3132 <a name="_sub166" href="#_subfunctions" class="code">function edit_rans_Callback(hObject, eventdata, handles)</a>
3133 <span class="comment">% hObject    handle to edit_rans (see GCBO)</span>
3134 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3135 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3136 
3137 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rans as text</span>
3138 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rans as a double</span>
3139 
3140 
3141 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3142 <a name="_sub167" href="#_subfunctions" class="code">function edit_rans_CreateFcn(hObject, eventdata, handles)</a>
3143 <span class="comment">% hObject    handle to edit_rans (see GCBO)</span>
3144 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3145 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3146 
3147 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3148 <span class="comment">%       See ISPC and COMPUTER.</span>
3149 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3150     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3151 <span class="keyword">end</span>
3152 
3153 
3154 
3155 <a name="_sub168" href="#_subfunctions" class="code">function edit_dians1_Callback(hObject, eventdata, handles)</a>
3156 <span class="comment">% hObject    handle to edit_dians1 (see GCBO)</span>
3157 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3158 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3159 
3160 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_dians1 as text</span>
3161 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_dians1 as a double</span>
3162 
3163 
3164 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3165 <a name="_sub169" href="#_subfunctions" class="code">function edit_dians1_CreateFcn(hObject, eventdata, handles)</a>
3166 <span class="comment">% hObject    handle to edit_dians1 (see GCBO)</span>
3167 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3168 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3169 
3170 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3171 <span class="comment">%       See ISPC and COMPUTER.</span>
3172 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3173     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3174 <span class="keyword">end</span>
3175 
3176 
3177 
3178 <a name="_sub170" href="#_subfunctions" class="code">function edit_cycle_Callback(hObject, eventdata, handles)</a>
3179 <span class="comment">% hObject    handle to edit_cycle (see GCBO)</span>
3180 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3181 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3182 
3183 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_cycle as text</span>
3184 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_cycle as a double</span>
3185 
3186 
3187 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3188 <a name="_sub171" href="#_subfunctions" class="code">function edit_cycle_CreateFcn(hObject, eventdata, handles)</a>
3189 <span class="comment">% hObject    handle to edit_cycle (see GCBO)</span>
3190 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3191 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3192 
3193 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3194 <span class="comment">%       See ISPC and COMPUTER.</span>
3195 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3196     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3197 <span class="keyword">end</span>
3198 
3199 
3200 
3201 <a name="_sub172" href="#_subfunctions" class="code">function edit_courant_total_Callback(hObject, eventdata, handles)</a>
3202 <span class="comment">% hObject    handle to edit_courant_total (see GCBO)</span>
3203 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3204 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3205 
3206 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_courant_total as text</span>
3207 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_courant_total as a double</span>
3208 
3209 
3210 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3211 <a name="_sub173" href="#_subfunctions" class="code">function edit_courant_total_CreateFcn(hObject, eventdata, handles)</a>
3212 <span class="comment">% hObject    handle to edit_courant_total (see GCBO)</span>
3213 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3214 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3215 
3216 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3217 <span class="comment">%       See ISPC and COMPUTER.</span>
3218 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3219     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3220 <span class="keyword">end</span>
3221 
3222 
3223 
3224 <a name="_sub174" href="#_subfunctions" class="code">function lin_canon_spm_Callback(hObject, eventdata, handles)</a>
3225 <span class="comment">% hObject    handle to lin_alim_canon_spm (see GCBO)</span>
3226 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3227 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3228 
3229 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_alim_canon_spm as text</span>
3230 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_alim_canon_spm as a double</span>
3231 
3232 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
3233 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
3234 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>,delay);
3235 
3236 
3237 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3238 <a name="_sub175" href="#_subfunctions" class="code">function lin_canon_spm_CreateFcn(hObject, eventdata, handles)</a>
3239 <span class="comment">% hObject    handle to lin_alim_canon_spm (see GCBO)</span>
3240 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3241 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3242 
3243 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3244 <span class="comment">%       See ISPC and COMPUTER.</span>
3245 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3246     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3247 <span class="keyword">end</span>
3248 
3249 
3250 <a name="_sub176" href="#_subfunctions" class="code">function  uipanel_mode_CreateFcn(hObject, eventdata, handles)</a>
3251 <span class="comment">% hObject    handle to lin_alim_canon_spm (see GCBO)</span>
3252 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3253 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3254 
3255 
3256 <span class="comment">% % % --------------------------------------------------------------------</span>
3257 <span class="comment">% function uipanel_mode_SelectionChangeFcn(hObject, eventdata, handles)</span>
3258 <span class="comment">% % % hObject    handle to uipanel_mode (see GCBO)</span>
3259 <span class="comment">% % % eventdata  reserved - to be defined in a future version of MATLAB</span>
3260 <span class="comment">% % % handles    structure with handles and user data (see GUIDATA)</span>
3261 <span class="comment">%</span>
3262 <span class="comment">% set(handles.button_injection_soft,'Enable','Off')</span>
3263 <span class="comment">% set(handles.edit_modes,'String','Please WAIT !!!!')</span>
3264 <span class="comment">% mode=get(get(handles.uipanel_mode,'SelectedObject'),'Tag');</span>
3265 <span class="comment">%</span>
3266 <span class="comment">% switch mode  % Get Tag of selected object</span>
3267 <span class="comment">%     case 'togglebutton_soft'</span>
3268 <span class="comment">%         % switch to soft (load golden)</span>
3269 <span class="comment">%</span>
3270 <span class="comment">%         Directory=handles.Directory;</span>
3271 <span class="comment">%         DirName=handles.DirName;</span>
3272 <span class="comment">%         file='golden_rafale_soft.mat';</span>
3273 <span class="comment">%         load_synchro_rafale(Directory,file,DirName)</span>
3274 <span class="comment">%</span>
3275 <span class="comment">%</span>
3276 <span class="comment">%         % special septum actif boo et ans</span>
3277 <span class="comment">%         r=(1-0.0004);</span>
3278 <span class="comment">%         try</span>
3279 <span class="comment">%             temp=tango_read_attribute2('BOO-C12/EP/AL_SEP_A.Ext','voltage');boo=temp.value(2)*r</span>
3280 <span class="comment">%             tango_write_attribute2('BOO-C12/EP/AL_SEP_A.Ext','voltage',boo);</span>
3281 <span class="comment">%             temp=tango_read_attribute2('ANS-C01/EP/AL_SEP_A','voltage');ans=temp.value(2)*r</span>
3282 <span class="comment">%             tango_write_attribute2('ANS-C01/EP/AL_SEP_A','voltage',ans);</span>
3283 <span class="comment">%         catch</span>
3284 <span class="comment">%             display('Erreur ajustement tension septa passif')</span>
3285 <span class="comment">%         end</span>
3286 <span class="comment">%         set(handles.edit_Ncoup,'Enable','off');</span>
3287 <span class="comment">%         tango_command_inout('ANS/SY/CENTRAL','SetTables',handles.table0);</span>
3288 <span class="comment">%</span>
3289 <span class="comment">%     case 'togglebutton_3Hz'</span>
3290 <span class="comment">%         % switch to 3Hz(load golden)</span>
3291 <span class="comment">%</span>
3292 <span class="comment">%         Directory=handles.Directory;</span>
3293 <span class="comment">%         DirName=handles.DirName;</span>
3294 <span class="comment">%         file='golden_rafale_3Hz.mat';</span>
3295 <span class="comment">%         load_synchro_rafale(Directory,file,DirName)</span>
3296 <span class="comment">%</span>
3297 <span class="comment">%         % special septum actif boo et ans</span>
3298 <span class="comment">%         r=(1+0.0004);</span>
3299 <span class="comment">%         try</span>
3300 <span class="comment">%             temp=tango_read_attribute2('BOO-C12/EP/AL_SEP_A.Ext','voltage');boo=temp.value(2)*r</span>
3301 <span class="comment">%             tango_write_attribute2('BOO-C12/EP/AL_SEP_A.Ext','voltage',boo);</span>
3302 <span class="comment">%             temp=tango_read_attribute2('ANS-C01/EP/AL_SEP_A','voltage');    ans=temp.value(2)*r</span>
3303 <span class="comment">%             tango_write_attribute2('ANS-C01/EP/AL_SEP_A','voltage',ans);</span>
3304 <span class="comment">%         catch</span>
3305 <span class="comment">%             display('Erreur ajustement tension septa passif')</span>
3306 <span class="comment">%         end</span>
3307 <span class="comment">%         set(handles.edit_Ncoup,'Enable','on');</span>
3308 <span class="comment">%         tango_command_inout('ANS/SY/CENTRAL','SetTables',handles.table);</span>
3309 <span class="comment">% end</span>
3310 <span class="comment">%</span>
3311 <span class="comment">% set(handles.button_injection_soft,'Enable','On')</span>
3312 <span class="comment">% test_modes(handles);</span>
3313 <span class="comment">% display('ok change address')</span>
3314 
3315 
3316 
3317 <a name="_sub177" href="#_subfunctions" class="code">function edit_filling_entrer_bunch1_Callback(hObject, eventdata, handles)</a>
3318 <span class="comment">% hObject    handle to edit_filling_entrer_bunch1 (see GCBO)</span>
3319 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3320 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3321 
3322 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_entrer_bunch1 as text</span>
3323 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_entrer_bunch1 as a double</span>
3324 
3325 
3326 
3327 
3328 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3329 <a name="_sub178" href="#_subfunctions" class="code">function edit_filling_entrer_bunch1_CreateFcn(hObject, eventdata, handles)</a>
3330 <span class="comment">% hObject    handle to edit_filling_entrer_bunch1 (see GCBO)</span>
3331 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3332 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3333 
3334 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3335 <span class="comment">%       See ISPC and COMPUTER.</span>
3336 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3337     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3338 <span class="keyword">end</span>
3339 
3340 
3341 
3342 <a name="_sub179" href="#_subfunctions" class="code">function edit_Imin_Callback(hObject, eventdata, handles)</a>
3343 <span class="comment">% hObject    handle to edit_Imin (see GCBO)</span>
3344 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3345 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3346 
3347 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Imin as text</span>
3348 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Imin as a double</span>
3349 
3350 
3351 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3352 <a name="_sub180" href="#_subfunctions" class="code">function edit_Imin_CreateFcn(hObject, eventdata, handles)</a>
3353 <span class="comment">% hObject    handle to edit_Imin (see GCBO)</span>
3354 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3355 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3356 
3357 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3358 <span class="comment">%       See ISPC and COMPUTER.</span>
3359 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3360     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3361 <span class="keyword">end</span>
3362 
3363 
3364 <span class="comment">% --------------------------------------------------------------------</span>
3365 <a name="_sub181" href="#_subfunctions" class="code">function uipanel_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3366 <span class="comment">% hObject    handle to uipanel_spm_mode (see GCBO)</span>
3367 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3368 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3369 
3370 <span class="comment">%h=get(handles.uipanel_spm_mode);</span>
3371 <span class="comment">%get(h.Children)</span>
3372 
3373 mode=get(get(handles.uipanel_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3374 
3375 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3376     <span class="keyword">case</span> <span class="string">'spm_mode_1'</span>
3377         display(<span class="string">'spm_mode_1'</span>)     
3378         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(1));
3379     <span class="keyword">case</span> <span class="string">'spm_mode_2'</span>
3380         display(<span class="string">'spm_mode_2'</span>)  
3381         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(2));
3382     <span class="keyword">case</span> <span class="string">'spm_mode_2p'</span>
3383         display(<span class="string">'spm_mode_2p'</span>)   
3384         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(3));
3385     <span class="keyword">case</span> <span class="string">'spm_mode_3'</span>
3386         display(<span class="string">'spm_mode_3'</span>)    
3387         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(4));   
3388 <span class="keyword">end</span>
3389 
3390 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3391 
3392 <span class="comment">% --------------------------------------------------------------------</span>
3393 <a name="_sub182" href="#_subfunctions" class="code">function uipanel_lpm_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3394 <span class="comment">% hObject    handle to uipanel_lpm_spm_mode (see GCBO)</span>
3395 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3396 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3397 
3398 
3399 mode=get(get(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3400 <span class="comment">%modeinj=get(get(handles.uipanel_mode,'SelectedObject'),'Tag');</span>
3401 modeinj=<span class="string">'togglebutton_3Hz'</span>;
3402 event0=int32(0);
3403 <span class="keyword">if</span>     strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)
3404     event=int32(5);
3405 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>)
3406     event=int32(2);
3407 <span class="keyword">else</span>
3408     <span class="comment">%%%</span>
3409 <span class="keyword">end</span>
3410 
3411 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3412     <span class="keyword">case</span> <span class="string">'no_mode'</span>
3413         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event0); 
3414         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event0); 
3415         
3416     <span class="keyword">case</span> <span class="string">'lpm_mode'</span>
3417         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event); 
3418         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event0);     
3419         
3420 <span class="comment">%         tango_write_attribute('LT1/AE/CV.2', 'current',  0.058 );</span>
3421 <span class="comment">%         tango_write_attribute('LT1/AE/CV.3', 'current', -0.119 );</span>
3422 
3423     <span class="keyword">case</span> <span class="string">'spm_mode'</span>
3424         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event0); 
3425         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event);   
3426         
3427 <span class="comment">%         tango_write_attribute('LT1/AE/CV.2', 'current',  0.058 );</span>
3428 <span class="comment">%         tango_write_attribute('LT1/AE/CV.3', 'current', -0.119 );</span>
3429         
3430 <span class="keyword">end</span>
3431 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3432 
3433 
3434 
3435 
3436         
3437 
3438 <span class="comment">% --------------------------------------------------------------------</span>
3439 <a name="_sub183" href="#_subfunctions" class="code">function uipanel_central_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3440 <span class="comment">% hObject    handle to uipanel_central_mode (see GCBO)</span>
3441 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3442 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3443 
3444 mode=get(get(handles.uipanel_central_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3445 <span class="comment">%modeinj=get(get(handles.uipanel_mode,'SelectedObject'),'Tag');</span>
3446 modeinj=<span class="string">'togglebutton_3Hz'</span>;
3447 
3448 h=<span class="string">'Yes'</span>;
3449 <span class="keyword">if</span> strcmp(mode,<span class="string">'continuous_mode'</span>)
3450     <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>)
3451         h = questdlg(<span class="string">'Attention, déclenchement continu des équipements sur adresses 1 2 3'</span>);
3452     <span class="keyword">end</span>
3453 <span class="keyword">end</span>
3454 
3455 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3456     <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3457         <span class="keyword">case</span> <span class="string">'burst_mode'</span>
3458             tango_command_inout2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'SetBurstMode'</span>);
3459         <span class="keyword">case</span> <span class="string">'continuous_mode'</span>
3460             tango_command_inout2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'SetContinuousMode'</span>);
3461     <span class="keyword">end</span>
3462 <span class="keyword">end</span>
3463 pause(1)
3464 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3465 
3466 <span class="comment">% [etat_central]=test_central_mode(handles);</span>
3467 <span class="comment">% h='Yes';</span>
3468 <span class="comment">% if strcmp(etat_central,'Continu')</span>
3469 <span class="comment">%     h = questdlg('Attention, Trigger en mode continu');</span>
3470 <span class="comment">% end</span>
3471 <span class="comment">% if strcmp(h,'Yes')</span>
3472 <span class="comment">%     set(handles.button_injection_soft,'Enable','Off')</span>
3473 <span class="comment">%     set(handles.edit_modes,'String','Please WAIT !!!!')</span>
3474 <span class="comment">%     file='golden_rafale_3Hz.mat';</span>
3475 <span class="comment">%     load_synchro_rafale(file)</span>
3476 <span class="comment">%     set(handles.button_injection_soft,'Enable','On')</span>
3477 <span class="comment">%     test_modes(handles);</span>
3478 <span class="comment">% end</span>
3479 
3480 
3481 <a name="_sub184" href="#_subfunctions" class="code">function  [etat]=test_central_mode(handles)</a>
3482 <span class="comment">% Verifie le mode central selectionnÃ©  : rafale ou continue</span>
3483 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'currentMode'</span>);
3484 mode=temp.value;
3485 h=get(handles.uipanel_central_mode);
3486 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3487     <span class="keyword">case</span> <span class="string">'BURST'</span>
3488        set(handles.uipanel_central_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
3489        etat=<span class="string">'Rafale'</span>;
3490     <span class="keyword">case</span> <span class="string">'CONTINUOUS'</span>
3491        set(handles.uipanel_central_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
3492        etat=<span class="string">'Continu'</span>;
3493 <span class="keyword">end</span>
3494 
3495 <a name="_sub185" href="#_subfunctions" class="code">function  [etat]=test_injection_mode(handles)</a>
3496 <span class="comment">% Verifie le mode d'injection selectionnÃ© : soft ou 3Hz</span>
3497 <span class="comment">%temp=tango_read_attribute2('lin_alim/SY/LOCAL.LPM.1', 'spareEvent');</span>
3498 etat=<span class="string">'3Hz'</span>;
3499 
3500 
3501 <a name="_sub186" href="#_subfunctions" class="code">function  [etat]=test_lpm_spm_mode(handles)</a>
3502 <span class="comment">% Verifie le mode selectionnÃ© en SPM ou LPM</span>
3503 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
3504 modelpm=temp.value(1);
3505 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>);
3506 modespm=temp.value(1);
3507 h=get(handles.uipanel_lpm_spm_mode);
3508 <span class="keyword">if</span>     (modelpm==5)&amp;(modespm==0) | (modelpm==2)&amp;(modespm==0)
3509     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
3510     etat=<span class="string">'LPM'</span>;
3511 <span class="keyword">elseif</span> (modelpm==0)&amp;(modespm==5) | (modelpm==0)&amp;(modespm==2)
3512     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
3513     etat=<span class="string">'SPM'</span>;
3514 <span class="keyword">else</span>
3515     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(3))
3516     etat=<span class="string">'NONE'</span>;
3517 <span class="keyword">end</span>
3518 
3519 <a name="_sub187" href="#_subfunctions" class="code">function  [etat]=test_spm_mode(handles)</a>
3520 <span class="comment">% Verifie le mode selectionnÃ© en SPM : 1 2 ou 3 paquets</span>
3521 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>);
3522 mode=temp.value(1);
3523 h=get(handles.uipanel_spm_mode);
3524 select=h.Children(5-mode);
3525 set(handles.uipanel_spm_mode,<span class="string">'SelectedObject'</span>,select)
3526 etat=num2str(5-mode);
3527 
3528 <a name="_sub188" href="#_subfunctions" class="code">function  [etat]=test_cond_inj(handles)</a>
3529 <span class="comment">% Verifie si tir autorise  (Grp fonctionnement)</span>
3530 <span class="keyword">try</span> temp=tango_read_attribute2(<span class="string">'ANS/FC/INJ_COND'</span>, <span class="string">'COND_INJ'</span>); <span class="comment">% 0 no injection,  1 injection</span>
3531     val=temp.value; <span class="keyword">catch</span> val=1 ; <span class="keyword">end</span>; <span class="keyword">if</span> val~=0 ; val=1; <span class="keyword">end</span>;
3532 <span class="keyword">if</span> (val==1)
3533     etat=<span class="string">'TIR AUTORISE'</span>;
3534 <span class="keyword">else</span>
3535     etat=<span class="string">'TIR NON AUTORISE'</span>;
3536 <span class="keyword">end</span>
3537 
3538 
3539 <a name="_sub189" href="#_subfunctions" class="code">function  test_modes(handles)</a>
3540 <span class="comment">% Verifie le mode central selectionnÃ©  : rafale ou continue</span>
3541 [etat_central]=<a href="#_sub184" class="code" title="subfunction  [etat]=test_central_mode(handles)">test_central_mode</a>(handles);
3542 <span class="comment">% Verifie le mode d'injection selectionnÃ© : soft ou 3Hz</span>
3543 [etat_injection]=<a href="#_sub185" class="code" title="subfunction  [etat]=test_injection_mode(handles)">test_injection_mode</a>(handles);
3544 <span class="comment">% Verifie le mode selectionnÃ© en SPM ou LPM</span>
3545 [etat_linac]=<a href="#_sub186" class="code" title="subfunction  [etat]=test_lpm_spm_mode(handles)">test_lpm_spm_mode</a>(handles);
3546 <span class="comment">% Verifie le mode selectionnÃ© en SPM : 1 2 ou 3 paquets</span>
3547 [etat_linac_spm]=<a href="#_sub187" class="code" title="subfunction  [etat]=test_spm_mode(handles)">test_spm_mode</a>(handles);
3548 <span class="comment">% Vérifie si injectio autorisee</span>
3549 <span class="comment">%[etat_inj]=test_cond_inj(handles);</span>
3550 
3551 
3552 <span class="comment">% txt=[etat_inj,'    ####     ', ...</span>
3553 <span class="comment">%      'CENTRAL : ',etat_central,'   #   INJECTION : ',etat_injection,'   #   LINAC : ',etat_linac];</span>
3554 txt=[<span class="string">'CENTRAL : '</span>,etat_central,<span class="string">'   #   INJECTION : '</span>,etat_injection,<span class="string">'   #   LINAC : '</span>,etat_linac];
3555 set(handles.edit_modes,<span class="string">'String'</span>,txt)
3556 
3557 
3558 
3559 <a name="_sub190" href="#_subfunctions" class="code">function edit_modes_Callback(hObject, eventdata, handles)</a>
3560 <span class="comment">% hObject    handle to edit_modes (see GCBO)</span>
3561 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3562 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3563 
3564 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_modes as text</span>
3565 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_modes as a double</span>
3566 
3567 
3568 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3569 <a name="_sub191" href="#_subfunctions" class="code">function edit_modes_CreateFcn(hObject, eventdata, handles)</a>
3570 <span class="comment">% hObject    handle to edit_modes (see GCBO)</span>
3571 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3572 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3573 
3574 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3575 <span class="comment">%       See ISPC and COMPUTER.</span>
3576 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3577     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3578 <span class="keyword">end</span>
3579 
3580 <a name="_sub192" href="#_subfunctions" class="code">function ans_k_pc_Callback(hObject, eventdata, handles)</a>
3581 <span class="comment">% hObject    handle to ans_k_pc (see GCBO)</span>
3582 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3583 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3584 
3585 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_k_pc as text</span>
3586 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_k_pc as a double</span>
3587 
3588 
3589 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3590 <a name="_sub193" href="#_subfunctions" class="code">function ans_k_pc_CreateFcn(hObject, eventdata, handles)</a>
3591 <span class="comment">% hObject    handle to ans_k_pc (see GCBO)</span>
3592 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3593 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3594 
3595 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3596 <span class="comment">%       See ISPC and COMPUTER.</span>
3597 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3598     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3599 <span class="keyword">end</span>
3600 
3601 
3602 
3603 <a name="_sub194" href="#_subfunctions" class="code">function ans_k_h_Callback(hObject, eventdata, handles)</a>
3604 <span class="comment">% hObject    handle to ans_k_h (see GCBO)</span>
3605 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3606 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3607 
3608 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_k_h as text</span>
3609 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_k_h as a double</span>
3610 
3611 
3612 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3613 <a name="_sub195" href="#_subfunctions" class="code">function ans_k_h_CreateFcn(hObject, eventdata, handles)</a>
3614 <span class="comment">% hObject    handle to ans_k_h (see GCBO)</span>
3615 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3616 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3617 
3618 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3619 <span class="comment">%       See ISPC and COMPUTER.</span>
3620 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3621     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3622 <span class="keyword">end</span>
3623 
3624 
3625 
3626 <a name="_sub196" href="#_subfunctions" class="code">function ans_k_v_Callback(hObject, eventdata, handles)</a>
3627 <span class="comment">% hObject    handle to ans_k_v (see GCBO)</span>
3628 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3629 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3630 
3631 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_k_v as text</span>
3632 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_k_v as a double</span>
3633 
3634 
3635 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3636 <a name="_sub197" href="#_subfunctions" class="code">function ans_k_v_CreateFcn(hObject, eventdata, handles)</a>
3637 <span class="comment">% hObject    handle to ans_k_v (see GCBO)</span>
3638 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3639 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3640 
3641 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3642 <span class="comment">%       See ISPC and COMPUTER.</span>
3643 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3644     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3645 <span class="keyword">end</span>
3646 
3647 
3648 <span class="comment">% --- Executes on button press in button_kicker.</span>
3649 <a name="_sub198" href="#_subfunctions" class="code">function button_kicker_Callback(hObject, eventdata, handles)</a>
3650 <span class="comment">% hObject    handle to button_kicker (see GCBO)</span>
3651 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3652 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3653 
3654 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of button_kicker</span>
3655 
3656 bpm=get(hObject,<span class="string">'Value'</span>);
3657 
3658 <span class="keyword">if</span> (bpm==0)
3659    set(handles.uipanel_kicker_machine,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
3660 <span class="keyword">elseif</span> (bpm==1)
3661     set(handles.uipanel_kicker_machine,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
3662 <span class="keyword">end</span>
3663 
3664 
3665 <span class="comment">% --- Executes on button press in button_save_golden_soft.</span>
3666 <a name="_sub199" href="#_subfunctions" class="code">function button_save_golden_soft_Callback(hObject, eventdata, handles)</a>
3667 <span class="comment">% hObject    handle to button_save_golden_soft (see GCBO)</span>
3668 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3669 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3670 h = questdlg(<span class="string">'Attention, sauvegarde nouvelle golden !!!'</span>);
3671 
3672 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3673 
3674     DirName=handles.DirName;
3675     [timing]=<a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>(DirName);
3676     <span class="comment">% sauvegarde</span>
3677     file=<span class="string">'golden_rafale_soft.mat'</span>;
3678     <span class="comment">%Directory =  [getfamilydata('Directory','DataRoot') 'Datatemp'];</span>
3679     Directory=handles.Directory;
3680     pwdold = pwd;
3681     cd(Directory);
3682     save(file, <span class="string">'timing'</span>);
3683     cd(pwdold);
3684 
3685 <span class="keyword">end</span>
3686 
3687 
3688 <span class="comment">% --- Executes on button press in button_load_golden_soft.</span>
3689 <a name="_sub200" href="#_subfunctions" class="code">function button_load_golden_soft_Callback(hObject, eventdata, handles)</a>
3690 <span class="comment">% hObject    handle to button_load_golden_soft (see GCBO)</span>
3691 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3692 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3693 
3694 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3695 set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3696 Directory=handles.Directory;
3697 DirName=handles.DirName;
3698 file=<span class="string">'golden_rafale_soft.mat'</span>;
3699 <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3700 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3701 <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3702 
3703 
3704 <span class="comment">% --- Executes on button press in button_load_golden_3Hz.</span>
3705 <a name="_sub201" href="#_subfunctions" class="code">function button_load_golden_3Hz_Callback(hObject, eventdata, handles)</a>
3706 <span class="comment">% hObject    handle to button_load_golden_3Hz (see GCBO)</span>
3707 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3708 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3709 
3710 [etat_central]=<a href="#_sub184" class="code" title="subfunction  [etat]=test_central_mode(handles)">test_central_mode</a>(handles);
3711 h=<span class="string">'Yes'</span>;
3712 <span class="keyword">if</span> strcmp(etat_central,<span class="string">'Continu'</span>)
3713     h = questdlg(<span class="string">'Attention, Trigger en mode continu'</span>);
3714 <span class="keyword">end</span>
3715 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3716     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3717     set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3718     Directory=handles.Directory;
3719     DirName=handles.DirName;
3720     file=<span class="string">'golden_rafale_3Hz.mat'</span>;
3721     <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3722     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3723     <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3724 <span class="keyword">end</span>
3725 
3726 <span class="comment">% --- Executes on button press in button_save_golden_3Hz.</span>
3727 <a name="_sub202" href="#_subfunctions" class="code">function button_save_golden_3Hz_Callback(hObject, eventdata, handles)</a>
3728 <span class="comment">% hObject    handle to button_save_golden_3Hz (see GCBO)</span>
3729 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3730 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3731 h = questdlg(<span class="string">'Attention, sauvegarde nouvelle golden !!!'</span>);
3732 
3733 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3734     
3735     DirName=handles.DirName;
3736     [timing]=<a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>(DirName);
3737     <span class="comment">% sauvegarde</span>
3738     file=<span class="string">'golden_rafale_3Hz.mat'</span>;
3739     <span class="comment">%Directory =  [getfamilydata('Directory','DataRoot') 'Datatemp'];</span>
3740     Directory=handles.Directory;
3741     pwdold = pwd;
3742     cd(Directory);
3743     save(file, <span class="string">'timing'</span>);
3744     cd(pwdold);
3745 
3746 <span class="keyword">end</span>
3747 
3748 <span class="comment">% --- Executes on button press in button_load_golden_3Hz_66MeV.</span>
3749 <a name="_sub203" href="#_subfunctions" class="code">function button_load_golden_3Hz_66MeV_Callback(hObject, eventdata, handles)</a>
3750 <span class="comment">% hObject    handle to button_load_golden_3Hz_66MeV (see GCBO)</span>
3751 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3752 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3753 [etat_central]=<a href="#_sub184" class="code" title="subfunction  [etat]=test_central_mode(handles)">test_central_mode</a>(handles);
3754 h=<span class="string">'Yes'</span>;
3755 <span class="keyword">if</span> strcmp(etat_central,<span class="string">'Continu'</span>)
3756     h = questdlg(<span class="string">'Attention, Trigger en mode continu'</span>);
3757 <span class="keyword">end</span>
3758 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3759     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3760     set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3761     Directory=handles.Directory;
3762     DirName=handles.DirName;
3763     file=<span class="string">'golden_rafale_3Hz_66MeV.mat'</span>;
3764     <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3765     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3766     <a href="#_sub189" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3767 <span class="keyword">end</span>
3768 
3769 
3770 <span class="comment">% --- Executes on button press in button_save_golden_66MeV.</span>
3771 <a name="_sub204" href="#_subfunctions" class="code">function button_save_golden_66MeV_Callback(hObject, eventdata, handles)</a>
3772 <span class="comment">% hObject    handle to button_save_golden_66MeV (see GCBO)</span>
3773 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3774 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3775 h = questdlg(<span class="string">'Attention, sauvegarde nouvelle golden 66 MeV!!!'</span>);
3776 
3777 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3778 
3779     DirName=handles.DirName;
3780     [timing]=<a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>(DirName);
3781     <span class="comment">% sauvegarde</span>
3782     file=<span class="string">'golden_rafale_3Hz_66MeV.mat'</span>;
3783     <span class="comment">%Directory =  [getfamilydata('Directory','DataRoot') 'Datatemp'];</span>
3784     Directory=handles.Directory;
3785     pwdold = pwd;
3786     cd(Directory);
3787     save(file, <span class="string">'timing'</span>);
3788     cd(pwdold);
3789 
3790 <span class="keyword">end</span>
3791 
3792 
3793 
3794 <a name="_sub205" href="#_subfunctions" class="code">function boo_mrsv_Callback(hObject, eventdata, handles)</a>
3795 <span class="comment">% hObject    handle to boo_mrsv (see GCBO)</span>
3796 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3797 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3798 
3799 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_mrsv as text</span>
3800 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_mrsv as a double</span>
3801 
3802 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
3803 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
3804 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
3805 
3806 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3807 <a name="_sub206" href="#_subfunctions" class="code">function boo_mrsv_CreateFcn(hObject, eventdata, handles)</a>
3808 <span class="comment">% hObject    handle to boo_mrsv (see GCBO)</span>
3809 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3810 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3811 
3812 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3813 <span class="comment">%       See ISPC and COMPUTER.</span>
3814 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3815     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3816 <span class="keyword">end</span>
3817 
3818 
3819 
3820 <a name="_sub207" href="#_subfunctions" class="code">function central_pc_Callback(hObject, eventdata, handles)</a>
3821 <span class="comment">% hObject    handle to central_pc (see GCBO)</span>
3822 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3823 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3824 
3825 <span class="comment">% Hints: get(hObject,'String') returns contents of central_pc as text</span>
3826 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_pc as a double</span>
3827 
3828 
3829 delay=str2double(get(hObject,<span class="string">'String'</span>));
3830 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>,delay);
3831 
3832 
3833 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3834 <a name="_sub208" href="#_subfunctions" class="code">function central_pc_CreateFcn(hObject, eventdata, handles)</a>
3835 <span class="comment">% hObject    handle to central_pc (see GCBO)</span>
3836 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3837 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3838 
3839 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3840 <span class="comment">%       See ISPC and COMPUTER.</span>
3841 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3842     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3843 <span class="keyword">end</span>
3844 
3845 
3846 
3847 <a name="_sub209" href="#_subfunctions" class="code">function lin_alim_Callback(hObject, eventdata, handles)</a>
3848 <span class="comment">% hObject    handle to lin_alim (see GCBO)</span>
3849 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3850 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3851 
3852 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_alim as text</span>
3853 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_alim as a double</span>
3854 
3855 
3856 delay=str2double(get(hObject,<span class="string">'String'</span>));
3857 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'libre.1TimeDelay'</span>,delay);
3858 
3859 
3860 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3861 <a name="_sub210" href="#_subfunctions" class="code">function lin_alim_CreateFcn(hObject, eventdata, handles)</a>
3862 <span class="comment">% hObject    handle to lin_alim (see GCBO)</span>
3863 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3864 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3865 
3866 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3867 <span class="comment">%       See ISPC and COMPUTER.</span>
3868 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3869     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3870 <span class="keyword">end</span>
3871 
3872 
3873 
3874 <a name="_sub211" href="#_subfunctions" class="code">function ans_nod_Callback(hObject, eventdata, handles)</a>
3875 <span class="comment">% hObject    handle to ans_nod (see GCBO)</span>
3876 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3877 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3878 
3879 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_nod as text</span>
3880 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_nod as a double</span>
3881 
3882 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
3883 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
3884 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'perteTimeDelay'</span>,delay);
3885 
3886 
3887 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3888 <a name="_sub212" href="#_subfunctions" class="code">function ans_nod_CreateFcn(hObject, eventdata, handles)</a>
3889 <span class="comment">% hObject    handle to ans_nod (see GCBO)</span>
3890 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3891 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3892 
3893 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3894 <span class="comment">%       See ISPC and COMPUTER.</span>
3895 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3896     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3897 <span class="keyword">end</span>
3898 
3899</pre></div>
<hr><address>Generated on Fri 23-Jul-2010 00:42:07 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>