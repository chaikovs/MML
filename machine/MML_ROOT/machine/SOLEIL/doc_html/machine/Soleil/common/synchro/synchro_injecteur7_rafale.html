<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of synchro_injecteur7_rafale</title>
  <meta name="keywords" content="synchro_injecteur7_rafale">
  <meta name="description" content="SYNCHRO_INJECTEUR7_RAFALE M-file for synchro_injecteur7_rafale.fig">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="#">machine</a> &gt; <a href="#">Soleil</a> &gt; <a href="../index.html">common</a> &gt; <a href="index.html">synchro</a> &gt; synchro_injecteur7_rafale.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for machine/Soleil/common/synchro&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>synchro_injecteur7_rafale
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>SYNCHRO_INJECTEUR7_RAFALE M-file for synchro_injecteur7_rafale.fig</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function varargout = synchro_injecteur7_rafale(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> SYNCHRO_INJECTEUR7_RAFALE M-file for synchro_injecteur7_rafale.fig
      SYNCHRO_INJECTEUR7_RAFALE, by itself, creates a new SYNCHRO_INJECTEUR7_RAFALE or raises the existing
      singleton*.

      H = SYNCHRO_INJECTEUR7_RAFALE returns the handle to a new SYNCHRO_INJECTEUR7_RAFALE or the handle to
      the existing singleton*.

      SYNCHRO_INJECTEUR7_RAFALE('CALLBACK',hObject,eventData,handles,...) calls the local
      function named CALLBACK in SYNCHRO_INJECTEUR7_RAFALE.M with the given input arguments.

      SYNCHRO_INJECTEUR7_RAFALE('Property','Value',...) creates a new SYNCHRO_INJECTEUR7_RAFALE or raises the
      existing singleton*.  Starting from the left, property value pairs are
      applied to the GUI before synchro_injecteur7_rafale_OpeningFunction gets called.  An
      unrecognized property name or invalid value makes property application
      stop.  All inputs are passed to synchro_injecteur7_rafale_OpeningFcn via varargin.

      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one
      instance to run (singleton)&quot;.

 See also: GUIDE, GUIDATA, GUIHANDLES</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>	BUCKETNUMBER - Computes n1 n2 for timing system master board for a bucket</li><li><a href="check_boo_synchro.html" class="code" title="function [flag]=check_boo_synchro">check_boo_synchro</a>	Estime amplitude sur tune synchro</li><li><a href="do_update.html" class="code" title="function do_update">do_update</a>	</li><li><a href="fire_injection.html" class="code" title="function [r1,r2]=fire_injection(handles)">fire_injection</a>	</li><li><a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>	fix premier quart</li><li><a href="get_synchro_address.html" class="code" title="function get_synchro_address(handles)">get_synchro_address</a>	</li><li><a href="get_synchro_delay.html" class="code" title="function get_synchro_delay(handles)">get_synchro_delay</a>	</li><li><a href="get_synchro_delay_nooffset.html" class="code" title="function get_synchro_delay_nooffset(handles)">get_synchro_delay_nooffset</a>	</li><li><a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>	step and address</li><li><a href="get_synchro_trigstatus.html" class="code" title="function get_synchro_trigstatus(handles)">get_synchro_trigstatus</a>	</li><li><a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>	</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function synchro_injecteur7_rafale_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = synchro_injecteur7_rafale_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function boo_alim_dipole_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function boo_alim_dipole_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function boo_alim_qf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function boo_alim_qf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function boo_alim_qd_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function boo_alim_qd_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function boo_alim_sf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function boo_alim_sf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function boo_alim_sd_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function boo_alim_sd_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function boo_rf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function boo_rf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function lin_canon_lpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function lin_canon_lpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function lt1_emittance_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function lt1_emittance_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function lt1_MC1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function lt1_MC1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function lt1_MC2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function lt1_MC2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function lt1_osc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function lt1_osc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function sdc1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function sdc1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function boo_inj_septum_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function boo_inj_septum_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function boo_inj_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function boo_inj_kicker_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function boo_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function boo_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function boo_nod_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function boo_nod_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function boo_dcct_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function boo_dcct_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function lin_canon_spm_fin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function lin_canon_spm_fin_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function central_spare_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function central_spare_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function central_inj_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function central_inj_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function central_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function central_soft_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function button_acquisition_nooffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function button_acquisition_delay_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function button_injection_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function periode_edit_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function periode_edit_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)</a></li><li><a href="#_sub51" class="code">function fonction_alex1(arg1,arg2,hObject,eventdata,handles)</a></li><li><a href="#_sub52" class="code">function fonction_alex2(arg1,arg2,hObject,eventdata,handles)</a></li><li><a href="#_sub53" class="code">function Closinggui(obj, event, handles, figure1)</a></li><li><a href="#_sub54" class="code">function button_softmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function button_softplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function button_injmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function button_injplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function boo_ext_sept_p_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function boo_ext_sept_p_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function boo_ext_dof_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function boo_ext_dof_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function boo_ext_sept_a_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function boo_ext_sept_a_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function boo_ext_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function boo_ext_kicker_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function ans_inj_sept_p_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function ans_inj_sept_p_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function ans_inj_sept_a_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function ans_inj_sept_a_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function ans_inj_k1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function ans_inj_k1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function ans_inj_k2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function ans_inj_k2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function ans_inj_k3_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function ans_inj_k3_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function ans_inj_k4_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function ans_inj_k4_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function ans_dcct_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function ans_dcct_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function ans_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function ans_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function central_ext_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function central_ext_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function central_soft1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function central_soft1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function button_extmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function button_extplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function sdc2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function sdc2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function lt2_emittance_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function lt2_emittance_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub92" class="code">function lt2_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub93" class="code">function lt2_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub94" class="code">function lt2_osc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub95" class="code">function lt2_osc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub96" class="code">function lin_modulateur_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub97" class="code">function lin_modulateur_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub98" class="code">function inj_offset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub99" class="code">function inj_offset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub100" class="code">function ext_offset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub101" class="code">function ext_offset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub102" class="code">function button_acquisition_address_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub103" class="code">function button_offinj_moins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub104" class="code">function button_offinj_plus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub105" class="code">function button_offext_moins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub106" class="code">function button_offext_plus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub107" class="code">function button_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub108" class="code">function ans_bpm_c01_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub109" class="code">function ans_bpm_c01_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub110" class="code">function ans_bpm_c02_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub111" class="code">function ans_bpm_c02_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub112" class="code">function ans_bpm_c03_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub113" class="code">function ans_bpm_c03_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub114" class="code">function ans_bpm_c04_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub115" class="code">function ans_bpm_c04_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub116" class="code">function ans_bpm_c05_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub117" class="code">function ans_bpm_c05_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub118" class="code">function ans_bpm_c06_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub119" class="code">function ans_bpm_c06_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub120" class="code">function ans_bpm_c07_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub121" class="code">function ans_bpm_c07_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub122" class="code">function ans_bpm_c08_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub123" class="code">function ans_bpm_c08_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub124" class="code">function ans_bpm_c09_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub125" class="code">function ans_bpm_c09_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub126" class="code">function ans_bpm_c10_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub127" class="code">function ans_bpm_c10_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub128" class="code">function ans_bpm_c11_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub129" class="code">function ans_bpm_c11_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub130" class="code">function ans_bpm_c12_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub131" class="code">function ans_bpm_c12_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub132" class="code">function ans_bpm_c13_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub133" class="code">function ans_bpm_c13_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub134" class="code">function ans_bpm_c14_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub135" class="code">function ans_bpm_c14_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub136" class="code">function ans_bpm_c15_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub137" class="code">function ans_bpm_c15_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub138" class="code">function ans_bpm_c16_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub139" class="code">function ans_bpm_c16_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub140" class="code">function edit_filling_relecture_tables_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub141" class="code">function edit_filling_relecture_tables_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub142" class="code">function edit_filling_relecture_bunch_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub143" class="code">function edit_filling_relecture_bunch_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub144" class="code">function edit_filling_entrer_bunch_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub145" class="code">function edit_filling_entrer_bunch_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub146" class="code">function button_update_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub147" class="code">function button_acquisition_trigstatus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub148" class="code">function togglebutton2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub149" class="code">function listbox_fillingmode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub150" class="code">function listbox_fillingmode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub151" class="code">function button_fix_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub152" class="code">function edit_Ncycle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub153" class="code">function edit_Ncycle_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub154" class="code">function edit_Ncoup_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub155" class="code">function edit_Ncoup_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub156" class="code">function edit_qlt1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub157" class="code">function edit_qlt1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub158" class="code">function edit_iboo_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub159" class="code">function edit_iboo_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub160" class="code">function edit_dians_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub161" class="code">function edit_dians_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub162" class="code">function edit_rlt1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub163" class="code">function edit_rlt1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub164" class="code">function edit_rboo_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub165" class="code">function edit_rboo_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub166" class="code">function edit_rans_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub167" class="code">function edit_rans_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub168" class="code">function edit_dians1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub169" class="code">function edit_dians1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub170" class="code">function edit_cycle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub171" class="code">function edit_cycle_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub172" class="code">function edit_courant_total_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub173" class="code">function edit_courant_total_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub174" class="code">function lin_canon_spm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub175" class="code">function lin_canon_spm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub176" class="code">function  uipanel_mode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub177" class="code">function uipanel_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub178" class="code">function edit_filling_entrer_bunch1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub179" class="code">function edit_filling_entrer_bunch1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub180" class="code">function edit_Imin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub181" class="code">function edit_Imin_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub182" class="code">function uipanel_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub183" class="code">function uipanel_lpm_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub184" class="code">function uipanel_central_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub185" class="code">function  [etat]=test_central_mode(handles)</a></li><li><a href="#_sub186" class="code">function  [etat]=test_injection_mode(handles)</a></li><li><a href="#_sub187" class="code">function  [etat]=test_lpm_spm_mode(handles)</a></li><li><a href="#_sub188" class="code">function  [etat]=test_spm_mode(handles)</a></li><li><a href="#_sub189" class="code">function  [etat]=test_cond_inj(handles)</a></li><li><a href="#_sub190" class="code">function  test_modes(handles)</a></li><li><a href="#_sub191" class="code">function edit_modes_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub192" class="code">function edit_modes_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub193" class="code">function ans_k_pc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub194" class="code">function ans_k_pc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub195" class="code">function ans_k_h_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub196" class="code">function ans_k_h_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub197" class="code">function ans_k_v_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub198" class="code">function ans_k_v_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub199" class="code">function button_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub200" class="code">function button_save_golden_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub201" class="code">function button_load_golden_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub202" class="code">function button_load_golden_3Hz_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub203" class="code">function button_save_golden_3Hz_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub204" class="code">function button_load_golden_3Hz_66MeV_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub205" class="code">function button_save_golden_66MeV_Callback(hObject, eventdata, handles)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = synchro_injecteur7_rafale(varargin)</a>
0002 <span class="comment">% SYNCHRO_INJECTEUR7_RAFALE M-file for synchro_injecteur7_rafale.fig</span>
0003 <span class="comment">%      SYNCHRO_INJECTEUR7_RAFALE, by itself, creates a new SYNCHRO_INJECTEUR7_RAFALE or raises the existing</span>
0004 <span class="comment">%      singleton*.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">%      H = SYNCHRO_INJECTEUR7_RAFALE returns the handle to a new SYNCHRO_INJECTEUR7_RAFALE or the handle to</span>
0007 <span class="comment">%      the existing singleton*.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%      SYNCHRO_INJECTEUR7_RAFALE('CALLBACK',hObject,eventData,handles,...) calls the local</span>
0010 <span class="comment">%      function named CALLBACK in SYNCHRO_INJECTEUR7_RAFALE.M with the given input arguments.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%      SYNCHRO_INJECTEUR7_RAFALE('Property','Value',...) creates a new SYNCHRO_INJECTEUR7_RAFALE or raises the</span>
0013 <span class="comment">%      existing singleton*.  Starting from the left, property value pairs are</span>
0014 <span class="comment">%      applied to the GUI before synchro_injecteur7_rafale_OpeningFunction gets called.  An</span>
0015 <span class="comment">%      unrecognized property name or invalid value makes property application</span>
0016 <span class="comment">%      stop.  All inputs are passed to synchro_injecteur7_rafale_OpeningFcn via varargin.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">%      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one</span>
0019 <span class="comment">%      instance to run (singleton)&quot;.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% See also: GUIDE, GUIDATA, GUIHANDLES</span>
0022 
0023 <span class="comment">% For the compiler</span>
0024 <span class="comment">%#function aoinit setao setoperationalmode</span>
0025 <span class="comment">%#function boosterinit</span>
0026 <span class="comment">%#function magnetcoefficients</span>
0027 <span class="comment">%</span>
0028 
0029 <span class="comment">% Edit the above text to modify the response to help synchro_injecteur7_rafale</span>
0030 
0031 <span class="comment">% Last Modified by GUIDE v2.5 02-Oct-2008 16:05:52</span>
0032 
0033 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0034 gui_Singleton = 1;
0035 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0036                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0037                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction synchro_injecteur7_rafale_OpeningFcn(hObject, eventdata, handles, varargin)">synchro_injecteur7_rafale_OpeningFcn</a>, <span class="keyword">...</span>
0038                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = synchro_injecteur7_rafale_OutputFcn(hObject, eventdata, handles)">synchro_injecteur7_rafale_OutputFcn</a>, <span class="keyword">...</span>
0039                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0040                    <span class="string">'gui_Callback'</span>,   []);
0041 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0042     gui_State.gui_Callback = str2func(varargin{1});
0043 <span class="keyword">end</span>
0044 
0045 <span class="keyword">if</span> nargout
0046     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0047 <span class="keyword">else</span>
0048     gui_mainfcn(gui_State, varargin{:});
0049 <span class="keyword">end</span>
0050 <span class="comment">% End initialization code - DO NOT EDIT</span>
0051 
0052 
0053 <span class="comment">% --- Executes just before synchro_injecteur7_rafale is made visible.</span>
0054 <a name="_sub1" href="#_subfunctions" class="code">function synchro_injecteur7_rafale_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0055 <span class="comment">% This function has no output args, see OutputFcn.</span>
0056 <span class="comment">% hObject    handle to figure</span>
0057 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0058 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0059 <span class="comment">% varargin   command line arguments to synchro_injecteur7_rafale (see VARARGIN)</span>
0060 
0061 <span class="comment">% Choose default command line output for synchro_injecteur7_rafale</span>
0062 handles.output = hObject;
0063 
0064 <span class="comment">% list les devices annexe pour etat</span>
0065 fprintf(<span class="string">'Liste devices annexes \n'</span>);
0066 <span class="comment">% name={'ANS-C03/DG/DCCT','LT1/DG/MC','BOO-C01/DG/DCCT',...</span>
0067 <span class="comment">%     'ANS/DG/PUB-FillingMode', 'ANS/FC/INJ_COND'};</span>
0068 name={<span class="string">'ANS/DG/DCCT-CTRL'</span>,<span class="string">'LT1/DG/MC'</span>,<span class="string">'BOO-C01/DG/DCCT'</span>,<span class="keyword">...</span>
0069     <span class="string">'ANS/DG/PUB-FillingMode'</span>, <span class="string">'ANS/FC/INJ_COND'</span>};
0070 <span class="keyword">for</span> i=1:4
0071     <span class="keyword">try</span>
0072         txt=tango_command_inout2(name{2},<span class="string">'State'</span>);
0073         <span class="comment">%temp=tango_read_attribute(name{i},'State');</span>
0074         <span class="comment">%temp=tango_read_attribute(name{i},'Status');txt=temp.value;</span>
0075     <span class="keyword">catch</span>
0076         txt=<span class="string">'bug_device'</span>;
0077     <span class="keyword">end</span>
0078     fprintf(<span class="string">'%s   :   %s \n'</span>,name{i},txt);
0079 <span class="keyword">end</span>
0080 
0081 <span class="comment">% Added by Laurent</span>
0082 <span class="keyword">if</span> isdeployed
0083     cd(getenv(<span class="string">'MLROOT'</span>)); 
0084     setpathsoleil(<span class="string">'Booster'</span>); 
0085 <span class="keyword">end</span>
0086 <span class="comment">% End</span>
0087 
0088 <span class="comment">% Directories</span>
0089 <span class="comment">%Directory='/home/matlabML/measdata/SOLEIL/Boosterdata/Datatemp'; % ALEX</span>
0090 Directory =  [getfamilydata(<span class="string">'Directory'</span>,<span class="string">'DataRoot'</span>) <span class="string">'../Boosterdata/Datatemp'</span>]; <span class="comment">% Laurent</span>
0091 handles.Directory=Directory;  <span class="comment">% for saved data</span>
0092 
0093 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin');</span>
0094 <span class="comment">% DirName ='/home/matlabML/machine/SOLEIL/common/synchro/'; % ALEX</span>
0095 DirName = getfamilydata(<span class="string">'Directory'</span>, <span class="string">'Synchro'</span>); <span class="comment">% Laurent</span>
0096 handles.DirName=DirName;      <span class="comment">% for offset &amp; table</span>
0097 
0098 <span class="comment">% Charge les offset</span>
0099 FileName = [DirName <span class="string">'synchro_offset_lin'</span>];
0100 fprintf(<span class="string">'Laurent:%s\n'</span>, FileName');
0101 load(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0102 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
0103 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
0104 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
0105 <span class="comment">% Periode linac fin</span>
0106 handles.lin_fin_step=0.090;                   <span class="comment">% En ns  (90 ps)</span>
0107 handles.one_bunch=2.84/handles.lin_fin_step;  <span class="comment">% Nombre de pas pour sauter un paquet</span>
0108 
0109 <span class="comment">% Periode du trigger par defaut = 10 s</span>
0110 handles.periode = 10;
0111 set(handles.periode_edit,<span class="string">'String'</span>,num2str(handles.periode));
0112 set(handles.edit_Ncycle,<span class="string">'String'</span>,num2str(1));
0113 set(handles.edit_Ncoup,<span class="string">'String'</span>,1.0);
0114 
0115 <span class="comment">%Memorise les dÃ©lais spare et soft initiaux</span>
0116 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprStepDelay'</span>);
0117 clk1=temp.value(1);
0118 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
0119 clk2=temp.value(1);
0120 
0121 <span class="comment">%Stocke les sauts pour les 4 quarts mode LPM</span>
0122 jump=int32([0 39 26 13]);
0123 handles.clk_spare  =jump +  int32(clk1);
0124 handles.clk_soft=jump  + int32(clk2);
0125 handles.quart=1;
0126 
0127 <span class="comment">% Table initiale sur paquet 1</span>
0128 bunch=[1];
0129 [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);
0130 offset_linac=lin_fin/handles.lin_fin_step; 
0131 bjump=handles.one_bunch;
0132 dpaquet=dpaquet*bjump+offset_linac;
0133 handles.table=int32([length(bunch) dtour dpaquet]);
0134 handles.table0=handles.table;
0135 handles.bunch=bunch;
0136 
0137 handles.mode = <span class="string">'Mode=???'</span>;
0138 set(handles.edit_filling_relecture_tables,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0139 set(handles.edit_filling_relecture_bunch,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0140 
0141 <span class="comment">% Verifie le mode selectionnÃ© en SPM ou LPM</span>
0142 <span class="comment">% Verifie le mode central selectionnÃ©  : rafale ou continue</span>
0143 <span class="comment">% Verifie le mode selectionnÃ© en SPM : 1 2 ou 3 paquets</span>
0144 <span class="comment">% Verifie le mode d'injection selectionnÃ© : soft ou 3Hz</span>
0145 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
0146 
0147 
0148 <span class="comment">% Choix des events</span>
0149 handles.event0 =int32(0);
0150 handles.event00=int32(100);  <span class="comment">%SpÃ©ciale EP</span>
0151 
0152 <span class="comment">% Cache le tableau des dÃ©lais BPM</span>
0153 set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0154 set(handles.uipanel_kicker_machine,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0155 
0156 <span class="comment">% text affichage</span>
0157 handles.txt_inj=  <span class="string">' INJECTION AUTOMATIQUE EN COURS '</span>; <span class="comment">% txt injection auto en cours</span>
0158 handles.txt_noinj=<span class="string">' INJECTION INTERDITE '</span>;            <span class="comment">% txt injection non autorise (Grp fonctionnement)</span>
0159 
0160 <span class="comment">% Publisher - fonctionnement (gere sur injection en boucle)</span>
0161 tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(0))         <span class="comment">% flag injection auto</span>
0162 tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'courant_consigne'</span>,uint8(0))  <span class="comment">% flag courant consigne atteint</span>
0163   
0164 <span class="comment">% tango parser ANS/FC/INJ_COND</span>
0165 <span class="comment">% temp=tango_read_attribute2('ANS/FC/INJ_COND', 'COND_INJ');</span>
0166 <span class="comment">% handles.cond_inj=temp.value;   % 0 no injection,  1 injection</span>
0167 <span class="comment">% try temp=tango_read_attribute2('ANS/FC/INJ_COND', 'COND_INJ'); % 0 no injection,  1 injection</span>
0168 <span class="comment">% val=temp.value; catch val=1 ; end ; if val~=0 ; val=1; end;</span>
0169 <span class="comment">% handles.cond_inj=val;</span>
0170 
0171 
0172 <span class="comment">% Fonction timer pour injection en boucle</span>
0173 <span class="comment">% Creates timer Infinite loop</span>
0174 timer2=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
0175     <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,3,<span class="string">'TasksToExecute'</span>,Inf);
0176 timer2.TimerFcn = {@<a href="#_sub52" class="code" title="subfunction fonction_alex2(arg1,arg2,hObject,eventdata,handles)">fonction_alex2</a>, hObject,eventdata, handles};
0177 setappdata(handles.figure1,<span class="string">'Timer2'</span>,timer2);
0178 
0179 <span class="comment">% Creates timer Infinite loop</span>
0180 timer1=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
0181     <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,handles.periode,<span class="string">'TasksToExecute'</span>,Inf);
0182 timer1.TimerFcn = {@<a href="#_sub51" class="code" title="subfunction fonction_alex1(arg1,arg2,hObject,eventdata,handles)">fonction_alex1</a>, hObject,eventdata, handles};
0183 setappdata(handles.figure1,<span class="string">'Timer1'</span>,timer1);
0184 
0185 <span class="comment">% button group sur on/off timer du trigger</span>
0186 h = uibuttongroup(<span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="string">'Position'</span>,[0.141 0.37 0.11 0.14],<span class="keyword">...</span>
0187     <span class="string">'Title'</span>,<span class="string">''</span>,<span class="string">'TitlePosition'</span>,<span class="string">'centertop'</span>,<span class="keyword">...</span>
0188     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0189 u1 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' OFF'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton1'</span>,<span class="keyword">...</span>
0190     <span class="string">'pos'</span>,[05 85 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0191     <span class="string">'BackgroundColor'</span>,[1 0.3 0  ]);
0192 u2 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' Laps :'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton2'</span>,<span class="keyword">...</span>
0193     <span class="string">'pos'</span>,[05 45 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0194     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0195 u3 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' Imin :'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton3'</span>,<span class="keyword">...</span>
0196     <span class="string">'pos'</span>,[05 05 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0197     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0198 
0199 set(h,<span class="string">'SelectionChangeFcn'</span>,<span class="keyword">...</span>
0200     {@<a href="#_sub50" class="code" title="subfunction uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)">uibuttongroup_SelectionChangeFcn</a>,handles});
0201 
0202 handles.off = u1;
0203 handles.on1 = u2;
0204 handles.on2 = u3;
0205 
0206 set(h,<span class="string">'SelectedObject'</span>,u1); 
0207 set(h,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
0208 
0209 <span class="comment">%% Set closing gui function</span>
0210 set(handles.figure1,<span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub53" class="code" title="subfunction Closinggui(obj, event, handles, figure1)">Closinggui</a>,timer1,handles.figure1});
0211 set(handles.figure1,<span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub53" class="code" title="subfunction Closinggui(obj, event, handles, figure1)">Closinggui</a>,timer2,handles.figure1});
0212 
0213 
0214 <span class="comment">% Update handles structure</span>
0215 guidata(hObject, handles);
0216 
0217 <span class="comment">% UIWAIT makes synchro_injecteur7_rafale wait for user response (see UIRESUME)</span>
0218 <span class="comment">% uiwait(handles.figure1);</span>
0219 
0220 
0221 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0222 <a name="_sub2" href="#_subfunctions" class="code">function varargout = synchro_injecteur7_rafale_OutputFcn(hObject, eventdata, handles) </a>
0223 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0224 <span class="comment">% hObject    handle to figure</span>
0225 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0226 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0227 
0228 <span class="comment">% Get default command line output from handles structure</span>
0229 varargout{1} = handles.output;
0230 
0231 
0232 
0233 <a name="_sub3" href="#_subfunctions" class="code">function boo_alim_dipole_Callback(hObject, eventdata, handles)</a>
0234 <span class="comment">% hObject    handle to boo_alim_dipole (see GCBO)</span>
0235 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0236 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0237 
0238 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_dipole as text</span>
0239 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_dipole as a double</span>
0240 <span class="comment">%h=gcf</span>
0241 delay=str2double(get(hObject,<span class="string">'String'</span>));
0242 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpTimeDelay'</span>,delay);
0243 
0244 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0245 <a name="_sub4" href="#_subfunctions" class="code">function boo_alim_dipole_CreateFcn(hObject, eventdata, handles)</a>
0246 <span class="comment">% hObject    handle to boo_alim_dipole (see GCBO)</span>
0247 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0248 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0249 
0250 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0251 <span class="comment">%       See ISPC and COMPUTER.</span>
0252 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0253     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0254 <span class="keyword">end</span>
0255 
0256 
0257 <a name="_sub5" href="#_subfunctions" class="code">function boo_alim_qf_Callback(hObject, eventdata, handles)</a>
0258 <span class="comment">% hObject    handle to boo_alim_qf (see GCBO)</span>
0259 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0260 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0261 
0262 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_qf as text</span>
0263 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_qf as a double</span>
0264 
0265 delay=str2double(get(hObject,<span class="string">'String'</span>));
0266 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfTimeDelay'</span>,delay);
0267 
0268 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0269 <a name="_sub6" href="#_subfunctions" class="code">function boo_alim_qf_CreateFcn(hObject, eventdata, handles)</a>
0270 <span class="comment">% hObject    handle to boo_alim_qf (see GCBO)</span>
0271 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0272 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0273 
0274 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0275 <span class="comment">%       See ISPC and COMPUTER.</span>
0276 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0277     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0278 <span class="keyword">end</span>
0279 
0280 
0281 
0282 <a name="_sub7" href="#_subfunctions" class="code">function boo_alim_qd_Callback(hObject, eventdata, handles)</a>
0283 <span class="comment">% hObject    handle to boo_alim_qd (see GCBO)</span>
0284 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0285 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0286 
0287 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_qd as text</span>
0288 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_qd as a double</span>
0289 
0290 delay=str2double(get(hObject,<span class="string">'String'</span>));
0291 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdTimeDelay'</span>,delay);
0292 
0293 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0294 <a name="_sub8" href="#_subfunctions" class="code">function boo_alim_qd_CreateFcn(hObject, eventdata, handles)</a>
0295 <span class="comment">% hObject    handle to boo_alim_qd (see GCBO)</span>
0296 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0297 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0298 
0299 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0300 <span class="comment">%       See ISPC and COMPUTER.</span>
0301 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0302     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0303 <span class="keyword">end</span>
0304 
0305 
0306 
0307 <a name="_sub9" href="#_subfunctions" class="code">function boo_alim_sf_Callback(hObject, eventdata, handles)</a>
0308 <span class="comment">% hObject    handle to boo_alim_sf (see GCBO)</span>
0309 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0310 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0311 
0312 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_sf as text</span>
0313 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_sf as a double</span>
0314 
0315 delay=str2double(get(hObject,<span class="string">'String'</span>));
0316 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfTimeDelay'</span>,delay);
0317 
0318 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0319 <a name="_sub10" href="#_subfunctions" class="code">function boo_alim_sf_CreateFcn(hObject, eventdata, handles)</a>
0320 <span class="comment">% hObject    handle to boo_alim_sf (see GCBO)</span>
0321 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0322 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0323 
0324 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0325 <span class="comment">%       See ISPC and COMPUTER.</span>
0326 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0327     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0328 <span class="keyword">end</span>
0329 
0330 
0331 
0332 <a name="_sub11" href="#_subfunctions" class="code">function boo_alim_sd_Callback(hObject, eventdata, handles)</a>
0333 <span class="comment">% hObject    handle to boo_alim_sd (see GCBO)</span>
0334 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0335 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0336 
0337 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_sd as text</span>
0338 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_sd as a double</span>
0339 
0340 delay=str2double(get(hObject,<span class="string">'String'</span>));
0341 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdTimeDelay'</span>,delay);
0342 
0343 
0344 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0345 <a name="_sub12" href="#_subfunctions" class="code">function boo_alim_sd_CreateFcn(hObject, eventdata, handles)</a>
0346 <span class="comment">% hObject    handle to boo_alim_sd (see GCBO)</span>
0347 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0348 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0349 
0350 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0351 <span class="comment">%       See ISPC and COMPUTER.</span>
0352 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0353     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0354 <span class="keyword">end</span>
0355 
0356 
0357 
0358 <a name="_sub13" href="#_subfunctions" class="code">function boo_rf_Callback(hObject, eventdata, handles)</a>
0359 <span class="comment">% hObject    handle to boo_rf (see GCBO)</span>
0360 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0361 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0362 
0363 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_rf as text</span>
0364 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_rf as a double</span>
0365 
0366 delay=str2double(get(hObject,<span class="string">'String'</span>));
0367 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfTimeDelay'</span>,delay);
0368 
0369 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0370 <a name="_sub14" href="#_subfunctions" class="code">function boo_rf_CreateFcn(hObject, eventdata, handles)</a>
0371 <span class="comment">% hObject    handle to boo_rf (see GCBO)</span>
0372 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0373 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0374 
0375 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0376 <span class="comment">%       See ISPC and COMPUTER.</span>
0377 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0378     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0379 <span class="keyword">end</span>
0380 
0381 
0382 
0383 <a name="_sub15" href="#_subfunctions" class="code">function lin_canon_lpm_Callback(hObject, eventdata, handles)</a>
0384 <span class="comment">% hObject    handle to lin_canon_lpm (see GCBO)</span>
0385 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0386 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0387 
0388 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_canon_lpm as text</span>
0389 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_canon_lpm as a double</span>
0390 
0391 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0392 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0393 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>,delay);
0394 
0395 
0396 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0397 <a name="_sub16" href="#_subfunctions" class="code">function lin_canon_lpm_CreateFcn(hObject, eventdata, handles)</a>
0398 <span class="comment">% hObject    handle to lin_canon_lpm (see GCBO)</span>
0399 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0400 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0401 
0402 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0403 <span class="comment">%       See ISPC and COMPUTER.</span>
0404 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0405     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0406 <span class="keyword">end</span>
0407 
0408 
0409 
0410 <a name="_sub17" href="#_subfunctions" class="code">function lt1_emittance_Callback(hObject, eventdata, handles)</a>
0411 <span class="comment">% hObject    handle to lt1_emittance (see GCBO)</span>
0412 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0413 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0414 
0415 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_emittance as text</span>
0416 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_emittance as a double</span>
0417 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0418 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0419 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
0420 
0421 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0422 <a name="_sub18" href="#_subfunctions" class="code">function lt1_emittance_CreateFcn(hObject, eventdata, handles)</a>
0423 <span class="comment">% hObject    handle to lt1_emittance (see GCBO)</span>
0424 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0425 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0426 
0427 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0428 <span class="comment">%       See ISPC and COMPUTER.</span>
0429 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0430     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0431 <span class="keyword">end</span>
0432 
0433 
0434 
0435 <a name="_sub19" href="#_subfunctions" class="code">function lt1_MC1_Callback(hObject, eventdata, handles)</a>
0436 <span class="comment">% hObject    handle to lt1_MC1 (see GCBO)</span>
0437 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0438 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0439 
0440 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_MC1 as text</span>
0441 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_MC1 as a double</span>
0442 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0443 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0444 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>,delay);
0445 
0446 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0447 <a name="_sub20" href="#_subfunctions" class="code">function lt1_MC1_CreateFcn(hObject, eventdata, handles)</a>
0448 <span class="comment">% hObject    handle to lt1_MC1 (see GCBO)</span>
0449 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0450 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0451 
0452 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0453 <span class="comment">%       See ISPC and COMPUTER.</span>
0454 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0455     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0456 <span class="keyword">end</span>
0457 
0458 
0459 
0460 <a name="_sub21" href="#_subfunctions" class="code">function lt1_MC2_Callback(hObject, eventdata, handles)</a>
0461 <span class="comment">% hObject    handle to lt1_MC2 (see GCBO)</span>
0462 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0463 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0464 
0465 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_MC2 as text</span>
0466 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_MC2 as a double</span>
0467 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0468 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0469 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>,delay);
0470 
0471 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0472 <a name="_sub22" href="#_subfunctions" class="code">function lt1_MC2_CreateFcn(hObject, eventdata, handles)</a>
0473 <span class="comment">% hObject    handle to lt1_MC2 (see GCBO)</span>
0474 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0475 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0476 
0477 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0478 <span class="comment">%       See ISPC and COMPUTER.</span>
0479 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0480     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0481 <span class="keyword">end</span>
0482 
0483 
0484 
0485 <a name="_sub23" href="#_subfunctions" class="code">function lt1_osc_Callback(hObject, eventdata, handles)</a>
0486 <span class="comment">% hObject    handle to lt1_osc (see GCBO)</span>
0487 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0488 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0489 
0490 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_osc as text</span>
0491 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_osc as a double</span>
0492 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0493 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0494 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
0495 
0496 
0497 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0498 <a name="_sub24" href="#_subfunctions" class="code">function lt1_osc_CreateFcn(hObject, eventdata, handles)</a>
0499 <span class="comment">% hObject    handle to lt1_osc (see GCBO)</span>
0500 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0501 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0502 
0503 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0504 <span class="comment">%       See ISPC and COMPUTER.</span>
0505 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0506     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0507 <span class="keyword">end</span>
0508 
0509 
0510 
0511 <a name="_sub25" href="#_subfunctions" class="code">function sdc1_Callback(hObject, eventdata, handles)</a>
0512 <span class="comment">% hObject    handle to sdc1 (see GCBO)</span>
0513 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0514 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0515 
0516 <span class="comment">% Hints: get(hObject,'String') returns contents of sdc1 as text</span>
0517 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sdc1 as a double</span>
0518 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0519 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0520 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
0521 
0522 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0523 <a name="_sub26" href="#_subfunctions" class="code">function sdc1_CreateFcn(hObject, eventdata, handles)</a>
0524 <span class="comment">% hObject    handle to sdc1 (see GCBO)</span>
0525 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0526 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0527 
0528 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0529 <span class="comment">%       See ISPC and COMPUTER.</span>
0530 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0531     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0532 <span class="keyword">end</span>
0533 
0534 
0535 
0536 <a name="_sub27" href="#_subfunctions" class="code">function boo_inj_septum_Callback(hObject, eventdata, handles)</a>
0537 <span class="comment">% hObject    handle to boo_inj_septum (see GCBO)</span>
0538 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0539 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0540 
0541 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_inj_septum as text</span>
0542 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_inj_septum as a double</span>
0543 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0544 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0545 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
0546 
0547 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0548 <a name="_sub28" href="#_subfunctions" class="code">function boo_inj_septum_CreateFcn(hObject, eventdata, handles)</a>
0549 <span class="comment">% hObject    handle to boo_inj_septum (see GCBO)</span>
0550 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0551 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0552 
0553 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0554 <span class="comment">%       See ISPC and COMPUTER.</span>
0555 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0556     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0557 <span class="keyword">end</span>
0558 
0559 
0560 
0561 <a name="_sub29" href="#_subfunctions" class="code">function boo_inj_kicker_Callback(hObject, eventdata, handles)</a>
0562 <span class="comment">% hObject    handle to boo_inj_kicker (see GCBO)</span>
0563 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0564 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0565 
0566 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_inj_kicker as text</span>
0567 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_inj_kicker as a double</span>
0568 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0569 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0570 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
0571 
0572 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0573 <a name="_sub30" href="#_subfunctions" class="code">function boo_inj_kicker_CreateFcn(hObject, eventdata, handles)</a>
0574 <span class="comment">% hObject    handle to boo_inj_kicker (see GCBO)</span>
0575 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0576 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0577 
0578 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0579 <span class="comment">%       See ISPC and COMPUTER.</span>
0580 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0581     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0582 <span class="keyword">end</span>
0583 
0584 
0585 
0586 <a name="_sub31" href="#_subfunctions" class="code">function boo_bpm_Callback(hObject, eventdata, handles)</a>
0587 <span class="comment">% hObject    handle to boo_bpm (see GCBO)</span>
0588 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0589 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0590 
0591 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_bpm as text</span>
0592 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_bpm as a double</span>
0593 
0594 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0595 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0596 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>,delay);
0597 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigTimeDelay'</span>,delay);
0598 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigTimeDelay'</span>,delay);
0599 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigTimeDelay'</span>,delay);
0600 
0601 
0602 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0603 <a name="_sub32" href="#_subfunctions" class="code">function boo_bpm_CreateFcn(hObject, eventdata, handles)</a>
0604 <span class="comment">% hObject    handle to boo_bpm (see GCBO)</span>
0605 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0606 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0607 
0608 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0609 <span class="comment">%       See ISPC and COMPUTER.</span>
0610 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0611     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0612 <span class="keyword">end</span>
0613 
0614 
0615 
0616 <a name="_sub33" href="#_subfunctions" class="code">function boo_nod_Callback(hObject, eventdata, handles)</a>
0617 <span class="comment">% hObject    handle to boo_nod (see GCBO)</span>
0618 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0619 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0620 
0621 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_nod as text</span>
0622 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_nod as a double</span>
0623 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0624 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0625 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>,delay);
0626 
0627 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0628 <a name="_sub34" href="#_subfunctions" class="code">function boo_nod_CreateFcn(hObject, eventdata, handles)</a>
0629 <span class="comment">% hObject    handle to boo_nod (see GCBO)</span>
0630 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0631 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0632 
0633 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0634 <span class="comment">%       See ISPC and COMPUTER.</span>
0635 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0636     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0637 <span class="keyword">end</span>
0638 
0639 
0640 
0641 <a name="_sub35" href="#_subfunctions" class="code">function boo_dcct_Callback(hObject, eventdata, handles)</a>
0642 <span class="comment">% hObject    handle to boo_dcct (see GCBO)</span>
0643 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0644 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0645 
0646 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_dcct as text</span>
0647 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_dcct as a double</span>
0648 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0649 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0650 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTimeDelay'</span>,delay);
0651 
0652 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0653 <a name="_sub36" href="#_subfunctions" class="code">function boo_dcct_CreateFcn(hObject, eventdata, handles)</a>
0654 <span class="comment">% hObject    handle to boo_dcct (see GCBO)</span>
0655 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0656 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0657 
0658 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0659 <span class="comment">%       See ISPC and COMPUTER.</span>
0660 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0661     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0662 <span class="keyword">end</span>
0663 
0664 
0665 
0666 <a name="_sub37" href="#_subfunctions" class="code">function lin_canon_spm_fin_Callback(hObject, eventdata, handles)</a>
0667 <span class="comment">% hObject    handle to lin_canon_spm_fin (see GCBO)</span>
0668 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0669 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0670 
0671 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_canon_spm_fin as text</span>
0672 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_canon_spm_fin as a double</span>
0673 
0674 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0675 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
0676 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
0677 
0678 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin');</span>
0679 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
0680 save(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0681 
0682 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0683 <a name="_sub38" href="#_subfunctions" class="code">function lin_canon_spm_fin_CreateFcn(hObject, eventdata, handles)</a>
0684 <span class="comment">% hObject    handle to lin_canon_spm_fin (see GCBO)</span>
0685 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0686 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0687 
0688 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0689 <span class="comment">%       See ISPC and COMPUTER.</span>
0690 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0691     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0692 <span class="keyword">end</span>
0693 
0694 
0695 
0696 <a name="_sub39" href="#_subfunctions" class="code">function central_spare_Callback(hObject, eventdata, handles)</a>
0697 <span class="comment">% hObject    handle to central_spare (see GCBO)</span>
0698 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0699 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0700 
0701 <span class="comment">% Hints: get(hObject,'String') returns contents of central_spare as text</span>
0702 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_spare as a double</span>
0703 
0704 delay=str2double(get(hObject,<span class="string">'String'</span>));
0705 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>,delay);
0706 
0707 <span class="comment">%status soft checked on linac</span>
0708 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0709 <span class="keyword">if</span> (temp.value(1)==2)
0710    <span class="comment">%</span>
0711 <span class="keyword">elseif</span> (temp.value(1)==5)
0712     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
0713     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0714     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>);
0715     delay=dt.value(1)-dt1.value(1)+inj_offset;
0716     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
0717     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
0718     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
0719 <span class="keyword">end</span>
0720 
0721 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0722 <a name="_sub40" href="#_subfunctions" class="code">function central_spare_CreateFcn(hObject, eventdata, handles)</a>
0723 <span class="comment">% hObject    handle to central_spare (see GCBO)</span>
0724 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0725 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0726 
0727 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0728 <span class="comment">%       See ISPC and COMPUTER.</span>
0729 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0730     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0731 <span class="keyword">end</span>
0732 
0733 
0734 
0735 <a name="_sub41" href="#_subfunctions" class="code">function central_inj_Callback(hObject, eventdata, handles)</a>
0736 <span class="comment">% hObject    handle to central_inj (see GCBO)</span>
0737 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0738 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0739 
0740 <span class="comment">% Hints: get(hObject,'String') returns contents of central_inj as text</span>
0741 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_inj as a double</span>
0742 
0743 delay=str2double(get(hObject,<span class="string">'String'</span>));
0744 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>,delay);
0745 
0746 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0747 <a name="_sub42" href="#_subfunctions" class="code">function central_inj_CreateFcn(hObject, eventdata, handles)</a>
0748 <span class="comment">% hObject    handle to central_inj (see GCBO)</span>
0749 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0750 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0751 
0752 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0753 <span class="comment">%       See ISPC and COMPUTER.</span>
0754 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0755     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0756 <span class="keyword">end</span>
0757 
0758 
0759 
0760 
0761 <a name="_sub43" href="#_subfunctions" class="code">function central_soft_Callback(hObject, eventdata, handles)</a>
0762 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
0763 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0764 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0765 
0766 <span class="comment">% Hints: get(hObject,'String') returns contents of central_soft as text</span>
0767 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_soft as a double</span>
0768 
0769 delay=str2double(get(hObject,<span class="string">'String'</span>));
0770 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>,delay);
0771 
0772 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftStepDelay');</span>
0773 <span class="comment">% clkinj=int32(temp.value(1)+5*52);</span>
0774 <span class="comment">% clkext=int32(temp.value(1)/52+10);</span>
0775 <span class="comment">% tango_write_attribute2('ANS/SY/CENTRAL', 'TInjStepDelay',clkinj);</span>
0776 <span class="comment">% tango_write_attribute2('ANS/SY/CENTRAL', 'ExtractionOffsetClkStepValue',clkext);</span>
0777 <span class="comment">%</span>
0778 <span class="comment">% %status soft checked on linac</span>
0779 <span class="comment">% temp=tango_read_attribute2('LIN/SY/LOCAL.LPM.1', 'spareEvent');</span>
0780 <span class="comment">% if (temp.value(1)==2)</span>
0781 <span class="comment">%    %</span>
0782 <span class="comment">% elseif (temp.value(1)==1)</span>
0783 <span class="comment">%     dt=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftTimeDelay');</span>
0784 <span class="comment">%     inj_offset=str2double(get(handles.inj_offset,'String'));</span>
0785 <span class="comment">%     dt1=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprTimeDelay');</span>
0786 <span class="comment">%     delay=dt.value(1)-dt1.value(1)+inj_offset;</span>
0787 <span class="comment">%     tango_write_attribute2('LIN/SY/LOCAL.LPM.1', 'spareTimeDelay',delay);</span>
0788 <span class="comment">%     temp=tango_read_attribute2('LIN/SY/LOCAL.LPM.1', 'spareTimeDelay');</span>
0789 <span class="comment">%     set(handles.lin_modulateur,'String',num2str(temp.value(1)-inj_offset));</span>
0790 <span class="comment">% end</span>
0791 
0792 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0793 <a name="_sub44" href="#_subfunctions" class="code">function central_soft_CreateFcn(hObject, eventdata, handles)</a>
0794 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
0795 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0796 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0797 
0798 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0799 <span class="comment">%       See ISPC and COMPUTER.</span>
0800 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0801     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0802 <span class="keyword">end</span>
0803 
0804 
0805 <span class="comment">% --- Executes on button press in button_acquisition_nooffset.</span>
0806 <a name="_sub45" href="#_subfunctions" class="code">function button_acquisition_nooffset_Callback(hObject, eventdata, handles)</a>
0807 <span class="comment">% hObject    handle to button_acquisition_nooffset (see GCBO)</span>
0808 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0809 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0810 
0811 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
0812 
0813 
0814 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0815 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0816 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0817 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0818 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0819 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0820 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0821 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0822 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0823 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0824 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0825 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0826 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0827 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0828 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0829 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0830 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0831 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0832 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0833 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0834 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0835 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0836 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0837 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0838 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0839 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0840 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0841 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0842 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0843 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0844 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0845 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0846 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0847 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0848 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0849 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0850 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0851 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0852 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0853 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0854 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0855 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0856 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0857 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0858 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0859 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0860 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0861 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0862 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0863 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0864 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0865 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0866 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0867 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0868 
0869 <a href="get_synchro_delay_nooffset.html" class="code" title="function get_synchro_delay_nooffset(handles)">get_synchro_delay_nooffset</a>(handles)
0870 n=1;
0871 
0872 <span class="comment">%status soft checked on linac</span>
0873 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0874 <span class="keyword">if</span> (temp.value(n)==2)
0875     <span class="comment">%set(handles.soft_button,'Value',0);</span>
0876 <span class="keyword">elseif</span> (temp.value(n)==5)
0877     <span class="comment">%set(handles.soft_button,'Value',1);</span>
0878 <span class="keyword">end</span>
0879 
0880 <span class="comment">%status tables</span>
0881 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
0882 offset=temp.value(1)*52;
0883 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
0884 n=temp.value;
0885 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
0886 table=temp.value(1:n)-offset;
0887 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[<span class="string">'T='</span> , num2str(table)]);  
0888 
0889 
0890 
0891 <span class="comment">% --- Executes on button press in button_acquisition_delay.</span>
0892 <a name="_sub46" href="#_subfunctions" class="code">function button_acquisition_delay_Callback(hObject, eventdata, handles)</a>
0893 <span class="comment">% hObject    handle to button_acquisition_delay (see GCBO)</span>
0894 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0895 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0896 bug_device=<span class="string">'Bug device'</span>;
0897 
0898 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
0899 
0900 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0901 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0902 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0903 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0904 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0905 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0906 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0907 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0908 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0909 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0910 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0911 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0912 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0913 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0914 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0915 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0916 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0917 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0918 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0919 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0920 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0921 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0922 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0923 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0924 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0925 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0926 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0927 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0928 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0929 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0930 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0931 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0932 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0933 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0934 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0935 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0936 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0937 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0938 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0939 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0940 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0941 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0942 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0943 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0944 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0945 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0946 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0947 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0948 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0949 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0950 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0951 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0952 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0953 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0954 set(handles.ans_k_pc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0955 set(handles.ans_k_h,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0956 set(handles.ans_k_v,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
0957 
0958 
0959 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin');</span>
0960 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
0961 load(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0962 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
0963 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
0964 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
0965 
0966 <a href="get_synchro_delay.html" class="code" title="function get_synchro_delay(handles)">get_synchro_delay</a>(handles)
0967 n=1;
0968 <span class="comment">%status soft checked on linac</span>
0969 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0970 <span class="keyword">if</span> (temp.value(n)==2)
0971     <span class="comment">%set(handles.soft_button,'Value',0);</span>
0972 <span class="keyword">elseif</span> (temp.value(n)==5)
0973     <span class="comment">%set(handles.uipanel_mode,'String','Mode Soft');</span>
0974 <span class="keyword">end</span>
0975 
0976 <span class="comment">%status tables</span>
0977 <span class="comment">%temp=tango_read_attribute('ANS/SY/CENTRAL', 'ExtractionOffsetClkStepValue');</span>
0978 <span class="comment">%offset=temp.value(1)*52;</span>
0979 offset_linac=10*lin_fin;
0980 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
0981 n=temp.value;
0982 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
0983 table_ext=temp.value(1:n); <span class="comment">%-offset_ext;</span>
0984 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'LinacDelayTable'</span>);
0985 table_linac=(temp.value(1:n)-offset_linac)/28;
0986 table=[];
0987 <span class="keyword">for</span> i=1:n
0988     table=[table <span class="string">' '</span> <span class="string">'('</span> num2str([table_ext(i)])  <span class="string">' '</span>  num2str([table_linac(i)]) <span class="string">')'</span>];
0989 <span class="keyword">end</span>
0990 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[num2str(table)]);
0991 set(handles.edit_filling_relecture_bunch, <span class="string">'String'</span>,<span class="string">'??'</span>);
0992 
0993 
0994 
0995 <span class="comment">% --- Executes on button press in button_injection_soft.</span>
0996 <a name="_sub47" href="#_subfunctions" class="code">function button_injection_soft_Callback(hObject, eventdata, handles)</a>
0997 <span class="comment">% hObject    handle to button_injection_soft (see GCBO)</span>
0998 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0999 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1000 
1001 <span class="comment">% verifie si inj autorisé</span>
1002 <span class="comment">% try temp=tango_read_attribute2('ANS/FC/INJ_COND', 'COND_INJ'); % 0 no injection,  1 injection</span>
1003 <span class="comment">% val=temp.value; catch val=1 ; end ; if val~=0 ; val=1; end;</span>
1004 <span class="comment">%</span>
1005 <span class="comment">% if (val==1)</span>
1006 <span class="comment">%</span>
1007 <span class="comment">%     tic</span>
1008 <span class="comment">%    [r1,r2]=fire_injection(handles);</span>
1009 <span class="comment">%     toc</span>
1010 <span class="comment">% else</span>
1011 <span class="comment">%     % pas d'injection, tir non autorise</span>
1012 <span class="comment">%     fprintf('%s\n','Gap U20  &lt; limite    dans ANS/EI/GAP_U20_SECURITY');</span>
1013 <span class="comment">% end</span>
1014 
1015 [r1,r2]=<a href="fire_injection.html" class="code" title="function [r1,r2]=fire_injection(handles)">fire_injection</a>(handles);
1016 
1017 <span class="comment">% check synchro booster</span>
1018 <span class="comment">%flag=0 : OK</span>
1019 <span class="comment">%falg=1 : mauvais delais</span>
1020 [flag]=<a href="check_boo_synchro.html" class="code" title="function [flag]=check_boo_synchro">check_boo_synchro</a>;
1021 <span class="keyword">if</span> flag==1 &amp;&amp; r1&gt; 20
1022     set(handles.central_inj,<span class="string">'Backgroundcolor'</span>, [1 0 0]); <span class="comment">% KO</span>
1023 <span class="keyword">else</span>
1024     set(handles.central_inj,<span class="string">'Backgroundcolor'</span>, [1 1 1]); <span class="comment">% OK</span>
1025 <span class="keyword">end</span>
1026 
1027 <span class="comment">% % Warning mauvais rendement booster</span>
1028 <span class="comment">% if r1 &lt; 90</span>
1029 <span class="comment">%     set(handles.edit_rboo,'Backgroundcolor', [1 0 0]); % KO</span>
1030 <span class="comment">%     set(handles.edit_rboo,'Foregroundcolor', [0 0 0]);</span>
1031 <span class="comment">% else</span>
1032 <span class="comment">%     set(handles.edit_rboo,'Backgroundcolor', [1 1 1]); % OK</span>
1033 <span class="comment">%     set(handles.edit_rboo,'Foregroundcolor', [1 0 0]);</span>
1034 <span class="comment">% end</span>
1035 
1036 <span class="comment">%</span>
1037 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
1038 
1039 <a name="_sub48" href="#_subfunctions" class="code">function periode_edit_Callback(hObject, eventdata, handles)</a>
1040 <span class="comment">% hObject    handle to periode_edit (see GCBO)</span>
1041 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1042 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1043 
1044 <span class="comment">% Hints: get(hObject,'String') returns contents of periode_edit as text</span>
1045 <span class="comment">%        str2double(get(hObject,'String')) returns contents of periode_edit as a double</span>
1046 
1047 val_multishot = get(handles.on1,<span class="string">'Value'</span>);
1048 
1049 <span class="keyword">if</span> val_multishot
1050     errordlg(<span class="string">'positionner le trigger a OFF !'</span>,<span class="string">'Attention'</span>);
1051     <span class="keyword">return</span>
1052 <span class="keyword">else</span>
1053     periode = str2double(get(hObject,<span class="string">'String'</span>));
1054 
1055     <span class="comment">% change timer Infinite loop</span>
1056     timer1=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
1057         <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,periode,<span class="string">'TasksToExecute'</span>,Inf);
1058     timer1.TimerFcn = {@<a href="#_sub51" class="code" title="subfunction fonction_alex1(arg1,arg2,hObject,eventdata,handles)">fonction_alex1</a>, hObject,eventdata, handles};
1059     setappdata(handles.figure1,<span class="string">'Timer1'</span>,timer1);
1060 
1061     <span class="comment">% Update handles structure</span>
1062     guidata(hObject, handles);
1063     
1064     <span class="comment">%getappdata(handles.figure1,'Timer1')</span>
1065     
1066 <span class="keyword">end</span>
1067 
1068 
1069 
1070 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1071 <a name="_sub49" href="#_subfunctions" class="code">function periode_edit_CreateFcn(hObject, eventdata, handles)</a>
1072 <span class="comment">% hObject    handle to periode_edit (see GCBO)</span>
1073 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1074 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1075 
1076 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1077 <span class="comment">%       See ISPC and COMPUTER.</span>
1078 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1079     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1080 <span class="keyword">end</span>
1081 
1082 <a name="_sub50" href="#_subfunctions" class="code">function uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)</a>
1083 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1084 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1085 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1086 
1087 <span class="comment">%handles = guidata(gcbo);</span>
1088 timer1 = getappdata(handles.figure1,<span class="string">'Timer1'</span>);
1089 timer2 = getappdata(handles.figure1,<span class="string">'Timer2'</span>);
1090 
1091 <span class="comment">%txt1=' INJECTION EN COURS ';</span>
1092 
1093 <span class="keyword">switch</span> get(get(hObject,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>)  <span class="comment">% Get Tag of selected object</span>
1094     <span class="keyword">case</span> <span class="string">'radiobutton1'</span>
1095         <span class="comment">% stop du trigger</span>
1096         stop(timer1);
1097         stop(timer2);
1098         set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 0]);
1099         <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
1100         tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(0))
1101         tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'courant_consigne'</span>,uint8(0))
1102     <span class="keyword">case</span> <span class="string">'radiobutton2'</span>
1103         <span class="comment">% dÃ©marrage  du trigger 1</span>
1104         start(timer1);
1105         set(handles.edit_modes,<span class="string">'String'</span>,handles.txt_inj);
1106         tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(1))
1107     <span class="keyword">case</span> <span class="string">'radiobutton3'</span>
1108         <span class="comment">% dÃ©marrage du trigger 2</span>
1109         temp=tango_read_attribute2(<span class="string">'ANS/DG/DCCT-CTRL'</span>,<span class="string">'current'</span>);anscur=temp.value;
1110         <span class="keyword">if</span> (anscur&gt;1.) 
1111            start(timer2);      
1112            set(handles.edit_modes,<span class="string">'String'</span>,handles.txt_inj);
1113            tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'mode_auto'</span>,uint8(1)) 
1114         <span class="keyword">else</span>
1115             <span class="comment">% ne fait rien, en cas de perte faisceau</span>
1116         <span class="keyword">end</span>
1117 <span class="keyword">end</span>
1118 
1119 
1120 <a name="_sub51" href="#_subfunctions" class="code">function fonction_alex1(arg1,arg2,hObject,eventdata,handles)</a>
1121 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1122 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1123 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1124 
1125 color=get(handles.uipanel6,<span class="string">'Backgroundcolor'</span>);
1126 <span class="keyword">if</span> color==[1 0.3 0]
1127     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 1]);
1128 <span class="keyword">elseif</span> color==[1 0.3 1]
1129     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 0]);
1130 <span class="keyword">end</span>
1131 
1132 <a href="#_sub47" class="code" title="subfunction button_injection_soft_Callback(hObject, eventdata, handles)">button_injection_soft_Callback</a>(hObject,eventdata,handles)
1133 
1134 
1135 <a name="_sub52" href="#_subfunctions" class="code">function fonction_alex2(arg1,arg2,hObject,eventdata,handles)</a>
1136 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1137 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1138 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1139 
1140 
1141 temp=tango_read_attribute2(<span class="string">'ANS/DG/DCCT-CTRL'</span>,<span class="string">'current'</span>);anscur=temp.value;
1142 set(handles.edit_courant_total,<span class="string">'String'</span>, num2str(anscur,<span class="string">'%5.2f'</span>));
1143 Imin=str2double(get(handles.edit_Imin,<span class="string">'String'</span>));
1144 
1145 color=get(handles.uipanel6,<span class="string">'Backgroundcolor'</span>);
1146 <span class="keyword">if</span> color==[1 0.3 0]
1147     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 1]);
1148 <span class="keyword">elseif</span> color==[1 0.3 1]
1149     set(handles.uipanel6,<span class="string">'Backgroundcolor'</span>, [1 0.3 0]);
1150 <span class="keyword">end</span>
1151 
1152 
1153 <span class="keyword">if</span>     (anscur&gt;Imin)
1154     <span class="comment">%on attend</span>
1155     <span class="comment">%fprintf('Cur = %g \n',anscur)</span>
1156     tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>,<span class="string">'courant_consigne'</span>,uint8(1))
1157 <span class="keyword">else</span>
1158     <span class="comment">%inject le cycle en cours</span>
1159     <span class="comment">%fprintf('Cur = %g : Injection \n',anscur)</span>
1160     <span class="comment">%set(handles.uipanel6,'Backgroundcolor', [1 1 0]);</span>
1161     <a href="#_sub47" class="code" title="subfunction button_injection_soft_Callback(hObject, eventdata, handles)">button_injection_soft_Callback</a>(hObject, eventdata, handles)
1162 <span class="keyword">end</span>
1163 
1164 
1165 
1166 <span class="comment">%% What to do before closing the application</span>
1167 <a name="_sub53" href="#_subfunctions" class="code">function Closinggui(obj, event, handles, figure1)</a>
1168 
1169 <span class="comment">% Get default command line output from handles structure</span>
1170 answer = questdlg(<span class="string">'Fermer softsynchro ?'</span>,<span class="keyword">...</span>
1171     <span class="string">'Exit softsynchro'</span>,<span class="keyword">...</span>
1172     <span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'Yes'</span>);
1173 
1174 <span class="keyword">switch</span> answer
1175     <span class="keyword">case</span> <span class="string">'Yes'</span>           
1176         delete(handles); <span class="comment">%Delete Timer</span>
1177         delete(figure1); <span class="comment">%Close gui</span>
1178     <span class="keyword">otherwise</span>
1179         disp(<span class="string">'Closing aborted'</span>)
1180 <span class="keyword">end</span>
1181 
1182 
1183 
1184 <span class="comment">% --- Executes on button press in button_softmoins.</span>
1185 <a name="_sub54" href="#_subfunctions" class="code">function button_softmoins_Callback(hObject, eventdata, handles)</a>
1186 <span class="comment">% hObject    handle to button_softmoins (see GCBO)</span>
1187 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1188 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1189 tt=0.6;
1190 
1191 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
1192 step=temp.value(1)-52;
1193 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,step);
1194 pause(2*tt)
1195 
1196 <span class="comment">%status soft checked on linac</span>
1197 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1198 <span class="keyword">if</span> (temp.value(1)==2)
1199     pause(tt)
1200     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1201     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1202 <span class="keyword">elseif</span> (temp.value(1)==5)
1203     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1204     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1205     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>);
1206     delay=dt.value(1)-dt1.value(1)+inj_offset;
1207     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1208 
1209     pause(tt)
1210     <span class="comment">% read again for possible delay</span>
1211     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1212     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
1213     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1214     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1215 <span class="keyword">end</span>
1216 
1217 
1218 
1219 <span class="comment">% --- Executes on button press in button_softplus.</span>
1220 <a name="_sub55" href="#_subfunctions" class="code">function button_softplus_Callback(hObject, eventdata, handles)</a>
1221 <span class="comment">% hObject    handle to button_softplus (see GCBO)</span>
1222 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1223 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1224 tt=0.6;
1225 
1226 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
1227 step=temp.value(1)+52;
1228 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,step);
1229 pause(2*tt)
1230 
1231 <span class="comment">%status soft checked on linac</span>
1232 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1233 <span class="keyword">if</span> (temp.value(1)==2)
1234     pause(tt)
1235     <span class="comment">% read again for possible delay</span>
1236     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1237     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1238 <span class="keyword">elseif</span> (temp.value(1)==5)
1239     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1240     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1241     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSprTimeDelay'</span>);
1242     delay=dt.value(1)-dt1.value(1)+inj_offset;
1243     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1244 
1245     pause(tt)
1246     <span class="comment">% read again for possible delay</span>
1247     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1248     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
1249     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1250     set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1251 <span class="keyword">end</span>
1252 
1253 
1254 
1255 <span class="comment">% --- Executes on button press in button_injmoins.</span>
1256 <a name="_sub56" href="#_subfunctions" class="code">function button_injmoins_Callback(hObject, eventdata, handles)</a>
1257 <span class="comment">% hObject    handle to button_injmoins (see GCBO)</span>
1258 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1259 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1260 tt=0.6;
1261 
1262 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>);
1263 step=temp.value(1)-52;
1264 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,step);
1265 pause(2*tt)
1266 
1267 <span class="comment">%status soft checked on linac</span>
1268 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1269 <span class="keyword">if</span> (temp.value(1)==5)
1270     pause(tt)
1271     <span class="comment">% read again for possible delay</span>
1272     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1273     set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1274 <span class="keyword">elseif</span> (temp.value(1)==2)
1275 <span class="comment">%    commented With address spare = 2</span>
1276 <span class="comment">%     dt=tango_read_attribute2('ANS/SY/CENTRAL', 'TInjTimeDelay');</span>
1277 <span class="comment">%     inj_offset=str2double(get(handles.inj_offset,'String'));</span>
1278 <span class="comment">%     dt1=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprTimeDelay');</span>
1279 <span class="comment">%     delay=dt.value(1)-dt1.value(1)+inj_offset;</span>
1280 <span class="comment">%     tango_write_attribute2('LIN/SY/LOCAL.LPM.1', 'spareTimeDelay',delay);</span>
1281 <span class="comment">%</span>
1282 <span class="comment">%     pause(tt)</span>
1283 <span class="comment">%     % read again for possible delay</span>
1284 <span class="comment">%     temp=tango_read_attribute2('LIN/SY/LOCAL.LPM.1', 'spareTimeDelay');</span>
1285 <span class="comment">%     set(handles.lin_modulateur,'String',num2str(temp.value(1)-inj_offset));</span>
1286      temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1287      set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1288 <span class="keyword">end</span>
1289 
1290 
1291 <span class="comment">% --- Executes on button press in button_injplus.</span>
1292 <a name="_sub57" href="#_subfunctions" class="code">function button_injplus_Callback(hObject, eventdata, handles)</a>
1293 <span class="comment">% hObject    handle to button_injplus (see GCBO)</span>
1294 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1295 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1296 tt=0.6;
1297 
1298 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>);
1299 step=temp.value(1)+52;
1300 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,step);
1301 pause(2*tt)
1302 
1303 <span class="comment">%status soft checked on linac</span>
1304 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
1305 <span class="keyword">if</span> (temp.value(1)==5)
1306     pause(tt)
1307     <span class="comment">% read again for possible delay</span>
1308     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1309     set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1310 <span class="keyword">elseif</span> (temp.value(1)==2)
1311 <span class="comment">%    commented With address spare = 2</span>
1312 <span class="comment">%     dt=tango_read_attribute2('ANS/SY/CENTRAL', 'TInjTimeDelay');</span>
1313 <span class="comment">%     inj_offset=str2double(get(handles.inj_offset,'String'));</span>
1314 <span class="comment">%     dt1=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprTimeDelay');</span>
1315 <span class="comment">%     delay=dt.value(1)-dt1.value(1)+inj_offset;</span>
1316 <span class="comment">%     tango_write_attribute2('LIN/SY/LOCAL.LPM.1', 'spareTimeDelay',delay);</span>
1317 <span class="comment">%</span>
1318 <span class="comment">%     pause(tt)</span>
1319 <span class="comment">%     % read again for possible delay</span>
1320 <span class="comment">%     temp=tango_read_attribute2('LIN/SY/LOCAL.LPM.1', 'spareTimeDelay');</span>
1321 <span class="comment">%     set(handles.lin_modulateur,'String',num2str(temp.value(1)-inj_offset));</span>
1322      temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1323      set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1324 <span class="keyword">end</span>
1325 
1326 
1327 
1328 
1329 
1330 
1331 <a name="_sub58" href="#_subfunctions" class="code">function boo_ext_sept_p_Callback(hObject, eventdata, handles)</a>
1332 <span class="comment">% hObject    handle to boo_ext_sept_p (see GCBO)</span>
1333 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1334 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1335 
1336 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_sept_p as text</span>
1337 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_sept_p as a double</span>
1338 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1339 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1340 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1341 
1342 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1343 <a name="_sub59" href="#_subfunctions" class="code">function boo_ext_sept_p_CreateFcn(hObject, eventdata, handles)</a>
1344 <span class="comment">% hObject    handle to boo_ext_sept_p (see GCBO)</span>
1345 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1346 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1347 
1348 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1349 <span class="comment">%       See ISPC and COMPUTER.</span>
1350 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1351     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1352 <span class="keyword">end</span>
1353 
1354 
1355 <a name="_sub60" href="#_subfunctions" class="code">function boo_ext_dof_Callback(hObject, eventdata, handles)</a>
1356 <span class="comment">% hObject    handle to boo_ext_dof (see GCBO)</span>
1357 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1358 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1359 
1360 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_dof as text</span>
1361 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_dof as a double</span>
1362 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1363 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1364 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>,delay);
1365 
1366 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1367 <a name="_sub61" href="#_subfunctions" class="code">function boo_ext_dof_CreateFcn(hObject, eventdata, handles)</a>
1368 <span class="comment">% hObject    handle to boo_ext_dof (see GCBO)</span>
1369 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1370 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1371 
1372 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1373 <span class="comment">%       See ISPC and COMPUTER.</span>
1374 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1375     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1376 <span class="keyword">end</span>
1377 
1378 
1379 <a name="_sub62" href="#_subfunctions" class="code">function boo_ext_sept_a_Callback(hObject, eventdata, handles)</a>
1380 <span class="comment">% hObject    handle to boo_ext_sept_a (see GCBO)</span>
1381 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1382 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1383 
1384 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_sept_a as text</span>
1385 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_sept_a as a double</span>
1386 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1387 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1388 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1389 
1390 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1391 <a name="_sub63" href="#_subfunctions" class="code">function boo_ext_sept_a_CreateFcn(hObject, eventdata, handles)</a>
1392 <span class="comment">% hObject    handle to boo_ext_sept_a (see GCBO)</span>
1393 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1394 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1395 
1396 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1397 <span class="comment">%       See ISPC and COMPUTER.</span>
1398 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1399     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1400 <span class="keyword">end</span>
1401 
1402 
1403 
1404 <a name="_sub64" href="#_subfunctions" class="code">function boo_ext_kicker_Callback(hObject, eventdata, handles)</a>
1405 <span class="comment">% hObject    handle to boo_ext_kicker (see GCBO)</span>
1406 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1407 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1408 
1409 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_kicker as text</span>
1410 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_kicker as a double</span>
1411 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1412 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1413 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
1414 
1415 
1416 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1417 <a name="_sub65" href="#_subfunctions" class="code">function boo_ext_kicker_CreateFcn(hObject, eventdata, handles)</a>
1418 <span class="comment">% hObject    handle to boo_ext_kicker (see GCBO)</span>
1419 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1420 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1421 
1422 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1423 <span class="comment">%       See ISPC and COMPUTER.</span>
1424 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1425     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1426 <span class="keyword">end</span>
1427 
1428 
1429 
1430 <a name="_sub66" href="#_subfunctions" class="code">function ans_inj_sept_p_Callback(hObject, eventdata, handles)</a>
1431 <span class="comment">% hObject    handle to ans_inj_sept_p (see GCBO)</span>
1432 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1433 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1434 
1435 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_sept_p as text</span>
1436 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_sept_p as a double</span>
1437 
1438 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1439 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1440 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1441 
1442 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1443 <a name="_sub67" href="#_subfunctions" class="code">function ans_inj_sept_p_CreateFcn(hObject, eventdata, handles)</a>
1444 <span class="comment">% hObject    handle to ans_inj_sept_p (see GCBO)</span>
1445 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1446 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1447 
1448 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1449 <span class="comment">%       See ISPC and COMPUTER.</span>
1450 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1451     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1452 <span class="keyword">end</span>
1453 
1454 
1455 
1456 <a name="_sub68" href="#_subfunctions" class="code">function ans_inj_sept_a_Callback(hObject, eventdata, handles)</a>
1457 <span class="comment">% hObject    handle to ans_inj_sept_a (see GCBO)</span>
1458 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1459 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1460 
1461 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_sept_a as text</span>
1462 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_sept_a as a double</span>
1463 
1464 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1465 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1466 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1467 
1468 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1469 <a name="_sub69" href="#_subfunctions" class="code">function ans_inj_sept_a_CreateFcn(hObject, eventdata, handles)</a>
1470 <span class="comment">% hObject    handle to ans_inj_sept_a (see GCBO)</span>
1471 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1472 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1473 
1474 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1475 <span class="comment">%       See ISPC and COMPUTER.</span>
1476 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1477     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1478 <span class="keyword">end</span>
1479 
1480 
1481 
1482 <a name="_sub70" href="#_subfunctions" class="code">function ans_inj_k1_Callback(hObject, eventdata, handles)</a>
1483 <span class="comment">% hObject    handle to ans_inj_k1 (see GCBO)</span>
1484 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1485 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1486 
1487 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k1 as text</span>
1488 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k1 as a double</span>
1489 
1490 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1491 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1492 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>,delay);
1493 
1494 
1495 
1496 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1497 <a name="_sub71" href="#_subfunctions" class="code">function ans_inj_k1_CreateFcn(hObject, eventdata, handles)</a>
1498 <span class="comment">% hObject    handle to ans_inj_k1 (see GCBO)</span>
1499 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1500 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1501 
1502 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1503 <span class="comment">%       See ISPC and COMPUTER.</span>
1504 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1505     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1506 <span class="keyword">end</span>
1507 
1508 
1509 
1510 <a name="_sub72" href="#_subfunctions" class="code">function ans_inj_k2_Callback(hObject, eventdata, handles)</a>
1511 <span class="comment">% hObject    handle to ans_inj_k2 (see GCBO)</span>
1512 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1513 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1514 
1515 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k2 as text</span>
1516 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k2 as a double</span>
1517 
1518 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1519 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1520 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>,delay);
1521 
1522 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1523 <a name="_sub73" href="#_subfunctions" class="code">function ans_inj_k2_CreateFcn(hObject, eventdata, handles)</a>
1524 <span class="comment">% hObject    handle to ans_inj_k2 (see GCBO)</span>
1525 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1526 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1527 
1528 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1529 <span class="comment">%       See ISPC and COMPUTER.</span>
1530 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1531     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1532 <span class="keyword">end</span>
1533 
1534 
1535 
1536 <a name="_sub74" href="#_subfunctions" class="code">function ans_inj_k3_Callback(hObject, eventdata, handles)</a>
1537 <span class="comment">% hObject    handle to ans_inj_k3 (see GCBO)</span>
1538 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1539 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1540 
1541 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k3 as text</span>
1542 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k3 as a double</span>
1543 
1544 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1545 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1546 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>,delay);
1547 
1548 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1549 <a name="_sub75" href="#_subfunctions" class="code">function ans_inj_k3_CreateFcn(hObject, eventdata, handles)</a>
1550 <span class="comment">% hObject    handle to ans_inj_k3 (see GCBO)</span>
1551 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1552 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1553 
1554 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1555 <span class="comment">%       See ISPC and COMPUTER.</span>
1556 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1557     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1558 <span class="keyword">end</span>
1559 
1560 
1561 
1562 <a name="_sub76" href="#_subfunctions" class="code">function ans_inj_k4_Callback(hObject, eventdata, handles)</a>
1563 <span class="comment">% hObject    handle to ans_inj_k4 (see GCBO)</span>
1564 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1565 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1566 
1567 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k4 as text</span>
1568 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k4 as a double</span>
1569 
1570 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1571 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1572 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>,delay);
1573 
1574 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1575 <a name="_sub77" href="#_subfunctions" class="code">function ans_inj_k4_CreateFcn(hObject, eventdata, handles)</a>
1576 <span class="comment">% hObject    handle to ans_inj_k4 (see GCBO)</span>
1577 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1578 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1579 
1580 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1581 <span class="comment">%       See ISPC and COMPUTER.</span>
1582 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1583     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1584 <span class="keyword">end</span>
1585 
1586 
1587 
1588 <a name="_sub78" href="#_subfunctions" class="code">function ans_dcct_Callback(hObject, eventdata, handles)</a>
1589 <span class="comment">% hObject    handle to ans_dcct (see GCBO)</span>
1590 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1591 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1592 
1593 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_dcct as text</span>
1594 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_dcct as a double</span>
1595 
1596 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1597 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1598 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctTimeDelay'</span>,delay);
1599 
1600 
1601 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1602 <a name="_sub79" href="#_subfunctions" class="code">function ans_dcct_CreateFcn(hObject, eventdata, handles)</a>
1603 <span class="comment">% hObject    handle to ans_dcct (see GCBO)</span>
1604 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1605 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1606 
1607 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1608 <span class="comment">%       See ISPC and COMPUTER.</span>
1609 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1610     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1611 <span class="keyword">end</span>
1612 
1613 
1614 
1615 <a name="_sub80" href="#_subfunctions" class="code">function ans_bpm_Callback(hObject, eventdata, handles)</a>
1616 <span class="comment">% hObject    handle to ans_bpm (see GCBO)</span>
1617 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1618 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1619 
1620 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm as text</span>
1621 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm as a double</span>
1622 
1623 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1624 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1625 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1626 tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1627 tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1628 tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1629 tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1630 tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1631 tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1632 tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1633 tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1634 tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1635 tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1636 tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1637 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1638 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1639 tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1640 tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1641 
1642 
1643 
1644 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1645 <a name="_sub81" href="#_subfunctions" class="code">function ans_bpm_CreateFcn(hObject, eventdata, handles)</a>
1646 <span class="comment">% hObject    handle to ans_bpm (see GCBO)</span>
1647 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1648 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1649 
1650 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1651 <span class="comment">%       See ISPC and COMPUTER.</span>
1652 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1653     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1654 <span class="keyword">end</span>
1655 
1656 
1657 
1658 <a name="_sub82" href="#_subfunctions" class="code">function central_ext_Callback(hObject, eventdata, handles)</a>
1659 <span class="comment">% hObject    handle to central_ext (see GCBO)</span>
1660 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1661 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1662 
1663 <span class="comment">% Hints: get(hObject,'String') returns contents of central_ext as text</span>
1664 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_ext as a double</span>
1665 <span class="comment">%'ANS/SY/CENTRAL', 'ExtractionOffsetTimeValue'</span>
1666 
1667 delay=str2double(get(hObject,<span class="string">'String'</span>));
1668 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>,delay);
1669 
1670 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1671 <a name="_sub83" href="#_subfunctions" class="code">function central_ext_CreateFcn(hObject, eventdata, handles)</a>
1672 <span class="comment">% hObject    handle to central_ext (see GCBO)</span>
1673 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1674 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1675 
1676 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1677 <span class="comment">%       See ISPC and COMPUTER.</span>
1678 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1679     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1680 <span class="keyword">end</span>
1681 
1682 
1683 
1684 <a name="_sub84" href="#_subfunctions" class="code">function central_soft1_Callback(hObject, eventdata, handles)</a>
1685 <span class="comment">% hObject    handle to central_soft1 (see GCBO)</span>
1686 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1687 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1688 
1689 <span class="comment">% Hints: get(hObject,'String') returns contents of central_soft1 as text</span>
1690 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_soft1 as a double</span>
1691 
1692 
1693 
1694 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1695 <a name="_sub85" href="#_subfunctions" class="code">function central_soft1_CreateFcn(hObject, eventdata, handles)</a>
1696 <span class="comment">% hObject    handle to central_soft1 (see GCBO)</span>
1697 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1698 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1699 
1700 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1701 <span class="comment">%       See ISPC and COMPUTER.</span>
1702 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1703     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1704 <span class="keyword">end</span>
1705 
1706 
1707 <span class="comment">% --- Executes on button press in button_extmoins.</span>
1708 <a name="_sub86" href="#_subfunctions" class="code">function button_extmoins_Callback(hObject, eventdata, handles)</a>
1709 <span class="comment">% hObject    handle to button_extmoins (see GCBO)</span>
1710 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1711 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1712 
1713 dclk=10;
1714 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
1715 step=temp.value(1)-dclk;
1716 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,int32(step));
1717 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'ExtractionOffsetTimeValue'</span>);
1718 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(1)));
1719 
1720 <span class="comment">% on fait suivre les septa actif</span>
1721 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>);boo=temp.value(1);
1722 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(boo-dclk*52*184/2));
1723 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>);ans=temp.value(1);
1724 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(ans-dclk*52*184/2))
1725 
1726 <span class="comment">% --- Executes on button press in button_extplus.</span>
1727 <a name="_sub87" href="#_subfunctions" class="code">function button_extplus_Callback(hObject, eventdata, handles)</a>
1728 <span class="comment">% hObject    handle to button_extplus (see GCBO)</span>
1729 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1730 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1731 
1732 dclk=10;
1733 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
1734 step=temp.value(1)+dclk;
1735 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,int32(step));
1736 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'ExtractionOffsetTimeValue'</span>);
1737 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(1)));
1738 
1739 <span class="comment">% on fait suivre les septa actif</span>
1740 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>);boo=temp.value(1);
1741 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(boo+dclk*52*184/2));
1742 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>);ans=temp.value(1);
1743 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigStepDelay'</span>,double(ans+dclk*52*184/2))
1744 
1745 <a name="_sub88" href="#_subfunctions" class="code">function sdc2_Callback(hObject, eventdata, handles)</a>
1746 <span class="comment">% hObject    handle to sdc2 (see GCBO)</span>
1747 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1748 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1749 
1750 <span class="comment">% Hints: get(hObject,'String') returns contents of sdc2 as text</span>
1751 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sdc2 as a double</span>
1752 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1753 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1754 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1755 
1756 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1757 <a name="_sub89" href="#_subfunctions" class="code">function sdc2_CreateFcn(hObject, eventdata, handles)</a>
1758 <span class="comment">% hObject    handle to sdc2 (see GCBO)</span>
1759 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1760 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1761 
1762 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1763 <span class="comment">%       See ISPC and COMPUTER.</span>
1764 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1765     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1766 <span class="keyword">end</span>
1767 
1768 
1769 
1770 <a name="_sub90" href="#_subfunctions" class="code">function lt2_emittance_Callback(hObject, eventdata, handles)</a>
1771 <span class="comment">% hObject    handle to lt2_emittance (see GCBO)</span>
1772 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1773 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1774 
1775 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_emittance as text</span>
1776 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_emittance as a double</span>
1777 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1778 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1779 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>,delay);
1780 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
1781 
1782 
1783 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1784 <a name="_sub91" href="#_subfunctions" class="code">function lt2_emittance_CreateFcn(hObject, eventdata, handles)</a>
1785 <span class="comment">% hObject    handle to lt2_emittance (see GCBO)</span>
1786 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1787 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1788 
1789 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1790 <span class="comment">%       See ISPC and COMPUTER.</span>
1791 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1792     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1793 <span class="keyword">end</span>
1794 
1795 
1796 
1797 <a name="_sub92" href="#_subfunctions" class="code">function lt2_bpm_Callback(hObject, eventdata, handles)</a>
1798 <span class="comment">% hObject    handle to lt2_bpm (see GCBO)</span>
1799 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1800 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1801 
1802 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_bpm as text</span>
1803 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_bpm as a double</span>
1804 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1805 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1806 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1807 
1808 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1809 <a name="_sub93" href="#_subfunctions" class="code">function lt2_bpm_CreateFcn(hObject, eventdata, handles)</a>
1810 <span class="comment">% hObject    handle to lt2_bpm (see GCBO)</span>
1811 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1812 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1813 
1814 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1815 <span class="comment">%       See ISPC and COMPUTER.</span>
1816 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1817     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1818 <span class="keyword">end</span>
1819 
1820 
1821 
1822 <a name="_sub94" href="#_subfunctions" class="code">function lt2_osc_Callback(hObject, eventdata, handles)</a>
1823 <span class="comment">% hObject    handle to lt2_osc (see GCBO)</span>
1824 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1825 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1826 
1827 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_osc as text</span>
1828 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_osc as a double</span>
1829 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1830 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1831 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>,delay);
1832 
1833 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1834 <a name="_sub95" href="#_subfunctions" class="code">function lt2_osc_CreateFcn(hObject, eventdata, handles)</a>
1835 <span class="comment">% hObject    handle to lt2_osc (see GCBO)</span>
1836 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1837 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1838 
1839 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1840 <span class="comment">%       See ISPC and COMPUTER.</span>
1841 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1842     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1843 <span class="keyword">end</span>
1844 
1845 
1846 
1847 <a name="_sub96" href="#_subfunctions" class="code">function lin_modulateur_Callback(hObject, eventdata, handles)</a>
1848 <span class="comment">% hObject    handle to lin_modulateur (see GCBO)</span>
1849 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1850 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1851 
1852 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_modulateur as text</span>
1853 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_modulateur as a double</span>
1854 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1855 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
1856 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1857 
1858 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1859 <a name="_sub97" href="#_subfunctions" class="code">function lin_modulateur_CreateFcn(hObject, eventdata, handles)</a>
1860 <span class="comment">% hObject    handle to lin_modulateur (see GCBO)</span>
1861 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1862 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1863 
1864 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1865 <span class="comment">%       See ISPC and COMPUTER.</span>
1866 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1867     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1868 <span class="keyword">end</span>
1869 
1870 
1871 
1872 <a name="_sub98" href="#_subfunctions" class="code">function inj_offset_Callback(hObject, eventdata, handles)</a>
1873 <span class="comment">% hObject    handle to inj_offset (see GCBO)</span>
1874 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1875 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1876 
1877 <span class="comment">% Hints: get(hObject,'String') returns contents of inj_offset as text</span>
1878 <span class="comment">%        str2double(get(hObject,'String')) returns contents of inj_offset as a double</span>
1879 
1880 inj_offset=str2double(get(hObject,<span class="string">'String'</span>));
1881 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1882 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
1883 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin');</span>
1884 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
1885 save(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>)
1886 
1887 <span class="comment">%LIN</span>
1888 delay=str2double(get(handles.lin_canon_lpm,<span class="string">'String'</span>))+inj_offset;
1889 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>,delay);
1890 
1891 delay=str2double(get(handles.lin_canon_spm,<span class="string">'String'</span>))+inj_offset;
1892 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>,delay);
1893 
1894 delay=str2double(get(handles.lin_modulateur,<span class="string">'String'</span>))+inj_offset;
1895 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1896 
1897 delay=str2double(get(handles.sdc1,<span class="string">'String'</span>))+inj_offset;
1898 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
1899 
1900 
1901 <span class="comment">% LT1</span>
1902 delay=str2double(get(handles.lt1_MC2,<span class="string">'String'</span>))+inj_offset;
1903 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>,delay);
1904 
1905 delay=str2double(get(handles.lt1_MC1,<span class="string">'String'</span>))+inj_offset;
1906 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>,delay);
1907 
1908 delay=str2double(get(handles.lt1_emittance,<span class="string">'String'</span>))+inj_offset;
1909 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
1910 
1911 delay=str2double(get(handles.lt1_osc,<span class="string">'String'</span>))+inj_offset;
1912 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
1913 
1914 
1915 <span class="comment">% BOO</span>
1916 delay=str2double(get(handles.boo_inj_septum,<span class="string">'String'</span>))+inj_offset;
1917 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1918 
1919 delay=str2double(get(handles.boo_inj_kicker,<span class="string">'String'</span>))+inj_offset;
1920 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
1921 
1922 delay=str2double(get(handles.boo_bpm,<span class="string">'String'</span>))+inj_offset;
1923 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>,delay);
1924 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigTimeDelay'</span>,delay);
1925 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigTimeDelay'</span>,delay);
1926 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigTimeDelay'</span>,delay);
1927 
1928 
1929 delay=str2double(get(handles.boo_nod,<span class="string">'String'</span>))+inj_offset;
1930 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>,delay);
1931 
1932 <span class="comment">% delay=str2double(get(handles.boo_dcct,'String'))+inj_offset;</span>
1933 <span class="comment">% tango_write_attribute2('LT1/SY/LOCAL.DG.1', 'dcct-booTimeDelay',delay);</span>
1934 
1935 
1936 
1937 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1938 <a name="_sub99" href="#_subfunctions" class="code">function inj_offset_CreateFcn(hObject, eventdata, handles)</a>
1939 <span class="comment">% hObject    handle to inj_offset (see GCBO)</span>
1940 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1941 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1942 
1943 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1944 <span class="comment">%       See ISPC and COMPUTER.</span>
1945 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1946     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1947 <span class="keyword">end</span>
1948 
1949 
1950 
1951 <a name="_sub100" href="#_subfunctions" class="code">function ext_offset_Callback(hObject, eventdata, handles)</a>
1952 <span class="comment">% hObject    handle to ext_offset (see GCBO)</span>
1953 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1954 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1955 
1956 <span class="comment">% Hints: get(hObject,'String') returns contents of ext_offset as text</span>
1957 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ext_offset as a double</span>
1958 
1959 ext_offset=str2double(get(hObject,<span class="string">'String'</span>));
1960 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1961 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
1962 
1963 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin');</span>
1964 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
1965 save(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
1966 
1967 
1968 <span class="comment">%BOO</span>
1969 delay=str2double(get(handles.boo_ext_dof,<span class="string">'String'</span>))+ext_offset;
1970 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>,delay);
1971 
1972 delay=str2double(get(handles.boo_ext_sept_p,<span class="string">'String'</span>))+ext_offset;
1973 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1974 
1975 delay=str2double(get(handles.boo_ext_sept_a,<span class="string">'String'</span>))+ext_offset;
1976 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1977 
1978 delay=str2double(get(handles.boo_ext_kicker,<span class="string">'String'</span>))+ext_offset;
1979 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
1980 
1981 delay=str2double(get(handles.sdc2,<span class="string">'String'</span>))+ext_offset;
1982 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1983 
1984 <span class="comment">%LT2</span>
1985 delay=str2double(get(handles.lt2_bpm,<span class="string">'String'</span>))+ext_offset;
1986 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1987 
1988 delay=str2double(get(handles.lt2_osc,<span class="string">'String'</span>))+ext_offset;
1989 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>,delay);
1990 
1991 delay=str2double(get(handles.lt2_emittance,<span class="string">'String'</span>))+ext_offset;
1992 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>,delay);
1993 
1994 <span class="comment">%ANS</span>
1995 
1996 delay=str2double(get(handles.ans_inj_sept_a,<span class="string">'String'</span>))+ext_offset;
1997 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1998 
1999 delay=str2double(get(handles.ans_inj_sept_p,<span class="string">'String'</span>))+ext_offset;
2000 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
2001 
2002 delay=str2double(get(handles.ans_inj_k1,<span class="string">'String'</span>))+ext_offset;
2003 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>,delay);
2004 
2005 delay=str2double(get(handles.ans_inj_k2,<span class="string">'String'</span>))+ext_offset;
2006 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>,delay);
2007 
2008 delay=str2double(get(handles.ans_inj_k3,<span class="string">'String'</span>))+ext_offset;
2009 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>,delay);
2010 
2011 delay=str2double(get(handles.ans_inj_k4,<span class="string">'String'</span>))+ext_offset;
2012 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>,delay);
2013 
2014 
2015 
2016 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2017 <a name="_sub101" href="#_subfunctions" class="code">function ext_offset_CreateFcn(hObject, eventdata, handles)</a>
2018 <span class="comment">% hObject    handle to ext_offset (see GCBO)</span>
2019 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2020 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2021 
2022 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2023 <span class="comment">%       See ISPC and COMPUTER.</span>
2024 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2025     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2026 <span class="keyword">end</span>
2027 
2028 
2029 <span class="comment">% --- Executes on button press in button_acquisition_address.</span>
2030 <a name="_sub102" href="#_subfunctions" class="code">function button_acquisition_address_Callback(hObject, eventdata, handles)</a>
2031 <span class="comment">% hObject    handle to button_acquisition_address (see GCBO)</span>
2032 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2033 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2034 
2035 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
2036 
2037 
2038 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2039 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2040 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2041 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2042 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2043 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2044 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2045 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2046 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2047 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2048 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2049 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2050 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2051 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2052 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2053 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2054 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2055 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2056 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2057 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2058 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2059 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2060 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2061 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2062 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2063 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2064 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2065 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2066 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2067 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2068 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2069 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2070 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2071 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2072 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2073 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2074 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2075 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2076 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2077 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2078 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2079 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2080 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2081 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2082 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2083 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2084 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2085 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2086 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2087 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2088 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2089 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2090 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2091 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2092 
2093 
2094 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'synchro_offset_lin');</span>
2095 FileName = [handles.DirName <span class="string">'synchro_offset_lin'</span>];
2096 load(FileName, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
2097 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
2098 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
2099 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
2100 
2101 <a href="get_synchro_address.html" class="code" title="function get_synchro_address(handles)">get_synchro_address</a>(handles)
2102 
2103 
2104 <span class="comment">% --- Executes on button press in button_offinj_moins.</span>
2105 <a name="_sub103" href="#_subfunctions" class="code">function button_offinj_moins_Callback(hObject, eventdata, handles)</a>
2106 <span class="comment">% hObject    handle to button_offinj_moins (see GCBO)</span>
2107 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2108 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2109 
2110 temp=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2111 step=temp-52*0.52243;
2112 set(handles.inj_offset,<span class="string">'String'</span>,step);
2113 <a href="#_sub98" class="code" title="subfunction inj_offset_Callback(hObject, eventdata, handles)">inj_offset_Callback</a>(handles.inj_offset, eventdata, handles);
2114 
2115 <span class="comment">% --- Executes on button press in button_offinj_plus.</span>
2116 <a name="_sub104" href="#_subfunctions" class="code">function button_offinj_plus_Callback(hObject, eventdata, handles)</a>
2117 <span class="comment">% hObject    handle to button_offinj_plus (see GCBO)</span>
2118 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2119 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2120 
2121 temp=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2122 step=temp+52*0.52243;
2123 set(handles.inj_offset,<span class="string">'String'</span>,step);
2124 <a href="#_sub98" class="code" title="subfunction inj_offset_Callback(hObject, eventdata, handles)">inj_offset_Callback</a>(handles.inj_offset, eventdata, handles);
2125 
2126 <span class="comment">% --- Executes on button press in button_offext_moins.</span>
2127 <a name="_sub105" href="#_subfunctions" class="code">function button_offext_moins_Callback(hObject, eventdata, handles)</a>
2128 <span class="comment">% hObject    handle to button_offext_moins (see GCBO)</span>
2129 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2130 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2131 
2132 temp=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2133 step=temp-52*0.52243;
2134 set(handles.ext_offset,<span class="string">'String'</span>,step);
2135 <a href="#_sub100" class="code" title="subfunction ext_offset_Callback(hObject, eventdata, handles)">ext_offset_Callback</a>(handles.ext_offset, eventdata, handles);
2136 
2137 <span class="comment">% --- Executes on button press in button_offext_plus.</span>
2138 <a name="_sub106" href="#_subfunctions" class="code">function button_offext_plus_Callback(hObject, eventdata, handles)</a>
2139 <span class="comment">% hObject    handle to button_offext_plus (see GCBO)</span>
2140 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2141 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2142 
2143 temp=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2144 step=temp+52*0.52243;
2145 set(handles.ext_offset,<span class="string">'String'</span>,step);
2146 <a href="#_sub100" class="code" title="subfunction ext_offset_Callback(hObject, eventdata, handles)">ext_offset_Callback</a>(handles.ext_offset, eventdata, handles);
2147 
2148 
2149 <span class="comment">% --- Executes on button press in button_bpm.</span>
2150 <a name="_sub107" href="#_subfunctions" class="code">function button_bpm_Callback(hObject, eventdata, handles)</a>
2151 <span class="comment">% hObject    handle to button_bpm (see GCBO)</span>
2152 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2153 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2154 
2155 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of button_bpm</span>
2156 
2157 bpm=get(hObject,<span class="string">'Value'</span>);
2158 
2159 <span class="keyword">if</span> (bpm==0)
2160    set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
2161 <span class="keyword">elseif</span> (bpm==1)
2162     set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
2163 <span class="keyword">end</span>
2164 
2165 
2166 
2167 <a name="_sub108" href="#_subfunctions" class="code">function ans_bpm_c01_Callback(hObject, eventdata, handles)</a>
2168 <span class="comment">% hObject    handle to ans_bpm_c01 (see GCBO)</span>
2169 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2170 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2171 
2172 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c01 as text</span>
2173 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c01 as a double</span>
2174 
2175 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2176 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2177 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2178 
2179 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2180 <a name="_sub109" href="#_subfunctions" class="code">function ans_bpm_c01_CreateFcn(hObject, eventdata, handles)</a>
2181 <span class="comment">% hObject    handle to ans_bpm_c01 (see GCBO)</span>
2182 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2183 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2184 
2185 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2186 <span class="comment">%       See ISPC and COMPUTER.</span>
2187 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2188     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2189 <span class="keyword">end</span>
2190 
2191 
2192 <a name="_sub110" href="#_subfunctions" class="code">function ans_bpm_c02_Callback(hObject, eventdata, handles)</a>
2193 <span class="comment">% hObject    handle to ans_bpm_c02 (see GCBO)</span>
2194 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2195 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2196 
2197 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c02 as text</span>
2198 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c02 as a double</span>
2199 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2200 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2201 tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2202 
2203 
2204 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2205 <a name="_sub111" href="#_subfunctions" class="code">function ans_bpm_c02_CreateFcn(hObject, eventdata, handles)</a>
2206 <span class="comment">% hObject    handle to ans_bpm_c02 (see GCBO)</span>
2207 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2208 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2209 
2210 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2211 <span class="comment">%       See ISPC and COMPUTER.</span>
2212 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2213     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2214 <span class="keyword">end</span>
2215 
2216 
2217 
2218 <a name="_sub112" href="#_subfunctions" class="code">function ans_bpm_c03_Callback(hObject, eventdata, handles)</a>
2219 <span class="comment">% hObject    handle to ans_bpm_c03 (see GCBO)</span>
2220 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2221 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2222 
2223 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c03 as text</span>
2224 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c03 as a double</span>
2225 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2226 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2227 tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2228 
2229 
2230 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2231 <a name="_sub113" href="#_subfunctions" class="code">function ans_bpm_c03_CreateFcn(hObject, eventdata, handles)</a>
2232 <span class="comment">% hObject    handle to ans_bpm_c03 (see GCBO)</span>
2233 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2234 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2235 
2236 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2237 <span class="comment">%       See ISPC and COMPUTER.</span>
2238 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2239     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2240 <span class="keyword">end</span>
2241 
2242 
2243 
2244 <a name="_sub114" href="#_subfunctions" class="code">function ans_bpm_c04_Callback(hObject, eventdata, handles)</a>
2245 <span class="comment">% hObject    handle to ans_bpm_c04 (see GCBO)</span>
2246 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2247 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2248 
2249 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c04 as text</span>
2250 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c04 as a double</span>
2251 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2252 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2253 tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2254 
2255 
2256 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2257 <a name="_sub115" href="#_subfunctions" class="code">function ans_bpm_c04_CreateFcn(hObject, eventdata, handles)</a>
2258 <span class="comment">% hObject    handle to ans_bpm_c04 (see GCBO)</span>
2259 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2260 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2261 
2262 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2263 <span class="comment">%       See ISPC and COMPUTER.</span>
2264 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2265     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2266 <span class="keyword">end</span>
2267 
2268 
2269 
2270 <a name="_sub116" href="#_subfunctions" class="code">function ans_bpm_c05_Callback(hObject, eventdata, handles)</a>
2271 <span class="comment">% hObject    handle to ans_bpm_c05 (see GCBO)</span>
2272 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2273 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2274 
2275 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c05 as text</span>
2276 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c05 as a double</span>
2277 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2278 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2279 tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2280 
2281 
2282 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2283 <a name="_sub117" href="#_subfunctions" class="code">function ans_bpm_c05_CreateFcn(hObject, eventdata, handles)</a>
2284 <span class="comment">% hObject    handle to ans_bpm_c05 (see GCBO)</span>
2285 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2286 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2287 
2288 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2289 <span class="comment">%       See ISPC and COMPUTER.</span>
2290 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2291     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2292 <span class="keyword">end</span>
2293 
2294 
2295 
2296 <a name="_sub118" href="#_subfunctions" class="code">function ans_bpm_c06_Callback(hObject, eventdata, handles)</a>
2297 <span class="comment">% hObject    handle to ans_bpm_c06 (see GCBO)</span>
2298 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2299 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2300 
2301 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c06 as text</span>
2302 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c06 as a double</span>
2303 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2304 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2305 tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2306 
2307 
2308 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2309 <a name="_sub119" href="#_subfunctions" class="code">function ans_bpm_c06_CreateFcn(hObject, eventdata, handles)</a>
2310 <span class="comment">% hObject    handle to ans_bpm_c06 (see GCBO)</span>
2311 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2312 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2313 
2314 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2315 <span class="comment">%       See ISPC and COMPUTER.</span>
2316 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2317     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2318 <span class="keyword">end</span>
2319 
2320 
2321 
2322 <a name="_sub120" href="#_subfunctions" class="code">function ans_bpm_c07_Callback(hObject, eventdata, handles)</a>
2323 <span class="comment">% hObject    handle to ans_bpm_c07 (see GCBO)</span>
2324 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2325 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2326 
2327 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c07 as text</span>
2328 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c07 as a double</span>
2329 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2330 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2331 tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2332 
2333 
2334 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2335 <a name="_sub121" href="#_subfunctions" class="code">function ans_bpm_c07_CreateFcn(hObject, eventdata, handles)</a>
2336 <span class="comment">% hObject    handle to ans_bpm_c07 (see GCBO)</span>
2337 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2338 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2339 
2340 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2341 <span class="comment">%       See ISPC and COMPUTER.</span>
2342 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2343     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2344 <span class="keyword">end</span>
2345 
2346 
2347 
2348 <a name="_sub122" href="#_subfunctions" class="code">function ans_bpm_c08_Callback(hObject, eventdata, handles)</a>
2349 <span class="comment">% hObject    handle to ans_bpm_c08 (see GCBO)</span>
2350 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2351 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2352 
2353 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c08 as text</span>
2354 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c08 as a double</span>
2355 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2356 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2357 tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2358 
2359 
2360 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2361 <a name="_sub123" href="#_subfunctions" class="code">function ans_bpm_c08_CreateFcn(hObject, eventdata, handles)</a>
2362 <span class="comment">% hObject    handle to ans_bpm_c08 (see GCBO)</span>
2363 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2364 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2365 
2366 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2367 <span class="comment">%       See ISPC and COMPUTER.</span>
2368 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2369     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2370 <span class="keyword">end</span>
2371 
2372 
2373 
2374 <a name="_sub124" href="#_subfunctions" class="code">function ans_bpm_c09_Callback(hObject, eventdata, handles)</a>
2375 <span class="comment">% hObject    handle to ans_bpm_c09 (see GCBO)</span>
2376 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2377 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2378 
2379 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c09 as text</span>
2380 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c09 as a double</span>
2381 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2382 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2383 tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2384 
2385 
2386 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2387 <a name="_sub125" href="#_subfunctions" class="code">function ans_bpm_c09_CreateFcn(hObject, eventdata, handles)</a>
2388 <span class="comment">% hObject    handle to ans_bpm_c09 (see GCBO)</span>
2389 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2390 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2391 
2392 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2393 <span class="comment">%       See ISPC and COMPUTER.</span>
2394 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2395     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2396 <span class="keyword">end</span>
2397 
2398 
2399 
2400 <a name="_sub126" href="#_subfunctions" class="code">function ans_bpm_c10_Callback(hObject, eventdata, handles)</a>
2401 <span class="comment">% hObject    handle to ans_bpm_c10 (see GCBO)</span>
2402 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2403 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2404 
2405 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c10 as text</span>
2406 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c10 as a double</span>
2407 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2408 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2409 tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2410 
2411 
2412 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2413 <a name="_sub127" href="#_subfunctions" class="code">function ans_bpm_c10_CreateFcn(hObject, eventdata, handles)</a>
2414 <span class="comment">% hObject    handle to ans_bpm_c10 (see GCBO)</span>
2415 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2416 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2417 
2418 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2419 <span class="comment">%       See ISPC and COMPUTER.</span>
2420 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2421     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2422 <span class="keyword">end</span>
2423 
2424 
2425 
2426 <a name="_sub128" href="#_subfunctions" class="code">function ans_bpm_c11_Callback(hObject, eventdata, handles)</a>
2427 <span class="comment">% hObject    handle to ans_bpm_c11 (see GCBO)</span>
2428 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2429 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2430 
2431 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c11 as text</span>
2432 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c11 as a double</span>
2433 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2434 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2435 tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2436 
2437 
2438 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2439 <a name="_sub129" href="#_subfunctions" class="code">function ans_bpm_c11_CreateFcn(hObject, eventdata, handles)</a>
2440 <span class="comment">% hObject    handle to ans_bpm_c11 (see GCBO)</span>
2441 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2442 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2443 
2444 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2445 <span class="comment">%       See ISPC and COMPUTER.</span>
2446 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2447     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2448 <span class="keyword">end</span>
2449 
2450 
2451 
2452 <a name="_sub130" href="#_subfunctions" class="code">function ans_bpm_c12_Callback(hObject, eventdata, handles)</a>
2453 <span class="comment">% hObject    handle to ans_bpm_c12 (see GCBO)</span>
2454 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2455 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2456 
2457 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c12 as text</span>
2458 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c12 as a double</span>
2459 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2460 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2461 tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2462 
2463 
2464 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2465 <a name="_sub131" href="#_subfunctions" class="code">function ans_bpm_c12_CreateFcn(hObject, eventdata, handles)</a>
2466 <span class="comment">% hObject    handle to ans_bpm_c12 (see GCBO)</span>
2467 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2468 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2469 
2470 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2471 <span class="comment">%       See ISPC and COMPUTER.</span>
2472 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2473     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2474 <span class="keyword">end</span>
2475 
2476 
2477 
2478 <a name="_sub132" href="#_subfunctions" class="code">function ans_bpm_c13_Callback(hObject, eventdata, handles)</a>
2479 <span class="comment">% hObject    handle to ans_bpm_c13 (see GCBO)</span>
2480 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2481 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2482 
2483 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c13 as text</span>
2484 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c13 as a double</span>
2485 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2486 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2487 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2488 
2489 
2490 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2491 <a name="_sub133" href="#_subfunctions" class="code">function ans_bpm_c13_CreateFcn(hObject, eventdata, handles)</a>
2492 <span class="comment">% hObject    handle to ans_bpm_c13 (see GCBO)</span>
2493 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2494 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2495 
2496 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2497 <span class="comment">%       See ISPC and COMPUTER.</span>
2498 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2499     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2500 <span class="keyword">end</span>
2501 
2502 
2503 
2504 <a name="_sub134" href="#_subfunctions" class="code">function ans_bpm_c14_Callback(hObject, eventdata, handles)</a>
2505 <span class="comment">% hObject    handle to ans_bpm_c14 (see GCBO)</span>
2506 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2507 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2508 
2509 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c14 as text</span>
2510 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c14 as a double</span>
2511 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2512 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2513 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2514 
2515 
2516 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2517 <a name="_sub135" href="#_subfunctions" class="code">function ans_bpm_c14_CreateFcn(hObject, eventdata, handles)</a>
2518 <span class="comment">% hObject    handle to ans_bpm_c14 (see GCBO)</span>
2519 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2520 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2521 
2522 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2523 <span class="comment">%       See ISPC and COMPUTER.</span>
2524 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2525     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2526 <span class="keyword">end</span>
2527 
2528 
2529 
2530 <a name="_sub136" href="#_subfunctions" class="code">function ans_bpm_c15_Callback(hObject, eventdata, handles)</a>
2531 <span class="comment">% hObject    handle to ans_bpm_c15 (see GCBO)</span>
2532 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2533 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2534 
2535 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c15 as text</span>
2536 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c15 as a double</span>
2537 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2538 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2539 tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2540 
2541 
2542 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2543 <a name="_sub137" href="#_subfunctions" class="code">function ans_bpm_c15_CreateFcn(hObject, eventdata, handles)</a>
2544 <span class="comment">% hObject    handle to ans_bpm_c15 (see GCBO)</span>
2545 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2546 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2547 
2548 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2549 <span class="comment">%       See ISPC and COMPUTER.</span>
2550 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2551     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2552 <span class="keyword">end</span>
2553 
2554 
2555 
2556 <a name="_sub138" href="#_subfunctions" class="code">function ans_bpm_c16_Callback(hObject, eventdata, handles)</a>
2557 <span class="comment">% hObject    handle to ans_bpm_c16 (see GCBO)</span>
2558 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2559 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2560 
2561 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c16 as text</span>
2562 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c16 as a double</span>
2563 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2564 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2565 tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2566 
2567 
2568 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2569 <a name="_sub139" href="#_subfunctions" class="code">function ans_bpm_c16_CreateFcn(hObject, eventdata, handles)</a>
2570 <span class="comment">% hObject    handle to ans_bpm_c16 (see GCBO)</span>
2571 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2572 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2573 
2574 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2575 <span class="comment">%       See ISPC and COMPUTER.</span>
2576 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2577     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2578 <span class="keyword">end</span>
2579 
2580 
2581 
2582 <a name="_sub140" href="#_subfunctions" class="code">function edit_filling_relecture_tables_Callback(hObject, eventdata, handles)</a>
2583 <span class="comment">% hObject    handle to edit_filling_relecture_tables (see GCBO)</span>
2584 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2585 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2586 
2587 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_relecture_tables as text</span>
2588 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_relecture_tables as a double</span>
2589 
2590 
2591 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2592 <a name="_sub141" href="#_subfunctions" class="code">function edit_filling_relecture_tables_CreateFcn(hObject, eventdata, handles)</a>
2593 <span class="comment">% hObject    handle to edit_filling_relecture_tables (see GCBO)</span>
2594 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2595 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2596 
2597 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2598 <span class="comment">%       See ISPC and COMPUTER.</span>
2599 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2600     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2601 <span class="keyword">end</span>
2602 
2603 
2604 
2605 <a name="_sub142" href="#_subfunctions" class="code">function edit_filling_relecture_bunch_Callback(hObject, eventdata, handles)</a>
2606 <span class="comment">% hObject    handle to edit_filling_relecture_bunch (see GCBO)</span>
2607 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2608 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2609 
2610 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_relecture_bunch as text</span>
2611 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_relecture_bunch as a double</span>
2612 
2613 
2614 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2615 <a name="_sub143" href="#_subfunctions" class="code">function edit_filling_relecture_bunch_CreateFcn(hObject, eventdata, handles)</a>
2616 <span class="comment">% hObject    handle to edit_filling_relecture_bunch (see GCBO)</span>
2617 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2618 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2619 
2620 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2621 <span class="comment">%       See ISPC and COMPUTER.</span>
2622 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2623     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2624 <span class="keyword">end</span>
2625 
2626 
2627 
2628 <a name="_sub144" href="#_subfunctions" class="code">function edit_filling_entrer_bunch_Callback(hObject, eventdata, handles)</a>
2629 <span class="comment">% hObject    handle to edit_filling_entrer_bunch (see GCBO)</span>
2630 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2631 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2632 
2633 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_entrer_bunch as text</span>
2634 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_entrer_bunch as a double</span>
2635 
2636 <span class="comment">%set(handles.listbox_fillingmode,'value',12);</span>
2637 <span class="comment">%listbox_fillingmode_Callback;</span>
2638 
2639 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2640 <a name="_sub145" href="#_subfunctions" class="code">function edit_filling_entrer_bunch_CreateFcn(hObject, eventdata, handles)</a>
2641 <span class="comment">% hObject    handle to edit_filling_entrer_bunch (see GCBO)</span>
2642 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2643 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2644 
2645 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2646 <span class="comment">%       See ISPC and COMPUTER.</span>
2647 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2648     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2649 <span class="keyword">end</span>
2650 
2651 
2652 <span class="comment">% --- Executes on button press in button_update.</span>
2653 <a name="_sub146" href="#_subfunctions" class="code">function button_update_Callback(hObject, eventdata, handles)</a>
2654 <span class="comment">% hObject    handle to button_update (see GCBO)</span>
2655 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2656 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2657 
2658 <a href="do_update.html" class="code" title="function do_update">do_update</a>
2659 
2660 <span class="comment">% --- Executes on button press in button_acquisition_trigstatus.</span>
2661 <a name="_sub147" href="#_subfunctions" class="code">function button_acquisition_trigstatus_Callback(hObject, eventdata, handles)</a>
2662 <span class="comment">% hObject    handle to button_acquisition_trigstatus (see GCBO)</span>
2663 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2664 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2665 
2666 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
2667 
2668 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2669 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2670 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2671 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2672 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2673 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2674 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2675 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2676 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2677 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2678 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2679 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2680 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2681 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2682 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2683 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2684 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2685 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2686 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2687 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2688 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2689 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2690 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2691 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2692 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2693 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2694 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2695 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2696 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2697 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2698 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2699 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2700 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2701 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2702 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2703 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2704 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2705 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2706 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2707 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2708 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2709 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2710 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2711 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2712 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2713 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2714 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2715 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2716 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2717 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2718 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2719 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2720 
2721 <a href="get_synchro_trigstatus.html" class="code" title="function get_synchro_trigstatus(handles)">get_synchro_trigstatus</a>(handles)
2722 
2723 
2724 <span class="comment">% --- Executes on button press in togglebutton2.</span>
2725 <a name="_sub148" href="#_subfunctions" class="code">function togglebutton2_Callback(hObject, eventdata, handles)</a>
2726 <span class="comment">% hObject    handle to togglebutton2 (see GCBO)</span>
2727 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2728 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2729 
2730 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of togglebutton2</span>
2731 
2732 
2733 <span class="comment">% --- Executes on selection change in listbox_fillingmode.</span>
2734 <a name="_sub149" href="#_subfunctions" class="code">function listbox_fillingmode_Callback(hObject, eventdata, handles)</a>
2735 <span class="comment">% hObject    handle to listbox_fillingmode (see GCBO)</span>
2736 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2737 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2738 
2739 <span class="comment">% Hints: contents = get(hObject,'String') returns listbox_fillingmode contents as cell array</span>
2740 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from listbox_fillingmode</span>
2741 pattern=get(hObject,<span class="string">'String'</span>);
2742 mode=get(hObject,<span class="string">'Value'</span>);
2743 fprintf(<span class="string">'***************************************************\n'</span>)
2744 fprintf(<span class="string">'Mode de remplissage sÃ©lectionnÃ© : %s\n'</span>,pattern{mode})
2745 fprintf(<span class="string">'***************************************************\n'</span>)
2746 
2747 
2748 <span class="comment">% PrÃ©pare les tables pour le 3 Hz</span>
2749 quart=[1 105 209 313];
2750 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
2751 offset_ext=temp.value(1)*52;
2752 offset_linac=str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>)) ;<span class="comment">% dÃ©lai fin de rÃ©glage en ns</span>
2753 offset_linac=offset_linac/handles.lin_fin_step;                   <span class="comment">% dÃ©lai fin de rÃ©glage en pas de handles.lin_fin_step ps</span>
2754 bjump=handles.one_bunch;
2755 
2756 
2757 <span class="keyword">if</span> (mode&lt;=4)    <span class="comment">%LPM</span>
2758     bunch=quart(mode);
2759     fillingmode=<span class="string">'1/4'</span>;
2760 <span class="keyword">elseif</span> (mode&gt;4)&amp;&amp;(mode&lt;=7) <span class="comment">%LPM</span>
2761     bunch=quart(1:(mode-3));
2762     <span class="keyword">if</span> mode==5 ; fillingmode=<span class="string">'1/2'</span>; <span class="keyword">end</span>
2763     <span class="keyword">if</span> mode==6 ; fillingmode=<span class="string">'3/4'</span>; <span class="keyword">end</span>
2764     <span class="keyword">if</span> mode==7 ; fillingmode=<span class="string">'4/4'</span>; <span class="keyword">end</span>
2765 <span class="keyword">elseif</span> (mode==8)    <span class="comment">%LPM</span>
2766     bunch=[365];      <span class="comment">% SPM hybride</span>
2767     <span class="comment">%bunch=[0 104+32 2*(104+40)]+1; % spÃ©cial 3/4</span>
2768     fillingmode=<span class="string">'3/4'</span>;
2769 <span class="keyword">elseif</span> (mode==9)   <span class="comment">% SPM    1 paquet</span>
2770     bunch=[1];
2771     fillingmode=<span class="string">'1 bunch'</span>;
2772 <span class="keyword">elseif</span> (mode==10)  <span class="comment">% SPM    8 paquets</span>
2773     bunch=[0:7]*52+1;
2774     fillingmode=<span class="string">'8 bunches'</span>;
2775 <span class="keyword">elseif</span> (mode==11)  <span class="comment">% SPM    16 paquets</span>
2776     bunch=[0:15]*26+1;
2777     fillingmode=<span class="string">'16 bunches'</span>;
2778 <span class="keyword">elseif</span> (mode==12)  <span class="comment">% SPM    n paquets</span>
2779     bunch=str2num(get(handles.edit_filling_entrer_bunch,<span class="string">'String'</span>));
2780     <span class="keyword">if</span> isempty(bunch)
2781         set(handles.edit_filling_entrer_bunch,<span class="string">'String'</span>,<span class="string">'Bug format'</span>);
2782     <span class="keyword">end</span>
2783     fillingmode=<span class="string">'Few bunches'</span>;
2784 <span class="keyword">elseif</span> (mode==13)  <span class="comment">% SPM    n paquets</span>
2785     paq=str2num(get(handles.edit_filling_entrer_bunch1,<span class="string">'String'</span>));
2786     <span class="keyword">if</span> (length(paq) == 2)
2787        bunch=paq(1):paq(2);
2788     <span class="keyword">else</span>
2789        set(handles.edit_filling_entrer_bunch1,<span class="string">'String'</span>,<span class="string">'Bug format'</span>)
2790     <span class="keyword">end</span>
2791     fillingmode=<span class="string">'Few bunches'</span>;
2792 <span class="keyword">end</span>
2793 
2794 <span class="comment">% Renseigne le filling Mode</span>
2795 tango_write_attribute2(<span class="string">'ANS/DG/PUB-FillingMode'</span>, <span class="string">'fillingMode'</span>,fillingmode)
2796 
2797 <span class="comment">% Charge la longueur de la rafale par dÃ©faut sur un cycle</span>
2798 Ncoup=length(bunch);
2799 boucle=int16(str2double(get(handles.edit_Ncycle,<span class="string">'String'</span>)));
2800 <span class="keyword">if</span> Ncoup&gt;=1
2801     set(handles.edit_Ncoup,<span class="string">'String'</span>,num2str(Ncoup));
2802     tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'burstSize'</span>,int32(Ncoup*boucle));
2803 <span class="keyword">end</span>
2804     
2805     
2806 [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);
2807 dpaquet=dpaquet*bjump+offset_linac;
2808 table=int32([length(bunch) dtour dpaquet]);
2809 handles.table=table;
2810 handles.bunch=bunch;
2811 
2812 <span class="comment">%FileName = fullfile(getfamilydata('Directory', 'Synchro'), 'table');</span>
2813 FileName = [handles.DirName <span class="string">'table.mat'</span>];
2814 save(FileName, <span class="string">'table'</span>); <span class="comment">% pour palier aux handles via timer non mis Ã  jour !!!!!!</span>
2815 
2816 modeinj=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
2817 <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)  <span class="comment">% on rempli la table sur paquet 1 par dÃ©faut, pas utilisÃ©e</span>
2818     table=handles.table0;
2819     tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table);
2820     
2821 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>) <span class="comment">% on rempli la table associÃ©e au remplissage</span>
2822     tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table);
2823     pause(1); <span class="comment">% mise a jour table ATK</span>
2824     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
2825     n=temp.value;
2826     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
2827     table_ext=temp.value(1:n); <span class="comment">%-offset_ext;</span>
2828     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'LinacDelayTable'</span>);
2829     table_linac=(temp.value(1:n)-offset_linac)/bjump;
2830     table=[];
2831     <span class="keyword">for</span> i=1:n
2832         table=[table <span class="string">' '</span> <span class="string">'('</span> num2str([table_ext(i)])  <span class="string">' '</span>  num2str([table_linac(i)]) <span class="string">')'</span>];
2833     <span class="keyword">end</span>
2834 <span class="keyword">end</span>
2835 
2836 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[num2str(table)]);
2837 set(handles.edit_filling_relecture_bunch, <span class="string">'String'</span>,[num2str(bunch)]);
2838 
2839 
2840 guidata(hObject, handles);
2841 
2842 
2843 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2844 <a name="_sub150" href="#_subfunctions" class="code">function listbox_fillingmode_CreateFcn(hObject, eventdata, handles)</a>
2845 <span class="comment">% hObject    handle to listbox_fillingmode (see GCBO)</span>
2846 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2847 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2848 
2849 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
2850 <span class="comment">%       See ISPC and COMPUTER.</span>
2851 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2852     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2853 <span class="keyword">end</span>
2854 
2855 
2856 <span class="comment">% --- Executes on button press in button_fix.</span>
2857 <a name="_sub151" href="#_subfunctions" class="code">function button_fix_Callback(hObject, eventdata, handles)</a>
2858 <span class="comment">% hObject    handle to button_fix (see GCBO)</span>
2859 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2860 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2861 
2862 [clk_spare,clk_soft]=<a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>;
2863 handles.clk_spare  =clk_spare;
2864 handles.clk_soft=clk_soft;
2865 
2866 <span class="comment">% n=1;</span>
2867 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSprStepDelay');</span>
2868 <span class="comment">% clk1=temp.value(n);</span>
2869 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftStepDelay');</span>
2870 <span class="comment">% clk2=temp.value(n);</span>
2871 <span class="comment">%</span>
2872 <span class="comment">% jump=int32([0 39 26 13]);</span>
2873 <span class="comment">% handles.clk_spare  =jump +  int32(clk1);</span>
2874 <span class="comment">% handles.clk_soft=jump  + int32(clk2);</span>
2875 
2876 guidata(hObject, handles);
2877 
2878 
2879 
2880 <a name="_sub152" href="#_subfunctions" class="code">function edit_Ncycle_Callback(hObject, eventdata, handles)</a>
2881 <span class="comment">% hObject    handle to edit_Ncycle (see GCBO)</span>
2882 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2883 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2884 
2885 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Ncycle as text</span>
2886 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Ncycle as a double</span>
2887 boucle=str2double(get(hObject,<span class="string">'String'</span>));
2888 Ncoup=str2double(get(handles.edit_Ncoup,<span class="string">'String'</span>));
2889 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'burstSize'</span>,int32(Ncoup*boucle));
2890 
2891 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2892 <a name="_sub153" href="#_subfunctions" class="code">function edit_Ncycle_CreateFcn(hObject, eventdata, handles)</a>
2893 <span class="comment">% hObject    handle to edit_Ncycle (see GCBO)</span>
2894 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2895 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2896 
2897 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2898 <span class="comment">%       See ISPC and COMPUTER.</span>
2899 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2900     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2901 <span class="keyword">end</span>
2902 
2903 
2904 
2905 <a name="_sub154" href="#_subfunctions" class="code">function edit_Ncoup_Callback(hObject, eventdata, handles)</a>
2906 <span class="comment">% hObject    handle to edit_Ncoup (see GCBO)</span>
2907 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2908 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2909 
2910 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Ncoup as text</span>
2911 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Ncoup as a double</span>
2912 Ncoup=str2double(get(hObject,<span class="string">'String'</span>));
2913 boucle=str2double(get(handles.edit_Ncycle,<span class="string">'String'</span>));
2914 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'burstSize'</span>,int32(Ncoup*boucle));
2915 
2916 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2917 <a name="_sub155" href="#_subfunctions" class="code">function edit_Ncoup_CreateFcn(hObject, eventdata, handles)</a>
2918 <span class="comment">% hObject    handle to edit_Ncoup (see GCBO)</span>
2919 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2920 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2921 
2922 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2923 <span class="comment">%       See ISPC and COMPUTER.</span>
2924 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2925     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2926 <span class="keyword">end</span>
2927 
2928 
2929 
2930 <a name="_sub156" href="#_subfunctions" class="code">function edit_qlt1_Callback(hObject, eventdata, handles)</a>
2931 <span class="comment">% hObject    handle to edit_qlt1 (see GCBO)</span>
2932 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2933 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2934 
2935 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_qlt1 as text</span>
2936 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_qlt1 as a double</span>
2937 
2938 
2939 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2940 <a name="_sub157" href="#_subfunctions" class="code">function edit_qlt1_CreateFcn(hObject, eventdata, handles)</a>
2941 <span class="comment">% hObject    handle to edit_qlt1 (see GCBO)</span>
2942 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2943 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2944 
2945 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2946 <span class="comment">%       See ISPC and COMPUTER.</span>
2947 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2948     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2949 <span class="keyword">end</span>
2950 
2951 
2952 
2953 <a name="_sub158" href="#_subfunctions" class="code">function edit_iboo_Callback(hObject, eventdata, handles)</a>
2954 <span class="comment">% hObject    handle to edit_iboo (see GCBO)</span>
2955 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2956 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2957 
2958 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_iboo as text</span>
2959 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_iboo as a double</span>
2960 
2961 
2962 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2963 <a name="_sub159" href="#_subfunctions" class="code">function edit_iboo_CreateFcn(hObject, eventdata, handles)</a>
2964 <span class="comment">% hObject    handle to edit_iboo (see GCBO)</span>
2965 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2966 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2967 
2968 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2969 <span class="comment">%       See ISPC and COMPUTER.</span>
2970 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2971     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2972 <span class="keyword">end</span>
2973 
2974 
2975 
2976 <a name="_sub160" href="#_subfunctions" class="code">function edit_dians_Callback(hObject, eventdata, handles)</a>
2977 <span class="comment">% hObject    handle to edit_dians (see GCBO)</span>
2978 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2979 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2980 
2981 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_dians as text</span>
2982 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_dians as a double</span>
2983 
2984 
2985 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2986 <a name="_sub161" href="#_subfunctions" class="code">function edit_dians_CreateFcn(hObject, eventdata, handles)</a>
2987 <span class="comment">% hObject    handle to edit_dians (see GCBO)</span>
2988 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2989 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2990 
2991 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2992 <span class="comment">%       See ISPC and COMPUTER.</span>
2993 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2994     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2995 <span class="keyword">end</span>
2996 
2997 
2998 
2999 <a name="_sub162" href="#_subfunctions" class="code">function edit_rlt1_Callback(hObject, eventdata, handles)</a>
3000 <span class="comment">% hObject    handle to edit_rlt1 (see GCBO)</span>
3001 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3002 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3003 
3004 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rlt1 as text</span>
3005 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rlt1 as a double</span>
3006 
3007 
3008 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3009 <a name="_sub163" href="#_subfunctions" class="code">function edit_rlt1_CreateFcn(hObject, eventdata, handles)</a>
3010 <span class="comment">% hObject    handle to edit_rlt1 (see GCBO)</span>
3011 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3012 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3013 
3014 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3015 <span class="comment">%       See ISPC and COMPUTER.</span>
3016 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3017     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3018 <span class="keyword">end</span>
3019 
3020 
3021 
3022 <a name="_sub164" href="#_subfunctions" class="code">function edit_rboo_Callback(hObject, eventdata, handles)</a>
3023 <span class="comment">% hObject    handle to edit_rboo (see GCBO)</span>
3024 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3025 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3026 
3027 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rboo as text</span>
3028 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rboo as a double</span>
3029 
3030 
3031 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3032 <a name="_sub165" href="#_subfunctions" class="code">function edit_rboo_CreateFcn(hObject, eventdata, handles)</a>
3033 <span class="comment">% hObject    handle to edit_rboo (see GCBO)</span>
3034 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3035 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3036 
3037 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3038 <span class="comment">%       See ISPC and COMPUTER.</span>
3039 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3040     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3041 <span class="keyword">end</span>
3042 
3043 
3044 
3045 <a name="_sub166" href="#_subfunctions" class="code">function edit_rans_Callback(hObject, eventdata, handles)</a>
3046 <span class="comment">% hObject    handle to edit_rans (see GCBO)</span>
3047 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3048 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3049 
3050 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rans as text</span>
3051 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rans as a double</span>
3052 
3053 
3054 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3055 <a name="_sub167" href="#_subfunctions" class="code">function edit_rans_CreateFcn(hObject, eventdata, handles)</a>
3056 <span class="comment">% hObject    handle to edit_rans (see GCBO)</span>
3057 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3058 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3059 
3060 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3061 <span class="comment">%       See ISPC and COMPUTER.</span>
3062 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3063     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3064 <span class="keyword">end</span>
3065 
3066 
3067 
3068 <a name="_sub168" href="#_subfunctions" class="code">function edit_dians1_Callback(hObject, eventdata, handles)</a>
3069 <span class="comment">% hObject    handle to edit_dians1 (see GCBO)</span>
3070 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3071 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3072 
3073 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_dians1 as text</span>
3074 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_dians1 as a double</span>
3075 
3076 
3077 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3078 <a name="_sub169" href="#_subfunctions" class="code">function edit_dians1_CreateFcn(hObject, eventdata, handles)</a>
3079 <span class="comment">% hObject    handle to edit_dians1 (see GCBO)</span>
3080 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3081 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3082 
3083 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3084 <span class="comment">%       See ISPC and COMPUTER.</span>
3085 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3086     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3087 <span class="keyword">end</span>
3088 
3089 
3090 
3091 <a name="_sub170" href="#_subfunctions" class="code">function edit_cycle_Callback(hObject, eventdata, handles)</a>
3092 <span class="comment">% hObject    handle to edit_cycle (see GCBO)</span>
3093 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3094 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3095 
3096 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_cycle as text</span>
3097 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_cycle as a double</span>
3098 
3099 
3100 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3101 <a name="_sub171" href="#_subfunctions" class="code">function edit_cycle_CreateFcn(hObject, eventdata, handles)</a>
3102 <span class="comment">% hObject    handle to edit_cycle (see GCBO)</span>
3103 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3104 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3105 
3106 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3107 <span class="comment">%       See ISPC and COMPUTER.</span>
3108 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3109     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3110 <span class="keyword">end</span>
3111 
3112 
3113 
3114 <a name="_sub172" href="#_subfunctions" class="code">function edit_courant_total_Callback(hObject, eventdata, handles)</a>
3115 <span class="comment">% hObject    handle to edit_courant_total (see GCBO)</span>
3116 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3117 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3118 
3119 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_courant_total as text</span>
3120 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_courant_total as a double</span>
3121 
3122 
3123 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3124 <a name="_sub173" href="#_subfunctions" class="code">function edit_courant_total_CreateFcn(hObject, eventdata, handles)</a>
3125 <span class="comment">% hObject    handle to edit_courant_total (see GCBO)</span>
3126 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3127 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3128 
3129 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3130 <span class="comment">%       See ISPC and COMPUTER.</span>
3131 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3132     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3133 <span class="keyword">end</span>
3134 
3135 
3136 
3137 <a name="_sub174" href="#_subfunctions" class="code">function lin_canon_spm_Callback(hObject, eventdata, handles)</a>
3138 <span class="comment">% hObject    handle to lin_canon_spm (see GCBO)</span>
3139 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3140 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3141 
3142 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_canon_spm as text</span>
3143 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_canon_spm as a double</span>
3144 
3145 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
3146 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
3147 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>,delay);
3148 
3149 
3150 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3151 <a name="_sub175" href="#_subfunctions" class="code">function lin_canon_spm_CreateFcn(hObject, eventdata, handles)</a>
3152 <span class="comment">% hObject    handle to lin_canon_spm (see GCBO)</span>
3153 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3154 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3155 
3156 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3157 <span class="comment">%       See ISPC and COMPUTER.</span>
3158 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3159     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3160 <span class="keyword">end</span>
3161 
3162 
3163 <a name="_sub176" href="#_subfunctions" class="code">function  uipanel_mode_CreateFcn(hObject, eventdata, handles)</a>
3164 <span class="comment">% hObject    handle to lin_canon_spm (see GCBO)</span>
3165 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3166 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3167 
3168 
3169 <span class="comment">% % --------------------------------------------------------------------</span>
3170 <a name="_sub177" href="#_subfunctions" class="code">function uipanel_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3171 <span class="comment">% % hObject    handle to uipanel_mode (see GCBO)</span>
3172 <span class="comment">% % eventdata  reserved - to be defined in a future version of MATLAB</span>
3173 <span class="comment">% % handles    structure with handles and user data (see GUIDATA)</span>
3174 
3175 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3176 set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3177 mode=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3178 
3179 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3180     <span class="keyword">case</span> <span class="string">'togglebutton_soft'</span>
3181         <span class="comment">% switch to soft (load golden)</span>
3182         
3183         Directory=handles.Directory;
3184         DirName=handles.DirName;
3185         file=<span class="string">'golden_rafale_soft.mat'</span>;
3186         <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3187         
3188         
3189         <span class="comment">% special septum actif boo et ans</span>
3190         r=(1-0.0004);
3191         <span class="keyword">try</span>
3192             temp=tango_read_attribute2(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext'</span>,<span class="string">'voltage'</span>);boo=temp.value(2)*r
3193             tango_write_attribute2(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext'</span>,<span class="string">'voltage'</span>,boo);
3194             temp=tango_read_attribute2(<span class="string">'ANS-C01/EP/AL_SEP_A'</span>,<span class="string">'voltage'</span>);ans=temp.value(2)*r
3195             tango_write_attribute2(<span class="string">'ANS-C01/EP/AL_SEP_A'</span>,<span class="string">'voltage'</span>,ans);
3196         <span class="keyword">catch</span>
3197             display(<span class="string">'Erreur ajustement tension septa passif'</span>)
3198         <span class="keyword">end</span>
3199         set(handles.edit_Ncoup,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3200         tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,handles.table0);
3201 
3202     <span class="keyword">case</span> <span class="string">'togglebutton_3Hz'</span>
3203         <span class="comment">% switch to 3Hz(load golden)</span>
3204         
3205         Directory=handles.Directory;
3206         DirName=handles.DirName;
3207         file=<span class="string">'golden_rafale_3Hz.mat'</span>;
3208         <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3209         
3210         <span class="comment">% special septum actif boo et ans</span>
3211         r=(1+0.0004);
3212         <span class="keyword">try</span>
3213             temp=tango_read_attribute2(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext'</span>,<span class="string">'voltage'</span>);boo=temp.value(2)*r
3214             tango_write_attribute2(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext'</span>,<span class="string">'voltage'</span>,boo);
3215             temp=tango_read_attribute2(<span class="string">'ANS-C01/EP/AL_SEP_A'</span>,<span class="string">'voltage'</span>);    ans=temp.value(2)*r
3216             tango_write_attribute2(<span class="string">'ANS-C01/EP/AL_SEP_A'</span>,<span class="string">'voltage'</span>,ans);
3217         <span class="keyword">catch</span>
3218             display(<span class="string">'Erreur ajustement tension septa passif'</span>)
3219         <span class="keyword">end</span>
3220         set(handles.edit_Ncoup,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
3221         tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,handles.table);
3222 <span class="keyword">end</span>
3223 
3224 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3225 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3226 display(<span class="string">'ok change address'</span>)
3227 
3228 
3229 
3230 <a name="_sub178" href="#_subfunctions" class="code">function edit_filling_entrer_bunch1_Callback(hObject, eventdata, handles)</a>
3231 <span class="comment">% hObject    handle to edit_filling_entrer_bunch1 (see GCBO)</span>
3232 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3233 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3234 
3235 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_entrer_bunch1 as text</span>
3236 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_entrer_bunch1 as a double</span>
3237 
3238 
3239 
3240 
3241 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3242 <a name="_sub179" href="#_subfunctions" class="code">function edit_filling_entrer_bunch1_CreateFcn(hObject, eventdata, handles)</a>
3243 <span class="comment">% hObject    handle to edit_filling_entrer_bunch1 (see GCBO)</span>
3244 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3245 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3246 
3247 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3248 <span class="comment">%       See ISPC and COMPUTER.</span>
3249 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3250     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3251 <span class="keyword">end</span>
3252 
3253 
3254 
3255 <a name="_sub180" href="#_subfunctions" class="code">function edit_Imin_Callback(hObject, eventdata, handles)</a>
3256 <span class="comment">% hObject    handle to edit_Imin (see GCBO)</span>
3257 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3258 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3259 
3260 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Imin as text</span>
3261 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Imin as a double</span>
3262 
3263 
3264 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3265 <a name="_sub181" href="#_subfunctions" class="code">function edit_Imin_CreateFcn(hObject, eventdata, handles)</a>
3266 <span class="comment">% hObject    handle to edit_Imin (see GCBO)</span>
3267 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3268 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3269 
3270 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3271 <span class="comment">%       See ISPC and COMPUTER.</span>
3272 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3273     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3274 <span class="keyword">end</span>
3275 
3276 
3277 <span class="comment">% --------------------------------------------------------------------</span>
3278 <a name="_sub182" href="#_subfunctions" class="code">function uipanel_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3279 <span class="comment">% hObject    handle to uipanel_spm_mode (see GCBO)</span>
3280 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3281 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3282 
3283 <span class="comment">%h=get(handles.uipanel_spm_mode);</span>
3284 <span class="comment">%get(h.Children)</span>
3285 
3286 mode=get(get(handles.uipanel_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3287 
3288 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3289     <span class="keyword">case</span> <span class="string">'spm_mode_1'</span>
3290         display(<span class="string">'spm_mode_1'</span>)     
3291         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(1));
3292     <span class="keyword">case</span> <span class="string">'spm_mode_2'</span>
3293         display(<span class="string">'spm_mode_2'</span>)  
3294         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(2));
3295     <span class="keyword">case</span> <span class="string">'spm_mode_2p'</span>
3296         display(<span class="string">'spm_mode_2p'</span>)   
3297         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(3));
3298     <span class="keyword">case</span> <span class="string">'spm_mode_3'</span>
3299         display(<span class="string">'spm_mode_3'</span>)    
3300         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(4));   
3301 <span class="keyword">end</span>
3302 
3303 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3304 
3305 <span class="comment">% --------------------------------------------------------------------</span>
3306 <a name="_sub183" href="#_subfunctions" class="code">function uipanel_lpm_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3307 <span class="comment">% hObject    handle to uipanel_lpm_spm_mode (see GCBO)</span>
3308 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3309 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3310 
3311 
3312 mode=get(get(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3313 modeinj=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3314 event0=int32(0);
3315 <span class="keyword">if</span>     strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)
3316     event=int32(5);
3317 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>)
3318     event=int32(2);
3319 <span class="keyword">else</span>
3320     <span class="comment">%%%</span>
3321 <span class="keyword">end</span>
3322 
3323 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3324     <span class="keyword">case</span> <span class="string">'no_mode'</span>
3325         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event0); 
3326         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event0); 
3327         
3328     <span class="keyword">case</span> <span class="string">'lpm_mode'</span>
3329         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event); 
3330         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event0);     
3331         
3332 <span class="comment">%         tango_write_attribute('LT1/AE/CV.2', 'current',  0.058 );</span>
3333 <span class="comment">%         tango_write_attribute('LT1/AE/CV.3', 'current', -0.119 );</span>
3334 
3335     <span class="keyword">case</span> <span class="string">'spm_mode'</span>
3336         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event0); 
3337         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event);   
3338         
3339 <span class="comment">%         tango_write_attribute('LT1/AE/CV.2', 'current',  0.058 );</span>
3340 <span class="comment">%         tango_write_attribute('LT1/AE/CV.3', 'current', -0.119 );</span>
3341         
3342 <span class="keyword">end</span>
3343 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3344 
3345 
3346 
3347 
3348         
3349 
3350 <span class="comment">% --------------------------------------------------------------------</span>
3351 <a name="_sub184" href="#_subfunctions" class="code">function uipanel_central_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
3352 <span class="comment">% hObject    handle to uipanel_central_mode (see GCBO)</span>
3353 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3354 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3355 
3356 mode=get(get(handles.uipanel_central_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3357 modeinj=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3358 
3359 h=<span class="string">'Yes'</span>;
3360 <span class="keyword">if</span> strcmp(mode,<span class="string">'continuous_mode'</span>)
3361     <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>)
3362         h = questdlg(<span class="string">'Attention, déclenchement continu des équipements sur adresses 1 2 3'</span>);
3363     <span class="keyword">end</span>
3364 <span class="keyword">end</span>
3365 
3366 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3367     <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3368         <span class="keyword">case</span> <span class="string">'burst_mode'</span>
3369             tango_command_inout2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'SetBurstMode'</span>);
3370         <span class="keyword">case</span> <span class="string">'continuous_mode'</span>
3371             tango_command_inout2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'SetContinuousMode'</span>);
3372     <span class="keyword">end</span>
3373 <span class="keyword">end</span>
3374 pause(1)
3375 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3376 
3377 <span class="comment">% [etat_central]=test_central_mode(handles);</span>
3378 <span class="comment">% h='Yes';</span>
3379 <span class="comment">% if strcmp(etat_central,'Continu')</span>
3380 <span class="comment">%     h = questdlg('Attention, Trigger en mode continu');</span>
3381 <span class="comment">% end</span>
3382 <span class="comment">% if strcmp(h,'Yes')</span>
3383 <span class="comment">%     set(handles.button_injection_soft,'Enable','Off')</span>
3384 <span class="comment">%     set(handles.edit_modes,'String','Please WAIT !!!!')</span>
3385 <span class="comment">%     file='golden_rafale_3Hz.mat';</span>
3386 <span class="comment">%     load_synchro_rafale(file)</span>
3387 <span class="comment">%     set(handles.button_injection_soft,'Enable','On')</span>
3388 <span class="comment">%     test_modes(handles);</span>
3389 <span class="comment">% end</span>
3390 
3391 
3392 <a name="_sub185" href="#_subfunctions" class="code">function  [etat]=test_central_mode(handles)</a>
3393 <span class="comment">% Verifie le mode central selectionnÃ©  : rafale ou continue</span>
3394 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'currentMode'</span>);
3395 mode=temp.value;
3396 h=get(handles.uipanel_central_mode);
3397 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3398     <span class="keyword">case</span> <span class="string">'BURST'</span>
3399        set(handles.uipanel_central_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
3400        etat=<span class="string">'Rafale'</span>;
3401     <span class="keyword">case</span> <span class="string">'CONTINUOUS'</span>
3402        set(handles.uipanel_central_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
3403        etat=<span class="string">'Continu'</span>;
3404 <span class="keyword">end</span>
3405 
3406 <a name="_sub186" href="#_subfunctions" class="code">function  [etat]=test_injection_mode(handles)</a>
3407 <span class="comment">% Verifie le mode d'injection selectionnÃ© : soft ou 3Hz</span>
3408 <span class="comment">%temp=tango_read_attribute2('LIN/SY/LOCAL.LPM.1', 'spareEvent');</span>
3409 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
3410 mode=temp.value(1);
3411 h=get(handles.uipanel_mode);
3412 <span class="keyword">if</span>     mode==2
3413     set(handles.uipanel_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
3414     etat=<span class="string">'3Hz'</span>;
3415 <span class="keyword">elseif</span> mode==5
3416     set(handles.uipanel_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
3417     etat=<span class="string">'Soft'</span>;
3418 <span class="keyword">else</span>
3419     set(handles.uipanel_mode,<span class="string">'SelectedObject'</span>,[])
3420     etat=<span class="string">'??'</span>;
3421 <span class="keyword">end</span>
3422 
3423 
3424 <a name="_sub187" href="#_subfunctions" class="code">function  [etat]=test_lpm_spm_mode(handles)</a>
3425 <span class="comment">% Verifie le mode selectionnÃ© en SPM ou LPM</span>
3426 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
3427 modelpm=temp.value(1);
3428 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>);
3429 modespm=temp.value(1);
3430 h=get(handles.uipanel_lpm_spm_mode);
3431 <span class="keyword">if</span>     (modelpm==5)&amp;(modespm==0) | (modelpm==2)&amp;(modespm==0)
3432     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
3433     etat=<span class="string">'LPM'</span>;
3434 <span class="keyword">elseif</span> (modelpm==0)&amp;(modespm==5) | (modelpm==0)&amp;(modespm==2)
3435     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
3436     etat=<span class="string">'SPM'</span>;
3437 <span class="keyword">else</span>
3438     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(3))
3439     etat=<span class="string">'NONE'</span>;
3440 <span class="keyword">end</span>
3441 
3442 <a name="_sub188" href="#_subfunctions" class="code">function  [etat]=test_spm_mode(handles)</a>
3443 <span class="comment">% Verifie le mode selectionnÃ© en SPM : 1 2 ou 3 paquets</span>
3444 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>);
3445 mode=temp.value(1);
3446 h=get(handles.uipanel_spm_mode);
3447 select=h.Children(5-mode);
3448 set(handles.uipanel_spm_mode,<span class="string">'SelectedObject'</span>,select)
3449 etat=num2str(5-mode);
3450 
3451 <a name="_sub189" href="#_subfunctions" class="code">function  [etat]=test_cond_inj(handles)</a>
3452 <span class="comment">% Verifie si tir autorise  (Grp fonctionnement)</span>
3453 <span class="keyword">try</span> temp=tango_read_attribute2(<span class="string">'ANS/FC/INJ_COND'</span>, <span class="string">'COND_INJ'</span>); <span class="comment">% 0 no injection,  1 injection</span>
3454     val=temp.value; <span class="keyword">catch</span> val=1 ; <span class="keyword">end</span>; <span class="keyword">if</span> val~=0 ; val=1; <span class="keyword">end</span>;
3455 <span class="keyword">if</span> (val==1)
3456     etat=<span class="string">'TIR AUTORISE'</span>;
3457 <span class="keyword">else</span>
3458     etat=<span class="string">'TIR NON AUTORISE'</span>;
3459 <span class="keyword">end</span>
3460 
3461 
3462 
3463 
3464 <a name="_sub190" href="#_subfunctions" class="code">function  test_modes(handles)</a>
3465 <span class="comment">% Verifie le mode central selectionnÃ©  : rafale ou continue</span>
3466 [etat_central]=<a href="#_sub185" class="code" title="subfunction  [etat]=test_central_mode(handles)">test_central_mode</a>(handles);
3467 <span class="comment">% Verifie le mode d'injection selectionnÃ© : soft ou 3Hz</span>
3468 [etat_injection]=<a href="#_sub186" class="code" title="subfunction  [etat]=test_injection_mode(handles)">test_injection_mode</a>(handles);
3469 <span class="comment">% Verifie le mode selectionnÃ© en SPM ou LPM</span>
3470 [etat_linac]=<a href="#_sub187" class="code" title="subfunction  [etat]=test_lpm_spm_mode(handles)">test_lpm_spm_mode</a>(handles);
3471 <span class="comment">% Verifie le mode selectionnÃ© en SPM : 1 2 ou 3 paquets</span>
3472 [etat_linac_spm]=<a href="#_sub188" class="code" title="subfunction  [etat]=test_spm_mode(handles)">test_spm_mode</a>(handles);
3473 <span class="comment">% Vérifie si injectio autorisee</span>
3474 <span class="comment">%[etat_inj]=test_cond_inj(handles);</span>
3475 
3476 
3477 <span class="comment">% txt=[etat_inj,'    ####     ', ...</span>
3478 <span class="comment">%      'CENTRAL : ',etat_central,'   #   INJECTION : ',etat_injection,'   #   LINAC : ',etat_linac];</span>
3479 txt=[<span class="string">'CENTRAL : '</span>,etat_central,<span class="string">'   #   INJECTION : '</span>,etat_injection,<span class="string">'   #   LINAC : '</span>,etat_linac];
3480 set(handles.edit_modes,<span class="string">'String'</span>,txt)
3481 
3482 
3483 
3484 <a name="_sub191" href="#_subfunctions" class="code">function edit_modes_Callback(hObject, eventdata, handles)</a>
3485 <span class="comment">% hObject    handle to edit_modes (see GCBO)</span>
3486 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3487 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3488 
3489 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_modes as text</span>
3490 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_modes as a double</span>
3491 
3492 
3493 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3494 <a name="_sub192" href="#_subfunctions" class="code">function edit_modes_CreateFcn(hObject, eventdata, handles)</a>
3495 <span class="comment">% hObject    handle to edit_modes (see GCBO)</span>
3496 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3497 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3498 
3499 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3500 <span class="comment">%       See ISPC and COMPUTER.</span>
3501 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3502     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3503 <span class="keyword">end</span>
3504 
3505 <a name="_sub193" href="#_subfunctions" class="code">function ans_k_pc_Callback(hObject, eventdata, handles)</a>
3506 <span class="comment">% hObject    handle to ans_k_pc (see GCBO)</span>
3507 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3508 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3509 
3510 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_k_pc as text</span>
3511 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_k_pc as a double</span>
3512 
3513 
3514 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3515 <a name="_sub194" href="#_subfunctions" class="code">function ans_k_pc_CreateFcn(hObject, eventdata, handles)</a>
3516 <span class="comment">% hObject    handle to ans_k_pc (see GCBO)</span>
3517 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3518 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3519 
3520 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3521 <span class="comment">%       See ISPC and COMPUTER.</span>
3522 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3523     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3524 <span class="keyword">end</span>
3525 
3526 
3527 
3528 <a name="_sub195" href="#_subfunctions" class="code">function ans_k_h_Callback(hObject, eventdata, handles)</a>
3529 <span class="comment">% hObject    handle to ans_k_h (see GCBO)</span>
3530 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3531 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3532 
3533 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_k_h as text</span>
3534 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_k_h as a double</span>
3535 
3536 
3537 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3538 <a name="_sub196" href="#_subfunctions" class="code">function ans_k_h_CreateFcn(hObject, eventdata, handles)</a>
3539 <span class="comment">% hObject    handle to ans_k_h (see GCBO)</span>
3540 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3541 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3542 
3543 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3544 <span class="comment">%       See ISPC and COMPUTER.</span>
3545 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3546     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3547 <span class="keyword">end</span>
3548 
3549 
3550 
3551 <a name="_sub197" href="#_subfunctions" class="code">function ans_k_v_Callback(hObject, eventdata, handles)</a>
3552 <span class="comment">% hObject    handle to ans_k_v (see GCBO)</span>
3553 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3554 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3555 
3556 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_k_v as text</span>
3557 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_k_v as a double</span>
3558 
3559 
3560 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3561 <a name="_sub198" href="#_subfunctions" class="code">function ans_k_v_CreateFcn(hObject, eventdata, handles)</a>
3562 <span class="comment">% hObject    handle to ans_k_v (see GCBO)</span>
3563 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3564 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3565 
3566 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3567 <span class="comment">%       See ISPC and COMPUTER.</span>
3568 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3569     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3570 <span class="keyword">end</span>
3571 
3572 
3573 <span class="comment">% --- Executes on button press in button_kicker.</span>
3574 <a name="_sub199" href="#_subfunctions" class="code">function button_kicker_Callback(hObject, eventdata, handles)</a>
3575 <span class="comment">% hObject    handle to button_kicker (see GCBO)</span>
3576 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3577 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3578 
3579 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of button_kicker</span>
3580 
3581 bpm=get(hObject,<span class="string">'Value'</span>);
3582 
3583 <span class="keyword">if</span> (bpm==0)
3584    set(handles.uipanel_kicker_machine,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
3585 <span class="keyword">elseif</span> (bpm==1)
3586     set(handles.uipanel_kicker_machine,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
3587 <span class="keyword">end</span>
3588 
3589 
3590 <span class="comment">% --- Executes on button press in button_save_golden_soft.</span>
3591 <a name="_sub200" href="#_subfunctions" class="code">function button_save_golden_soft_Callback(hObject, eventdata, handles)</a>
3592 <span class="comment">% hObject    handle to button_save_golden_soft (see GCBO)</span>
3593 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3594 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3595 h = questdlg(<span class="string">'Attention, sauvegarde nouvelle golden !!!'</span>);
3596 
3597 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3598 
3599     DirName=handles.DirName;
3600     [timing]=<a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>(DirName);
3601     <span class="comment">% sauvegarde</span>
3602     file=<span class="string">'golden_rafale_soft.mat'</span>;
3603     <span class="comment">%Directory =  [getfamilydata('Directory','DataRoot') 'Datatemp'];</span>
3604     Directory=handles.Directory;
3605     pwdold = pwd;
3606     cd(Directory);
3607     save(file, <span class="string">'timing'</span>);
3608     cd(pwdold);
3609 
3610 <span class="keyword">end</span>
3611 
3612 
3613 <span class="comment">% --- Executes on button press in button_load_golden_soft.</span>
3614 <a name="_sub201" href="#_subfunctions" class="code">function button_load_golden_soft_Callback(hObject, eventdata, handles)</a>
3615 <span class="comment">% hObject    handle to button_load_golden_soft (see GCBO)</span>
3616 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3617 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3618 
3619 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3620 set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3621 Directory=handles.Directory;
3622 DirName=handles.DirName;
3623 file=<span class="string">'golden_rafale_soft.mat'</span>;
3624 <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3625 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3626 <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3627 
3628 
3629 <span class="comment">% --- Executes on button press in button_load_golden_3Hz.</span>
3630 <a name="_sub202" href="#_subfunctions" class="code">function button_load_golden_3Hz_Callback(hObject, eventdata, handles)</a>
3631 <span class="comment">% hObject    handle to button_load_golden_3Hz (see GCBO)</span>
3632 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3633 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3634 
3635 [etat_central]=<a href="#_sub185" class="code" title="subfunction  [etat]=test_central_mode(handles)">test_central_mode</a>(handles);
3636 h=<span class="string">'Yes'</span>;
3637 <span class="keyword">if</span> strcmp(etat_central,<span class="string">'Continu'</span>)
3638     h = questdlg(<span class="string">'Attention, Trigger en mode continu'</span>);
3639 <span class="keyword">end</span>
3640 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3641     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3642     set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3643     Directory=handles.Directory;
3644     DirName=handles.DirName;
3645     file=<span class="string">'golden_rafale_3Hz.mat'</span>;
3646     <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3647     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3648     <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3649 <span class="keyword">end</span>
3650 
3651 <span class="comment">% --- Executes on button press in button_save_golden_3Hz.</span>
3652 <a name="_sub203" href="#_subfunctions" class="code">function button_save_golden_3Hz_Callback(hObject, eventdata, handles)</a>
3653 <span class="comment">% hObject    handle to button_save_golden_3Hz (see GCBO)</span>
3654 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3655 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3656 h = questdlg(<span class="string">'Attention, sauvegarde nouvelle golden !!!'</span>);
3657 
3658 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3659     
3660     DirName=handles.DirName;
3661     [timing]=<a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>(DirName);
3662     <span class="comment">% sauvegarde</span>
3663     file=<span class="string">'golden_rafale_3Hz.mat'</span>;
3664     <span class="comment">%Directory =  [getfamilydata('Directory','DataRoot') 'Datatemp'];</span>
3665     Directory=handles.Directory;
3666     pwdold = pwd;
3667     cd(Directory);
3668     save(file, <span class="string">'timing'</span>);
3669     cd(pwdold);
3670 
3671 <span class="keyword">end</span>
3672 
3673 <span class="comment">% --- Executes on button press in button_load_golden_3Hz_66MeV.</span>
3674 <a name="_sub204" href="#_subfunctions" class="code">function button_load_golden_3Hz_66MeV_Callback(hObject, eventdata, handles)</a>
3675 <span class="comment">% hObject    handle to button_load_golden_3Hz_66MeV (see GCBO)</span>
3676 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3677 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3678 [etat_central]=<a href="#_sub185" class="code" title="subfunction  [etat]=test_central_mode(handles)">test_central_mode</a>(handles);
3679 h=<span class="string">'Yes'</span>;
3680 <span class="keyword">if</span> strcmp(etat_central,<span class="string">'Continu'</span>)
3681     h = questdlg(<span class="string">'Attention, Trigger en mode continu'</span>);
3682 <span class="keyword">end</span>
3683 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3684     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
3685     set(handles.edit_modes,<span class="string">'String'</span>,<span class="string">'Please WAIT !!!!'</span>)
3686     Directory=handles.Directory;
3687     DirName=handles.DirName;
3688     file=<span class="string">'golden_rafale_3Hz_66MeV.mat'</span>;
3689     <a href="load_synchro_rafale.html" class="code" title="function load_synchro_rafale(Directory,file,DirName)">load_synchro_rafale</a>(Directory,file,DirName)
3690     set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>)
3691     <a href="#_sub190" class="code" title="subfunction  test_modes(handles)">test_modes</a>(handles);
3692 <span class="keyword">end</span>
3693 
3694 
3695 <span class="comment">% --- Executes on button press in button_save_golden_66MeV.</span>
3696 <a name="_sub205" href="#_subfunctions" class="code">function button_save_golden_66MeV_Callback(hObject, eventdata, handles)</a>
3697 <span class="comment">% hObject    handle to button_save_golden_66MeV (see GCBO)</span>
3698 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3699 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3700 h = questdlg(<span class="string">'Attention, sauvegarde nouvelle golden 66 MeV!!!'</span>);
3701 
3702 <span class="keyword">if</span> strcmp(h,<span class="string">'Yes'</span>)
3703 
3704     DirName=handles.DirName;
3705     [timing]=<a href="get_synchro_rafale.html" class="code" title="function [timing]=get_synchro_rafale(DirName)">get_synchro_rafale</a>(DirName);
3706     <span class="comment">% sauvegarde</span>
3707     file=<span class="string">'golden_rafale_3Hz_66MeV.mat'</span>;
3708     <span class="comment">%Directory =  [getfamilydata('Directory','DataRoot') 'Datatemp'];</span>
3709     Directory=handles.Directory;
3710     pwdold = pwd;
3711     cd(Directory);
3712     save(file, <span class="string">'timing'</span>);
3713     cd(pwdold);
3714 
3715 <span class="keyword">end</span>
3716</pre></div>
<hr><address>Generated on Fri 23-Jul-2010 00:42:07 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>