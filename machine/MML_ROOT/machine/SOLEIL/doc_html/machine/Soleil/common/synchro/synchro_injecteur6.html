<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of synchro_injecteur6</title>
  <meta name="keywords" content="synchro_injecteur6">
  <meta name="description" content="SYNCHRO_INJECTEUR6 M-file for synchro_injecteur6.fig">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="#">machine</a> &gt; <a href="#">Soleil</a> &gt; <a href="../index.html">common</a> &gt; <a href="index.html">synchro</a> &gt; synchro_injecteur6.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for machine/Soleil/common/synchro&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>synchro_injecteur6
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>SYNCHRO_INJECTEUR6 M-file for synchro_injecteur6.fig</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function varargout = synchro_injecteur6(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> SYNCHRO_INJECTEUR6 M-file for synchro_injecteur6.fig
      SYNCHRO_INJECTEUR6, by itself, creates a new SYNCHRO_INJECTEUR6 or raises the existing
      singleton*.

      H = SYNCHRO_INJECTEUR6 returns the handle to a new SYNCHRO_INJECTEUR6 or the handle to
      the existing singleton*.

      SYNCHRO_INJECTEUR6('CALLBACK',hObject,eventData,handles,...) calls the local
      function named CALLBACK in SYNCHRO_INJECTEUR6.M with the given input arguments.

      SYNCHRO_INJECTEUR6('Property','Value',...) creates a new SYNCHRO_INJECTEUR6 or raises the
      existing singleton*.  Starting from the left, property value pairs are
      applied to the GUI before synchro_injecteur6_OpeningFunction gets called.  An
      unrecognized property name or invalid value makes property application
      stop.  All inputs are passed to synchro_injecteur6_OpeningFcn via varargin.

      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one
      instance to run (singleton)&quot;.

 See also: GUIDE, GUIDATA, GUIHANDLES</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>	BUCKETNUMBER - Computes n1 n2 for timing system master board for a bucket</li><li><a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>	fix premier quart</li><li><a href="getcharge.html" class="code" title="function  [q1,q2,n]=getcharge(q1,q2,n)">getcharge</a>	calcul efficacité</li><li><a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>	retour update</li><li><a href="start_3Hz.html" class="code" title="function start_3Hz(event)">start_3Hz</a>	test 3Hz</li><li><a href="start_soft.html" class="code" title="function start_soft">start_soft</a>	test 3Hz</li><li><a href="step.html" class="code" title="">step</a>	reglage delta tune à 110 MeV</li><li><a href="stop_3Hz.html" class="code" title="function stop_3Hz">stop_3Hz</a>	test 3Hz</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function synchro_injecteur6_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function varargout = synchro_injecteur6_OutputFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function boo_alim_dipole_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub4" class="code">function boo_alim_dipole_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub5" class="code">function boo_alim_qf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub6" class="code">function boo_alim_qf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub7" class="code">function boo_alim_qd_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub8" class="code">function boo_alim_qd_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub9" class="code">function boo_alim_sf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub10" class="code">function boo_alim_sf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub11" class="code">function boo_alim_sd_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub12" class="code">function boo_alim_sd_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub13" class="code">function boo_rf_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub14" class="code">function boo_rf_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub15" class="code">function lin_canon_lpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub16" class="code">function lin_canon_lpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub17" class="code">function lt1_emittance_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub18" class="code">function lt1_emittance_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub19" class="code">function lt1_MC1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub20" class="code">function lt1_MC1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub21" class="code">function lt1_MC2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub22" class="code">function lt1_MC2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub23" class="code">function lt1_osc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub24" class="code">function lt1_osc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub25" class="code">function sdc1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub26" class="code">function sdc1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub27" class="code">function boo_inj_septum_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub28" class="code">function boo_inj_septum_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub29" class="code">function boo_inj_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub30" class="code">function boo_inj_kicker_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub31" class="code">function boo_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub32" class="code">function boo_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub33" class="code">function boo_nod_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub34" class="code">function boo_nod_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub35" class="code">function boo_dcct_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub36" class="code">function boo_dcct_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub37" class="code">function lin_canon_spm_fin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub38" class="code">function lin_canon_spm_fin_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub39" class="code">function central_pc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub40" class="code">function central_pc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub41" class="code">function central_inj_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub42" class="code">function central_inj_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub43" class="code">function central_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub44" class="code">function central_soft_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub45" class="code">function button_acquisition_nooffset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub46" class="code">function button_acquisition_delay_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub47" class="code">function button_injection_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub48" class="code">function periode_edit_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub49" class="code">function periode_edit_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub50" class="code">function uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)</a></li><li><a href="#_sub51" class="code">function fonction_alex1(arg1,arg2,hObject,eventdata,handles)</a></li><li><a href="#_sub52" class="code">function fonction_alex2(arg1,arg2,hObject,eventdata,handles)</a></li><li><a href="#_sub53" class="code">function Closinggui(obj, event, handles, figure1)</a></li><li><a href="#_sub54" class="code">function button_softmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub55" class="code">function button_softplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub56" class="code">function button_injmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub57" class="code">function button_injplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub58" class="code">function boo_ext_dof_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub59" class="code">function boo_ext_dof_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub60" class="code">function boo_ext_sept_p_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub61" class="code">function boo_ext_sept_p_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub62" class="code">function boo_ext_sept_a_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub63" class="code">function boo_ext_sept_a_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub64" class="code">function boo_ext_kicker_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub65" class="code">function boo_ext_kicker_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub66" class="code">function ans_inj_sept_p_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub67" class="code">function ans_inj_sept_p_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub68" class="code">function ans_inj_sept_a_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub69" class="code">function ans_inj_sept_a_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub70" class="code">function ans_inj_k1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub71" class="code">function ans_inj_k1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub72" class="code">function ans_inj_k2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub73" class="code">function ans_inj_k2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub74" class="code">function ans_inj_k3_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub75" class="code">function ans_inj_k3_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub76" class="code">function ans_inj_k4_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub77" class="code">function ans_inj_k4_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub78" class="code">function ans_dcct_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub79" class="code">function ans_dcct_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub80" class="code">function ans_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub81" class="code">function ans_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub82" class="code">function central_ext_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub83" class="code">function central_ext_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub84" class="code">function central_soft1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub85" class="code">function central_soft1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub86" class="code">function radiobutton6_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub87" class="code">function pushbutton8_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub88" class="code">function pushbutton9_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub89" class="code">function button_extmoins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub90" class="code">function button_extplus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub91" class="code">function sdc2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub92" class="code">function sdc2_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub93" class="code">function lt2_emittance_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub94" class="code">function lt2_emittance_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub95" class="code">function lt2_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub96" class="code">function lt2_bpm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub97" class="code">function lt2_osc_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub98" class="code">function lt2_osc_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub99" class="code">function lin_modulateur_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub100" class="code">function lin_modulateur_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub101" class="code">function inj_offset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub102" class="code">function inj_offset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub103" class="code">function ext_offset_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub104" class="code">function ext_offset_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub105" class="code">function button_acquisition_address_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub106" class="code">function button_offinj_moins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub107" class="code">function button_offinj_plus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub108" class="code">function button_offext_moins_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub109" class="code">function button_offext_plus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub110" class="code">function button_bpm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub111" class="code">function ans_bpm_c01_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub112" class="code">function ans_bpm_c01_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub113" class="code">function ans_bpm_c02_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub114" class="code">function ans_bpm_c02_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub115" class="code">function ans_bpm_c03_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub116" class="code">function ans_bpm_c03_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub117" class="code">function ans_bpm_c04_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub118" class="code">function ans_bpm_c04_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub119" class="code">function ans_bpm_c05_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub120" class="code">function ans_bpm_c05_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub121" class="code">function ans_bpm_c06_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub122" class="code">function ans_bpm_c06_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub123" class="code">function ans_bpm_c07_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub124" class="code">function ans_bpm_c07_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub125" class="code">function ans_bpm_c08_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub126" class="code">function ans_bpm_c08_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub127" class="code">function ans_bpm_c09_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub128" class="code">function ans_bpm_c09_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub129" class="code">function ans_bpm_c10_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub130" class="code">function ans_bpm_c10_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub131" class="code">function ans_bpm_c11_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub132" class="code">function ans_bpm_c11_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub133" class="code">function ans_bpm_c12_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub134" class="code">function ans_bpm_c12_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub135" class="code">function ans_bpm_c13_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub136" class="code">function ans_bpm_c13_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub137" class="code">function ans_bpm_c14_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub138" class="code">function ans_bpm_c14_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub139" class="code">function ans_bpm_c15_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub140" class="code">function ans_bpm_c15_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub141" class="code">function ans_bpm_c16_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub142" class="code">function ans_bpm_c16_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub143" class="code">function edit_filling_relecture_tables_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub144" class="code">function edit_filling_relecture_tables_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub145" class="code">function edit_filling_relecture_bunch_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub146" class="code">function edit_filling_relecture_bunch_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub147" class="code">function edit_filling_entrer_bunch_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub148" class="code">function edit_filling_entrer_bunch_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub149" class="code">function button_update_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub150" class="code">function button_acquisition_trigstatus_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub151" class="code">function togglebutton2_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub152" class="code">function listbox_fillingmode_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub153" class="code">function listbox_fillingmode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub154" class="code">function button_fix_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub155" class="code">function edit_Nshot_soft_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub156" class="code">function edit_Nshot_soft_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub157" class="code">function edit_laps_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub158" class="code">function edit_laps_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub159" class="code">function edit_qlt1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub160" class="code">function edit_qlt1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub161" class="code">function edit_iboo_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub162" class="code">function edit_iboo_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub163" class="code">function edit_dians_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub164" class="code">function edit_dians_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub165" class="code">function edit_rlt1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub166" class="code">function edit_rlt1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub167" class="code">function edit_rboo_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub168" class="code">function edit_rboo_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub169" class="code">function edit_rans_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub170" class="code">function edit_rans_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub171" class="code">function edit_dians1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub172" class="code">function edit_dians1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub173" class="code">function edit_cycle_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub174" class="code">function edit_cycle_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub175" class="code">function edit_courant_total_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub176" class="code">function edit_courant_total_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub177" class="code">function lin_canon_spm_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub178" class="code">function lin_canon_spm_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub179" class="code">function  uipanel_mode_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub180" class="code">function uipanel_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub181" class="code">function edit_filling_entrer_bunch1_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub182" class="code">function edit_filling_entrer_bunch1_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub183" class="code">function edit_Imin_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub184" class="code">function edit_Imin_CreateFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub185" class="code">function uipanel_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li><li><a href="#_sub186" class="code">function uipanel_lpm_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a></li></ul>
<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = synchro_injecteur6(varargin)</a>
0002 <span class="comment">% SYNCHRO_INJECTEUR6 M-file for synchro_injecteur6.fig</span>
0003 <span class="comment">%      SYNCHRO_INJECTEUR6, by itself, creates a new SYNCHRO_INJECTEUR6 or raises the existing</span>
0004 <span class="comment">%      singleton*.</span>
0005 <span class="comment">%</span>
0006 <span class="comment">%      H = SYNCHRO_INJECTEUR6 returns the handle to a new SYNCHRO_INJECTEUR6 or the handle to</span>
0007 <span class="comment">%      the existing singleton*.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%      SYNCHRO_INJECTEUR6('CALLBACK',hObject,eventData,handles,...) calls the local</span>
0010 <span class="comment">%      function named CALLBACK in SYNCHRO_INJECTEUR6.M with the given input arguments.</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%      SYNCHRO_INJECTEUR6('Property','Value',...) creates a new SYNCHRO_INJECTEUR6 or raises the</span>
0013 <span class="comment">%      existing singleton*.  Starting from the left, property value pairs are</span>
0014 <span class="comment">%      applied to the GUI before synchro_injecteur6_OpeningFunction gets called.  An</span>
0015 <span class="comment">%      unrecognized property name or invalid value makes property application</span>
0016 <span class="comment">%      stop.  All inputs are passed to synchro_injecteur6_OpeningFcn via varargin.</span>
0017 <span class="comment">%</span>
0018 <span class="comment">%      *See GUI Options on GUIDE's Tools menu.  Choose &quot;GUI allows only one</span>
0019 <span class="comment">%      instance to run (singleton)&quot;.</span>
0020 <span class="comment">%</span>
0021 <span class="comment">% See also: GUIDE, GUIDATA, GUIHANDLES</span>
0022 
0023 <span class="comment">% Edit the above text to modify the response to help synchro_injecteur6</span>
0024 
0025 <span class="comment">% Last Modified by GUIDE v2.5 05-Dec-2006 14:53:15</span>
0026 
0027 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0028 gui_Singleton = 1;
0029 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0030                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0031                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction synchro_injecteur6_OpeningFcn(hObject, eventdata, handles, varargin)">synchro_injecteur6_OpeningFcn</a>, <span class="keyword">...</span>
0032                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub2" class="code" title="subfunction varargout = synchro_injecteur6_OutputFcn(hObject, eventdata, handles)">synchro_injecteur6_OutputFcn</a>, <span class="keyword">...</span>
0033                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0034                    <span class="string">'gui_Callback'</span>,   []);
0035 <span class="keyword">if</span> nargin &amp;&amp; ischar(varargin{1})
0036     gui_State.gui_Callback = str2func(varargin{1});
0037 <span class="keyword">end</span>
0038 
0039 <span class="keyword">if</span> nargout
0040     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0041 <span class="keyword">else</span>
0042     gui_mainfcn(gui_State, varargin{:});
0043 <span class="keyword">end</span>
0044 <span class="comment">% End initialization code - DO NOT EDIT</span>
0045 
0046 
0047 <span class="comment">% --- Executes just before synchro_injecteur6 is made visible.</span>
0048 <a name="_sub1" href="#_subfunctions" class="code">function synchro_injecteur6_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0049 <span class="comment">% This function has no output args, see OutputFcn.</span>
0050 <span class="comment">% hObject    handle to figure</span>
0051 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0052 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0053 <span class="comment">% varargin   command line arguments to synchro_injecteur6 (see VARARGIN)</span>
0054 
0055 <span class="comment">% Choose default command line output for synchro_injecteur6</span>
0056 handles.output = hObject;
0057 
0058 <span class="comment">% Charge les offset</span>
0059 load(<span class="string">'synchro_offset_lin'</span>, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0060 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
0061 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
0062 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
0063 <span class="comment">% Periode linac fin</span>
0064 handles.lin_fin_step=0.090;                   <span class="comment">% En ns  (90 ps)</span>
0065 handles.one_bunch=2.84/handles.lin_fin_step;  <span class="comment">% Nombre de pas pour sauter un paquet</span>
0066 
0067 <span class="comment">% Periode du trigger par defaut = 10 s</span>
0068 handles.periode = 10;
0069 set(handles.periode_edit,<span class="string">'String'</span>,num2str(handles.periode));
0070 set(handles.edit_Nshot_soft,<span class="string">'String'</span>,num2str(1));
0071 set(handles.edit_laps,<span class="string">'String'</span>,1.0);
0072 
0073 <span class="comment">%Memorise les délais pc et soft initiaux</span>
0074 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcStepDelay'</span>);
0075 clk1=temp.value(1);
0076 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
0077 clk2=temp.value(1);
0078 
0079 <span class="comment">%Stocke les sauts pour les 4 quarts mode LPM</span>
0080 jump=int32([0 39 26 13]);
0081 handles.clk_pc  =jump +  int32(clk1);
0082 handles.clk_soft=jump  + int32(clk2);
0083 handles.quart=1;
0084 
0085 <span class="comment">% Table initiale sur paquet 1</span>
0086 bunch=[1];
0087 [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);
0088 offset_linac=lin_fin/handles.lin_fin_step; 
0089 bjump=handles.one_bunch;
0090 dpaquet=dpaquet*bjump+offset_linac;
0091 handles.table=int32([length(bunch) dtour dpaquet]);
0092 handles.table0=handles.table;
0093 handles.bunch=bunch;
0094 
0095 handles.mode = <span class="string">'Mode=???'</span>;
0096 set(handles.edit_filling_relecture_tables,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0097 set(handles.edit_filling_relecture_bunch,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0098 
0099 
0100 <span class="comment">% Verifie le mode selectionné en SPM ou LPM</span>
0101 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0102 modelpm=temp.value(1);
0103 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>);
0104 modespm=temp.value(1);
0105 h=get(handles.uipanel_lpm_spm_mode);
0106 <span class="keyword">if</span>     (modelpm==5)&amp;(modespm==0)
0107     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
0108 <span class="keyword">elseif</span> (modelpm==0)&amp;(modespm==5)
0109     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
0110 <span class="keyword">else</span>
0111     set(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>,h.Children(3))
0112 <span class="keyword">end</span>
0113 
0114 
0115 
0116 <span class="comment">% Verifie le mode selectionné en SPM : 1 2 ou 3 paquets</span>
0117 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>);
0118 mode=temp.value(1);
0119 h=get(handles.uipanel_spm_mode);
0120 select=h.Children(5-mode);
0121 set(handles.uipanel_spm_mode,<span class="string">'SelectedObject'</span>,select)
0122 
0123 <span class="comment">% Verifie le mode d'injection selectionné : soft ou 3Hz</span>
0124 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>);
0125 mode=temp.value(1);
0126 h=get(handles.uipanel_mode);
0127 <span class="keyword">if</span>     mode==2
0128     set(handles.uipanel_mode,<span class="string">'SelectedObject'</span>,h.Children(1))
0129 <span class="keyword">elseif</span> mode==1
0130     set(handles.uipanel_mode,<span class="string">'SelectedObject'</span>,h.Children(2))
0131 <span class="keyword">else</span>
0132     set(handles.uipanel_mode,<span class="string">'SelectedObject'</span>,[])
0133 <span class="keyword">end</span>
0134 
0135 
0136 <span class="comment">% Cache le tableau des délais BPM</span>
0137 set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
0138 
0139 
0140 
0141 <span class="comment">% Fonction timer pour injection en boucle</span>
0142 <span class="comment">% Creates timer Infinite loop</span>
0143 timer2=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
0144     <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,3,<span class="string">'TasksToExecute'</span>,Inf);
0145 timer2.TimerFcn = {@<a href="#_sub52" class="code" title="subfunction fonction_alex2(arg1,arg2,hObject,eventdata,handles)">fonction_alex2</a>, hObject,eventdata, handles};
0146 setappdata(handles.figure1,<span class="string">'Timer2'</span>,timer2);
0147 
0148 <span class="comment">% Creates timer Infinite loop</span>
0149 timer1=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
0150     <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,handles.periode,<span class="string">'TasksToExecute'</span>,Inf);
0151 timer1.TimerFcn = {@<a href="#_sub51" class="code" title="subfunction fonction_alex1(arg1,arg2,hObject,eventdata,handles)">fonction_alex1</a>, hObject,eventdata, handles};
0152 setappdata(handles.figure1,<span class="string">'Timer1'</span>,timer1);
0153 
0154 <span class="comment">% button group sur on/off timer du trigger</span>
0155 h = uibuttongroup(<span class="string">'visible'</span>,<span class="string">'off'</span>,<span class="string">'Position'</span>,[0.1405 0.32 0.11 0.14],<span class="keyword">...</span>
0156     <span class="string">'Title'</span>,<span class="string">''</span>,<span class="string">'TitlePosition'</span>,<span class="string">'centertop'</span>,<span class="keyword">...</span>
0157     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0158 u1 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' OFF'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton1'</span>,<span class="keyword">...</span>
0159     <span class="string">'pos'</span>,[05 85 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0160     <span class="string">'BackgroundColor'</span>,[1 0.3 0  ]);
0161 u2 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' Laps :'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton2'</span>,<span class="keyword">...</span>
0162     <span class="string">'pos'</span>,[05 45 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0163     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0164 u3 = uicontrol(<span class="string">'Style'</span>,<span class="string">'Radio'</span>,<span class="string">'String'</span>,<span class="string">' Imin :'</span>,<span class="string">'Tag'</span>,<span class="string">'radiobutton3'</span>,<span class="keyword">...</span>
0165     <span class="string">'pos'</span>,[05 05 55 25],<span class="string">'parent'</span>,h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0166     <span class="string">'BackgroundColor'</span>,[1 0.3 0 ]);
0167 
0168 set(h,<span class="string">'SelectionChangeFcn'</span>,<span class="keyword">...</span>
0169     {@<a href="#_sub50" class="code" title="subfunction uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)">uibuttongroup_SelectionChangeFcn</a>,handles});
0170 
0171 handles.off = u1;
0172 handles.on1 = u2;
0173 handles.on2 = u3;
0174 
0175 set(h,<span class="string">'SelectedObject'</span>,u1); 
0176 set(h,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
0177 
0178 <span class="comment">%% Set closing gui function</span>
0179 set(handles.figure1,<span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub53" class="code" title="subfunction Closinggui(obj, event, handles, figure1)">Closinggui</a>,timer1,handles.figure1});
0180 set(handles.figure1,<span class="string">'CloseRequestFcn'</span>,{@<a href="#_sub53" class="code" title="subfunction Closinggui(obj, event, handles, figure1)">Closinggui</a>,timer2,handles.figure1});
0181 
0182 
0183 <span class="comment">% Update handles structure</span>
0184 guidata(hObject, handles);
0185 
0186 <span class="comment">% UIWAIT makes synchro_injecteur6 wait for user response (see UIRESUME)</span>
0187 <span class="comment">% uiwait(handles.figure1);</span>
0188 
0189 
0190 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0191 <a name="_sub2" href="#_subfunctions" class="code">function varargout = synchro_injecteur6_OutputFcn(hObject, eventdata, handles) </a>
0192 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0193 <span class="comment">% hObject    handle to figure</span>
0194 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0195 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0196 
0197 <span class="comment">% Get default command line output from handles structure</span>
0198 varargout{1} = handles.output;
0199 
0200 
0201 
0202 <a name="_sub3" href="#_subfunctions" class="code">function boo_alim_dipole_Callback(hObject, eventdata, handles)</a>
0203 <span class="comment">% hObject    handle to boo_alim_dipole (see GCBO)</span>
0204 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0205 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0206 
0207 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_dipole as text</span>
0208 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_dipole as a double</span>
0209 <span class="comment">%h=gcf</span>
0210 delay=str2double(get(hObject,<span class="string">'String'</span>));
0211 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpTimeDelay'</span>,delay);
0212 
0213 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0214 <a name="_sub4" href="#_subfunctions" class="code">function boo_alim_dipole_CreateFcn(hObject, eventdata, handles)</a>
0215 <span class="comment">% hObject    handle to boo_alim_dipole (see GCBO)</span>
0216 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0217 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0218 
0219 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0220 <span class="comment">%       See ISPC and COMPUTER.</span>
0221 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0222     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0223 <span class="keyword">end</span>
0224 
0225 
0226 <a name="_sub5" href="#_subfunctions" class="code">function boo_alim_qf_Callback(hObject, eventdata, handles)</a>
0227 <span class="comment">% hObject    handle to boo_alim_qf (see GCBO)</span>
0228 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0229 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0230 
0231 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_qf as text</span>
0232 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_qf as a double</span>
0233 
0234 delay=str2double(get(hObject,<span class="string">'String'</span>));
0235 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfTimeDelay'</span>,delay);
0236 
0237 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0238 <a name="_sub6" href="#_subfunctions" class="code">function boo_alim_qf_CreateFcn(hObject, eventdata, handles)</a>
0239 <span class="comment">% hObject    handle to boo_alim_qf (see GCBO)</span>
0240 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0241 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0242 
0243 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0244 <span class="comment">%       See ISPC and COMPUTER.</span>
0245 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0246     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0247 <span class="keyword">end</span>
0248 
0249 
0250 
0251 <a name="_sub7" href="#_subfunctions" class="code">function boo_alim_qd_Callback(hObject, eventdata, handles)</a>
0252 <span class="comment">% hObject    handle to boo_alim_qd (see GCBO)</span>
0253 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0254 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0255 
0256 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_qd as text</span>
0257 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_qd as a double</span>
0258 
0259 delay=str2double(get(hObject,<span class="string">'String'</span>));
0260 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdTimeDelay'</span>,delay);
0261 
0262 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0263 <a name="_sub8" href="#_subfunctions" class="code">function boo_alim_qd_CreateFcn(hObject, eventdata, handles)</a>
0264 <span class="comment">% hObject    handle to boo_alim_qd (see GCBO)</span>
0265 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0266 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0267 
0268 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0269 <span class="comment">%       See ISPC and COMPUTER.</span>
0270 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0271     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0272 <span class="keyword">end</span>
0273 
0274 
0275 
0276 <a name="_sub9" href="#_subfunctions" class="code">function boo_alim_sf_Callback(hObject, eventdata, handles)</a>
0277 <span class="comment">% hObject    handle to boo_alim_sf (see GCBO)</span>
0278 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0279 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0280 
0281 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_sf as text</span>
0282 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_sf as a double</span>
0283 
0284 delay=str2double(get(hObject,<span class="string">'String'</span>));
0285 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfTimeDelay'</span>,delay);
0286 
0287 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0288 <a name="_sub10" href="#_subfunctions" class="code">function boo_alim_sf_CreateFcn(hObject, eventdata, handles)</a>
0289 <span class="comment">% hObject    handle to boo_alim_sf (see GCBO)</span>
0290 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0291 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0292 
0293 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0294 <span class="comment">%       See ISPC and COMPUTER.</span>
0295 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0296     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0297 <span class="keyword">end</span>
0298 
0299 
0300 
0301 <a name="_sub11" href="#_subfunctions" class="code">function boo_alim_sd_Callback(hObject, eventdata, handles)</a>
0302 <span class="comment">% hObject    handle to boo_alim_sd (see GCBO)</span>
0303 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0304 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0305 
0306 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_alim_sd as text</span>
0307 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_alim_sd as a double</span>
0308 
0309 delay=str2double(get(hObject,<span class="string">'String'</span>));
0310 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdTimeDelay'</span>,delay);
0311 
0312 
0313 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0314 <a name="_sub12" href="#_subfunctions" class="code">function boo_alim_sd_CreateFcn(hObject, eventdata, handles)</a>
0315 <span class="comment">% hObject    handle to boo_alim_sd (see GCBO)</span>
0316 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0317 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0318 
0319 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0320 <span class="comment">%       See ISPC and COMPUTER.</span>
0321 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0322     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0323 <span class="keyword">end</span>
0324 
0325 
0326 
0327 <a name="_sub13" href="#_subfunctions" class="code">function boo_rf_Callback(hObject, eventdata, handles)</a>
0328 <span class="comment">% hObject    handle to boo_rf (see GCBO)</span>
0329 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0330 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0331 
0332 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_rf as text</span>
0333 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_rf as a double</span>
0334 
0335 delay=str2double(get(hObject,<span class="string">'String'</span>));
0336 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfTimeDelay'</span>,delay);
0337 
0338 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0339 <a name="_sub14" href="#_subfunctions" class="code">function boo_rf_CreateFcn(hObject, eventdata, handles)</a>
0340 <span class="comment">% hObject    handle to boo_rf (see GCBO)</span>
0341 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0342 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0343 
0344 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0345 <span class="comment">%       See ISPC and COMPUTER.</span>
0346 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0347     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0348 <span class="keyword">end</span>
0349 
0350 
0351 
0352 <a name="_sub15" href="#_subfunctions" class="code">function lin_canon_lpm_Callback(hObject, eventdata, handles)</a>
0353 <span class="comment">% hObject    handle to lin_canon_lpm (see GCBO)</span>
0354 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0355 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0356 
0357 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_canon_lpm as text</span>
0358 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_canon_lpm as a double</span>
0359 
0360 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0361 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0362 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>,delay);
0363 
0364 
0365 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0366 <a name="_sub16" href="#_subfunctions" class="code">function lin_canon_lpm_CreateFcn(hObject, eventdata, handles)</a>
0367 <span class="comment">% hObject    handle to lin_canon_lpm (see GCBO)</span>
0368 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0369 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0370 
0371 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0372 <span class="comment">%       See ISPC and COMPUTER.</span>
0373 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0374     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0375 <span class="keyword">end</span>
0376 
0377 
0378 
0379 <a name="_sub17" href="#_subfunctions" class="code">function lt1_emittance_Callback(hObject, eventdata, handles)</a>
0380 <span class="comment">% hObject    handle to lt1_emittance (see GCBO)</span>
0381 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0382 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0383 
0384 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_emittance as text</span>
0385 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_emittance as a double</span>
0386 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0387 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0388 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
0389 
0390 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0391 <a name="_sub18" href="#_subfunctions" class="code">function lt1_emittance_CreateFcn(hObject, eventdata, handles)</a>
0392 <span class="comment">% hObject    handle to lt1_emittance (see GCBO)</span>
0393 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0394 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0395 
0396 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0397 <span class="comment">%       See ISPC and COMPUTER.</span>
0398 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0399     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0400 <span class="keyword">end</span>
0401 
0402 
0403 
0404 <a name="_sub19" href="#_subfunctions" class="code">function lt1_MC1_Callback(hObject, eventdata, handles)</a>
0405 <span class="comment">% hObject    handle to lt1_MC1 (see GCBO)</span>
0406 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0407 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0408 
0409 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_MC1 as text</span>
0410 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_MC1 as a double</span>
0411 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0412 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0413 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>,delay);
0414 
0415 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0416 <a name="_sub20" href="#_subfunctions" class="code">function lt1_MC1_CreateFcn(hObject, eventdata, handles)</a>
0417 <span class="comment">% hObject    handle to lt1_MC1 (see GCBO)</span>
0418 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0419 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0420 
0421 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0422 <span class="comment">%       See ISPC and COMPUTER.</span>
0423 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0424     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0425 <span class="keyword">end</span>
0426 
0427 
0428 
0429 <a name="_sub21" href="#_subfunctions" class="code">function lt1_MC2_Callback(hObject, eventdata, handles)</a>
0430 <span class="comment">% hObject    handle to lt1_MC2 (see GCBO)</span>
0431 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0432 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0433 
0434 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_MC2 as text</span>
0435 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_MC2 as a double</span>
0436 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0437 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0438 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>,delay);
0439 
0440 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0441 <a name="_sub22" href="#_subfunctions" class="code">function lt1_MC2_CreateFcn(hObject, eventdata, handles)</a>
0442 <span class="comment">% hObject    handle to lt1_MC2 (see GCBO)</span>
0443 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0444 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0445 
0446 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0447 <span class="comment">%       See ISPC and COMPUTER.</span>
0448 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0449     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0450 <span class="keyword">end</span>
0451 
0452 
0453 
0454 <a name="_sub23" href="#_subfunctions" class="code">function lt1_osc_Callback(hObject, eventdata, handles)</a>
0455 <span class="comment">% hObject    handle to lt1_osc (see GCBO)</span>
0456 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0457 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0458 
0459 <span class="comment">% Hints: get(hObject,'String') returns contents of lt1_osc as text</span>
0460 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt1_osc as a double</span>
0461 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0462 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0463 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
0464 
0465 
0466 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0467 <a name="_sub24" href="#_subfunctions" class="code">function lt1_osc_CreateFcn(hObject, eventdata, handles)</a>
0468 <span class="comment">% hObject    handle to lt1_osc (see GCBO)</span>
0469 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0470 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0471 
0472 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0473 <span class="comment">%       See ISPC and COMPUTER.</span>
0474 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0475     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0476 <span class="keyword">end</span>
0477 
0478 
0479 
0480 <a name="_sub25" href="#_subfunctions" class="code">function sdc1_Callback(hObject, eventdata, handles)</a>
0481 <span class="comment">% hObject    handle to sdc1 (see GCBO)</span>
0482 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0483 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0484 
0485 <span class="comment">% Hints: get(hObject,'String') returns contents of sdc1 as text</span>
0486 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sdc1 as a double</span>
0487 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0488 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0489 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
0490 
0491 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0492 <a name="_sub26" href="#_subfunctions" class="code">function sdc1_CreateFcn(hObject, eventdata, handles)</a>
0493 <span class="comment">% hObject    handle to sdc1 (see GCBO)</span>
0494 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0495 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0496 
0497 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0498 <span class="comment">%       See ISPC and COMPUTER.</span>
0499 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0500     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0501 <span class="keyword">end</span>
0502 
0503 
0504 
0505 <a name="_sub27" href="#_subfunctions" class="code">function boo_inj_septum_Callback(hObject, eventdata, handles)</a>
0506 <span class="comment">% hObject    handle to boo_inj_septum (see GCBO)</span>
0507 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0508 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0509 
0510 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_inj_septum as text</span>
0511 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_inj_septum as a double</span>
0512 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0513 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0514 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
0515 
0516 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0517 <a name="_sub28" href="#_subfunctions" class="code">function boo_inj_septum_CreateFcn(hObject, eventdata, handles)</a>
0518 <span class="comment">% hObject    handle to boo_inj_septum (see GCBO)</span>
0519 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0520 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0521 
0522 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0523 <span class="comment">%       See ISPC and COMPUTER.</span>
0524 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0525     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0526 <span class="keyword">end</span>
0527 
0528 
0529 
0530 <a name="_sub29" href="#_subfunctions" class="code">function boo_inj_kicker_Callback(hObject, eventdata, handles)</a>
0531 <span class="comment">% hObject    handle to boo_inj_kicker (see GCBO)</span>
0532 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0533 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0534 
0535 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_inj_kicker as text</span>
0536 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_inj_kicker as a double</span>
0537 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0538 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0539 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
0540 
0541 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0542 <a name="_sub30" href="#_subfunctions" class="code">function boo_inj_kicker_CreateFcn(hObject, eventdata, handles)</a>
0543 <span class="comment">% hObject    handle to boo_inj_kicker (see GCBO)</span>
0544 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0545 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0546 
0547 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0548 <span class="comment">%       See ISPC and COMPUTER.</span>
0549 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0550     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0551 <span class="keyword">end</span>
0552 
0553 
0554 
0555 <a name="_sub31" href="#_subfunctions" class="code">function boo_bpm_Callback(hObject, eventdata, handles)</a>
0556 <span class="comment">% hObject    handle to boo_bpm (see GCBO)</span>
0557 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0558 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0559 
0560 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_bpm as text</span>
0561 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_bpm as a double</span>
0562 
0563 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0564 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0565 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>,delay);
0566 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigTimeDelay'</span>,delay);
0567 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigTimeDelay'</span>,delay);
0568 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigTimeDelay'</span>,delay);
0569 
0570 
0571 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0572 <a name="_sub32" href="#_subfunctions" class="code">function boo_bpm_CreateFcn(hObject, eventdata, handles)</a>
0573 <span class="comment">% hObject    handle to boo_bpm (see GCBO)</span>
0574 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0575 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0576 
0577 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0578 <span class="comment">%       See ISPC and COMPUTER.</span>
0579 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0580     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0581 <span class="keyword">end</span>
0582 
0583 
0584 
0585 <a name="_sub33" href="#_subfunctions" class="code">function boo_nod_Callback(hObject, eventdata, handles)</a>
0586 <span class="comment">% hObject    handle to boo_nod (see GCBO)</span>
0587 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0588 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0589 
0590 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_nod as text</span>
0591 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_nod as a double</span>
0592 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0593 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0594 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>,delay);
0595 
0596 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0597 <a name="_sub34" href="#_subfunctions" class="code">function boo_nod_CreateFcn(hObject, eventdata, handles)</a>
0598 <span class="comment">% hObject    handle to boo_nod (see GCBO)</span>
0599 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0600 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0601 
0602 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0603 <span class="comment">%       See ISPC and COMPUTER.</span>
0604 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0605     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0606 <span class="keyword">end</span>
0607 
0608 
0609 
0610 <a name="_sub35" href="#_subfunctions" class="code">function boo_dcct_Callback(hObject, eventdata, handles)</a>
0611 <span class="comment">% hObject    handle to boo_dcct (see GCBO)</span>
0612 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0613 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0614 
0615 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_dcct as text</span>
0616 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_dcct as a double</span>
0617 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0618 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
0619 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTimeDelay'</span>,delay);
0620 
0621 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0622 <a name="_sub36" href="#_subfunctions" class="code">function boo_dcct_CreateFcn(hObject, eventdata, handles)</a>
0623 <span class="comment">% hObject    handle to boo_dcct (see GCBO)</span>
0624 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0625 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0626 
0627 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0628 <span class="comment">%       See ISPC and COMPUTER.</span>
0629 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0630     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0631 <span class="keyword">end</span>
0632 
0633 
0634 
0635 <a name="_sub37" href="#_subfunctions" class="code">function lin_canon_spm_fin_Callback(hObject, eventdata, handles)</a>
0636 <span class="comment">% hObject    handle to lin_canon_spm_fin (see GCBO)</span>
0637 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0638 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0639 
0640 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_canon_spm_fin as text</span>
0641 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_canon_spm_fin as a double</span>
0642 
0643 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0644 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
0645 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
0646 save(<span class="string">'synchro_offset_lin'</span>, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
0647 
0648 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0649 <a name="_sub38" href="#_subfunctions" class="code">function lin_canon_spm_fin_CreateFcn(hObject, eventdata, handles)</a>
0650 <span class="comment">% hObject    handle to lin_canon_spm_fin (see GCBO)</span>
0651 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0652 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0653 
0654 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0655 <span class="comment">%       See ISPC and COMPUTER.</span>
0656 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0657     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0658 <span class="keyword">end</span>
0659 
0660 
0661 
0662 <a name="_sub39" href="#_subfunctions" class="code">function central_pc_Callback(hObject, eventdata, handles)</a>
0663 <span class="comment">% hObject    handle to central_pc (see GCBO)</span>
0664 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0665 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0666 
0667 <span class="comment">% Hints: get(hObject,'String') returns contents of central_pc as text</span>
0668 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_pc as a double</span>
0669 
0670 delay=str2double(get(hObject,<span class="string">'String'</span>));
0671 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>,delay);
0672 
0673 <span class="comment">%status soft checked on linac</span>
0674 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0675 <span class="keyword">if</span> (temp.value(1)==2)
0676    <span class="comment">%</span>
0677 <span class="keyword">elseif</span> (temp.value(1)==5)
0678     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
0679     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0680     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
0681     delay=dt.value(1)-dt1.value(1)+inj_offset;
0682     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
0683     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
0684     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
0685 <span class="keyword">end</span>
0686 
0687 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0688 <a name="_sub40" href="#_subfunctions" class="code">function central_pc_CreateFcn(hObject, eventdata, handles)</a>
0689 <span class="comment">% hObject    handle to central_pc (see GCBO)</span>
0690 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0691 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0692 
0693 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0694 <span class="comment">%       See ISPC and COMPUTER.</span>
0695 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0696     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0697 <span class="keyword">end</span>
0698 
0699 
0700 
0701 <a name="_sub41" href="#_subfunctions" class="code">function central_inj_Callback(hObject, eventdata, handles)</a>
0702 <span class="comment">% hObject    handle to central_inj (see GCBO)</span>
0703 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0704 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0705 
0706 <span class="comment">% Hints: get(hObject,'String') returns contents of central_inj as text</span>
0707 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_inj as a double</span>
0708 
0709 delay=str2double(get(hObject,<span class="string">'String'</span>));
0710 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>,delay);
0711 
0712 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0713 <a name="_sub42" href="#_subfunctions" class="code">function central_inj_CreateFcn(hObject, eventdata, handles)</a>
0714 <span class="comment">% hObject    handle to central_inj (see GCBO)</span>
0715 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0716 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0717 
0718 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0719 <span class="comment">%       See ISPC and COMPUTER.</span>
0720 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0721     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0722 <span class="keyword">end</span>
0723 
0724 
0725 
0726 
0727 <a name="_sub43" href="#_subfunctions" class="code">function central_soft_Callback(hObject, eventdata, handles)</a>
0728 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
0729 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0730 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0731 
0732 <span class="comment">% Hints: get(hObject,'String') returns contents of central_soft as text</span>
0733 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_soft as a double</span>
0734 
0735 delay=str2double(get(hObject,<span class="string">'String'</span>));
0736 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>,delay);
0737 
0738 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
0739 clkinj=int32(temp.value(1)+5*52);
0740 clkext=int32(temp.value(1)/52+10);
0741 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,clkinj);
0742 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,clkext);
0743 
0744 <span class="comment">%status soft checked on linac</span>
0745 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>);
0746 <span class="keyword">if</span> (temp.value(1)==2)
0747    <span class="comment">%</span>
0748 <span class="keyword">elseif</span> (temp.value(1)==1)
0749     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
0750     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
0751     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
0752     delay=dt.value(1)-dt1.value(1)+inj_offset;
0753     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
0754     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
0755     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
0756 <span class="keyword">end</span>
0757 
0758 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
0759 <a name="_sub44" href="#_subfunctions" class="code">function central_soft_CreateFcn(hObject, eventdata, handles)</a>
0760 <span class="comment">% hObject    handle to central_soft (see GCBO)</span>
0761 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0762 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
0763 
0764 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
0765 <span class="comment">%       See ISPC and COMPUTER.</span>
0766 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
0767     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
0768 <span class="keyword">end</span>
0769 
0770 
0771 <span class="comment">% --- Executes on button press in button_acquisition_nooffset.</span>
0772 <a name="_sub45" href="#_subfunctions" class="code">function button_acquisition_nooffset_Callback(hObject, eventdata, handles)</a>
0773 <span class="comment">% hObject    handle to button_acquisition_nooffset (see GCBO)</span>
0774 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0775 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0776 
0777 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0778 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0779 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0780 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0781 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0782 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0783 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0784 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0785 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0786 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0787 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0788 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0789 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0790 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0791 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0792 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0793 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0794 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0795 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0796 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0797 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0798 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0799 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0800 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0801 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0802 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0803 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0804 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0805 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0806 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0807 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0808 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0809 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0810 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0811 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0812 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0813 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0814 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0815 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0816 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0817 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0818 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0819 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0820 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0821 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0822 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0823 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0824 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0825 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0826 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0827 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0828 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0829 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0830 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
0831 
0832 
0833 n=1;
0834 
0835 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
0836 set(handles.central_pc,<span class="string">'String'</span>,num2str(temp.value(n)));
0837 
0838 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
0839 set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(n)));
0840 
0841 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
0842 set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(n)));
0843 
0844 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>);
0845 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(n)));
0846 
0847 
0848 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>);
0849 set(handles.sdc1,<span class="string">'String'</span>,num2str(temp.value(n)));
0850 
0851 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>);
0852 set(handles.lin_canon_lpm,<span class="string">'String'</span>,num2str(temp.value(n)));
0853 
0854 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>);
0855 set(handles.lin_canon_spm,<span class="string">'String'</span>,num2str(temp.value(n)));
0856 
0857 
0858 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>);
0859 set(handles.boo_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
0860 
0861 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>);
0862 set(handles.lt1_emittance,<span class="string">'String'</span>,num2str(temp.value(n)));
0863 
0864 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>);
0865 set(handles.lt1_MC1,<span class="string">'String'</span>,num2str(temp.value(n)));
0866 
0867 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>);
0868 set(handles.lt1_MC2,<span class="string">'String'</span>,num2str(temp.value(n)));
0869 
0870 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>);
0871 set(handles.lt1_osc,<span class="string">'String'</span>,num2str(temp.value(n)));
0872 
0873 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTimeDelay'</span>);
0874 set(handles.boo_dcct,<span class="string">'String'</span>,num2str(temp.value(n)));
0875 
0876 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>);
0877 set(handles.boo_nod,<span class="string">'String'</span>,num2str(temp.value(n)));
0878 
0879 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>);
0880 set(handles.boo_inj_septum,<span class="string">'String'</span>,num2str(temp.value(n)));
0881 
0882 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>);
0883 set(handles.boo_inj_kicker,<span class="string">'String'</span>,num2str(temp.value(n)));
0884 
0885 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpTimeDelay'</span>);
0886 set(handles.boo_alim_dipole,<span class="string">'String'</span>,num2str(temp.value(n)));
0887 
0888 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfTimeDelay'</span>);
0889 set(handles.boo_alim_qf,<span class="string">'String'</span>,num2str(temp.value(n)));
0890 
0891 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdTimeDelay'</span>);
0892 set(handles.boo_alim_qd,<span class="string">'String'</span>,num2str(temp.value(n)));
0893 
0894 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfTimeDelay'</span>);
0895 set(handles.boo_alim_sf,<span class="string">'String'</span>,num2str(temp.value(n)));
0896 
0897 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdTimeDelay'</span>);
0898 set(handles.boo_alim_sd,<span class="string">'String'</span>,num2str(temp.value(n)));
0899 
0900 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfTimeDelay'</span>);
0901 set(handles.boo_rf,<span class="string">'String'</span>,num2str(temp.value(n)));
0902 
0903 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
0904 set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(n)));
0905 
0906 
0907 
0908 
0909 
0910 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>);
0911 set(handles.boo_ext_dof,<span class="string">'String'</span>,num2str(temp.value(n)));
0912 
0913 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>);
0914 set(handles.boo_ext_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)));
0915 
0916 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>);
0917 set(handles.boo_ext_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)));
0918 
0919 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>);
0920 set(handles.boo_ext_kicker,<span class="string">'String'</span>,num2str(temp.value(n)));
0921 
0922 
0923 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>);
0924 set(handles.sdc2,<span class="string">'String'</span>,num2str(temp.value(n)));
0925 
0926 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>);
0927 set(handles.lt2_emittance,<span class="string">'String'</span>,num2str(temp.value(n)));
0928 
0929 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>);
0930 set(handles.lt2_osc,<span class="string">'String'</span>,num2str(temp.value(n)));
0931 
0932 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0933 set(handles.lt2_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
0934 
0935 
0936 
0937 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>);
0938 set(handles.ans_inj_k1,<span class="string">'String'</span>,num2str(temp.value(n)));
0939 
0940 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>);
0941 set(handles.ans_inj_k2,<span class="string">'String'</span>,num2str(temp.value(n)));
0942 
0943 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>);
0944 set(handles.ans_inj_k3,<span class="string">'String'</span>,num2str(temp.value(n)));
0945 
0946 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>);
0947 set(handles.ans_inj_k4,<span class="string">'String'</span>,num2str(temp.value(n)));
0948 
0949 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>);
0950 set(handles.ans_inj_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)));
0951 
0952 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>);
0953 set(handles.ans_inj_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)));
0954 
0955 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctTimeDelay'</span>);
0956 set(handles.ans_dcct,<span class="string">'String'</span>,num2str(temp.value(n)));
0957 
0958 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0959 set(handles.ans_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
0960 set(handles.ans_bpm_c01,<span class="string">'String'</span>,num2str(temp.value(n)));
0961 
0962 
0963 temp=tango_read_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0964 set(handles.ans_bpm_c02,<span class="string">'String'</span>,num2str(temp.value(n)));
0965 temp=tango_read_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0966 set(handles.ans_bpm_c03,<span class="string">'String'</span>,num2str(temp.value(n)));
0967 temp=tango_read_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0968 set(handles.ans_bpm_c04,<span class="string">'String'</span>,num2str(temp.value(n)));
0969 temp=tango_read_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0970 set(handles.ans_bpm_c05,<span class="string">'String'</span>,num2str(temp.value(n)));
0971 temp=tango_read_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0972 set(handles.ans_bpm_c06,<span class="string">'String'</span>,num2str(temp.value(n)));
0973 temp=tango_read_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0974 set(handles.ans_bpm_c07,<span class="string">'String'</span>,num2str(temp.value(n)));
0975 temp=tango_read_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0976 set(handles.ans_bpm_c08,<span class="string">'String'</span>,num2str(temp.value(n)));
0977 temp=tango_read_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0978 set(handles.ans_bpm_c09,<span class="string">'String'</span>,num2str(temp.value(n)));
0979 temp=tango_read_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0980 set(handles.ans_bpm_c10,<span class="string">'String'</span>,num2str(temp.value(n)));
0981 temp=tango_read_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0982 set(handles.ans_bpm_c11,<span class="string">'String'</span>,num2str(temp.value(n)));
0983 temp=tango_read_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0984 set(handles.ans_bpm_c12,<span class="string">'String'</span>,num2str(temp.value(n)));
0985 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0986 set(handles.ans_bpm_c13,<span class="string">'String'</span>,num2str(temp.value(n)));
0987 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0988 set(handles.ans_bpm_c14,<span class="string">'String'</span>,num2str(temp.value(n)));
0989 temp=tango_read_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0990 set(handles.ans_bpm_c15,<span class="string">'String'</span>,num2str(temp.value(n)));
0991 temp=tango_read_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
0992 set(handles.ans_bpm_c16,<span class="string">'String'</span>,num2str(temp.value(n)));
0993 
0994 
0995 
0996 <span class="comment">%status soft checked on linac</span>
0997 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
0998 <span class="keyword">if</span> (temp.value(n)==2)
0999     <span class="comment">%set(handles.soft_button,'Value',0);</span>
1000 <span class="keyword">elseif</span> (temp.value(n)==5)
1001     <span class="comment">%set(handles.soft_button,'Value',1);</span>
1002 <span class="keyword">end</span>
1003 
1004 <span class="comment">%status tables</span>
1005 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
1006 offset=temp.value(1)*52;
1007 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
1008 n=temp.value;
1009 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
1010 table=temp.value(1:n)-offset;
1011 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[<span class="string">'T='</span> , num2str(table)]);  
1012 
1013 
1014 
1015 <span class="comment">% --- Executes on button press in button_acquisition_delay.</span>
1016 <a name="_sub46" href="#_subfunctions" class="code">function button_acquisition_delay_Callback(hObject, eventdata, handles)</a>
1017 <span class="comment">% hObject    handle to button_acquisition_delay (see GCBO)</span>
1018 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1019 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1020 
1021 
1022 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1023 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1024 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1025 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1026 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1027 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1028 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1029 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1030 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1031 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1032 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1033 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1034 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1035 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1036 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1037 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1038 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1039 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1040 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1041 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1042 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1043 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1044 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1045 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1046 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1047 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1048 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1049 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1050 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1051 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1052 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1053 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1054 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1055 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1056 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1057 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1058 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1059 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1060 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1061 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1062 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1063 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1064 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1065 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1066 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1067 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1068 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1069 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1070 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1071 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1072 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1073 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1074 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1075 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'on'</span>);
1076 
1077 load(<span class="string">'synchro_offset_lin'</span>, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>);
1078 set(handles.inj_offset,<span class="string">'String'</span>,num2str(inj_offset));
1079 set(handles.ext_offset,<span class="string">'String'</span>,num2str(ext_offset));
1080 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,num2str(lin_fin));
1081 
1082 n=1;
1083 
1084 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
1085 set(handles.central_pc,<span class="string">'String'</span>,num2str(temp.value(n)));
1086 
1087 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1088 set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(n)));
1089 
1090 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1091 set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(n)));
1092 set(handles.central_soft1,<span class="string">'String'</span>,num2str(temp.value(n)));
1093 
1094 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>);
1095 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(n)));
1096 
1097 
1098 
1099 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1100 
1101 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>);
1102 set(handles.sdc1,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1103 
1104 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>);
1105 set(handles.lin_canon_lpm,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1106 
1107 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>);
1108 set(handles.lin_canon_spm,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1109 
1110 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>);
1111 set(handles.boo_bpm,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1112 
1113 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>);
1114 set(handles.lt1_emittance,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1115 
1116 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>);
1117 set(handles.lt1_MC1,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1118 
1119 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>);
1120 set(handles.lt1_MC2,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1121 
1122 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>);
1123 set(handles.lt1_osc,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1124 
1125 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTimeDelay'</span>);
1126 set(handles.boo_dcct,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1127 
1128 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>);
1129 set(handles.boo_nod,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1130 
1131 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>);
1132 set(handles.boo_inj_septum,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1133 
1134 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>);
1135 set(handles.boo_inj_kicker,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1136 
1137 
1138 
1139 
1140 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpTimeDelay'</span>);
1141 set(handles.boo_alim_dipole,<span class="string">'String'</span>,num2str(temp.value(n)));
1142 
1143 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfTimeDelay'</span>);
1144 set(handles.boo_alim_qf,<span class="string">'String'</span>,num2str(temp.value(n)));
1145 
1146 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdTimeDelay'</span>);
1147 set(handles.boo_alim_qd,<span class="string">'String'</span>,num2str(temp.value(n)));
1148 
1149 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfTimeDelay'</span>);
1150 set(handles.boo_alim_sf,<span class="string">'String'</span>,num2str(temp.value(n)));
1151 
1152 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdTimeDelay'</span>);
1153 set(handles.boo_alim_sd,<span class="string">'String'</span>,num2str(temp.value(n)));
1154 
1155 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfTimeDelay'</span>);
1156 set(handles.boo_rf,<span class="string">'String'</span>,num2str(temp.value(n)));
1157 
1158 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1159 set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(n)-inj_offset));
1160 
1161 
1162 
1163 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1164 
1165 
1166 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>);
1167 set(handles.boo_ext_dof,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1168 
1169 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>);
1170 set(handles.boo_ext_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1171 
1172 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>);
1173 set(handles.boo_ext_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1174 
1175 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>);
1176 set(handles.boo_ext_kicker,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1177 
1178 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>);
1179 set(handles.sdc2,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1180 
1181 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>);
1182 set(handles.lt2_emittance,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1183 
1184 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>);
1185 set(handles.lt2_osc,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1186 
1187 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1188 set(handles.lt2_bpm,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1189 
1190 
1191 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>);
1192 set(handles.ans_inj_k1,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1193 
1194 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>);
1195 set(handles.ans_inj_k2,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1196 
1197 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>);
1198 set(handles.ans_inj_k3,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1199 
1200 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>);
1201 set(handles.ans_inj_k4,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1202 
1203 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>);
1204 set(handles.ans_inj_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1205 
1206 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>);
1207 set(handles.ans_inj_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1208 
1209 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctTimeDelay'</span>);
1210 set(handles.ans_dcct,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1211 
1212 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1213 set(handles.ans_bpm,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1214 set(handles.ans_bpm_c01,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1215 temp=tango_read_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1216 set(handles.ans_bpm_c02,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1217 temp=tango_read_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1218 set(handles.ans_bpm_c03,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1219 temp=tango_read_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1220 set(handles.ans_bpm_c04,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1221 temp=tango_read_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1222 set(handles.ans_bpm_c05,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1223 temp=tango_read_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1224 set(handles.ans_bpm_c06,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1225 temp=tango_read_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1226 set(handles.ans_bpm_c07,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1227 temp=tango_read_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1228 set(handles.ans_bpm_c08,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1229 temp=tango_read_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1230 set(handles.ans_bpm_c09,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1231 temp=tango_read_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1232 set(handles.ans_bpm_c10,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1233 temp=tango_read_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1234 set(handles.ans_bpm_c11,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1235 temp=tango_read_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1236 set(handles.ans_bpm_c12,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1237 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1238 set(handles.ans_bpm_c13,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1239 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1240 set(handles.ans_bpm_c14,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1241 temp=tango_read_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1242 set(handles.ans_bpm_c15,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1243 temp=tango_read_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>);
1244 set(handles.ans_bpm_c16,<span class="string">'String'</span>,num2str(temp.value(n)-ext_offset));
1245 
1246 <span class="comment">%status soft checked on linac</span>
1247 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
1248 <span class="keyword">if</span> (temp.value(n)==2)
1249     <span class="comment">%set(handles.soft_button,'Value',0);</span>
1250 <span class="keyword">elseif</span> (temp.value(n)==5)
1251     <span class="comment">%set(handles.uipanel_mode,'String','Mode Soft');</span>
1252 <span class="keyword">end</span>
1253 
1254 <span class="comment">%status tables</span>
1255 <span class="comment">%temp=tango_read_attribute('ANS/SY/CENTRAL', 'ExtractionOffsetClkStepValue');</span>
1256 <span class="comment">%offset=temp.value(1)*52;</span>
1257 offset_linac=10*lin_fin;
1258 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
1259 n=temp.value;
1260 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
1261 table_ext=temp.value(1:n); <span class="comment">%-offset_ext;</span>
1262 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'LinacDelayTable'</span>);
1263 table_linac=(temp.value(1:n)-offset_linac)/28;
1264 table=[];
1265 <span class="keyword">for</span> i=1:n
1266     table=[table <span class="string">' '</span> <span class="string">'('</span> num2str([table_ext(i)])  <span class="string">' '</span>  num2str([table_linac(i)]) <span class="string">')'</span>];
1267 <span class="keyword">end</span>
1268 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[num2str(table)]);
1269 set(handles.edit_filling_relecture_bunch, <span class="string">'String'</span>,<span class="string">'??'</span>);
1270 
1271 
1272 
1273 <span class="comment">% --- Executes on button press in button_injection_soft.</span>
1274 <a name="_sub47" href="#_subfunctions" class="code">function button_injection_soft_Callback(hObject, eventdata, handles)</a>
1275 <span class="comment">% hObject    handle to button_injection_soft (see GCBO)</span>
1276 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1277 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1278 
1279 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'Off'</span>)
1280 offset_linac=10*str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));<span class="comment">% délai fin de réglage en pas de 100 ps</span>
1281 modeinj=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);      <span class="comment">% mode soft ou 3Hz</span>
1282 modefill=get(handles.listbox_fillingmode,<span class="string">'Value'</span>);                  <span class="comment">% mode de remplissage</span>
1283 handles.table
1284 [clk_pc,clk_soft]=<a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>;
1285 handles.clk_pc =clk_pc;
1286 handles.clk_soft=clk_soft;
1287 
1288 dt=1.5; <span class="comment">% délais pour acquisitions rendements</span>
1289 <span class="comment">%Inialise data pour les rendements</span>
1290 temp=tango_read_attribute2(<span class="string">'ANS-C03/DG/DCCT'</span>,<span class="string">'current'</span>);anscur0=temp.value;
1291 q1=0;q2=0;n=0;
1292 
1293 
1294 modeinj=<span class="string">'k'</span>;
1295 <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)
1296     boucle=int16(str2double(get(handles.edit_Nshot_soft,<span class="string">'String'</span>)));  
1297     modeinj=<span class="string">'Injection soft'</span>;
1298     <span class="keyword">if</span> (modefill&lt;=4) <span class="comment">% LPM</span>
1299         <span class="keyword">for</span> k=1:boucle
1300             i=int16(modefill);
1301             clk1=handles.clk_pc(i);
1302             clk2=handles.clk_soft(i);
1303             tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcStepDelay'</span>,clk1);
1304             tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,clk2);
1305             tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'FireSoftEvent'</span>);
1306             pause(dt)
1307             [q1,q2,n]=<a href="getcharge.html" class="code" title="function  [q1,q2,n]=getcharge(q1,q2,n)">getcharge</a>(q1,q2,n);
1308         <span class="keyword">end</span>
1309     <span class="keyword">elseif</span> (modefill&gt;4)&amp;&amp;(modefill&lt;=7) <span class="comment">%LPM</span>
1310         <span class="keyword">for</span> k=1:boucle
1311             <span class="keyword">for</span> i=1:(modefill-3)
1312                 clk1=handles.clk_pc(i);
1313                 clk2=handles.clk_soft(i);
1314                 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcStepDelay'</span>,clk1);
1315                 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,clk2);
1316                 tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'FireSoftEvent'</span>);
1317                 pause(dt)
1318                 [q1,q2,n]=<a href="getcharge.html" class="code" title="function  [q1,q2,n]=getcharge(q1,q2,n)">getcharge</a>(q1,q2,n);
1319             <span class="keyword">end</span>
1320         <span class="keyword">end</span>    
1321     <span class="keyword">elseif</span> (modefill==8)   <span class="comment">% LPM</span>
1322         <span class="keyword">for</span> k=1:boucle
1323             clk1=handles.clk_pc(1);
1324             clk2=handles.clk_soft(1);
1325             bunch=1 + (0:12)*32;
1326             [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);    
1327             clk_pc  =int32(dtour) +  int32(clk1);
1328             clk_soft=int32(dtour)  + int32(clk2);
1329             <span class="keyword">for</span> i=1:13
1330                 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcStepDelay'</span>,clk_pc(i));
1331                 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,clk_soft(i));
1332                 tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'FireSoftEvent'</span>);
1333                 pause(dt)
1334                 [q1,q2,n]=<a href="getcharge.html" class="code" title="function  [q1,q2,n]=getcharge(q1,q2,n)">getcharge</a>(q1,q2,n);
1335             <span class="keyword">end</span>
1336         <span class="keyword">end</span>   
1337     <span class="keyword">elseif</span> (modefill&gt;=9) <span class="comment">%SPM</span>
1338         clk1=handles.clk_pc(1);
1339         clk2=handles.clk_soft(1);
1340         table=handles.table;
1341         nb=table(1);
1342         dtour=table(2:1+nb);
1343         paq  =table(2+nb:1+2*nb);
1344         clk_pc  =int32(dtour) +  int32(clk1);
1345         clk_soft=int32(dtour)  + int32(clk2);    
1346         <span class="keyword">for</span> k=1:boucle
1347             <span class="keyword">for</span> i=1:nb  
1348                 table=int32([1 0 paq(i)]);
1349                 tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table); pause(0.2)  ;             
1350                 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcStepDelay'</span>,clk_pc(i));
1351                 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,clk_soft(i));
1352                 tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'FireSoftEvent'</span>);
1353                 pause(dt)
1354                 [q1,q2,n]=<a href="getcharge.html" class="code" title="function  [q1,q2,n]=getcharge(q1,q2,n)">getcharge</a>(q1,q2,n);
1355             <span class="keyword">end</span> 
1356         <span class="keyword">end</span>           
1357     <span class="keyword">end</span>
1358     
1359     clk1=handles.clk_pc(1);
1360     clk2=handles.clk_soft(1);
1361     tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcStepDelay'</span>,clk1);
1362     tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>,clk2);
1363     
1364     <span class="comment">% Calcul des rendements</span>
1365     pause(1);
1366     temp=tango_read_attribute2(<span class="string">'ANS-C03/DG/DCCT'</span>,<span class="string">'current'</span>);anscur=temp.value;
1367     dcur=anscur-anscur0;
1368     r1=0;<span class="keyword">if</span> (q1~=0);r1=q2/q1*100;<span class="keyword">end</span>
1369     r2=0;<span class="keyword">if</span> (q2~=0);r2=dcur/q2*0.524*416/184*100;<span class="keyword">end</span>
1370     <span class="keyword">if</span>(r1&lt;0);r1=0;<span class="keyword">elseif</span>(r1&gt;100);r1=100;<span class="keyword">end</span>
1371     <span class="keyword">if</span>(r2&lt;0);r2=0;<span class="keyword">elseif</span>(r2&gt;100);r2=100;<span class="keyword">end</span>
1372     q1=q1/n;q2=q2/n;  
1373 
1374     set(handles.edit_qlt1,<span class="string">'String'</span>,num2str(q1,<span class="string">'%5.2f'</span>));
1375     set(handles.edit_iboo,<span class="string">'String'</span>,num2str(q2/0.524,<span class="string">'%5.2f'</span>));
1376     set(handles.edit_dians,<span class="string">'String'</span>,num2str(dcur/n,<span class="string">'%5.2f'</span>));
1377     set(handles.edit_rboo,<span class="string">'String'</span>,num2str(int16(r1)));
1378     set(handles.edit_rans,<span class="string">'String'</span>,num2str(int16(r2)));
1379     set(handles.edit_cycle,<span class="string">'String'</span>,num2str(n,<span class="string">'%g'</span>));
1380     set(handles.edit_dians1,<span class="string">'String'</span>,num2str(dcur,<span class="string">'%5.2f'</span>));
1381     set(handles.edit_courant_total,<span class="string">'String'</span>, num2str(anscur,<span class="string">'%5.2f'</span>));
1382     
1383     temp=tango_read_attribute2(<span class="string">'ANS/DG/BPM-tunex'</span>,<span class="string">'Nu'</span>); nux=temp.value;
1384     temp=tango_read_attribute2(<span class="string">'ANS/DG/BPM-tunez'</span>,<span class="string">'Nu'</span>); nuz=temp.value;
1385     temp=tango_read_attribute2(<span class="string">'ANS-C03/RF/lle.1'</span>,<span class="string">'voltageRF'</span>);v1=temp.value(2);
1386     temp=tango_read_attribute2(<span class="string">'ANS-C03/RF/lle.2'</span>,<span class="string">'voltageRF'</span>);v2=temp.value(2);
1387     vrf=(v1+v2)/1000;
1388 
1389     fprintf(<span class="string">'%s   %s  Remplissage = %d     Rendements=%5.2f %5.2f    Tunes=%5.2f %5.2f    Vrf=%5.2f \n'</span>,datestr(clock),modeinj,modefill,r1,r2, nux,nuz,vrf);
1390     
1391     
1392 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>)
1393     
1394     modelinac=get(get(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
1395     <span class="keyword">switch</span> modelinac  <span class="comment">% Get Tag of selected object</span>
1396         <span class="keyword">case</span> <span class="string">'no_mode'</span>
1397             event=[0 0];
1398         <span class="keyword">case</span> <span class="string">'lpm_mode'</span>
1399             event=[2 0];
1400         <span class="keyword">case</span> <span class="string">'spm_mode'</span>
1401             event=[0 2];
1402     <span class="keyword">end</span>
1403     
1404     modeinj=<span class="string">'Injection 3 Hz'</span>;
1405     laps=str2double(get(handles.edit_laps,<span class="string">'String'</span>));
1406     fprintf(<span class="string">'%s   %s  Remplissage = %d\n'</span>,datestr(clock),modeinj,modefill);
1407     <a href="start_3Hz.html" class="code" title="function start_3Hz(event)">start_3Hz</a>(event)
1408     pause(laps)
1409     <a href="stop_3Hz.html" class="code" title="function stop_3Hz">stop_3Hz</a>
1410     
1411     pause(1);
1412     [q1,q2,n]=<a href="getcharge.html" class="code" title="function  [q1,q2,n]=getcharge(q1,q2,n)">getcharge</a>(q1,q2,n);
1413     temp=tango_read_attribute2(<span class="string">'ANS-C03/DG/DCCT'</span>,<span class="string">'current'</span>);anscur=temp.value;
1414     dcur=anscur-anscur0;
1415     n=int16(laps/0.340);
1416     r1=0;<span class="keyword">if</span> (q1~=0);r1=int16(q2/q1*100);<span class="keyword">end</span>
1417     r2=0;<span class="keyword">if</span> (q2~=0);r2=int16(dcur/n/q2*0.524*416/184*100);<span class="keyword">end</span>
1418     <span class="keyword">if</span>(r1&lt;0);r1=0;<span class="keyword">elseif</span>(r1&gt;100);r1=100;<span class="keyword">end</span>
1419     <span class="keyword">if</span>(r2&lt;0);r2=0;<span class="keyword">elseif</span>(r2&gt;100);r2=100;<span class="keyword">end</span>
1420     
1421     set(handles.edit_qlt1,<span class="string">'String'</span>,num2str(q1,<span class="string">'%5.2f'</span>));
1422     set(handles.edit_iboo,<span class="string">'String'</span>,num2str(q2/0.524,<span class="string">'%5.2f'</span>));
1423     set(handles.edit_dians,<span class="string">'String'</span>,num2str(dcur/n,<span class="string">'%5.2f'</span>));
1424     set(handles.edit_rboo,<span class="string">'String'</span>,num2str(r1));
1425     set(handles.edit_rans,<span class="string">'String'</span>,num2str(r2));
1426     set(handles.edit_cycle,<span class="string">'String'</span>,num2str(n,<span class="string">'%g'</span>));
1427     set(handles.edit_dians1,<span class="string">'String'</span>,num2str(dcur,<span class="string">'%5.2f'</span>));
1428     set(handles.edit_courant_total,<span class="string">'String'</span>, num2str(anscur,<span class="string">'%5.2f'</span>));
1429 
1430 <span class="keyword">end</span>
1431 
1432 
1433 
1434 set(handles.button_injection_soft,<span class="string">'Enable'</span>,<span class="string">'On'</span>);
1435 
1436 
1437 <a name="_sub48" href="#_subfunctions" class="code">function periode_edit_Callback(hObject, eventdata, handles)</a>
1438 <span class="comment">% hObject    handle to periode_edit (see GCBO)</span>
1439 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1440 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1441 
1442 <span class="comment">% Hints: get(hObject,'String') returns contents of periode_edit as text</span>
1443 <span class="comment">%        str2double(get(hObject,'String')) returns contents of periode_edit as a double</span>
1444 
1445 val_multishot = get(handles.on1,<span class="string">'Value'</span>);
1446 
1447 <span class="keyword">if</span> val_multishot
1448     errordlg(<span class="string">'positionner le trigger a OFF !'</span>,<span class="string">'Attention'</span>);
1449     <span class="keyword">return</span>
1450 <span class="keyword">else</span>
1451     handles.periode = str2double(get(hObject,<span class="string">'String'</span>));
1452 
1453     <span class="comment">% change timer Infinite loop</span>
1454     timer1=timer(<span class="string">'StartDelay'</span>,1,<span class="keyword">...</span>
1455         <span class="string">'ExecutionMode'</span>,<span class="string">'fixedRate'</span>,<span class="string">'Period'</span>,handles.periode,<span class="string">'TasksToExecute'</span>,Inf);
1456     timer1.TimerFcn = {@fonction_alex, hObject,eventdata, handles};
1457     setappdata(handles.figure1,<span class="string">'Timer'</span>,timer1);
1458 
1459     <span class="comment">% Update handles structure</span>
1460     guidata(hObject, handles);
1461 <span class="keyword">end</span>
1462 
1463 
1464 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1465 <a name="_sub49" href="#_subfunctions" class="code">function periode_edit_CreateFcn(hObject, eventdata, handles)</a>
1466 <span class="comment">% hObject    handle to periode_edit (see GCBO)</span>
1467 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1468 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1469 
1470 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1471 <span class="comment">%       See ISPC and COMPUTER.</span>
1472 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1473     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1474 <span class="keyword">end</span>
1475 
1476 <a name="_sub50" href="#_subfunctions" class="code">function uibuttongroup_SelectionChangeFcn(hObject,eventdata,handles)</a>
1477 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1478 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1479 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1480 
1481 timer1 = getappdata(handles.figure1,<span class="string">'Timer1'</span>)
1482 timer2 = getappdata(handles.figure1,<span class="string">'Timer2'</span>);
1483 handles = guidata(gcbo);
1484 
1485 <span class="keyword">switch</span> get(get(hObject,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>)  <span class="comment">% Get Tag of selected object</span>
1486     <span class="keyword">case</span> <span class="string">'radiobutton1'</span>
1487         <span class="comment">% stop du trigger</span>
1488         stop(timer1);
1489         stop(timer2);
1490     <span class="keyword">case</span> <span class="string">'radiobutton2'</span>
1491         <span class="comment">% démarrage  du trigger 1</span>
1492         start(timer1);
1493     <span class="keyword">case</span> <span class="string">'radiobutton3'</span>
1494         <span class="comment">% démarrage du trigger 2</span>
1495         temp=tango_read_attribute2(<span class="string">'ANS-C03/DG/DCCT'</span>,<span class="string">'current'</span>);anscur=temp.value;
1496         <span class="keyword">if</span> (anscur&gt;1.) 
1497            start(timer2);      
1498         <span class="keyword">else</span>
1499             <span class="comment">% ne fait rien, en cas de perte faisceau</span>
1500         <span class="keyword">end</span>  
1501 <span class="keyword">end</span>
1502 
1503 
1504 <a name="_sub51" href="#_subfunctions" class="code">function fonction_alex1(arg1,arg2,hObject,eventdata,handles)</a>
1505 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1506 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1507 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1508 
1509 
1510 <a href="#_sub47" class="code" title="subfunction button_injection_soft_Callback(hObject, eventdata, handles)">button_injection_soft_Callback</a>(hObject,eventdata,handles)
1511 
1512 
1513 <a name="_sub52" href="#_subfunctions" class="code">function fonction_alex2(arg1,arg2,hObject,eventdata,handles)</a>
1514 <span class="comment">% hObject    handle to uipanel1 (see GCBO)</span>
1515 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1516 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1517 
1518 
1519 temp=tango_read_attribute2(<span class="string">'ANS-C03/DG/DCCT'</span>,<span class="string">'current'</span>);anscur=temp.value;
1520 set(handles.edit_courant_total,<span class="string">'String'</span>, num2str(anscur,<span class="string">'%5.2f'</span>));
1521 Imin=str2double(get(handles.edit_Imin,<span class="string">'String'</span>));
1522 
1523 
1524 <span class="keyword">if</span>     (anscur&gt;Imin)
1525    <span class="comment">% on attend</span>
1526    <span class="comment">%fprintf('Cur = %g \n',anscur)</span>
1527 <span class="keyword">else</span>
1528   <span class="comment">% inject le cycle en cours</span>
1529   <span class="comment">%fprintf('Cur = %g : Injection \n',anscur)</span>
1530   <a href="#_sub47" class="code" title="subfunction button_injection_soft_Callback(hObject, eventdata, handles)">button_injection_soft_Callback</a>(hObject, eventdata, handles)
1531 <span class="keyword">end</span>   
1532 
1533 
1534 
1535 <span class="comment">%% What to do before closing the application</span>
1536 <a name="_sub53" href="#_subfunctions" class="code">function Closinggui(obj, event, handles, figure1)</a>
1537 
1538 <span class="comment">% Get default command line output from handles structure</span>
1539 answer = questdlg(<span class="string">'Fermer softsynchro ?'</span>,<span class="keyword">...</span>
1540     <span class="string">'Exit softsynchro'</span>,<span class="keyword">...</span>
1541     <span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'Yes'</span>);
1542 
1543 <span class="keyword">switch</span> answer
1544     <span class="keyword">case</span> <span class="string">'Yes'</span>           
1545         delete(handles); <span class="comment">%Delete Timer</span>
1546         delete(figure1); <span class="comment">%Close gui</span>
1547     <span class="keyword">otherwise</span>
1548         disp(<span class="string">'Closing aborted'</span>)
1549 <span class="keyword">end</span>
1550 
1551 
1552 
1553 <span class="comment">% --- Executes on button press in button_softmoins.</span>
1554 <a name="_sub54" href="#_subfunctions" class="code">function button_softmoins_Callback(hObject, eventdata, handles)</a>
1555 <span class="comment">% hObject    handle to button_softmoins (see GCBO)</span>
1556 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1557 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1558 
1559 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1560 <a href="step.html" class="code" title="">step</a>=temp.value(1)-51*0.52243;
1561 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>,<a href="step.html" class="code" title="">step</a>);
1562 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1563 set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1564 
1565 <span class="comment">% decale adress inj et extract d'une super-periode</span>
1566 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
1567 clkinj=int32(temp.value(1)+5*52);
1568 clkext=int32(temp.value(1)/52+10);
1569 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,clkinj);
1570 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,clkext);
1571 
1572 <span class="comment">%status soft checked on linac</span>
1573 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>);
1574 <span class="keyword">if</span> (temp.value(1)==2)
1575    <span class="comment">%</span>
1576 <span class="keyword">elseif</span> (temp.value(1)==1)
1577     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1578     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1579     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
1580     delay=dt.value(1)-dt1.value(1)+inj_offset;
1581     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1582     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1583     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
1584 <span class="keyword">end</span>
1585 
1586 
1587 <span class="comment">% --- Executes on button press in button_softplus.</span>
1588 <a name="_sub55" href="#_subfunctions" class="code">function button_softplus_Callback(hObject, eventdata, handles)</a>
1589 <span class="comment">% hObject    handle to button_softplus (see GCBO)</span>
1590 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1591 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1592 
1593 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1594 <a href="step.html" class="code" title="">step</a>=temp.value(1)+52*0.52243;
1595 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>,<a href="step.html" class="code" title="">step</a>);
1596 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1597 set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(1)));
1598 
1599 <span class="comment">% dcale adress inj et extract d'une super-periode</span>
1600 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftStepDelay'</span>);
1601 clkinj=int32(temp.value(1)+5*52);
1602 clkext=int32(temp.value(1)/52+10);
1603 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjStepDelay'</span>,clkinj);
1604 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>,clkext);
1605 
1606 <span class="comment">%status soft checked on linac</span>
1607 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>);
1608 <span class="keyword">if</span> (temp.value(1)==2)
1609    <span class="comment">%</span>
1610 <span class="keyword">elseif</span> (temp.value(1)==1)
1611     dt=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
1612     inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
1613     dt1=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
1614     delay=dt.value(1)-dt1.value(1)+inj_offset;
1615     tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
1616     temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
1617     set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(1)-inj_offset));
1618 <span class="keyword">end</span>
1619 
1620 
1621 <span class="comment">% --- Executes on button press in button_injmoins.</span>
1622 <a name="_sub56" href="#_subfunctions" class="code">function button_injmoins_Callback(hObject, eventdata, handles)</a>
1623 <span class="comment">% hObject    handle to button_injmoins (see GCBO)</span>
1624 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1625 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1626 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1627 <a href="step.html" class="code" title="">step</a>=temp.value(1)-51*0.52243;
1628 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>,<a href="step.html" class="code" title="">step</a>);
1629 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1630 set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1631 
1632 
1633 
1634 <span class="comment">% --- Executes on button press in button_injplus.</span>
1635 <a name="_sub57" href="#_subfunctions" class="code">function button_injplus_Callback(hObject, eventdata, handles)</a>
1636 <span class="comment">% hObject    handle to button_injplus (see GCBO)</span>
1637 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1638 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1639 
1640 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1641 <a href="step.html" class="code" title="">step</a>=temp.value(1)+52*0.52243;
1642 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>,<a href="step.html" class="code" title="">step</a>);
1643 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
1644 set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(1)));
1645 
1646 
1647 
1648 <a name="_sub58" href="#_subfunctions" class="code">function boo_ext_dof_Callback(hObject, eventdata, handles)</a>
1649 <span class="comment">% hObject    handle to boo_ext_dof (see GCBO)</span>
1650 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1651 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1652 
1653 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_dof as text</span>
1654 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_dof as a double</span>
1655 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1656 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1657 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>,delay);
1658 
1659 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1660 <a name="_sub59" href="#_subfunctions" class="code">function boo_ext_dof_CreateFcn(hObject, eventdata, handles)</a>
1661 <span class="comment">% hObject    handle to boo_ext_dof (see GCBO)</span>
1662 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1663 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1664 
1665 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1666 <span class="comment">%       See ISPC and COMPUTER.</span>
1667 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1668     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1669 <span class="keyword">end</span>
1670 
1671 
1672 
1673 <a name="_sub60" href="#_subfunctions" class="code">function boo_ext_sept_p_Callback(hObject, eventdata, handles)</a>
1674 <span class="comment">% hObject    handle to boo_ext_sept_p (see GCBO)</span>
1675 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1676 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1677 
1678 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_sept_p as text</span>
1679 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_sept_p as a double</span>
1680 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1681 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1682 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1683 
1684 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1685 <a name="_sub61" href="#_subfunctions" class="code">function boo_ext_sept_p_CreateFcn(hObject, eventdata, handles)</a>
1686 <span class="comment">% hObject    handle to boo_ext_sept_p (see GCBO)</span>
1687 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1688 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1689 
1690 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1691 <span class="comment">%       See ISPC and COMPUTER.</span>
1692 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1693     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1694 <span class="keyword">end</span>
1695 
1696 
1697 
1698 <a name="_sub62" href="#_subfunctions" class="code">function boo_ext_sept_a_Callback(hObject, eventdata, handles)</a>
1699 <span class="comment">% hObject    handle to boo_ext_sept_a (see GCBO)</span>
1700 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1701 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1702 
1703 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_sept_a as text</span>
1704 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_sept_a as a double</span>
1705 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1706 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1707 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1708 
1709 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1710 <a name="_sub63" href="#_subfunctions" class="code">function boo_ext_sept_a_CreateFcn(hObject, eventdata, handles)</a>
1711 <span class="comment">% hObject    handle to boo_ext_sept_a (see GCBO)</span>
1712 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1713 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1714 
1715 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1716 <span class="comment">%       See ISPC and COMPUTER.</span>
1717 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1718     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1719 <span class="keyword">end</span>
1720 
1721 
1722 
1723 <a name="_sub64" href="#_subfunctions" class="code">function boo_ext_kicker_Callback(hObject, eventdata, handles)</a>
1724 <span class="comment">% hObject    handle to boo_ext_kicker (see GCBO)</span>
1725 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1726 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1727 
1728 <span class="comment">% Hints: get(hObject,'String') returns contents of boo_ext_kicker as text</span>
1729 <span class="comment">%        str2double(get(hObject,'String')) returns contents of boo_ext_kicker as a double</span>
1730 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1731 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1732 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
1733 
1734 
1735 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1736 <a name="_sub65" href="#_subfunctions" class="code">function boo_ext_kicker_CreateFcn(hObject, eventdata, handles)</a>
1737 <span class="comment">% hObject    handle to boo_ext_kicker (see GCBO)</span>
1738 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1739 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1740 
1741 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1742 <span class="comment">%       See ISPC and COMPUTER.</span>
1743 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1744     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1745 <span class="keyword">end</span>
1746 
1747 
1748 
1749 <a name="_sub66" href="#_subfunctions" class="code">function ans_inj_sept_p_Callback(hObject, eventdata, handles)</a>
1750 <span class="comment">% hObject    handle to ans_inj_sept_p (see GCBO)</span>
1751 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1752 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1753 
1754 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_sept_p as text</span>
1755 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_sept_p as a double</span>
1756 
1757 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1758 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1759 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
1760 
1761 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1762 <a name="_sub67" href="#_subfunctions" class="code">function ans_inj_sept_p_CreateFcn(hObject, eventdata, handles)</a>
1763 <span class="comment">% hObject    handle to ans_inj_sept_p (see GCBO)</span>
1764 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1765 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1766 
1767 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1768 <span class="comment">%       See ISPC and COMPUTER.</span>
1769 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1770     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1771 <span class="keyword">end</span>
1772 
1773 
1774 
1775 <a name="_sub68" href="#_subfunctions" class="code">function ans_inj_sept_a_Callback(hObject, eventdata, handles)</a>
1776 <span class="comment">% hObject    handle to ans_inj_sept_a (see GCBO)</span>
1777 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1778 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1779 
1780 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_sept_a as text</span>
1781 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_sept_a as a double</span>
1782 
1783 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1784 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1785 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
1786 
1787 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1788 <a name="_sub69" href="#_subfunctions" class="code">function ans_inj_sept_a_CreateFcn(hObject, eventdata, handles)</a>
1789 <span class="comment">% hObject    handle to ans_inj_sept_a (see GCBO)</span>
1790 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1791 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1792 
1793 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1794 <span class="comment">%       See ISPC and COMPUTER.</span>
1795 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1796     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1797 <span class="keyword">end</span>
1798 
1799 
1800 
1801 <a name="_sub70" href="#_subfunctions" class="code">function ans_inj_k1_Callback(hObject, eventdata, handles)</a>
1802 <span class="comment">% hObject    handle to ans_inj_k1 (see GCBO)</span>
1803 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1804 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1805 
1806 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k1 as text</span>
1807 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k1 as a double</span>
1808 
1809 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1810 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1811 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>,delay);
1812 
1813 
1814 
1815 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1816 <a name="_sub71" href="#_subfunctions" class="code">function ans_inj_k1_CreateFcn(hObject, eventdata, handles)</a>
1817 <span class="comment">% hObject    handle to ans_inj_k1 (see GCBO)</span>
1818 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1819 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1820 
1821 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1822 <span class="comment">%       See ISPC and COMPUTER.</span>
1823 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1824     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1825 <span class="keyword">end</span>
1826 
1827 
1828 
1829 <a name="_sub72" href="#_subfunctions" class="code">function ans_inj_k2_Callback(hObject, eventdata, handles)</a>
1830 <span class="comment">% hObject    handle to ans_inj_k2 (see GCBO)</span>
1831 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1832 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1833 
1834 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k2 as text</span>
1835 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k2 as a double</span>
1836 
1837 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1838 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1839 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>,delay);
1840 
1841 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1842 <a name="_sub73" href="#_subfunctions" class="code">function ans_inj_k2_CreateFcn(hObject, eventdata, handles)</a>
1843 <span class="comment">% hObject    handle to ans_inj_k2 (see GCBO)</span>
1844 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1845 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1846 
1847 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1848 <span class="comment">%       See ISPC and COMPUTER.</span>
1849 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1850     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1851 <span class="keyword">end</span>
1852 
1853 
1854 
1855 <a name="_sub74" href="#_subfunctions" class="code">function ans_inj_k3_Callback(hObject, eventdata, handles)</a>
1856 <span class="comment">% hObject    handle to ans_inj_k3 (see GCBO)</span>
1857 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1858 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1859 
1860 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k3 as text</span>
1861 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k3 as a double</span>
1862 
1863 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1864 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1865 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>,delay);
1866 
1867 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1868 <a name="_sub75" href="#_subfunctions" class="code">function ans_inj_k3_CreateFcn(hObject, eventdata, handles)</a>
1869 <span class="comment">% hObject    handle to ans_inj_k3 (see GCBO)</span>
1870 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1871 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1872 
1873 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1874 <span class="comment">%       See ISPC and COMPUTER.</span>
1875 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1876     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1877 <span class="keyword">end</span>
1878 
1879 
1880 
1881 <a name="_sub76" href="#_subfunctions" class="code">function ans_inj_k4_Callback(hObject, eventdata, handles)</a>
1882 <span class="comment">% hObject    handle to ans_inj_k4 (see GCBO)</span>
1883 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1884 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1885 
1886 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_inj_k4 as text</span>
1887 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_inj_k4 as a double</span>
1888 
1889 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1890 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1891 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>,delay);
1892 
1893 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1894 <a name="_sub77" href="#_subfunctions" class="code">function ans_inj_k4_CreateFcn(hObject, eventdata, handles)</a>
1895 <span class="comment">% hObject    handle to ans_inj_k4 (see GCBO)</span>
1896 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1897 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1898 
1899 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1900 <span class="comment">%       See ISPC and COMPUTER.</span>
1901 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1902     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1903 <span class="keyword">end</span>
1904 
1905 
1906 
1907 <a name="_sub78" href="#_subfunctions" class="code">function ans_dcct_Callback(hObject, eventdata, handles)</a>
1908 <span class="comment">% hObject    handle to ans_dcct (see GCBO)</span>
1909 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1910 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1911 
1912 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_dcct as text</span>
1913 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_dcct as a double</span>
1914 
1915 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1916 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1917 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctTimeDelay'</span>,delay);
1918 
1919 
1920 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1921 <a name="_sub79" href="#_subfunctions" class="code">function ans_dcct_CreateFcn(hObject, eventdata, handles)</a>
1922 <span class="comment">% hObject    handle to ans_dcct (see GCBO)</span>
1923 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1924 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1925 
1926 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1927 <span class="comment">%       See ISPC and COMPUTER.</span>
1928 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1929     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1930 <span class="keyword">end</span>
1931 
1932 
1933 
1934 <a name="_sub80" href="#_subfunctions" class="code">function ans_bpm_Callback(hObject, eventdata, handles)</a>
1935 <span class="comment">% hObject    handle to ans_bpm (see GCBO)</span>
1936 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1937 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1938 
1939 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm as text</span>
1940 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm as a double</span>
1941 
1942 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
1943 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
1944 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1945 tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1946 tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1947 tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1948 tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1949 tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1950 tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1951 tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1952 tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1953 tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1954 tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1955 tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1956 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1957 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1958 tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1959 tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
1960 
1961 
1962 
1963 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1964 <a name="_sub81" href="#_subfunctions" class="code">function ans_bpm_CreateFcn(hObject, eventdata, handles)</a>
1965 <span class="comment">% hObject    handle to ans_bpm (see GCBO)</span>
1966 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1967 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1968 
1969 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1970 <span class="comment">%       See ISPC and COMPUTER.</span>
1971 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1972     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1973 <span class="keyword">end</span>
1974 
1975 
1976 
1977 <a name="_sub82" href="#_subfunctions" class="code">function central_ext_Callback(hObject, eventdata, handles)</a>
1978 <span class="comment">% hObject    handle to central_ext (see GCBO)</span>
1979 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1980 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
1981 
1982 <span class="comment">% Hints: get(hObject,'String') returns contents of central_ext as text</span>
1983 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_ext as a double</span>
1984 <span class="comment">%'ANS/SY/CENTRAL', 'ExtractionOffsetTimeValue'</span>
1985 
1986 delay=str2double(get(hObject,<span class="string">'String'</span>));
1987 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>,delay);
1988 
1989 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
1990 <a name="_sub83" href="#_subfunctions" class="code">function central_ext_CreateFcn(hObject, eventdata, handles)</a>
1991 <span class="comment">% hObject    handle to central_ext (see GCBO)</span>
1992 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
1993 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
1994 
1995 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
1996 <span class="comment">%       See ISPC and COMPUTER.</span>
1997 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
1998     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
1999 <span class="keyword">end</span>
2000 
2001 
2002 
2003 <a name="_sub84" href="#_subfunctions" class="code">function central_soft1_Callback(hObject, eventdata, handles)</a>
2004 <span class="comment">% hObject    handle to central_soft1 (see GCBO)</span>
2005 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2006 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2007 
2008 <span class="comment">% Hints: get(hObject,'String') returns contents of central_soft1 as text</span>
2009 <span class="comment">%        str2double(get(hObject,'String')) returns contents of central_soft1 as a double</span>
2010 
2011 
2012 
2013 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2014 <a name="_sub85" href="#_subfunctions" class="code">function central_soft1_CreateFcn(hObject, eventdata, handles)</a>
2015 <span class="comment">% hObject    handle to central_soft1 (see GCBO)</span>
2016 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2017 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2018 
2019 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2020 <span class="comment">%       See ISPC and COMPUTER.</span>
2021 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2022     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2023 <span class="keyword">end</span>
2024 
2025 
2026 <span class="comment">% --- Executes on button press in radiobutton6.</span>
2027 <a name="_sub86" href="#_subfunctions" class="code">function radiobutton6_Callback(hObject, eventdata, handles)</a>
2028 <span class="comment">% hObject    handle to radiobutton6 (see GCBO)</span>
2029 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2030 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2031 
2032 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of radiobutton6</span>
2033 
2034 
2035 <span class="comment">% --- Executes on button press in pushbutton8.</span>
2036 <a name="_sub87" href="#_subfunctions" class="code">function pushbutton8_Callback(hObject, eventdata, handles)</a>
2037 <span class="comment">% hObject    handle to pushbutton8 (see GCBO)</span>
2038 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2039 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2040 
2041 
2042 <span class="comment">% --- Executes on button press in pushbutton9.</span>
2043 <a name="_sub88" href="#_subfunctions" class="code">function pushbutton9_Callback(hObject, eventdata, handles)</a>
2044 <span class="comment">% hObject    handle to pushbutton9 (see GCBO)</span>
2045 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2046 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2047 
2048 
2049 <span class="comment">% --- Executes on button press in button_extmoins.</span>
2050 <a name="_sub89" href="#_subfunctions" class="code">function button_extmoins_Callback(hObject, eventdata, handles)</a>
2051 <span class="comment">% hObject    handle to button_extmoins (see GCBO)</span>
2052 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2053 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2054 
2055 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>);
2056 <a href="step.html" class="code" title="">step</a>=temp.value(1)-52*0.52243;
2057 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>,<a href="step.html" class="code" title="">step</a>);
2058 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'ExtractionOffsetTimeValue'</span>);
2059 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(1)));
2060 
2061 <span class="comment">% --- Executes on button press in button_extplus.</span>
2062 <a name="_sub90" href="#_subfunctions" class="code">function button_extplus_Callback(hObject, eventdata, handles)</a>
2063 <span class="comment">% hObject    handle to button_extplus (see GCBO)</span>
2064 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2065 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2066 
2067 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>);
2068 <a href="step.html" class="code" title="">step</a>=temp.value(1)+52*0.52243;
2069 tango_write_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>,<a href="step.html" class="code" title="">step</a>);
2070 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'ExtractionOffsetTimeValue'</span>);
2071 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(1)));
2072 
2073 <a name="_sub91" href="#_subfunctions" class="code">function sdc2_Callback(hObject, eventdata, handles)</a>
2074 <span class="comment">% hObject    handle to sdc2 (see GCBO)</span>
2075 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2076 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2077 
2078 <span class="comment">% Hints: get(hObject,'String') returns contents of sdc2 as text</span>
2079 <span class="comment">%        str2double(get(hObject,'String')) returns contents of sdc2 as a double</span>
2080 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2081 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2082 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
2083 
2084 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2085 <a name="_sub92" href="#_subfunctions" class="code">function sdc2_CreateFcn(hObject, eventdata, handles)</a>
2086 <span class="comment">% hObject    handle to sdc2 (see GCBO)</span>
2087 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2088 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2089 
2090 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2091 <span class="comment">%       See ISPC and COMPUTER.</span>
2092 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2093     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2094 <span class="keyword">end</span>
2095 
2096 
2097 
2098 <a name="_sub93" href="#_subfunctions" class="code">function lt2_emittance_Callback(hObject, eventdata, handles)</a>
2099 <span class="comment">% hObject    handle to lt2_emittance (see GCBO)</span>
2100 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2101 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2102 
2103 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_emittance as text</span>
2104 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_emittance as a double</span>
2105 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2106 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2107 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>,delay);
2108 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
2109 
2110 
2111 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2112 <a name="_sub94" href="#_subfunctions" class="code">function lt2_emittance_CreateFcn(hObject, eventdata, handles)</a>
2113 <span class="comment">% hObject    handle to lt2_emittance (see GCBO)</span>
2114 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2115 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2116 
2117 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2118 <span class="comment">%       See ISPC and COMPUTER.</span>
2119 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2120     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2121 <span class="keyword">end</span>
2122 
2123 
2124 
2125 <a name="_sub95" href="#_subfunctions" class="code">function lt2_bpm_Callback(hObject, eventdata, handles)</a>
2126 <span class="comment">% hObject    handle to lt2_bpm (see GCBO)</span>
2127 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2128 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2129 
2130 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_bpm as text</span>
2131 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_bpm as a double</span>
2132 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2133 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2134 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2135 
2136 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2137 <a name="_sub96" href="#_subfunctions" class="code">function lt2_bpm_CreateFcn(hObject, eventdata, handles)</a>
2138 <span class="comment">% hObject    handle to lt2_bpm (see GCBO)</span>
2139 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2140 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2141 
2142 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2143 <span class="comment">%       See ISPC and COMPUTER.</span>
2144 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2145     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2146 <span class="keyword">end</span>
2147 
2148 
2149 
2150 <a name="_sub97" href="#_subfunctions" class="code">function lt2_osc_Callback(hObject, eventdata, handles)</a>
2151 <span class="comment">% hObject    handle to lt2_osc (see GCBO)</span>
2152 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2153 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2154 
2155 <span class="comment">% Hints: get(hObject,'String') returns contents of lt2_osc as text</span>
2156 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lt2_osc as a double</span>
2157 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2158 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2159 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>,delay);
2160 
2161 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2162 <a name="_sub98" href="#_subfunctions" class="code">function lt2_osc_CreateFcn(hObject, eventdata, handles)</a>
2163 <span class="comment">% hObject    handle to lt2_osc (see GCBO)</span>
2164 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2165 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2166 
2167 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2168 <span class="comment">%       See ISPC and COMPUTER.</span>
2169 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2170     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2171 <span class="keyword">end</span>
2172 
2173 
2174 
2175 <a name="_sub99" href="#_subfunctions" class="code">function lin_modulateur_Callback(hObject, eventdata, handles)</a>
2176 <span class="comment">% hObject    handle to lin_modulateur (see GCBO)</span>
2177 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2178 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2179 
2180 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_modulateur as text</span>
2181 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_modulateur as a double</span>
2182 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2183 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
2184 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
2185 
2186 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2187 <a name="_sub100" href="#_subfunctions" class="code">function lin_modulateur_CreateFcn(hObject, eventdata, handles)</a>
2188 <span class="comment">% hObject    handle to lin_modulateur (see GCBO)</span>
2189 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2190 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2191 
2192 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2193 <span class="comment">%       See ISPC and COMPUTER.</span>
2194 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2195     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2196 <span class="keyword">end</span>
2197 
2198 
2199 
2200 <a name="_sub101" href="#_subfunctions" class="code">function inj_offset_Callback(hObject, eventdata, handles)</a>
2201 <span class="comment">% hObject    handle to inj_offset (see GCBO)</span>
2202 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2203 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2204 
2205 <span class="comment">% Hints: get(hObject,'String') returns contents of inj_offset as text</span>
2206 <span class="comment">%        str2double(get(hObject,'String')) returns contents of inj_offset as a double</span>
2207 
2208 inj_offset=str2double(get(hObject,<span class="string">'String'</span>));
2209 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2210 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
2211 save(<span class="string">'synchro_offset_lin'</span>, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>)
2212 
2213 <span class="comment">%LIN</span>
2214 delay=str2double(get(handles.lin_canon_lpm,<span class="string">'String'</span>))+inj_offset;
2215 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTimeDelay'</span>,delay);
2216 
2217 delay=str2double(get(handles.lin_modulateur,<span class="string">'String'</span>))+inj_offset;
2218 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
2219 
2220 delay=str2double(get(handles.sdc1,<span class="string">'String'</span>))+inj_offset;
2221 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
2222 
2223 
2224 <span class="comment">% LT1</span>
2225 delay=str2double(get(handles.lt1_MC2,<span class="string">'String'</span>))+inj_offset;
2226 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TimeDelay'</span>,delay);
2227 
2228 delay=str2double(get(handles.lt1_MC1,<span class="string">'String'</span>))+inj_offset;
2229 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TimeDelay'</span>,delay);
2230 
2231 delay=str2double(get(handles.lt1_emittance,<span class="string">'String'</span>))+inj_offset;
2232 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTimeDelay'</span>,delay);
2233 
2234 delay=str2double(get(handles.lt1_osc,<span class="string">'String'</span>))+inj_offset;
2235 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTimeDelay'</span>,delay);
2236 
2237 
2238 <span class="comment">% BOO</span>
2239 delay=str2double(get(handles.boo_inj_septum,<span class="string">'String'</span>))+inj_offset;
2240 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
2241 
2242 delay=str2double(get(handles.boo_inj_kicker,<span class="string">'String'</span>))+inj_offset;
2243 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
2244 
2245 delay=str2double(get(handles.boo_bpm,<span class="string">'String'</span>))+inj_offset;
2246 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTimeDelay'</span>,delay);
2247 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigTimeDelay'</span>,delay);
2248 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigTimeDelay'</span>,delay);
2249 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigTimeDelay'</span>,delay);
2250 
2251 
2252 delay=str2double(get(handles.boo_nod,<span class="string">'String'</span>))+inj_offset;
2253 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTimeDelay'</span>,delay);
2254 
2255 delay=str2double(get(handles.boo_dcct,<span class="string">'String'</span>))+inj_offset;
2256 tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTimeDelay'</span>,delay);
2257 
2258 
2259 
2260 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2261 <a name="_sub102" href="#_subfunctions" class="code">function inj_offset_CreateFcn(hObject, eventdata, handles)</a>
2262 <span class="comment">% hObject    handle to inj_offset (see GCBO)</span>
2263 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2264 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2265 
2266 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2267 <span class="comment">%       See ISPC and COMPUTER.</span>
2268 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2269     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2270 <span class="keyword">end</span>
2271 
2272 
2273 
2274 <a name="_sub103" href="#_subfunctions" class="code">function ext_offset_Callback(hObject, eventdata, handles)</a>
2275 <span class="comment">% hObject    handle to ext_offset (see GCBO)</span>
2276 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2277 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2278 
2279 <span class="comment">% Hints: get(hObject,'String') returns contents of ext_offset as text</span>
2280 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ext_offset as a double</span>
2281 
2282 ext_offset=str2double(get(hObject,<span class="string">'String'</span>));
2283 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2284 lin_fin   =str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>));
2285 save(<span class="string">'synchro_offset_lin'</span>, <span class="string">'inj_offset'</span> , <span class="string">'ext_offset'</span>, <span class="string">'lin_fin'</span>)
2286 
2287 
2288 <span class="comment">%BOO</span>
2289 delay=str2double(get(handles.boo_ext_dof,<span class="string">'String'</span>))+ext_offset;
2290 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTimeDelay'</span>,delay);
2291 
2292 delay=str2double(get(handles.boo_ext_sept_p,<span class="string">'String'</span>))+ext_offset;
2293 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
2294 
2295 delay=str2double(get(handles.boo_ext_sept_a,<span class="string">'String'</span>))+ext_offset;
2296 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
2297 
2298 delay=str2double(get(handles.boo_ext_kicker,<span class="string">'String'</span>))+ext_offset;
2299 tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTimeDelay'</span>,delay);
2300 
2301 delay=str2double(get(handles.sdc2,<span class="string">'String'</span>))+ext_offset;
2302 tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
2303 
2304 <span class="comment">%LT2</span>
2305 delay=str2double(get(handles.lt2_bpm,<span class="string">'String'</span>))+ext_offset;
2306 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2307 
2308 delay=str2double(get(handles.lt2_osc,<span class="string">'String'</span>))+ext_offset;
2309 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTimeDelay'</span>,delay);
2310 
2311 delay=str2double(get(handles.lt2_emittance,<span class="string">'String'</span>))+ext_offset;
2312 tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTimeDelay'</span>,delay);
2313 
2314 <span class="comment">%ANS</span>
2315 
2316 delay=str2double(get(handles.ans_inj_sept_a,<span class="string">'String'</span>))+ext_offset;
2317 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTimeDelay'</span>,delay);
2318 
2319 delay=str2double(get(handles.ans_inj_sept_p,<span class="string">'String'</span>))+ext_offset;
2320 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTimeDelay'</span>,delay);
2321 
2322 delay=str2double(get(handles.ans_inj_k1,<span class="string">'String'</span>))+ext_offset;
2323 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTimeDelay'</span>,delay);
2324 
2325 delay=str2double(get(handles.ans_inj_k2,<span class="string">'String'</span>))+ext_offset;
2326 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTimeDelay'</span>,delay);
2327 
2328 delay=str2double(get(handles.ans_inj_k3,<span class="string">'String'</span>))+ext_offset;
2329 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTimeDelay'</span>,delay);
2330 
2331 delay=str2double(get(handles.ans_inj_k4,<span class="string">'String'</span>))+ext_offset;
2332 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTimeDelay'</span>,delay);
2333 
2334 
2335 
2336 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2337 <a name="_sub104" href="#_subfunctions" class="code">function ext_offset_CreateFcn(hObject, eventdata, handles)</a>
2338 <span class="comment">% hObject    handle to ext_offset (see GCBO)</span>
2339 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2340 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2341 
2342 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2343 <span class="comment">%       See ISPC and COMPUTER.</span>
2344 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2345     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2346 <span class="keyword">end</span>
2347 
2348 
2349 <span class="comment">% --- Executes on button press in button_acquisition_address.</span>
2350 <a name="_sub105" href="#_subfunctions" class="code">function button_acquisition_address_Callback(hObject, eventdata, handles)</a>
2351 <span class="comment">% hObject    handle to button_acquisition_address (see GCBO)</span>
2352 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2353 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2354 
2355 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2356 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2357 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2358 set(handles.lin_canon_spm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2359 set(handles.lin_canon_spm_fin,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2360 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2361 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2362 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2363 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2364 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2365 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2366 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2367 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2368 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2369 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2370 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2371 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2372 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2373 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2374 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2375 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2376 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2377 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2378 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2379 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2380 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2381 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2382 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2383 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2384 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2385 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2386 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2387 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2388 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2389 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2390 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2391 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2392 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2393 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2394 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2395 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2396 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2397 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2398 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2399 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2400 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2401 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2402 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2403 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2404 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2405 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2406 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2407 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2408 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
2409 
2410 
2411 n=1;
2412 
2413 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
2414 set(handles.central_pc,<span class="string">'String'</span>,num2str(temp.value(n)));
2415 
2416 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
2417 set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(n)));
2418 
2419 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
2420 set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(n)));
2421 
2422 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>);
2423 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(n)));
2424 
2425 
2426 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscEvent'</span>);
2427 set(handles.sdc1,<span class="string">'String'</span>,num2str(temp.value(n)));
2428 
2429 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>);
2430 set(handles.lin_canon_lpm,<span class="string">'String'</span>,num2str(temp.value(n)));
2431 
2432 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>);
2433 set(handles.lin_canon_spm,<span class="string">'String'</span>,num2str(temp.value(n)));
2434 set(handles.lin_canon_spm_fin,<span class="string">'String'</span>,<span class="string">'Off Set table'</span>);
2435 
2436 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigEvent'</span>);
2437 set(handles.boo_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
2438 
2439 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceEvent'</span>);
2440 set(handles.lt1_emittance,<span class="string">'String'</span>,num2str(temp.value(n)));
2441 
2442 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1Event'</span>);
2443 set(handles.lt1_MC1,<span class="string">'String'</span>,num2str(temp.value(n)));
2444 
2445 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2Event'</span>);
2446 set(handles.lt1_MC2,<span class="string">'String'</span>,num2str(temp.value(n)));
2447 
2448 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscEvent'</span>);
2449 set(handles.lt1_osc,<span class="string">'String'</span>,num2str(temp.value(n)));
2450 
2451 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booEvent'</span>);
2452 set(handles.boo_dcct,<span class="string">'String'</span>,num2str(temp.value(n)));
2453 
2454 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigEvent'</span>);
2455 set(handles.boo_nod,<span class="string">'String'</span>,num2str(temp.value(n)));
2456 
2457 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigEvent'</span>);
2458 set(handles.boo_inj_septum,<span class="string">'String'</span>,num2str(temp.value(n)));
2459 
2460 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>);
2461 set(handles.boo_inj_kicker,<span class="string">'String'</span>,num2str(temp.value(n)));
2462 
2463 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpEvent'</span>);
2464 set(handles.boo_alim_dipole,<span class="string">'String'</span>,num2str(temp.value(n)));
2465 
2466 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfEvent'</span>);
2467 set(handles.boo_alim_qf,<span class="string">'String'</span>,num2str(temp.value(n)));
2468 
2469 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdEvent'</span>);
2470 set(handles.boo_alim_qd,<span class="string">'String'</span>,num2str(temp.value(n)));
2471 
2472 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfEvent'</span>);
2473 set(handles.boo_alim_sf,<span class="string">'String'</span>,num2str(temp.value(n)));
2474 
2475 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdEvent'</span>);
2476 set(handles.boo_alim_sd,<span class="string">'String'</span>,num2str(temp.value(n)));
2477 
2478 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfEvent'</span>);
2479 set(handles.boo_rf,<span class="string">'String'</span>,num2str(temp.value(n)));
2480 
2481 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>);
2482 set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(n)));
2483 
2484 
2485 
2486 
2487 
2488 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigEvent'</span>);
2489 set(handles.boo_ext_dof,<span class="string">'String'</span>,num2str(temp.value(n)));
2490 
2491 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigEvent'</span>);
2492 set(handles.boo_ext_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)));
2493 
2494 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigEvent'</span>);
2495 set(handles.boo_ext_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)));
2496 
2497 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigEvent'</span>);
2498 set(handles.boo_ext_kicker,<span class="string">'String'</span>,num2str(temp.value(n)));
2499 
2500 
2501 
2502 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareEvent'</span>);
2503 set(handles.sdc2,<span class="string">'String'</span>,num2str(temp.value(n)));
2504 
2505 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvEvent'</span>);
2506 set(handles.lt2_emittance,<span class="string">'String'</span>,num2str(temp.value(n)));
2507 
2508 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctEvent'</span>);
2509 set(handles.lt2_osc,<span class="string">'String'</span>,num2str(temp.value(n)));
2510 
2511 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigEvent'</span>);
2512 set(handles.lt2_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
2513 
2514 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigEvent'</span>);
2515 set(handles.ans_inj_k1,<span class="string">'String'</span>,num2str(temp.value(n)));
2516 
2517 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigEvent'</span>);
2518 set(handles.ans_inj_k2,<span class="string">'String'</span>,num2str(temp.value(n)));
2519 
2520 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigEvent'</span>);
2521 set(handles.ans_inj_k3,<span class="string">'String'</span>,num2str(temp.value(n)));
2522 
2523 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigEvent'</span>);
2524 set(handles.ans_inj_k4,<span class="string">'String'</span>,num2str(temp.value(n)));
2525 
2526 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigEvent'</span>);
2527 set(handles.ans_inj_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)));
2528 
2529 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigEvent'</span>);
2530 set(handles.ans_inj_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)));
2531 
2532 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctEvent'</span>);
2533 set(handles.ans_dcct,<span class="string">'String'</span>,num2str(temp.value(n)));
2534 
2535 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigEvent'</span>);
2536 set(handles.ans_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
2537 set(handles.ans_bpm_c01,<span class="string">'String'</span>,num2str(temp.value(n)));
2538 
2539 temp=tango_read_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2540 set(handles.ans_bpm_c02,<span class="string">'String'</span>,num2str(temp.value(n)));
2541 temp=tango_read_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2542 set(handles.ans_bpm_c03,<span class="string">'String'</span>,num2str(temp.value(n)));
2543 temp=tango_read_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2544 set(handles.ans_bpm_c04,<span class="string">'String'</span>,num2str(temp.value(n)));
2545 temp=tango_read_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2546 set(handles.ans_bpm_c05,<span class="string">'String'</span>,num2str(temp.value(n)));
2547 temp=tango_read_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2548 set(handles.ans_bpm_c06,<span class="string">'String'</span>,num2str(temp.value(n)));
2549 temp=tango_read_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2550 set(handles.ans_bpm_c07,<span class="string">'String'</span>,num2str(temp.value(n)));
2551 temp=tango_read_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2552 set(handles.ans_bpm_c08,<span class="string">'String'</span>,num2str(temp.value(n)));
2553 temp=tango_read_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2554 set(handles.ans_bpm_c09,<span class="string">'String'</span>,num2str(temp.value(n)));
2555 temp=tango_read_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2556 set(handles.ans_bpm_c10,<span class="string">'String'</span>,num2str(temp.value(n)));
2557 temp=tango_read_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2558 set(handles.ans_bpm_c11,<span class="string">'String'</span>,num2str(temp.value(n)));
2559 temp=tango_read_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2560 set(handles.ans_bpm_c12,<span class="string">'String'</span>,num2str(temp.value(n)));
2561 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2562 set(handles.ans_bpm_c13,<span class="string">'String'</span>,num2str(temp.value(n)));
2563 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2564 set(handles.ans_bpm_c14,<span class="string">'String'</span>,num2str(temp.value(n)));
2565 temp=tango_read_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2566 set(handles.ans_bpm_c15,<span class="string">'String'</span>,num2str(temp.value(n)));
2567 temp=tango_read_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>);
2568 set(handles.ans_bpm_c16,<span class="string">'String'</span>,num2str(temp.value(n)));
2569 
2570 
2571 
2572 <span class="comment">% --- Executes on button press in button_offinj_moins.</span>
2573 <a name="_sub106" href="#_subfunctions" class="code">function button_offinj_moins_Callback(hObject, eventdata, handles)</a>
2574 <span class="comment">% hObject    handle to button_offinj_moins (see GCBO)</span>
2575 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2576 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2577 
2578 temp=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2579 <a href="step.html" class="code" title="">step</a>=temp-52*0.52243;
2580 set(handles.inj_offset,<span class="string">'String'</span>,<a href="step.html" class="code" title="">step</a>);
2581 <a href="#_sub101" class="code" title="subfunction inj_offset_Callback(hObject, eventdata, handles)">inj_offset_Callback</a>(handles.inj_offset, eventdata, handles);
2582 
2583 <span class="comment">% --- Executes on button press in button_offinj_plus.</span>
2584 <a name="_sub107" href="#_subfunctions" class="code">function button_offinj_plus_Callback(hObject, eventdata, handles)</a>
2585 <span class="comment">% hObject    handle to button_offinj_plus (see GCBO)</span>
2586 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2587 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2588 
2589 temp=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
2590 <a href="step.html" class="code" title="">step</a>=temp+52*0.52243;
2591 set(handles.inj_offset,<span class="string">'String'</span>,<a href="step.html" class="code" title="">step</a>);
2592 <a href="#_sub101" class="code" title="subfunction inj_offset_Callback(hObject, eventdata, handles)">inj_offset_Callback</a>(handles.inj_offset, eventdata, handles);
2593 
2594 <span class="comment">% --- Executes on button press in button_offext_moins.</span>
2595 <a name="_sub108" href="#_subfunctions" class="code">function button_offext_moins_Callback(hObject, eventdata, handles)</a>
2596 <span class="comment">% hObject    handle to button_offext_moins (see GCBO)</span>
2597 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2598 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2599 
2600 temp=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2601 <a href="step.html" class="code" title="">step</a>=temp-52*0.52243;
2602 set(handles.ext_offset,<span class="string">'String'</span>,<a href="step.html" class="code" title="">step</a>);
2603 <a href="#_sub103" class="code" title="subfunction ext_offset_Callback(hObject, eventdata, handles)">ext_offset_Callback</a>(handles.ext_offset, eventdata, handles);
2604 
2605 <span class="comment">% --- Executes on button press in button_offext_plus.</span>
2606 <a name="_sub109" href="#_subfunctions" class="code">function button_offext_plus_Callback(hObject, eventdata, handles)</a>
2607 <span class="comment">% hObject    handle to button_offext_plus (see GCBO)</span>
2608 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2609 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2610 
2611 temp=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2612 <a href="step.html" class="code" title="">step</a>=temp+52*0.52243;
2613 set(handles.ext_offset,<span class="string">'String'</span>,<a href="step.html" class="code" title="">step</a>);
2614 <a href="#_sub103" class="code" title="subfunction ext_offset_Callback(hObject, eventdata, handles)">ext_offset_Callback</a>(handles.ext_offset, eventdata, handles);
2615 
2616 
2617 <span class="comment">% --- Executes on button press in button_bpm.</span>
2618 <a name="_sub110" href="#_subfunctions" class="code">function button_bpm_Callback(hObject, eventdata, handles)</a>
2619 <span class="comment">% hObject    handle to button_bpm (see GCBO)</span>
2620 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2621 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2622 
2623 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of button_bpm</span>
2624 
2625 bpm=get(hObject,<span class="string">'Value'</span>);
2626 
2627 <span class="keyword">if</span> (bpm==0)
2628    set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'off'</span>);
2629 <span class="keyword">elseif</span> (bpm==1)
2630     set(handles.panel_bpm,<span class="string">'Visible'</span>,<span class="string">'on'</span>);
2631 <span class="keyword">end</span>
2632 
2633 
2634 
2635 <a name="_sub111" href="#_subfunctions" class="code">function ans_bpm_c01_Callback(hObject, eventdata, handles)</a>
2636 <span class="comment">% hObject    handle to ans_bpm_c01 (see GCBO)</span>
2637 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2638 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2639 
2640 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c01 as text</span>
2641 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c01 as a double</span>
2642 
2643 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2644 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2645 tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2646 
2647 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2648 <a name="_sub112" href="#_subfunctions" class="code">function ans_bpm_c01_CreateFcn(hObject, eventdata, handles)</a>
2649 <span class="comment">% hObject    handle to ans_bpm_c01 (see GCBO)</span>
2650 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2651 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2652 
2653 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2654 <span class="comment">%       See ISPC and COMPUTER.</span>
2655 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2656     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2657 <span class="keyword">end</span>
2658 
2659 
2660 <a name="_sub113" href="#_subfunctions" class="code">function ans_bpm_c02_Callback(hObject, eventdata, handles)</a>
2661 <span class="comment">% hObject    handle to ans_bpm_c02 (see GCBO)</span>
2662 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2663 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2664 
2665 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c02 as text</span>
2666 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c02 as a double</span>
2667 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2668 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2669 tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2670 
2671 
2672 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2673 <a name="_sub114" href="#_subfunctions" class="code">function ans_bpm_c02_CreateFcn(hObject, eventdata, handles)</a>
2674 <span class="comment">% hObject    handle to ans_bpm_c02 (see GCBO)</span>
2675 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2676 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2677 
2678 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2679 <span class="comment">%       See ISPC and COMPUTER.</span>
2680 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2681     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2682 <span class="keyword">end</span>
2683 
2684 
2685 
2686 <a name="_sub115" href="#_subfunctions" class="code">function ans_bpm_c03_Callback(hObject, eventdata, handles)</a>
2687 <span class="comment">% hObject    handle to ans_bpm_c03 (see GCBO)</span>
2688 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2689 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2690 
2691 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c03 as text</span>
2692 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c03 as a double</span>
2693 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2694 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2695 tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2696 
2697 
2698 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2699 <a name="_sub116" href="#_subfunctions" class="code">function ans_bpm_c03_CreateFcn(hObject, eventdata, handles)</a>
2700 <span class="comment">% hObject    handle to ans_bpm_c03 (see GCBO)</span>
2701 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2702 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2703 
2704 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2705 <span class="comment">%       See ISPC and COMPUTER.</span>
2706 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2707     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2708 <span class="keyword">end</span>
2709 
2710 
2711 
2712 <a name="_sub117" href="#_subfunctions" class="code">function ans_bpm_c04_Callback(hObject, eventdata, handles)</a>
2713 <span class="comment">% hObject    handle to ans_bpm_c04 (see GCBO)</span>
2714 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2715 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2716 
2717 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c04 as text</span>
2718 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c04 as a double</span>
2719 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2720 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2721 tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2722 
2723 
2724 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2725 <a name="_sub118" href="#_subfunctions" class="code">function ans_bpm_c04_CreateFcn(hObject, eventdata, handles)</a>
2726 <span class="comment">% hObject    handle to ans_bpm_c04 (see GCBO)</span>
2727 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2728 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2729 
2730 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2731 <span class="comment">%       See ISPC and COMPUTER.</span>
2732 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2733     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2734 <span class="keyword">end</span>
2735 
2736 
2737 
2738 <a name="_sub119" href="#_subfunctions" class="code">function ans_bpm_c05_Callback(hObject, eventdata, handles)</a>
2739 <span class="comment">% hObject    handle to ans_bpm_c05 (see GCBO)</span>
2740 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2741 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2742 
2743 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c05 as text</span>
2744 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c05 as a double</span>
2745 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2746 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2747 tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2748 
2749 
2750 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2751 <a name="_sub120" href="#_subfunctions" class="code">function ans_bpm_c05_CreateFcn(hObject, eventdata, handles)</a>
2752 <span class="comment">% hObject    handle to ans_bpm_c05 (see GCBO)</span>
2753 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2754 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2755 
2756 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2757 <span class="comment">%       See ISPC and COMPUTER.</span>
2758 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2759     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2760 <span class="keyword">end</span>
2761 
2762 
2763 
2764 <a name="_sub121" href="#_subfunctions" class="code">function ans_bpm_c06_Callback(hObject, eventdata, handles)</a>
2765 <span class="comment">% hObject    handle to ans_bpm_c06 (see GCBO)</span>
2766 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2767 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2768 
2769 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c06 as text</span>
2770 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c06 as a double</span>
2771 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2772 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2773 tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2774 
2775 
2776 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2777 <a name="_sub122" href="#_subfunctions" class="code">function ans_bpm_c06_CreateFcn(hObject, eventdata, handles)</a>
2778 <span class="comment">% hObject    handle to ans_bpm_c06 (see GCBO)</span>
2779 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2780 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2781 
2782 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2783 <span class="comment">%       See ISPC and COMPUTER.</span>
2784 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2785     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2786 <span class="keyword">end</span>
2787 
2788 
2789 
2790 <a name="_sub123" href="#_subfunctions" class="code">function ans_bpm_c07_Callback(hObject, eventdata, handles)</a>
2791 <span class="comment">% hObject    handle to ans_bpm_c07 (see GCBO)</span>
2792 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2793 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2794 
2795 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c07 as text</span>
2796 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c07 as a double</span>
2797 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2798 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2799 tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2800 
2801 
2802 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2803 <a name="_sub124" href="#_subfunctions" class="code">function ans_bpm_c07_CreateFcn(hObject, eventdata, handles)</a>
2804 <span class="comment">% hObject    handle to ans_bpm_c07 (see GCBO)</span>
2805 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2806 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2807 
2808 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2809 <span class="comment">%       See ISPC and COMPUTER.</span>
2810 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2811     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2812 <span class="keyword">end</span>
2813 
2814 
2815 
2816 <a name="_sub125" href="#_subfunctions" class="code">function ans_bpm_c08_Callback(hObject, eventdata, handles)</a>
2817 <span class="comment">% hObject    handle to ans_bpm_c08 (see GCBO)</span>
2818 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2819 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2820 
2821 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c08 as text</span>
2822 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c08 as a double</span>
2823 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2824 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2825 tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2826 
2827 
2828 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2829 <a name="_sub126" href="#_subfunctions" class="code">function ans_bpm_c08_CreateFcn(hObject, eventdata, handles)</a>
2830 <span class="comment">% hObject    handle to ans_bpm_c08 (see GCBO)</span>
2831 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2832 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2833 
2834 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2835 <span class="comment">%       See ISPC and COMPUTER.</span>
2836 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2837     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2838 <span class="keyword">end</span>
2839 
2840 
2841 
2842 <a name="_sub127" href="#_subfunctions" class="code">function ans_bpm_c09_Callback(hObject, eventdata, handles)</a>
2843 <span class="comment">% hObject    handle to ans_bpm_c09 (see GCBO)</span>
2844 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2845 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2846 
2847 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c09 as text</span>
2848 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c09 as a double</span>
2849 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2850 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2851 tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2852 
2853 
2854 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2855 <a name="_sub128" href="#_subfunctions" class="code">function ans_bpm_c09_CreateFcn(hObject, eventdata, handles)</a>
2856 <span class="comment">% hObject    handle to ans_bpm_c09 (see GCBO)</span>
2857 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2858 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2859 
2860 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2861 <span class="comment">%       See ISPC and COMPUTER.</span>
2862 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2863     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2864 <span class="keyword">end</span>
2865 
2866 
2867 
2868 <a name="_sub129" href="#_subfunctions" class="code">function ans_bpm_c10_Callback(hObject, eventdata, handles)</a>
2869 <span class="comment">% hObject    handle to ans_bpm_c10 (see GCBO)</span>
2870 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2871 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2872 
2873 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c10 as text</span>
2874 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c10 as a double</span>
2875 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2876 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2877 tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2878 
2879 
2880 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2881 <a name="_sub130" href="#_subfunctions" class="code">function ans_bpm_c10_CreateFcn(hObject, eventdata, handles)</a>
2882 <span class="comment">% hObject    handle to ans_bpm_c10 (see GCBO)</span>
2883 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2884 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2885 
2886 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2887 <span class="comment">%       See ISPC and COMPUTER.</span>
2888 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2889     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2890 <span class="keyword">end</span>
2891 
2892 
2893 
2894 <a name="_sub131" href="#_subfunctions" class="code">function ans_bpm_c11_Callback(hObject, eventdata, handles)</a>
2895 <span class="comment">% hObject    handle to ans_bpm_c11 (see GCBO)</span>
2896 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2897 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2898 
2899 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c11 as text</span>
2900 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c11 as a double</span>
2901 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2902 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2903 tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2904 
2905 
2906 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2907 <a name="_sub132" href="#_subfunctions" class="code">function ans_bpm_c11_CreateFcn(hObject, eventdata, handles)</a>
2908 <span class="comment">% hObject    handle to ans_bpm_c11 (see GCBO)</span>
2909 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2910 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2911 
2912 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2913 <span class="comment">%       See ISPC and COMPUTER.</span>
2914 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2915     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2916 <span class="keyword">end</span>
2917 
2918 
2919 
2920 <a name="_sub133" href="#_subfunctions" class="code">function ans_bpm_c12_Callback(hObject, eventdata, handles)</a>
2921 <span class="comment">% hObject    handle to ans_bpm_c12 (see GCBO)</span>
2922 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2923 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2924 
2925 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c12 as text</span>
2926 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c12 as a double</span>
2927 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2928 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2929 tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2930 
2931 
2932 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2933 <a name="_sub134" href="#_subfunctions" class="code">function ans_bpm_c12_CreateFcn(hObject, eventdata, handles)</a>
2934 <span class="comment">% hObject    handle to ans_bpm_c12 (see GCBO)</span>
2935 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2936 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2937 
2938 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2939 <span class="comment">%       See ISPC and COMPUTER.</span>
2940 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2941     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2942 <span class="keyword">end</span>
2943 
2944 
2945 
2946 <a name="_sub135" href="#_subfunctions" class="code">function ans_bpm_c13_Callback(hObject, eventdata, handles)</a>
2947 <span class="comment">% hObject    handle to ans_bpm_c13 (see GCBO)</span>
2948 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2949 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2950 
2951 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c13 as text</span>
2952 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c13 as a double</span>
2953 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2954 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2955 tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2956 
2957 
2958 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2959 <a name="_sub136" href="#_subfunctions" class="code">function ans_bpm_c13_CreateFcn(hObject, eventdata, handles)</a>
2960 <span class="comment">% hObject    handle to ans_bpm_c13 (see GCBO)</span>
2961 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2962 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2963 
2964 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2965 <span class="comment">%       See ISPC and COMPUTER.</span>
2966 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2967     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2968 <span class="keyword">end</span>
2969 
2970 
2971 
2972 <a name="_sub137" href="#_subfunctions" class="code">function ans_bpm_c14_Callback(hObject, eventdata, handles)</a>
2973 <span class="comment">% hObject    handle to ans_bpm_c14 (see GCBO)</span>
2974 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2975 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
2976 
2977 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c14 as text</span>
2978 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c14 as a double</span>
2979 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
2980 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
2981 tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
2982 
2983 
2984 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
2985 <a name="_sub138" href="#_subfunctions" class="code">function ans_bpm_c14_CreateFcn(hObject, eventdata, handles)</a>
2986 <span class="comment">% hObject    handle to ans_bpm_c14 (see GCBO)</span>
2987 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
2988 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
2989 
2990 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
2991 <span class="comment">%       See ISPC and COMPUTER.</span>
2992 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
2993     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
2994 <span class="keyword">end</span>
2995 
2996 
2997 
2998 <a name="_sub139" href="#_subfunctions" class="code">function ans_bpm_c15_Callback(hObject, eventdata, handles)</a>
2999 <span class="comment">% hObject    handle to ans_bpm_c15 (see GCBO)</span>
3000 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3001 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3002 
3003 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c15 as text</span>
3004 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c15 as a double</span>
3005 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
3006 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
3007 tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
3008 
3009 
3010 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3011 <a name="_sub140" href="#_subfunctions" class="code">function ans_bpm_c15_CreateFcn(hObject, eventdata, handles)</a>
3012 <span class="comment">% hObject    handle to ans_bpm_c15 (see GCBO)</span>
3013 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3014 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3015 
3016 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3017 <span class="comment">%       See ISPC and COMPUTER.</span>
3018 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3019     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3020 <span class="keyword">end</span>
3021 
3022 
3023 
3024 <a name="_sub141" href="#_subfunctions" class="code">function ans_bpm_c16_Callback(hObject, eventdata, handles)</a>
3025 <span class="comment">% hObject    handle to ans_bpm_c16 (see GCBO)</span>
3026 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3027 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3028 
3029 <span class="comment">% Hints: get(hObject,'String') returns contents of ans_bpm_c16 as text</span>
3030 <span class="comment">%        str2double(get(hObject,'String')) returns contents of ans_bpm_c16 as a double</span>
3031 ext_offset=str2double(get(handles.ext_offset,<span class="string">'String'</span>));
3032 delay=str2double(get(hObject,<span class="string">'String'</span>))+ext_offset;
3033 tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTimeDelay'</span>,delay);
3034 
3035 
3036 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3037 <a name="_sub142" href="#_subfunctions" class="code">function ans_bpm_c16_CreateFcn(hObject, eventdata, handles)</a>
3038 <span class="comment">% hObject    handle to ans_bpm_c16 (see GCBO)</span>
3039 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3040 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3041 
3042 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3043 <span class="comment">%       See ISPC and COMPUTER.</span>
3044 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3045     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3046 <span class="keyword">end</span>
3047 
3048 
3049 
3050 <a name="_sub143" href="#_subfunctions" class="code">function edit_filling_relecture_tables_Callback(hObject, eventdata, handles)</a>
3051 <span class="comment">% hObject    handle to edit_filling_relecture_tables (see GCBO)</span>
3052 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3053 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3054 
3055 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_relecture_tables as text</span>
3056 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_relecture_tables as a double</span>
3057 
3058 
3059 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3060 <a name="_sub144" href="#_subfunctions" class="code">function edit_filling_relecture_tables_CreateFcn(hObject, eventdata, handles)</a>
3061 <span class="comment">% hObject    handle to edit_filling_relecture_tables (see GCBO)</span>
3062 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3063 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3064 
3065 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3066 <span class="comment">%       See ISPC and COMPUTER.</span>
3067 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3068     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3069 <span class="keyword">end</span>
3070 
3071 
3072 
3073 <a name="_sub145" href="#_subfunctions" class="code">function edit_filling_relecture_bunch_Callback(hObject, eventdata, handles)</a>
3074 <span class="comment">% hObject    handle to edit_filling_relecture_bunch (see GCBO)</span>
3075 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3076 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3077 
3078 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_relecture_bunch as text</span>
3079 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_relecture_bunch as a double</span>
3080 
3081 
3082 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3083 <a name="_sub146" href="#_subfunctions" class="code">function edit_filling_relecture_bunch_CreateFcn(hObject, eventdata, handles)</a>
3084 <span class="comment">% hObject    handle to edit_filling_relecture_bunch (see GCBO)</span>
3085 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3086 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3087 
3088 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3089 <span class="comment">%       See ISPC and COMPUTER.</span>
3090 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3091     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3092 <span class="keyword">end</span>
3093 
3094 
3095 
3096 <a name="_sub147" href="#_subfunctions" class="code">function edit_filling_entrer_bunch_Callback(hObject, eventdata, handles)</a>
3097 <span class="comment">% hObject    handle to edit_filling_entrer_bunch (see GCBO)</span>
3098 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3099 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3100 
3101 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_entrer_bunch as text</span>
3102 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_entrer_bunch as a double</span>
3103 <span class="comment">% temp=tango_read_attribute('ANS/SY/CENTRAL', 'ExtractionOffsetClkStepValue');</span>
3104 <span class="comment">% offset_ext=temp.value(1)*52;</span>
3105 <span class="comment">% offset_linac=str2double(get(handles.lin_canon_spm_fin,'String')) ;% délai fin de réglage en ns</span>
3106 <span class="comment">% offset_linac=offset_linac/handles.lin_fin_step;                   % délai fin de réglage en pas de handles.lin_fin_step ps</span>
3107 <span class="comment">% bjump=handles.one_bunch;</span>
3108 <span class="comment">%</span>
3109 <span class="comment">% bunch=str2num(get(hObject,'String'));</span>
3110 <span class="comment">% [dtour,dpaquet]=bucketnumber(bunch);</span>
3111 <span class="comment">% dpaquet=dpaquet*bjump+offset_linac;</span>
3112 <span class="comment">% table=int32([length(bunch) dtour dpaquet]);</span>
3113 <span class="comment">% tango_command_inout('ANS/SY/CENTRAL','SetTables',table);</span>
3114 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TablesCurrentDepth');</span>
3115 <span class="comment">% n=temp.value;</span>
3116 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'ExtractionDelayTable');</span>
3117 <span class="comment">% table_ext=temp.value(1:n); %-offset_ext;</span>
3118 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'LinacDelayTable');</span>
3119 <span class="comment">% table_linac=(temp.value(1:n)-offset_linac)/bjump;</span>
3120 <span class="comment">% table=[];</span>
3121 <span class="comment">% for i=1:n</span>
3122 <span class="comment">%     table=[table ' ' '(' num2str([table_ext(i)])  ' '  num2str([table_linac(i)]) ')'];</span>
3123 <span class="comment">% end</span>
3124 <span class="comment">% set(handles.edit_filling_relecture_tables,'String',[num2str(table)]);</span>
3125 <span class="comment">% set(handles.edit_filling_relecture_bunch, 'String',[num2str(bunch)]);</span>
3126 
3127 
3128 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3129 <a name="_sub148" href="#_subfunctions" class="code">function edit_filling_entrer_bunch_CreateFcn(hObject, eventdata, handles)</a>
3130 <span class="comment">% hObject    handle to edit_filling_entrer_bunch (see GCBO)</span>
3131 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3132 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3133 
3134 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3135 <span class="comment">%       See ISPC and COMPUTER.</span>
3136 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3137     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3138 <span class="keyword">end</span>
3139 
3140 
3141 <span class="comment">% --- Executes on button press in button_update.</span>
3142 <a name="_sub149" href="#_subfunctions" class="code">function button_update_Callback(hObject, eventdata, handles)</a>
3143 <span class="comment">% hObject    handle to button_update (see GCBO)</span>
3144 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3145 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3146 
3147 fprintf(<span class="string">'*****Update des 16 cartes locales******\n'</span>)
3148 <span class="comment">%r=tango_command_inout2('ANS/SY/LOCAL.SDC.1',  'Update');retour_update('ANS/SY/LOCAL.SDC.1',r);</span>
3149 r=tango_command_inout2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>,<span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>,r);
3150 r=tango_command_inout2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>,<span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>,r);
3151 
3152 r=tango_command_inout2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>,  <span class="string">'Update'</span>);    <a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>,r);
3153 r=tango_command_inout2(<span class="string">'BOO/SY/LOCAL.Alim.1'</span>,  <span class="string">'Update'</span>); <a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'BOO/SY/LOCAL.Alim.1'</span>,r);
3154 r=tango_command_inout2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'BOO/SY/LOCAL.DG.3'</span>,r);
3155 r=tango_command_inout2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>,r);
3156 
3157 r=tango_command_inout2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>,r);
3158 r=tango_command_inout2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>,r);
3159 r=tango_command_inout2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>,r);
3160 r=tango_command_inout2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>,r);
3161 r=tango_command_inout2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>,r);
3162 r=tango_command_inout2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>,r);
3163 r=tango_command_inout2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>,r);
3164 r=tango_command_inout2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>,r);
3165 r=tango_command_inout2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>,r);
3166 r=tango_command_inout2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>,  <span class="string">'Update'</span>); <a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>,r);
3167 r=tango_command_inout2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>,  <span class="string">'Update'</span>);<a href="retour_update.html" class="code" title="function retour_update(carte,r)">retour_update</a>(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>,r);
3168 fprintf(<span class="string">'**************************************\n'</span>)
3169 <span class="comment">%retour_command=vect</span>
3170 <span class="comment">%fprintf('16 zéro = OK : %d\n',vect)</span>
3171 
3172 <span class="comment">% --- Executes on button press in button_acquisition_trigstatus.</span>
3173 <a name="_sub150" href="#_subfunctions" class="code">function button_acquisition_trigstatus_Callback(hObject, eventdata, handles)</a>
3174 <span class="comment">% hObject    handle to button_acquisition_trigstatus (see GCBO)</span>
3175 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3176 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3177 
3178 set(handles.inj_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3179 set(handles.sdc1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3180 set(handles.lin_canon_lpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3181 set(handles.boo_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3182 set(handles.lt1_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3183 set(handles.lt1_MC1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3184 set(handles.lt1_MC2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3185 set(handles.lt1_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3186 set(handles.boo_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3187 set(handles.boo_nod,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3188 set(handles.boo_inj_septum,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3189 set(handles.boo_inj_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3190 set(handles.boo_alim_dipole,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3191 set(handles.boo_alim_qf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3192 set(handles.boo_alim_qd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3193 set(handles.boo_alim_sf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3194 set(handles.boo_alim_sd,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3195 set(handles.boo_rf,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3196 set(handles.lin_modulateur,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3197 set(handles.ext_offset,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3198 set(handles.boo_ext_dof,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3199 set(handles.boo_ext_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3200 set(handles.boo_ext_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3201 set(handles.boo_ext_kicker,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3202 set(handles.sdc2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3203 set(handles.lt2_emittance,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3204 set(handles.lt2_osc,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3205 set(handles.lt2_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3206 set(handles.ans_inj_k1,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3207 set(handles.ans_inj_k2,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3208 set(handles.ans_inj_k3,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3209 set(handles.ans_inj_k4,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3210 set(handles.ans_inj_sept_p,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3211 set(handles.ans_inj_sept_a,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3212 set(handles.ans_bpm,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3213 set(handles.ans_dcct,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3214 set(handles.ans_bpm_c01,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3215 set(handles.ans_bpm_c02,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3216 set(handles.ans_bpm_c03,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3217 set(handles.ans_bpm_c04,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3218 set(handles.ans_bpm_c05,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3219 set(handles.ans_bpm_c06,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3220 set(handles.ans_bpm_c07,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3221 set(handles.ans_bpm_c08,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3222 set(handles.ans_bpm_c09,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3223 set(handles.ans_bpm_c10,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3224 set(handles.ans_bpm_c11,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3225 set(handles.ans_bpm_c12,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3226 set(handles.ans_bpm_c13,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3227 set(handles.ans_bpm_c14,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3228 set(handles.ans_bpm_c15,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3229 set(handles.ans_bpm_c16,<span class="string">'Enable'</span>,<span class="string">'off'</span>);
3230 
3231 
3232 n=1;
3233 
3234 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TPcTimeDelay'</span>);
3235 set(handles.central_pc,<span class="string">'String'</span>,num2str(temp.value(n)));
3236 
3237 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TInjTimeDelay'</span>);
3238 set(handles.central_inj,<span class="string">'String'</span>,num2str(temp.value(n)));
3239 
3240 temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TSoftTimeDelay'</span>);
3241 set(handles.central_soft,<span class="string">'String'</span>,num2str(temp.value(n)));
3242 
3243 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetTimeValue'</span>);
3244 set(handles.central_ext,<span class="string">'String'</span>,num2str(temp.value(n)));
3245 
3246 
3247 
3248 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscTrigStatus'</span>);
3249 set(handles.sdc1,<span class="string">'String'</span>,num2str(temp.value(n)));
3250 
3251 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmTrigStatus'</span>);
3252 set(handles.lin_canon_lpm,<span class="string">'String'</span>,num2str(temp.value(n)));
3253 
3254 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigTrigStatus'</span>);
3255 set(handles.boo_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
3256 
3257 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceTrigStatus'</span>);
3258 set(handles.lt1_emittance,<span class="string">'String'</span>,num2str(temp.value(n)));
3259 
3260 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1TrigStatus'</span>);
3261 set(handles.lt1_MC1,<span class="string">'String'</span>,num2str(temp.value(n)));
3262 
3263 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2TrigStatus'</span>);
3264 set(handles.lt1_MC2,<span class="string">'String'</span>,num2str(temp.value(n)));
3265 
3266 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscTrigStatus'</span>);
3267 set(handles.lt1_osc,<span class="string">'String'</span>,num2str(temp.value(n)));
3268 
3269 temp=tango_read_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booTrigStatus'</span>);
3270 set(handles.boo_dcct,<span class="string">'String'</span>,num2str(temp.value(n)));
3271 
3272 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigTrigStatus'</span>);
3273 set(handles.boo_nod,<span class="string">'String'</span>,num2str(temp.value(n)));
3274 
3275 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigTrigStatus'</span>);
3276 set(handles.boo_inj_septum,<span class="string">'String'</span>,num2str(temp.value(n)));
3277 
3278 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigTrigStatus'</span>);
3279 set(handles.boo_inj_kicker,<span class="string">'String'</span>,num2str(temp.value(n)));
3280 
3281 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'dpTrigStatus'</span>);
3282 set(handles.boo_alim_dipole,<span class="string">'String'</span>,num2str(temp.value(n)));
3283 
3284 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qfTrigStatus'</span>);
3285 set(handles.boo_alim_qf,<span class="string">'String'</span>,num2str(temp.value(n)));
3286 
3287 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'qdTrigStatus'</span>);
3288 set(handles.boo_alim_qd,<span class="string">'String'</span>,num2str(temp.value(n)));
3289 
3290 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sfTrigStatus'</span>);
3291 set(handles.boo_alim_sf,<span class="string">'String'</span>,num2str(temp.value(n)));
3292 
3293 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.ALIM.1'</span>, <span class="string">'sdTrigStatus'</span>);
3294 set(handles.boo_alim_sd,<span class="string">'String'</span>,num2str(temp.value(n)));
3295 
3296 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.RF.1'</span>, <span class="string">'rfTrigStatus'</span>);
3297 set(handles.boo_rf,<span class="string">'String'</span>,num2str(temp.value(n)));
3298 
3299 temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTrigStatus'</span>);
3300 set(handles.lin_modulateur,<span class="string">'String'</span>,num2str(temp.value(n)));
3301 
3302 
3303 
3304 
3305 
3306 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigTrigStatus'</span>);
3307 set(handles.boo_ext_dof,<span class="string">'String'</span>,num2str(temp.value(n)));
3308 
3309 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigTrigStatus'</span>);
3310 set(handles.boo_ext_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)));
3311 
3312 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigTrigStatus'</span>);
3313 set(handles.boo_ext_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)));
3314 
3315 temp=tango_read_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigTrigStatus'</span>);
3316 set(handles.boo_ext_kicker,<span class="string">'String'</span>,num2str(temp.value(n)));
3317 
3318 
3319 
3320 temp=tango_read_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareTrigStatus'</span>);
3321 set(handles.sdc2,<span class="string">'String'</span>,num2str(temp.value(n)));
3322 
3323 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvTrigStatus'</span>);
3324 set(handles.lt2_emittance,<span class="string">'String'</span>,num2str(temp.value(n)));
3325 
3326 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctTrigStatus'</span>);
3327 set(handles.lt2_osc,<span class="string">'String'</span>,num2str(temp.value(n)));
3328 
3329 temp=tango_read_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3330 set(handles.lt2_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
3331 
3332 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k1.trigTrigStatus'</span>);
3333 set(handles.ans_inj_k1,<span class="string">'String'</span>,num2str(temp.value(n)));
3334 
3335 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k2.trigTrigStatus'</span>);
3336 set(handles.ans_inj_k2,<span class="string">'String'</span>,num2str(temp.value(n)));
3337 
3338 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k3.trigTrigStatus'</span>);
3339 set(handles.ans_inj_k3,<span class="string">'String'</span>,num2str(temp.value(n)));
3340 
3341 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'k4.trigTrigStatus'</span>);
3342 set(handles.ans_inj_k4,<span class="string">'String'</span>,num2str(temp.value(n)));
3343 
3344 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigTrigStatus'</span>);
3345 set(handles.ans_inj_sept_p,<span class="string">'String'</span>,num2str(temp.value(n)));
3346 
3347 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigTrigStatus'</span>);
3348 set(handles.ans_inj_sept_a,<span class="string">'String'</span>,num2str(temp.value(n)));
3349 
3350 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctTrigStatus'</span>);
3351 set(handles.ans_dcct,<span class="string">'String'</span>,num2str(temp.value(n)));
3352 
3353 temp=tango_read_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3354 set(handles.ans_bpm,<span class="string">'String'</span>,num2str(temp.value(n)));
3355 set(handles.ans_bpm_c01,<span class="string">'String'</span>,num2str(temp.value(n)));
3356 
3357 temp=tango_read_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3358 set(handles.ans_bpm_c02,<span class="string">'String'</span>,num2str(temp.value(n)));
3359 temp=tango_read_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3360 set(handles.ans_bpm_c03,<span class="string">'String'</span>,num2str(temp.value(n)));
3361 temp=tango_read_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3362 set(handles.ans_bpm_c04,<span class="string">'String'</span>,num2str(temp.value(n)));
3363 temp=tango_read_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3364 set(handles.ans_bpm_c05,<span class="string">'String'</span>,num2str(temp.value(n)));
3365 temp=tango_read_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3366 set(handles.ans_bpm_c06,<span class="string">'String'</span>,num2str(temp.value(n)));
3367 temp=tango_read_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3368 set(handles.ans_bpm_c07,<span class="string">'String'</span>,num2str(temp.value(n)));
3369 temp=tango_read_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3370 set(handles.ans_bpm_c08,<span class="string">'String'</span>,num2str(temp.value(n)));
3371 temp=tango_read_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3372 set(handles.ans_bpm_c09,<span class="string">'String'</span>,num2str(temp.value(n)));
3373 temp=tango_read_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3374 set(handles.ans_bpm_c10,<span class="string">'String'</span>,num2str(temp.value(n)));
3375 temp=tango_read_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3376 set(handles.ans_bpm_c11,<span class="string">'String'</span>,num2str(temp.value(n)));
3377 temp=tango_read_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3378 set(handles.ans_bpm_c12,<span class="string">'String'</span>,num2str(temp.value(n)));
3379 temp=tango_read_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3380 set(handles.ans_bpm_c13,<span class="string">'String'</span>,num2str(temp.value(n)));
3381 temp=tango_read_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3382 set(handles.ans_bpm_c14,<span class="string">'String'</span>,num2str(temp.value(n)));
3383 temp=tango_read_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3384 set(handles.ans_bpm_c15,<span class="string">'String'</span>,num2str(temp.value(n)));
3385 temp=tango_read_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigTrigStatus'</span>);
3386 set(handles.ans_bpm_c16,<span class="string">'String'</span>,num2str(temp.value(n)));
3387 
3388 
3389 
3390 <span class="comment">% --- Executes on button press in togglebutton2.</span>
3391 <a name="_sub151" href="#_subfunctions" class="code">function togglebutton2_Callback(hObject, eventdata, handles)</a>
3392 <span class="comment">% hObject    handle to togglebutton2 (see GCBO)</span>
3393 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3394 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3395 
3396 <span class="comment">% Hint: get(hObject,'Value') returns toggle state of togglebutton2</span>
3397 
3398 
3399 <span class="comment">% --- Executes on selection change in listbox_fillingmode.</span>
3400 <a name="_sub152" href="#_subfunctions" class="code">function listbox_fillingmode_Callback(hObject, eventdata, handles)</a>
3401 <span class="comment">% hObject    handle to listbox_fillingmode (see GCBO)</span>
3402 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3403 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3404 
3405 <span class="comment">% Hints: contents = get(hObject,'String') returns listbox_fillingmode contents as cell array</span>
3406 <span class="comment">%        contents{get(hObject,'Value')} returns selected item from listbox_fillingmode</span>
3407 pattern=get(hObject,<span class="string">'String'</span>);
3408 mode=get(hObject,<span class="string">'Value'</span>);
3409 fprintf(<span class="string">'***************************************************\n'</span>)
3410 fprintf(<span class="string">'Mode de remplissage sélectionné : %s\n'</span>,pattern{mode})
3411 fprintf(<span class="string">'***************************************************\n'</span>)
3412 
3413 <span class="comment">% Prépare les tables pour le 3 Hz</span>
3414 quart=[1 105 209 313];
3415 temp=tango_read_attribute(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionOffsetClkStepValue'</span>);
3416 offset_ext=temp.value(1)*52;
3417 offset_linac=str2double(get(handles.lin_canon_spm_fin,<span class="string">'String'</span>)) ;<span class="comment">% délai fin de réglage en ns</span>
3418 offset_linac=offset_linac/handles.lin_fin_step;                   <span class="comment">% délai fin de réglage en pas de handles.lin_fin_step ps</span>
3419 bjump=handles.one_bunch;
3420 
3421 
3422 <span class="keyword">if</span> (mode&lt;=4)    <span class="comment">%LPM</span>
3423     bunch=quart(mode);
3424 <span class="keyword">elseif</span> (mode&gt;4)&amp;&amp;(mode&lt;=7) <span class="comment">%LPM</span>
3425     bunch=quart(1:(mode-3));
3426 <span class="keyword">elseif</span> (mode==8)    <span class="comment">%LPM</span>
3427     dbunch=4*8;
3428     bunch=(0:12)*dbunch;
3429 <span class="keyword">elseif</span> (mode==9)   <span class="comment">% SPM    1 paquet</span>
3430     bunch=[1];
3431 <span class="keyword">elseif</span> (mode==10)  <span class="comment">% SPM    8 paquets</span>
3432     bunch=[0:7]*52+1;
3433 <span class="keyword">elseif</span> (mode==11)  <span class="comment">% SPM    16 paquets</span>
3434     bunch=[0:15]*26+1;
3435 <span class="keyword">elseif</span> (mode==12)  <span class="comment">% SPM    n paquets</span>
3436    bunch=str2num(get(handles.edit_filling_entrer_bunch,<span class="string">'String'</span>));
3437 <span class="keyword">elseif</span> (mode==13)  <span class="comment">% SPM    n paquets</span>
3438     paq=str2num(get(handles.edit_filling_entrer_bunch1,<span class="string">'String'</span>));
3439     bunch=paq(1):paq(2);
3440 <span class="keyword">end</span>
3441 
3442 
3443 [dtour,dpaquet]=<a href="bucketnumber.html" class="code" title="function [n1 n2] = bucketnumber(num)">bucketnumber</a>(bunch);
3444 dpaquet=dpaquet*bjump+offset_linac;
3445 table=int32([length(bunch) dtour dpaquet]);
3446 handles.table=table;
3447 handles.bunch=bunch;
3448 
3449 
3450 modeinj=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3451 <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)  <span class="comment">% on rempli la table sur paquet 1 par défaut</span>
3452     table=handles.table0;
3453     tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table);
3454     
3455 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>) <span class="comment">% on rempli la table</span>
3456     tango_command_inout(<span class="string">'ANS/SY/CENTRAL'</span>,<span class="string">'SetTables'</span>,table);
3457     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'TablesCurrentDepth'</span>);
3458     n=temp.value;
3459     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'ExtractionDelayTable'</span>);
3460     table_ext=temp.value(1:n); <span class="comment">%-offset_ext;</span>
3461     temp=tango_read_attribute2(<span class="string">'ANS/SY/CENTRAL'</span>, <span class="string">'LinacDelayTable'</span>);
3462     table_linac=(temp.value(1:n)-offset_linac)/bjump;
3463     table=[];
3464     <span class="keyword">for</span> i=1:n
3465         table=[table <span class="string">' '</span> <span class="string">'('</span> num2str([table_ext(i)])  <span class="string">' '</span>  num2str([table_linac(i)]) <span class="string">')'</span>];
3466     <span class="keyword">end</span>
3467 <span class="keyword">end</span>
3468 
3469 set(handles.edit_filling_relecture_tables,<span class="string">'String'</span>,[num2str(table)]);
3470 set(handles.edit_filling_relecture_bunch, <span class="string">'String'</span>,[num2str(bunch)]);
3471 
3472 
3473 guidata(hObject, handles);
3474 
3475 
3476 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3477 <a name="_sub153" href="#_subfunctions" class="code">function listbox_fillingmode_CreateFcn(hObject, eventdata, handles)</a>
3478 <span class="comment">% hObject    handle to listbox_fillingmode (see GCBO)</span>
3479 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3480 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3481 
3482 <span class="comment">% Hint: listbox controls usually have a white background on Windows.</span>
3483 <span class="comment">%       See ISPC and COMPUTER.</span>
3484 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3485     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3486 <span class="keyword">end</span>
3487 
3488 
3489 <span class="comment">% --- Executes on button press in button_fix.</span>
3490 <a name="_sub154" href="#_subfunctions" class="code">function button_fix_Callback(hObject, eventdata, handles)</a>
3491 <span class="comment">% hObject    handle to button_fix (see GCBO)</span>
3492 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3493 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3494 
3495 [clk_pc,clk_soft]=<a href="fix_quart.html" class="code" title="function [clk_pc,clk_soft]=fix_quart">fix_quart</a>;
3496 handles.clk_pc  =clk_pc;
3497 handles.clk_soft=clk_soft;
3498 
3499 <span class="comment">% n=1;</span>
3500 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TPcStepDelay');</span>
3501 <span class="comment">% clk1=temp.value(n);</span>
3502 <span class="comment">% temp=tango_read_attribute2('ANS/SY/CENTRAL', 'TSoftStepDelay');</span>
3503 <span class="comment">% clk2=temp.value(n);</span>
3504 <span class="comment">%</span>
3505 <span class="comment">% jump=int32([0 39 26 13]);</span>
3506 <span class="comment">% handles.clk_pc  =jump +  int32(clk1);</span>
3507 <span class="comment">% handles.clk_soft=jump  + int32(clk2);</span>
3508 
3509 guidata(hObject, handles);
3510 
3511 
3512 
3513 <a name="_sub155" href="#_subfunctions" class="code">function edit_Nshot_soft_Callback(hObject, eventdata, handles)</a>
3514 <span class="comment">% hObject    handle to edit_Nshot_soft (see GCBO)</span>
3515 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3516 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3517 
3518 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Nshot_soft as text</span>
3519 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Nshot_soft as a double</span>
3520 
3521 
3522 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3523 <a name="_sub156" href="#_subfunctions" class="code">function edit_Nshot_soft_CreateFcn(hObject, eventdata, handles)</a>
3524 <span class="comment">% hObject    handle to edit_Nshot_soft (see GCBO)</span>
3525 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3526 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3527 
3528 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3529 <span class="comment">%       See ISPC and COMPUTER.</span>
3530 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3531     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3532 <span class="keyword">end</span>
3533 
3534 
3535 
3536 <a name="_sub157" href="#_subfunctions" class="code">function edit_laps_Callback(hObject, eventdata, handles)</a>
3537 <span class="comment">% hObject    handle to edit_laps (see GCBO)</span>
3538 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3539 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3540 
3541 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_laps as text</span>
3542 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_laps as a double</span>
3543 
3544 
3545 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3546 <a name="_sub158" href="#_subfunctions" class="code">function edit_laps_CreateFcn(hObject, eventdata, handles)</a>
3547 <span class="comment">% hObject    handle to edit_laps (see GCBO)</span>
3548 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3549 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3550 
3551 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3552 <span class="comment">%       See ISPC and COMPUTER.</span>
3553 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3554     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3555 <span class="keyword">end</span>
3556 
3557 
3558 
3559 <a name="_sub159" href="#_subfunctions" class="code">function edit_qlt1_Callback(hObject, eventdata, handles)</a>
3560 <span class="comment">% hObject    handle to edit_qlt1 (see GCBO)</span>
3561 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3562 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3563 
3564 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_qlt1 as text</span>
3565 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_qlt1 as a double</span>
3566 
3567 
3568 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3569 <a name="_sub160" href="#_subfunctions" class="code">function edit_qlt1_CreateFcn(hObject, eventdata, handles)</a>
3570 <span class="comment">% hObject    handle to edit_qlt1 (see GCBO)</span>
3571 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3572 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3573 
3574 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3575 <span class="comment">%       See ISPC and COMPUTER.</span>
3576 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3577     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3578 <span class="keyword">end</span>
3579 
3580 
3581 
3582 <a name="_sub161" href="#_subfunctions" class="code">function edit_iboo_Callback(hObject, eventdata, handles)</a>
3583 <span class="comment">% hObject    handle to edit_iboo (see GCBO)</span>
3584 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3585 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3586 
3587 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_iboo as text</span>
3588 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_iboo as a double</span>
3589 
3590 
3591 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3592 <a name="_sub162" href="#_subfunctions" class="code">function edit_iboo_CreateFcn(hObject, eventdata, handles)</a>
3593 <span class="comment">% hObject    handle to edit_iboo (see GCBO)</span>
3594 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3595 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3596 
3597 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3598 <span class="comment">%       See ISPC and COMPUTER.</span>
3599 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3600     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3601 <span class="keyword">end</span>
3602 
3603 
3604 
3605 <a name="_sub163" href="#_subfunctions" class="code">function edit_dians_Callback(hObject, eventdata, handles)</a>
3606 <span class="comment">% hObject    handle to edit_dians (see GCBO)</span>
3607 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3608 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3609 
3610 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_dians as text</span>
3611 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_dians as a double</span>
3612 
3613 
3614 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3615 <a name="_sub164" href="#_subfunctions" class="code">function edit_dians_CreateFcn(hObject, eventdata, handles)</a>
3616 <span class="comment">% hObject    handle to edit_dians (see GCBO)</span>
3617 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3618 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3619 
3620 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3621 <span class="comment">%       See ISPC and COMPUTER.</span>
3622 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3623     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3624 <span class="keyword">end</span>
3625 
3626 
3627 
3628 <a name="_sub165" href="#_subfunctions" class="code">function edit_rlt1_Callback(hObject, eventdata, handles)</a>
3629 <span class="comment">% hObject    handle to edit_rlt1 (see GCBO)</span>
3630 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3631 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3632 
3633 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rlt1 as text</span>
3634 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rlt1 as a double</span>
3635 
3636 
3637 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3638 <a name="_sub166" href="#_subfunctions" class="code">function edit_rlt1_CreateFcn(hObject, eventdata, handles)</a>
3639 <span class="comment">% hObject    handle to edit_rlt1 (see GCBO)</span>
3640 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3641 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3642 
3643 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3644 <span class="comment">%       See ISPC and COMPUTER.</span>
3645 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3646     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3647 <span class="keyword">end</span>
3648 
3649 
3650 
3651 <a name="_sub167" href="#_subfunctions" class="code">function edit_rboo_Callback(hObject, eventdata, handles)</a>
3652 <span class="comment">% hObject    handle to edit_rboo (see GCBO)</span>
3653 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3654 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3655 
3656 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rboo as text</span>
3657 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rboo as a double</span>
3658 
3659 
3660 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3661 <a name="_sub168" href="#_subfunctions" class="code">function edit_rboo_CreateFcn(hObject, eventdata, handles)</a>
3662 <span class="comment">% hObject    handle to edit_rboo (see GCBO)</span>
3663 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3664 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3665 
3666 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3667 <span class="comment">%       See ISPC and COMPUTER.</span>
3668 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3669     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3670 <span class="keyword">end</span>
3671 
3672 
3673 
3674 <a name="_sub169" href="#_subfunctions" class="code">function edit_rans_Callback(hObject, eventdata, handles)</a>
3675 <span class="comment">% hObject    handle to edit_rans (see GCBO)</span>
3676 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3677 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3678 
3679 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_rans as text</span>
3680 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_rans as a double</span>
3681 
3682 
3683 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3684 <a name="_sub170" href="#_subfunctions" class="code">function edit_rans_CreateFcn(hObject, eventdata, handles)</a>
3685 <span class="comment">% hObject    handle to edit_rans (see GCBO)</span>
3686 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3687 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3688 
3689 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3690 <span class="comment">%       See ISPC and COMPUTER.</span>
3691 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3692     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3693 <span class="keyword">end</span>
3694 
3695 
3696 
3697 <a name="_sub171" href="#_subfunctions" class="code">function edit_dians1_Callback(hObject, eventdata, handles)</a>
3698 <span class="comment">% hObject    handle to edit_dians1 (see GCBO)</span>
3699 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3700 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3701 
3702 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_dians1 as text</span>
3703 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_dians1 as a double</span>
3704 
3705 
3706 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3707 <a name="_sub172" href="#_subfunctions" class="code">function edit_dians1_CreateFcn(hObject, eventdata, handles)</a>
3708 <span class="comment">% hObject    handle to edit_dians1 (see GCBO)</span>
3709 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3710 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3711 
3712 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3713 <span class="comment">%       See ISPC and COMPUTER.</span>
3714 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3715     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3716 <span class="keyword">end</span>
3717 
3718 
3719 
3720 <a name="_sub173" href="#_subfunctions" class="code">function edit_cycle_Callback(hObject, eventdata, handles)</a>
3721 <span class="comment">% hObject    handle to edit_cycle (see GCBO)</span>
3722 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3723 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3724 
3725 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_cycle as text</span>
3726 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_cycle as a double</span>
3727 
3728 
3729 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3730 <a name="_sub174" href="#_subfunctions" class="code">function edit_cycle_CreateFcn(hObject, eventdata, handles)</a>
3731 <span class="comment">% hObject    handle to edit_cycle (see GCBO)</span>
3732 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3733 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3734 
3735 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3736 <span class="comment">%       See ISPC and COMPUTER.</span>
3737 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3738     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3739 <span class="keyword">end</span>
3740 
3741 
3742 
3743 <a name="_sub175" href="#_subfunctions" class="code">function edit_courant_total_Callback(hObject, eventdata, handles)</a>
3744 <span class="comment">% hObject    handle to edit_courant_total (see GCBO)</span>
3745 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3746 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3747 
3748 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_courant_total as text</span>
3749 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_courant_total as a double</span>
3750 
3751 
3752 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3753 <a name="_sub176" href="#_subfunctions" class="code">function edit_courant_total_CreateFcn(hObject, eventdata, handles)</a>
3754 <span class="comment">% hObject    handle to edit_courant_total (see GCBO)</span>
3755 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3756 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3757 
3758 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3759 <span class="comment">%       See ISPC and COMPUTER.</span>
3760 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3761     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3762 <span class="keyword">end</span>
3763 
3764 
3765 
3766 <a name="_sub177" href="#_subfunctions" class="code">function lin_canon_spm_Callback(hObject, eventdata, handles)</a>
3767 <span class="comment">% hObject    handle to lin_canon_spm (see GCBO)</span>
3768 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3769 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3770 
3771 <span class="comment">% Hints: get(hObject,'String') returns contents of lin_canon_spm as text</span>
3772 <span class="comment">%        str2double(get(hObject,'String')) returns contents of lin_canon_spm as a double</span>
3773 
3774 inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
3775 delay=str2double(get(hObject,<span class="string">'String'</span>))+inj_offset;
3776 tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacTimeDelay'</span>,delay);
3777 
3778 
3779 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3780 <a name="_sub178" href="#_subfunctions" class="code">function lin_canon_spm_CreateFcn(hObject, eventdata, handles)</a>
3781 <span class="comment">% hObject    handle to lin_canon_spm (see GCBO)</span>
3782 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3783 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3784 
3785 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3786 <span class="comment">%       See ISPC and COMPUTER.</span>
3787 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3788     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3789 <span class="keyword">end</span>
3790 
3791 
3792 <a name="_sub179" href="#_subfunctions" class="code">function  uipanel_mode_CreateFcn(hObject, eventdata, handles)</a>
3793 <span class="comment">% hObject    handle to lin_canon_spm (see GCBO)</span>
3794 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3795 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3796 
3797 
3798 <span class="comment">% % --------------------------------------------------------------------</span>
3799  <span class="keyword">function</span> <a href="#_sub180" class="code" title="subfunction uipanel_mode_SelectionChangeFcn(hObject, eventdata, handles)">uipanel_mode_SelectionChangeFcn</a>(hObject, eventdata, handles)
3800 <span class="comment">% % hObject    handle to uipanel_mode (see GCBO)</span>
3801 <span class="comment">% % eventdata  reserved - to be defined in a future version of MATLAB</span>
3802 <span class="comment">% % handles    structure with handles and user data (see GUIDATA)</span>
3803 <span class="comment">%</span>
3804 
3805 modelinac=get(get(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3806 <span class="keyword">switch</span> modelinac  <span class="comment">% Get Tag of selected object</span>
3807     <span class="keyword">case</span> <span class="string">'no_mode'</span>
3808         eventlpm=int32(0);
3809         eventspm=int16(0);
3810     <span class="keyword">case</span> <span class="string">'lpm_mode'</span>
3811         eventlpm=int32(5);
3812         eventspm=int16(0);
3813     <span class="keyword">case</span> <span class="string">'spm_mode'</span>
3814         eventlpm=int32(0);
3815         eventspm=int16(5);
3816 <span class="keyword">end</span>
3817 
3818 mode=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
3819 
3820 tout=0.;
3821 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
3822     <span class="keyword">case</span> <span class="string">'togglebutton_soft'</span>
3823     <span class="comment">% switch to soft</span>
3824         event=int32(5) ;<span class="comment">% adresse de l'injection</span>
3825         tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscEvent'</span>,event); pause(tout);
3826         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,eventlpm); pause(tout);
3827         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,eventspm);
3828         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>,int32(1)); pause(tout);
3829         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigEvent'</span>,event); pause(tout);
3830         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigEvent'</span>,event); pause(tout);
3831         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigEvent'</span>,event); pause(tout);
3832         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigEvent'</span>,event); pause(tout);     
3833         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceEvent'</span>,event); pause(tout);
3834         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1Event'</span>,event); pause(tout);
3835         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2Event'</span>,event); pause(tout);
3836         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscEvent'</span>,event); pause(tout);
3837         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booEvent'</span>,event); pause(tout);
3838         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigEvent'</span>,event);pause(tout);
3839         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigEvent'</span>,event); pause(tout);
3840         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>,event);
3841         tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareEvent'</span>,event);pause(tout);
3842         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigEvent'</span>,event);pause(tout);
3843         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigEvent'</span>,event);pause(tout);
3844         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigEvent'</span>,event);pause(tout);
3845         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigEvent'</span>,event);pause(tout);
3846         tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3847         tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctEvent'</span>,event);pause(tout);
3848         tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvEvent'</span>,event);pause(tout);
3849         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceEvent'</span>,event);pause(tout);
3850         arg.svalue={<span class="string">'k1.trig'</span>,<span class="string">'k2.trig'</span>,<span class="string">'k3.trig'</span>,<span class="string">'k4.trig'</span>}; arg.lvalue=int32([5 5 5 5]); 
3851         tango_command_inout(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>,<span class="string">'SetEventsNumbers'</span>,arg);<span class="comment">% chagement groupé addresses sans update</span>
3852         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k1.trigEvent',event);pause(tout);</span>
3853         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k2.trigEvent',event);pause(tout);</span>
3854         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k3.trigEvent',event);pause(tout);</span>
3855         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k4.trigEvent',event);pause(tout);</span>
3856         tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigEvent'</span>,event);pause(tout);
3857         tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigEvent'</span>,event);pause(tout);
3858         tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctEvent'</span>,int32(3));pause(tout);
3859         tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3860         tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3861         tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3862         tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3863         tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3864         tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3865         tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3866         tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3867         tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3868         tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3869         tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3870         tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3871         tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3872         tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3873         tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3874         tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);     
3875 
3876     <span class="comment">% special modulateur</span>
3877         inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
3878         inj=str2double(get(handles.central_inj,<span class="string">'String'</span>));
3879         soft=str2double(get(handles.central_soft,<span class="string">'String'</span>));
3880         pc=str2double(get(handles.central_pc,<span class="string">'String'</span>));
3881         temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
3882         delay=inj_offset+soft-pc;
3883         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
3884         <a href="start_soft.html" class="code" title="function start_soft">start_soft</a>
3885      <span class="comment">% special septum actif boo et ans</span>
3886         r=(1-0.0004);
3887         boo=readattribute(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext/voltage'</span>); boo=boo*r;
3888         writeattribute(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext/voltage,'</span>,boo);
3889         ans=readattribute(<span class="string">'ANS-C01/EP/AL_SEP_A/voltage'</span>); ans=ans*r;
3890         writeattribute(<span class="string">'ANS-C01/EP/AL_SEP_A/voltage,'</span>,ans);     
3891            
3892     <span class="keyword">case</span> <span class="string">'togglebutton_3Hz'</span>
3893     <span class="comment">% switch to 3Hz</span>
3894         event=int32(2) ;<span class="comment">% adresse de l'injection</span>
3895         tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'oscEvent'</span>,event); pause(tout);
3896         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,int32(0)); pause(tout);
3897         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,int16(0)); 
3898         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareEvent'</span>,event); pause(tout);
3899         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-bta.trigEvent'</span>,event); pause(tout);
3900         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.1'</span>, <span class="string">'bpm-btd.trigEvent'</span>,event); pause(tout);
3901         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.2'</span>, <span class="string">'bpm-btb.trigEvent'</span>,event); pause(tout);
3902         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-btc.trigEvent'</span>,event); pause(tout); 
3903         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'emittanceEvent'</span>,event); pause(tout);
3904         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.1Event'</span>,event); pause(tout);
3905         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'mc.2Event'</span>,event); pause(tout);
3906         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'oscEvent'</span>,event); pause(tout);
3907         tango_write_attribute2(<span class="string">'LT1/SY/LOCAL.DG.1'</span>, <span class="string">'dcct-booEvent'</span>,event); pause(tout);
3908         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'bpm-onde.trigEvent'</span>,event);pause(tout);
3909         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'sep-p.trigEvent'</span>,event); pause(tout);
3910         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>, <span class="string">'k.trigEvent'</span>,event);
3911         tango_command_inout2(<span class="string">'BOO/SY/LOCAL.Binj.1'</span>,  <span class="string">'Reset'</span>);  <span class="comment">% stop les trigs d'injection boo</span>
3912         event=int32(3) ;<span class="comment">% adresse de l'extraction</span>
3913         tango_write_attribute2(<span class="string">'ANS/SY/LOCAL.SDC.1'</span>, <span class="string">'spareEvent'</span>,event);pause(tout);
3914         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'dof.trigEvent'</span>,event);pause(tout);
3915         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-p.trigEvent'</span>,event);pause(tout);
3916         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'sep-a.trigEvent'</span>,event);pause(tout);
3917         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>, <span class="string">'k.trigEvent'</span>,event);pause(tout);
3918         tango_command_inout2(<span class="string">'BOO/SY/LOCAL.Bext.1'</span>,  <span class="string">'Reset'</span>); <span class="comment">% stop les trigs d'extraction boo</span>
3919         tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3920         tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'osc-fctEvent'</span>,event);pause(tout);
3921         tango_write_attribute2(<span class="string">'LT2/SY/LOCAL.DG.1'</span>, <span class="string">'mrsvEvent'</span>,event);pause(tout);
3922         tango_write_attribute2(<span class="string">'BOO/SY/LOCAL.DG.3'</span>, <span class="string">'emittanceEvent'</span>,event);pause(tout);
3923         tango_command_inout2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>, <span class="string">'Reset'</span>);
3924         arg.svalue={<span class="string">'k1.trig'</span>,<span class="string">'k2.trig'</span>,<span class="string">'k3.trig'</span>,<span class="string">'k4.trig'</span>}; arg.lvalue=int32([3 3 3 3]); 
3925         tango_command_inout(<span class="string">'ANS-C01/SY/LOCAL.Ainj.1'</span>,<span class="string">'SetEventsNumbers'</span>,arg);<span class="comment">% chagement groupé address sans update</span>
3926         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k1.trigEvent',event);pause(tout);</span>
3927         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k2.trigEvent',event);pause(tout);</span>
3928         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k3.trigEvent',event);pause(tout);</span>
3929         <span class="comment">%tango_write_attribute2('ANS-C01/SY/LOCAL.Ainj.1', 'k4.trigEvent',event);pause(tout);</span>
3930         <span class="comment">%tango_command_inout2('ANS-C01/SY/LOCAL.Ainj.1', 'Reset');</span>
3931         
3932         <span class="comment">%arg.svalue={'sep-p','sep-a'}; arg.lvalue=int32([3 3]);</span>
3933         <span class="comment">%tango_command_inout('ANS-C01/SY/LOCAL.Ainj.2','SetEventsNumbers',arg);% chagement groupé address sans update</span>
3934         tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-p.trigEvent'</span>,event);pause(tout);
3935         tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>, <span class="string">'sep-a.trigEvent'</span>,event);pause(tout);
3936         tango_command_inout2(<span class="string">'ANS-C01/SY/LOCAL.Ainj.2'</span>,  <span class="string">'Reset'</span>); <span class="comment">% stop les trigs d'injection anneau</span>
3937         tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'dcctEvent'</span>,event);pause(tout);
3938         tango_write_attribute2(<span class="string">'ANS-C01/SY/LOCAL.DG.2'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3939         tango_write_attribute2(<span class="string">'ANS-C02/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3940         tango_write_attribute2(<span class="string">'ANS-C03/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3941         tango_write_attribute2(<span class="string">'ANS-C04/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3942         tango_write_attribute2(<span class="string">'ANS-C05/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3943         tango_write_attribute2(<span class="string">'ANS-C06/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3944         tango_write_attribute2(<span class="string">'ANS-C07/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3945         tango_write_attribute2(<span class="string">'ANS-C08/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3946         tango_write_attribute2(<span class="string">'ANS-C09/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);
3947         tango_write_attribute2(<span class="string">'ANS-C10/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3948         tango_write_attribute2(<span class="string">'ANS-C11/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3949         tango_write_attribute2(<span class="string">'ANS-C12/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3950         tango_write_attribute2(<span class="string">'ANS-C13/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3951         tango_write_attribute2(<span class="string">'ANS-C14/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3952         tango_write_attribute2(<span class="string">'ANS-C15/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3953         tango_write_attribute2(<span class="string">'ANS-C16/SY/LOCAL.DG.1'</span>, <span class="string">'bpm.trigEvent'</span>,event);pause(tout);  
3954     
3955     <span class="comment">% special modulateur</span>
3956         inj_offset=str2double(get(handles.inj_offset,<span class="string">'String'</span>));
3957         inj=str2double(get(handles.central_inj,<span class="string">'String'</span>));
3958         soft=str2double(get(handles.central_soft,<span class="string">'String'</span>));
3959         temp=tango_read_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>);
3960         delay=inj_offset+0;
3961         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'spareTimeDelay'</span>,delay);
3962     <span class="comment">% special septum actif boo et ans</span>
3963         r=(1+0.0004);
3964         boo=readattribute(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext/voltage'</span>); boo=boo*r;
3965         writeattribute(<span class="string">'BOO-C12/EP/AL_SEP_A.Ext/voltage,'</span>,boo);
3966         ans=readattribute(<span class="string">'ANS-C01/EP/AL_SEP_A/voltage'</span>); ans=ans*r;
3967         writeattribute(<span class="string">'ANS-C01/EP/AL_SEP_A/voltage,'</span>,ans);     
3968 <span class="keyword">end</span>
3969 
3970 display(<span class="string">'ok change address'</span>)
3971 
3972 
3973 
3974 <a name="_sub180" href="#_subfunctions" class="code">function edit_filling_entrer_bunch1_Callback(hObject, eventdata, handles)</a>
3975 <span class="comment">% hObject    handle to edit_filling_entrer_bunch1 (see GCBO)</span>
3976 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3977 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
3978 
3979 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_filling_entrer_bunch1 as text</span>
3980 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_filling_entrer_bunch1 as a double</span>
3981 
3982 
3983 
3984 
3985 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
3986 <a name="_sub181" href="#_subfunctions" class="code">function edit_filling_entrer_bunch1_CreateFcn(hObject, eventdata, handles)</a>
3987 <span class="comment">% hObject    handle to edit_filling_entrer_bunch1 (see GCBO)</span>
3988 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
3989 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
3990 
3991 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
3992 <span class="comment">%       See ISPC and COMPUTER.</span>
3993 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
3994     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
3995 <span class="keyword">end</span>
3996 
3997 
3998 
3999 <a name="_sub182" href="#_subfunctions" class="code">function edit_Imin_Callback(hObject, eventdata, handles)</a>
4000 <span class="comment">% hObject    handle to edit_Imin (see GCBO)</span>
4001 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4002 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
4003 
4004 <span class="comment">% Hints: get(hObject,'String') returns contents of edit_Imin as text</span>
4005 <span class="comment">%        str2double(get(hObject,'String')) returns contents of edit_Imin as a double</span>
4006 
4007 
4008 <span class="comment">% --- Executes during object creation, after setting all properties.</span>
4009 <a name="_sub183" href="#_subfunctions" class="code">function edit_Imin_CreateFcn(hObject, eventdata, handles)</a>
4010 <span class="comment">% hObject    handle to edit_Imin (see GCBO)</span>
4011 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4012 <span class="comment">% handles    empty - handles not created until after all CreateFcns called</span>
4013 
4014 <span class="comment">% Hint: edit controls usually have a white background on Windows.</span>
4015 <span class="comment">%       See ISPC and COMPUTER.</span>
4016 <span class="keyword">if</span> ispc &amp;&amp; isequal(get(hObject,<span class="string">'BackgroundColor'</span>), get(0,<span class="string">'defaultUicontrolBackgroundColor'</span>))
4017     set(hObject,<span class="string">'BackgroundColor'</span>,<span class="string">'white'</span>);
4018 <span class="keyword">end</span>
4019 
4020 
4021 <span class="comment">% --------------------------------------------------------------------</span>
4022 <a name="_sub184" href="#_subfunctions" class="code">function uipanel_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
4023 <span class="comment">% hObject    handle to uipanel_spm_mode (see GCBO)</span>
4024 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4025 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
4026 
4027 <span class="comment">%h=get(handles.uipanel_spm_mode);</span>
4028 <span class="comment">%get(h.Children)</span>
4029 
4030 mode=get(get(handles.uipanel_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
4031 
4032 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
4033     <span class="keyword">case</span> <span class="string">'spm_mode_1'</span>
4034         display(<span class="string">'spm_mode_1'</span>)     
4035         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(1));
4036     <span class="keyword">case</span> <span class="string">'spm_mode_2'</span>
4037         display(<span class="string">'spm_mode_2'</span>)  
4038         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(2));
4039     <span class="keyword">case</span> <span class="string">'spm_mode_2p'</span>
4040         display(<span class="string">'spm_mode_2p'</span>)   
4041         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(3));
4042     <span class="keyword">case</span> <span class="string">'spm_mode_3'</span>
4043         display(<span class="string">'spm_mode_3'</span>)    
4044         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'mode'</span>,int16(4));   
4045 <span class="keyword">end</span>
4046 
4047 
4048 <span class="comment">% --------------------------------------------------------------------</span>
4049 <a name="_sub185" href="#_subfunctions" class="code">function uipanel_lpm_spm_mode_SelectionChangeFcn(hObject, eventdata, handles)</a>
4050 <span class="comment">% hObject    handle to uipanel_lpm_spm_mode (see GCBO)</span>
4051 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
4052 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
4053 
4054 
4055 mode=get(get(handles.uipanel_lpm_spm_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
4056 modeinj=get(get(handles.uipanel_mode,<span class="string">'SelectedObject'</span>),<span class="string">'Tag'</span>);
4057 <span class="keyword">if</span> strcmp(modeinj,<span class="string">'togglebutton_soft'</span>)
4058     event16=int16(5);
4059     event32=int32(5);
4060 <span class="keyword">elseif</span> strcmp(modeinj,<span class="string">'togglebutton_3Hz'</span>)
4061     event16=int16(0);
4062     event32=int32(0);
4063 <span class="keyword">end</span>
4064 
4065 <span class="keyword">switch</span> mode  <span class="comment">% Get Tag of selected object</span>
4066     <span class="keyword">case</span> <span class="string">'no_mode'</span>
4067         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,int32(0)); 
4068         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,int16(0)); 
4069         
4070     <span class="keyword">case</span> <span class="string">'lpm_mode'</span>
4071         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,event32); 
4072         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,int16(0));     
4073         
4074         tango_write_attribute(<span class="string">'LT1/AE/CV.2'</span>, <span class="string">'current'</span>,  0.088 );
4075         tango_write_attribute(<span class="string">'LT1/AE/CV.3'</span>, <span class="string">'current'</span>, -0.34 );
4076 
4077     <span class="keyword">case</span> <span class="string">'spm_mode'</span>
4078         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.LPM.1'</span>, <span class="string">'lpmEvent'</span>,int32(0)); 
4079         tango_write_attribute2(<span class="string">'LIN/SY/LOCAL.SPM.1'</span>, <span class="string">'spmLinacEvent'</span>,event16);   
4080         
4081         tango_write_attribute(<span class="string">'LT1/AE/CV.2'</span>, <span class="string">'current'</span>,  0.112 );
4082         tango_write_attribute(<span class="string">'LT1/AE/CV.3'</span>, <span class="string">'current'</span>, -0.077 );
4083         
4084 <span class="keyword">end</span>
4085 
4086 
4087</pre></div>
<hr><address>Generated on Mon 21-May-2007 15:35:27 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>