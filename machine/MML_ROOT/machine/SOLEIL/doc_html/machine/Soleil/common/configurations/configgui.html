<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of configgui</title>
  <meta name="keywords" content="configgui">
  <meta name="description" content="CONFIGGUI - Generates gui for configuration control">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../../index.html">Home</a> &gt;  <a href="#">machine</a> &gt; <a href="#">Soleil</a> &gt; <a href="../index.html">common</a> &gt; <a href="index.html">configurations</a> &gt; configgui.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../../index.html"><img alt="<" border="0" src="../../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for machine/Soleil/common/configurations&nbsp;<img alt=">" border="0" src="../../../../right.png"></a></td></tr></table>-->

<h1>configgui
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>CONFIGGUI - Generates gui for configuration control</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="box"><strong>function varargout = configgui(action, varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre class="comment"> CONFIGGUI - Generates gui for configuration control
  to launch:  &gt;&gt;configgui       (no input argument)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>	CONFIGGUI - Generates gui for configuration control</li></ul>
This function is called by:
<ul style="list-style-image:url(../../../../matlabicon.gif)">
<li><a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>	CONFIGGUI - Generates gui for configuration control</li></ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = configgui(action, varargin)</a>
0002 <span class="comment">% CONFIGGUI - Generates gui for configuration control</span>
0003 <span class="comment">%  to launch:  &gt;&gt;configgui       (no input argument)</span>
0004 
0005 <span class="comment">%</span>
0006 <span class="comment">% Written by Jeff Corbett</span>
0007 <span class="comment">% Modified by Laurent S. Nadolski</span>
0008 <span class="comment">% March 27, 2005 - Merge with LT1 programme</span>
0009 <span class="comment">% September 2005 - Add Booster programme</span>
0010 <span class="comment">% April 2006 - Add LT2</span>
0011 
0012 h = findobj(0,<span class="string">'Tag'</span>,<span class="string">'cnffig'</span>);
0013 <span class="keyword">if</span> ~isempty(h) cnfdata=getappdata(h,<span class="string">'configguidata'</span>); <span class="keyword">end</span>
0014 
0015 <span class="comment">%===========================</span>
0016 <span class="comment">%   DRAW MAIN GUI (nargin=0)</span>
0017 <span class="comment">%===========================</span>
0018 <span class="keyword">if</span> nargin == 0
0019     
0020     <span class="keyword">if</span> isempty(getao) 
0021         disp(<span class="string">'Warning: Load ring AcceleratorObjects first'</span>);
0022         <span class="keyword">return</span>
0023     <span class="keyword">else</span>
0024         Machine = getfamilydata(<span class="string">'SubMachine'</span>);
0025         <span class="keyword">switch</span> Machine
0026             <span class="keyword">case</span> {<span class="string">'StorageRing'</span>, <span class="string">'LT1'</span>, <span class="string">'LT2'</span>, <span class="string">'Booster'</span>}
0027                 <span class="comment">%%</span>
0028             <span class="keyword">otherwise</span>                
0029             disp(<span class="string">'Warning: Machine not recognized!'</span>);
0030             <span class="keyword">return</span>
0031         <span class="keyword">end</span>
0032     <span class="keyword">end</span>
0033 
0034     <span class="comment">%Clear previous configuration control gui</span>
0035     <span class="keyword">if</span> ~isempty(h) delete(h); <span class="keyword">end</span>
0036     
0037     <span class="comment">%set defaults</span>
0038     cnfdata.field=<span class="string">'setpoint'</span>;
0039     cnfdata.SetpointData=[];
0040     cnfdata.MonitorData=[];
0041     
0042     <span class="comment">% generate main figure</span>
0043     cnfdata.handles.figure=<a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'CNFFig'</span>,Machine);  
0044     setappdata(cnfdata.handles.figure,<span class="string">'configguidata'</span>,cnfdata);
0045     
0046     <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'UIControls'</span>,Machine);
0047         
0048     <span class="keyword">return</span>
0049 <span class="keyword">end</span>
0050 
0051 <span class="keyword">switch</span> action    
0052     <span class="comment">%==========================================================</span>
0053     <span class="keyword">case</span> <span class="string">'CNFFig'</span>                                       <span class="comment">%CNFFig</span>
0054     <span class="comment">%==========================================================</span>
0055         <span class="comment">%figure initialization</span>
0056               
0057         [screen_wide, screen_high]=screensizecm;
0058         
0059         fig_start = [0.13*screen_wide 0.16*screen_high];
0060         
0061         Machine = varargin{1};
0062 
0063         <span class="keyword">switch</span> Machine
0064             <span class="keyword">case</span> {<span class="string">'LT1'</span>, <span class="string">'Booster'</span>, <span class="string">'LT2'</span>}
0065                 fig_size = [0.45*screen_wide 0.5*screen_high];
0066             <span class="keyword">case</span> <span class="string">'StorageRing'</span>
0067                 fig_size = [0.6*screen_wide 0.5*screen_high];
0068             <span class="keyword">otherwise</span>
0069                 error([<span class="string">'Wrong Machine: '</span> Machine]);
0070         <span class="keyword">end</span>
0071         
0072         h = figure(<span class="string">'Visible'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0073             <span class="string">'units'</span>,<span class="string">'centimeters'</span>,<span class="string">'Resize'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0074             <span class="string">'tag'</span>,<span class="string">'cnffig'</span>,<span class="keyword">...</span><span class="comment"> </span>
0075             <span class="string">'NumberTitle'</span>,<span class="string">'off'</span>,<span class="keyword">...</span>
0076             <span class="string">'Doublebuffer'</span>,<span class="string">'on'</span>,<span class="keyword">...</span>
0077             <span class="string">'Name'</span>,[Machine <span class="string">': Setpoint file manager (Fichiers de consignes)'</span>],<span class="keyword">...</span>
0078             <span class="string">'PaperPositionMode'</span>,<span class="string">'Auto'</span>); <span class="comment">%'handlevisibility','off');</span>
0079         set(h,<span class="string">'MenuBar'</span>,<span class="string">'None'</span>);
0080         set(h,<span class="string">'Position'</span>,[fig_start fig_size],<span class="string">'Visible'</span>,<span class="string">'on'</span>);
0081         
0082         varargout{1}=h;
0083         
0084     <span class="comment">%==========================================================</span>
0085     <span class="keyword">case</span> <span class="string">'UIControls'</span>                           <span class="comment">%  UIControls</span>
0086     <span class="comment">%==========================================================</span>
0087     <span class="comment">%UIControls - generate UIControls in gui</span>
0088 
0089     Machine = varargin{1};
0090 
0091     <span class="keyword">switch</span> Machine
0092         <span class="keyword">case</span> {<span class="string">'LT1'</span>, <span class="string">'LT2'</span>}
0093             <span class="comment">%UIControls - generate UIControls in gui</span>
0094             [screen_wide, screen_high]=screensizecm;
0095             x0=0.01*screen_wide ; dx=0.04*screen_wide; y0=0.48*screen_high; dy=0.04*screen_high; dely=0.03*screen_high;
0096 
0097             col1_families={<span class="string">'BEND'</span>; <span class="string">'QP'</span>; <span class="string">'CH'</span> ; <span class="string">'CV'</span>};
0098 
0099             families=[col1_families(:)];
0100             cnfdata.families=families;
0101 
0102             <span class="comment">%check boxes</span>
0103             <span class="keyword">for</span> k=1:length(col1_families)
0104                 cnfdata.handles.([col1_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0105                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0106                     <span class="string">'Position'</span>,[x0+0.5*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col1_families{k},<span class="keyword">...</span>
0107                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0108                 cnfdata.handles.([col1_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0109                     <span class="string">'Position'</span>,[x0+0.22*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0110             <span class="keyword">end</span>
0111 
0112 
0113             <span class="comment">%select all</span>
0114             x1 = 5.5;
0115 
0116             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0117                 <span class="string">'ToolTipString'</span>,<span class="string">'Select all families to include in configuration load'</span>,<span class="keyword">...</span>
0118                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectAll'')'</span>,<span class="keyword">...</span>
0119                 <span class="string">'Position'</span>,[x0+x1*dx,y0-1*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select All'</span>);
0120 
0121             <span class="comment">%select none</span>
0122             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0123                 <span class="string">'ToolTipString'</span>,<span class="string">'Select no families to include in configuration load'</span>,<span class="keyword">...</span>
0124                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectNone'')'</span>,<span class="keyword">...</span>
0125                 <span class="string">'Position'</span>,[x0+x1*dx,y0-2*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select None'</span>);
0126 
0127             <span class="comment">%display partial configuration data</span>
0128             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0129                 <span class="string">'ToolTipString'</span>,<span class="string">'Print configuration data to screen'</span>,<span class="keyword">...</span>
0130                 <span class="string">'Callback'</span>,<span class="string">'configgui(''ShowMainConfiguration'')'</span>,<span class="keyword">...</span>
0131                 <span class="string">'Position'</span>,[x0+x1*dx,y0-3*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Display Main Configuration'</span>);
0132 
0133             <span class="comment">%display full configuration</span>
0134             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0135                 <span class="string">'ToolTipString'</span>,<span class="string">'Print configuration data to screen'</span>,<span class="keyword">...</span>
0136                 <span class="string">'Callback'</span>,<span class="string">'configgui(''ShowConfiguration'')'</span>,<span class="keyword">...</span>
0137                 <span class="string">'Position'</span>,[x0+x1*dx,y0-4*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Display Full Configuration'</span>);
0138 
0139             <span class="comment">%Cycle magnet when applying to machine</span>
0140             setappdata(gcf,<span class="string">'cycling'</span>,0); <span class="comment">% checkbox not checked</span>
0141             uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0142                 <span class="string">'ToolTipString'</span>,<span class="string">'Cycle magnet when applying to machine'</span>,<span class="keyword">...</span>
0143                 <span class="string">'Callback'</span>,<span class="string">'setappdata(gcf,''cycling'',get(gcbo,''Value''));'</span>,<span class="keyword">...</span>
0144                 <span class="string">'Position'</span>,[x0+x1*dx,y0-5.5*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Cycling'</span>);
0145 
0146             <span class="comment">%list box to display output dialog</span>
0147             ts = [<span class="string">'Program Start-Up: '</span> datestr(now,0)];
0148             cnfdata.handles.listbox=uicontrol(<span class="string">'Style'</span>,<span class="string">'list'</span>,<span class="string">'Units'</span>,<span class="string">'centimeters'</span>,<span class="string">'Position'</span>,[x0+0.5*dx y0-15.8*dely 10*dx 2*dy],<span class="string">'String'</span>,{ts});
0149 
0150             <span class="comment">%configuration display</span>
0151             cnfdata.handles.configname=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0152                 <span class="string">'Position'</span>,[x0+0.5*dx y0-13*dely 8*dx dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="string">'String'</span>,<span class="string">' '</span>);
0153 
0154             <span class="comment">%Get Configuration</span>
0155             x1 = 0.5; x2 = x1 + 1.5;
0156             uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0157                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="keyword">...</span>
0158                 <span class="string">'String'</span>,<span class="string">'Get Configuration from: '</span>);
0159             <span class="comment">%machine</span>
0160             cnfdata.handles.GetMachine=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0161                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Machine'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0162                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Machine'</span>,<span class="keyword">...</span>
0163                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetMachineConfig'')'</span>);
0164             cnfdata.handles.GetMachineTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0165                 <span class="string">'Position'</span>,[x0+x2*dx,y0-7.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0166 
0167             <span class="comment">%desired</span>
0168             cnfdata.handles.GetDesired=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0169                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Desired Setpoints '</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0170                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.6*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Desired'</span>,<span class="keyword">...</span>
0171                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetDesiredConfig'')'</span>);
0172             cnfdata.handles.GetDesiredTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0173                 <span class="string">'Position'</span>,[x0+x2*dx,y0-8.6*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0174 
0175             <span class="comment">%file</span>
0176             cnfdata.handles.GetFile=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0177                 <span class="string">'ToolTipString'</span>,<span class="string">'Read configuration from file'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0178                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.4*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'File'</span>,<span class="keyword">...</span>
0179                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetFileConfig'')'</span>);
0180             cnfdata.handles.GetFileTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0181                 <span class="string">'Position'</span>,[x0+x2*dx,y0-9.4*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0182             <span class="comment">%golden</span>
0183             cnfdata.handles.GetGolden=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0184                 <span class="string">'ToolTipString'</span>,<span class="string">'Read configuration from Golden'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0185                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10.2*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Golden'</span>,<span class="keyword">...</span>
0186                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetGoldenConfig'')'</span>);
0187             cnfdata.handles.GetGoldenTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0188                 <span class="string">'Position'</span>,[x0+x2*dx,y0-10.2*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0189             <span class="comment">%simulator</span>
0190             cnfdata.handles.GetSimulator=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0191                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Simulator'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0192                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Simulator'</span>,<span class="keyword">...</span>
0193                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetSimulatorConfig'')'</span>);
0194             cnfdata.handles.GetSimulatorTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0195                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0196 
0197             <span class="comment">%workspace</span>
0198             cnfdata.handles.GetWorkspace=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0199                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from WorkSpace'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0200                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Workspace'</span>,<span class="keyword">...</span>
0201                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetWorkspaceConfig'')'</span>);
0202             cnfdata.handles.GetWorkspaceTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0203                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0204 
0205             <span class="comment">%Set Configuration</span>
0206             x1 = 5.5; x2= x1+1.5;
0207             uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0208                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,3*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="string">'String'</span>,<span class="string">'Set Configuration to: '</span>);
0209             <span class="comment">%machine</span>
0210             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0211                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Machine (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0212                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Machine'</span>,<span class="keyword">...</span>
0213                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetMachineConfig'')'</span>);
0214             cnfdata.handles.LoadMachineTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0215                 <span class="string">'Position'</span>,[x0+x2*dx,y0-7.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0216 
0217             <span class="comment">%desired setpoints</span>
0218             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0219                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Desired Setpoints (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0220                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.6*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Desired'</span>,<span class="keyword">...</span>
0221                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetDesiredConfig'')'</span>);
0222             cnfdata.handles.LoadDesiredTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0223                 <span class="string">'Position'</span>,[x0+x2*dx,y0-8.6*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0224 
0225             <span class="comment">%file</span>
0226             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0227                 <span class="string">'ToolTipString'</span>,<span class="string">'Write configuration to file (all families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0228                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.4*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'File'</span>,<span class="keyword">...</span>
0229                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetFileConfig'')'</span>);
0230             cnfdata.handles.LoadFileTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0231                 <span class="string">'Position'</span>,[x0+x2*dx,y0-9.4*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0232             <span class="comment">%golden</span>
0233             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0234                 <span class="string">'ToolTipString'</span>,<span class="string">'Write configuration to Golden (all families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0235                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10.2*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Golden'</span>,<span class="keyword">...</span>
0236                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetGoldenConfig'')'</span>);
0237             cnfdata.handles.LoadGoldenTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0238                 <span class="string">'Position'</span>,[x0+x2*dx,y0-10.2*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0239             <span class="comment">%simulator</span>
0240             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0241                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Simulator (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0242                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Simulator'</span>,<span class="keyword">...</span>
0243                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetSimulatorConfig'')'</span>);
0244             cnfdata.handles.LoadSimulatorTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0245                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0246 
0247             <span class="comment">%workspace</span>
0248             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0249                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Workspace (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0250                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Workspace'</span>,<span class="keyword">...</span>
0251                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetWorkspaceConfig'')'</span>);
0252             cnfdata.handles.LoadWorkspaceTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0253                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0254         
0255                <span class="keyword">case</span> <span class="string">'Booster'</span>        
0256         <span class="comment">%% Booster</span>
0257         
0258                 <span class="comment">%UIControls - generate UIControls in gui</span>
0259             [screen_wide, screen_high]=screensizecm;
0260             x0=0.01*screen_wide ; dx=0.04*screen_wide; y0=0.48*screen_high; dy=0.04*screen_high; dely=0.03*screen_high;
0261 
0262             col1_families={<span class="string">'BEND'</span>; <span class="string">'QF'</span>; <span class="string">'QD'</span>; <span class="string">'SF'</span>; <span class="string">'SD'</span>};
0263             col2_families={<span class="string">'HCOR'</span> ; <span class="string">'VCOR'</span>; <span class="string">'K_Inj'</span>; <span class="string">'SEP_Inj'</span>};
0264 
0265             families=[col1_families(:); col2_families];
0266             cnfdata.families=families;
0267 
0268             <span class="comment">%check boxes</span>
0269             <span class="keyword">for</span> k=1:length(col1_families)
0270                 cnfdata.handles.([col1_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0271                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0272                     <span class="string">'Position'</span>,[x0+0.5*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col1_families{k},<span class="keyword">...</span>
0273                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0274                 cnfdata.handles.([col1_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0275                     <span class="string">'Position'</span>,[x0+0.22*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0276             <span class="keyword">end</span>
0277 
0278             <span class="keyword">for</span> k=1:length(col2_families)
0279                 cnfdata.handles.([col2_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0280                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0281                     <span class="string">'Position'</span>,[x0+3.0*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col2_families{k},<span class="keyword">...</span>
0282                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0283                 cnfdata.handles.([col2_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0284                     <span class="string">'Position'</span>,[x0+2.7*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0285             <span class="keyword">end</span>
0286             <span class="comment">%select all</span>
0287             x1 = 5.5;
0288 
0289             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0290                 <span class="string">'ToolTipString'</span>,<span class="string">'Select all families to include in configuration load'</span>,<span class="keyword">...</span>
0291                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectAll'')'</span>,<span class="keyword">...</span>
0292                 <span class="string">'Position'</span>,[x0+x1*dx,y0-1*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select All'</span>);
0293 
0294             <span class="comment">%select none</span>
0295             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0296                 <span class="string">'ToolTipString'</span>,<span class="string">'Select no families to include in configuration load'</span>,<span class="keyword">...</span>
0297                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectNone'')'</span>,<span class="keyword">...</span>
0298                 <span class="string">'Position'</span>,[x0+x1*dx,y0-2*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select None'</span>);
0299 
0300             <span class="comment">%display partial configuration data</span>
0301             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0302                 <span class="string">'ToolTipString'</span>,<span class="string">'Print configuration data to screen'</span>,<span class="keyword">...</span>
0303                 <span class="string">'Callback'</span>,<span class="string">'configgui(''ShowMainConfiguration'')'</span>,<span class="keyword">...</span>
0304                 <span class="string">'Position'</span>,[x0+x1*dx,y0-3*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Display Main Configuration'</span>);
0305 
0306             <span class="comment">%display full configuration</span>
0307             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0308                 <span class="string">'ToolTipString'</span>,<span class="string">'Print configuration data to screen'</span>,<span class="keyword">...</span>
0309                 <span class="string">'Callback'</span>,<span class="string">'configgui(''ShowConfiguration'')'</span>,<span class="keyword">...</span>
0310                 <span class="string">'Position'</span>,[x0+x1*dx,y0-4*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Display Full Configuration'</span>);
0311 
0312             <span class="comment">%Cycle magnet when applying to machine</span>
0313             setappdata(gcf,<span class="string">'cycling'</span>,0); <span class="comment">% checkbox not checked</span>
0314             uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0315                 <span class="string">'ToolTipString'</span>,<span class="string">'Cycle magnet when applying to machine'</span>,<span class="keyword">...</span>
0316                 <span class="string">'Callback'</span>,<span class="string">'setappdata(gcf,''cycling'',get(gcbo,''Value''));'</span>,<span class="keyword">...</span>
0317                 <span class="string">'Position'</span>,[x0+x1*dx,y0-5.5*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Cycling'</span>);
0318 
0319             <span class="comment">%list box to display output dialog</span>
0320             ts = [<span class="string">'Program Start-Up: '</span> datestr(now,0)];
0321             cnfdata.handles.listbox=uicontrol(<span class="string">'Style'</span>,<span class="string">'list'</span>,<span class="string">'Units'</span>,<span class="string">'centimeters'</span>,<span class="string">'Position'</span>,[x0+0.5*dx y0-15.8*dely 10*dx 2*dy],<span class="string">'String'</span>,{ts});
0322 
0323             <span class="comment">%configuration display</span>
0324             cnfdata.handles.configname=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0325                 <span class="string">'Position'</span>,[x0+0.5*dx y0-13*dely 8*dx dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="string">'String'</span>,<span class="string">' '</span>);
0326 
0327             <span class="comment">%Get Configuration</span>
0328             x1 = 0.5; x2 = x1 + 1.5;
0329             uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0330                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="keyword">...</span>
0331                 <span class="string">'String'</span>,<span class="string">'Get Configuration from: '</span>);
0332             <span class="comment">%machine</span>
0333             cnfdata.handles.GetMachine=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0334                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Machine'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0335                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Machine'</span>,<span class="keyword">...</span>
0336                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetMachineConfig'')'</span>);
0337             cnfdata.handles.GetMachineTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0338                 <span class="string">'Position'</span>,[x0+x2*dx,y0-7.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0339 
0340             <span class="comment">%desired</span>
0341             cnfdata.handles.GetDesired=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0342                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Desired Setpoints '</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0343                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.6*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Desired'</span>,<span class="keyword">...</span>
0344                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetDesiredConfig'')'</span>);
0345             cnfdata.handles.GetDesiredTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0346                 <span class="string">'Position'</span>,[x0+x2*dx,y0-8.6*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0347 
0348             <span class="comment">%file</span>
0349             cnfdata.handles.GetFile=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0350                 <span class="string">'ToolTipString'</span>,<span class="string">'Read configuration from file'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0351                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.4*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'File'</span>,<span class="keyword">...</span>
0352                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetFileConfig'')'</span>);
0353             cnfdata.handles.GetFileTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0354                 <span class="string">'Position'</span>,[x0+x2*dx,y0-9.4*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0355             <span class="comment">%golden</span>
0356             cnfdata.handles.GetGolden=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0357                 <span class="string">'ToolTipString'</span>,<span class="string">'Read configuration from Golden'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0358                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10.2*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Golden'</span>,<span class="keyword">...</span>
0359                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetGoldenConfig'')'</span>);
0360             cnfdata.handles.GetGoldenTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0361                 <span class="string">'Position'</span>,[x0+x2*dx,y0-10.2*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0362             <span class="comment">%simulator</span>
0363             cnfdata.handles.GetSimulator=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0364                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Simulator'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0365                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Simulator'</span>,<span class="keyword">...</span>
0366                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetSimulatorConfig'')'</span>);
0367             cnfdata.handles.GetSimulatorTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0368                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0369 
0370             <span class="comment">%workspace</span>
0371             cnfdata.handles.GetWorkspace=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0372                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from WorkSpace'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0373                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Workspace'</span>,<span class="keyword">...</span>
0374                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetWorkspaceConfig'')'</span>);
0375             cnfdata.handles.GetWorkspaceTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0376                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0377 
0378             <span class="comment">%Set Configuration</span>
0379             x1 = 5.5; x2= x1+1.5;
0380             uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0381                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,3*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="string">'String'</span>,<span class="string">'Set Configuration to: '</span>);
0382             <span class="comment">%machine</span>
0383             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0384                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Machine (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0385                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Machine'</span>,<span class="keyword">...</span>
0386                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetMachineConfig'')'</span>);
0387             cnfdata.handles.LoadMachineTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0388                 <span class="string">'Position'</span>,[x0+x2*dx,y0-7.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0389 
0390             <span class="comment">%desired setpoints</span>
0391             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0392                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Desired Setpoints (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0393                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.6*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Desired'</span>,<span class="keyword">...</span>
0394                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetDesiredConfig'')'</span>);
0395             cnfdata.handles.LoadDesiredTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0396                 <span class="string">'Position'</span>,[x0+x2*dx,y0-8.6*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0397 
0398             <span class="comment">%file</span>
0399             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0400                 <span class="string">'ToolTipString'</span>,<span class="string">'Write configuration to file (all families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0401                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.4*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'File'</span>,<span class="keyword">...</span>
0402                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetFileConfig'')'</span>);
0403             cnfdata.handles.LoadFileTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0404                 <span class="string">'Position'</span>,[x0+x2*dx,y0-9.4*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0405             <span class="comment">%golden</span>
0406             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0407                 <span class="string">'ToolTipString'</span>,<span class="string">'Write configuration to Golden (all families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0408                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10.2*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Golden'</span>,<span class="keyword">...</span>
0409                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetGoldenConfig'')'</span>);
0410             cnfdata.handles.LoadGoldenTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0411                 <span class="string">'Position'</span>,[x0+x2*dx,y0-10.2*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0412             <span class="comment">%simulator</span>
0413             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0414                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Simulator (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0415                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Simulator'</span>,<span class="keyword">...</span>
0416                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetSimulatorConfig'')'</span>);
0417             cnfdata.handles.LoadSimulatorTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0418                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0419 
0420             <span class="comment">%workspace</span>
0421             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0422                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Workspace (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0423                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Workspace'</span>,<span class="keyword">...</span>
0424                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetWorkspaceConfig'')'</span>);
0425             cnfdata.handles.LoadWorkspaceTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0426                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0427         
0428      
0429         <span class="keyword">case</span> <span class="string">'StorageRing'</span>
0430 
0431             [screen_wide, screen_high]=screensizecm;
0432             x0=0.01*screen_wide ; dx=0.04*screen_wide; y0=0.48*screen_high; dy=0.04*screen_high; dely=0.03*screen_high;
0433 
0434             col1_families={<span class="string">'BEND'</span>; <span class="string">'HCOR'</span> ; <span class="string">'VCOR'</span>; <span class="string">'QT'</span>};
0435             col2_families={<span class="string">'Q1'</span>; <span class="string">'Q2'</span>; <span class="string">'Q3'</span>; <span class="string">'Q4'</span>; <span class="string">'Q5'</span>};
0436             col3_families={<span class="string">'Q6'</span>; <span class="string">'Q7'</span>; <span class="string">'Q8'</span>; <span class="string">'Q9'</span>; <span class="string">'Q10'</span>};
0437             col4_families={<span class="string">'S1'</span>; <span class="string">'S2'</span>; <span class="string">'S3'</span>; <span class="string">'S4'</span>; <span class="string">'S5'</span>};
0438             col5_families={<span class="string">'S6'</span>; <span class="string">'S7'</span>; <span class="string">'S8'</span>; <span class="string">'S9'</span>; <span class="string">'S10'</span>};
0439 
0440             families=[col1_families(:); col2_families(:); col3_families(:) ; col4_families(:) ; col5_families(:)];
0441             cnfdata.families=families;
0442 
0443             <span class="comment">%check boxes</span>
0444             <span class="keyword">for</span> k=1:length(col1_families)
0445                 cnfdata.handles.([col1_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0446                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0447                     <span class="string">'Position'</span>,[x0+0.5*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col1_families{k},<span class="keyword">...</span>
0448                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0449                 cnfdata.handles.([col1_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0450                     <span class="string">'Position'</span>,[x0+0.22*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0451 
0452             <span class="keyword">end</span>
0453 
0454             <span class="keyword">for</span> k=1:length(col2_families),
0455                 cnfdata.handles.([col2_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0456                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0457                     <span class="string">'Position'</span>,[x0+3.0*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col2_families{k},<span class="keyword">...</span>
0458                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0459                 cnfdata.handles.([col2_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0460                     <span class="string">'Position'</span>,[x0+2.7*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0461             <span class="keyword">end</span>
0462 
0463             <span class="keyword">for</span> k=1:length(col3_families),
0464                 cnfdata.handles.([col3_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0465                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0466                     <span class="string">'Position'</span>,[x0+5.5*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col3_families{k},<span class="keyword">...</span>
0467                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0468                 cnfdata.handles.([col3_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0469                     <span class="string">'Position'</span>,[x0+5.2*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0470             <span class="keyword">end</span>
0471 
0472             <span class="keyword">for</span> k=1:length(col4_families),
0473                 cnfdata.handles.([col4_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0474                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0475                     <span class="string">'Position'</span>,[x0+8.0*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col4_families{k},<span class="keyword">...</span>
0476                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0477                 cnfdata.handles.([col4_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0478                     <span class="string">'Position'</span>,[x0+7.7*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0479             <span class="keyword">end</span>
0480 
0481             <span class="keyword">for</span> k=1:length(col5_families),
0482                 cnfdata.handles.([col5_families{k} <span class="string">'chk'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'checkbox'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0483                     <span class="string">'ToolTipString'</span>,<span class="string">'Check to include in configuration load'</span>,<span class="keyword">...</span>
0484                     <span class="string">'Position'</span>,[x0+10.5*dx,y0-(k-0.33)*dely,1.8*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,col5_families{k},<span class="keyword">...</span>
0485                     <span class="string">'callback'</span>,<span class="string">'configgui(''CheckValid'')'</span>);
0486                 cnfdata.handles.([col5_families{k} <span class="string">'flag'</span>])=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0487                     <span class="string">'Position'</span>,[x0+10.2*dx,y0-(k-0.51)*dely,dx/5,dy/4],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">' '</span>,<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
0488             <span class="keyword">end</span>
0489 
0490             <span class="comment">%select all</span>
0491             x1 = 10.5;
0492             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0493                 <span class="string">'ToolTipString'</span>,<span class="string">'Select all families to include in configuration load'</span>,<span class="keyword">...</span>
0494                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectAll'')'</span>,<span class="keyword">...</span>
0495                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select All'</span>);
0496 
0497             <span class="comment">%select all quad</span>
0498             x1 = 10.5;
0499             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0500                 <span class="string">'ToolTipString'</span>,<span class="string">'Select all families to include in configuration load'</span>,<span class="keyword">...</span>
0501                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectAllQuad'')'</span>,<span class="keyword">...</span>
0502                 <span class="string">'Position'</span>,[x0+x1*dx + 2.1*dx,y0-7*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select All Quad'</span>);
0503 
0504             <span class="comment">%select all sextu</span>
0505             x1 = 10.5;
0506             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0507                 <span class="string">'ToolTipString'</span>,<span class="string">'Select all families to include in configuration load'</span>,<span class="keyword">...</span>
0508                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectAllSextu'')'</span>,<span class="keyword">...</span>
0509                 <span class="string">'Position'</span>,[x0+x1*dx + 2.1*dx,y0-8.0*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select All Sextu'</span>);
0510             
0511             <span class="comment">%select none</span>
0512             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0513                 <span class="string">'ToolTipString'</span>,<span class="string">'Select no families to include in configuration load'</span>,<span class="keyword">...</span>
0514                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SelectNone'')'</span>,<span class="keyword">...</span>
0515                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.0*dely,2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Select None'</span>);
0516 
0517             <span class="comment">%display partial configuration data</span>
0518             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0519                 <span class="string">'ToolTipString'</span>,<span class="string">'Print configuration data to screen'</span>,<span class="keyword">...</span>
0520                 <span class="string">'Callback'</span>,<span class="string">'configgui(''ShowMainConfiguration'')'</span>,<span class="keyword">...</span>
0521                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.0*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Display Main Configuration'</span>);
0522 
0523             <span class="comment">%display full configuration</span>
0524             uicontrol(<span class="string">'Style'</span>,<span class="string">'pushbutton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0525                 <span class="string">'ToolTipString'</span>,<span class="string">'Print configuration data to screen'</span>,<span class="keyword">...</span>
0526                 <span class="string">'Callback'</span>,<span class="string">'configgui(''ShowConfiguration'')'</span>,<span class="keyword">...</span>
0527                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Display Full Configuration'</span>);
0528 
0529             <span class="comment">%list box to display output dialog</span>
0530             ts = [<span class="string">'Program Start-Up: '</span> datestr(now,0)];
0531             cnfdata.handles.listbox=uicontrol(<span class="string">'Style'</span>,<span class="string">'list'</span>,<span class="string">'Units'</span>,<span class="string">'centimeters'</span>,<span class="string">'Position'</span>,[x0+0.5*dx y0-15.8*dely 10*dx 2*dy],<span class="string">'String'</span>,{ts});
0532 
0533             <span class="comment">%configuration display</span>
0534             cnfdata.handles.configname=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0535                 <span class="string">'Position'</span>,[x0+0.5*dx y0-13*dely 8*dx dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="string">'String'</span>,<span class="string">' '</span>);
0536 
0537             <span class="comment">%Get Configuration</span>
0538             x1 = 0.5; x2 = x1 + 1.5;
0539             uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0540                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,3.5*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="keyword">...</span>
0541                 <span class="string">'String'</span>,<span class="string">'Get Configuration from: '</span>);
0542             <span class="comment">%machine</span>
0543             cnfdata.handles.GetMachine=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0544                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Machine'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0545                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Machine'</span>,<span class="keyword">...</span>
0546                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetMachineConfig'')'</span>);
0547             cnfdata.handles.GetMachineTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0548                 <span class="string">'Position'</span>,[x0+x2*dx,y0-7.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0549 
0550             <span class="comment">%desired</span>
0551             cnfdata.handles.GetDesired=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0552                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Desired Setpoints (SPEAR 3)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0553                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.6*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Desired'</span>,<span class="keyword">...</span>
0554                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetDesiredConfig'')'</span>);
0555             cnfdata.handles.GetDesiredTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0556                 <span class="string">'Position'</span>,[x0+x2*dx,y0-8.6*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0557 
0558             <span class="comment">%file</span>
0559             cnfdata.handles.GetFile=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0560                 <span class="string">'ToolTipString'</span>,<span class="string">'Read configuration from file'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0561                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.4*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'File'</span>,<span class="keyword">...</span>
0562                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetFileConfig'')'</span>);
0563             cnfdata.handles.GetFileTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0564                 <span class="string">'Position'</span>,[x0+x2*dx,y0-9.4*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0565             <span class="comment">%golden</span>
0566             cnfdata.handles.GetGolden=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0567                 <span class="string">'ToolTipString'</span>,<span class="string">'Read configuration from Golden'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0568                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10.2*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Golden'</span>,<span class="keyword">...</span>
0569                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetGoldenConfig'')'</span>);
0570             cnfdata.handles.GetGoldenTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0571                 <span class="string">'Position'</span>,[x0+x2*dx,y0-10.2*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0572             <span class="comment">%simulator</span>
0573             cnfdata.handles.GetSimulator=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0574                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from Simulator'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0575                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Simulator'</span>,<span class="keyword">...</span>
0576                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetSimulatorConfig'')'</span>);
0577             cnfdata.handles.GetSimulatorTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0578                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0579 
0580             <span class="comment">%workspace</span>
0581             cnfdata.handles.GetWorkspace=uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0582                 <span class="string">'ToolTipString'</span>,<span class="string">'Acquire configuration from WorkSpace'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0583                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Workspace'</span>,<span class="keyword">...</span>
0584                 <span class="string">'Callback'</span>,<span class="string">'configgui(''GetWorkspaceConfig'')'</span>);
0585             cnfdata.handles.GetWorkspaceTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0586                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0587 
0588             <span class="comment">%Set Configuration</span>
0589             x1 = 5.5; x2= x1+1.5;
0590             uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>,<span class="string">'FontWeight'</span>,<span class="string">'demi'</span>, <span class="keyword">...</span>
0591                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7*dely,3*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'left'</span>,<span class="string">'String'</span>,<span class="string">'Set Configuration to: '</span>);
0592             <span class="comment">%machine</span>
0593             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0594                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Machine (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0595                 <span class="string">'Position'</span>,[x0+x1*dx,y0-7.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Machine'</span>,<span class="keyword">...</span>
0596                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetMachineConfig'')'</span>);
0597             cnfdata.handles.LoadMachineTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0598                 <span class="string">'Position'</span>,[x0+x2*dx,y0-7.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0599 
0600             <span class="comment">%desired setpoints</span>
0601             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0602                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Desired Setpoints (SPEAR 3, only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0603                 <span class="string">'Position'</span>,[x0+x1*dx,y0-8.6*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Desired'</span>,<span class="keyword">...</span>
0604                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetDesiredConfig'')'</span>);
0605             cnfdata.handles.LoadDesiredTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0606                 <span class="string">'Position'</span>,[x0+x2*dx,y0-8.6*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0607 
0608             <span class="comment">%file</span>
0609             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0610                 <span class="string">'ToolTipString'</span>,<span class="string">'Write configuration to file (all families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0611                 <span class="string">'Position'</span>,[x0+x1*dx,y0-9.4*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'File'</span>,<span class="keyword">...</span>
0612                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetFileConfig'')'</span>);
0613             cnfdata.handles.LoadFileTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0614                 <span class="string">'Position'</span>,[x0+x2*dx,y0-9.4*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0615             <span class="comment">%golden</span>
0616             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0617                 <span class="string">'ToolTipString'</span>,<span class="string">'Write configuration to Golden (all families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0618                 <span class="string">'Position'</span>,[x0+x1*dx,y0-10.2*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Golden'</span>,<span class="keyword">...</span>
0619                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetGoldenConfig'')'</span>);
0620             cnfdata.handles.LoadGoldenTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0621                 <span class="string">'Position'</span>,[x0+x2*dx,y0-10.2*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0622             <span class="comment">%simulator</span>
0623             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0624                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Simulator (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0625                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Simulator'</span>,<span class="keyword">...</span>
0626                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetSimulatorConfig'')'</span>);
0627             cnfdata.handles.LoadSimulatorTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0628                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0629 
0630             <span class="comment">%workspace</span>
0631             uicontrol(<span class="string">'Style'</span>,<span class="string">'PushButton'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0632                 <span class="string">'ToolTipString'</span>,<span class="string">'Load configuration to Workspace (only selected families)'</span>,<span class="string">'BackGroundColor'</span>,[1 1 1],<span class="keyword">...</span>
0633                 <span class="string">'Position'</span>,[x0+x1*dx,y0-11.8*dely,1.2*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">'Workspace'</span>,<span class="keyword">...</span>
0634                 <span class="string">'Callback'</span>,<span class="string">'configgui(''SetWorkspaceConfig'')'</span>);
0635             cnfdata.handles.LoadWorkspaceTime=uicontrol(<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'units'</span>, <span class="string">'centimeters'</span>, <span class="keyword">...</span>
0636                 <span class="string">'Position'</span>,[x0+x2*dx,y0-11.8*dely,3.0*dx,dy/2],<span class="string">'HorizontalAlignment'</span>,<span class="string">'center'</span>,<span class="string">'String'</span>,<span class="string">''</span>);
0637 
0638         <span class="keyword">otherwise</span>
0639             error(<span class="string">'wrong Machine'</span>);
0640             set(h,<span class="string">'HandleVisibility'</span>,<span class="string">'off'</span>);
0641     <span class="keyword">end</span>
0642         setappdata(h,<span class="string">'configguidata'</span>,cnfdata);
0643         
0644     <span class="comment">%============================================================</span>
0645     <span class="keyword">case</span> <span class="string">'CheckValid'</span>
0646     <span class="comment">%============================================================</span>
0647         val=get(gcbo,<span class="string">'Value'</span>);
0648         <span class="keyword">if</span> val==1
0649             family=get(gcbo,<span class="string">'String'</span>);
0650             <span class="keyword">if</span> get(cnfdata.handles.([family <span class="string">'flag'</span>]),<span class="string">'BackGroundColor'</span>)==[1 0 0];  <span class="comment">%red</span>
0651                 set(gcbo,<span class="string">'Value'</span>,0);
0652             <span class="keyword">end</span>
0653         <span class="keyword">end</span>
0654         
0655     <span class="comment">%============================================================</span>
0656     <span class="keyword">case</span> <span class="string">'GetMachineConfig'</span>
0657     <span class="comment">%============================================================</span>
0658         <span class="comment">% get configuration from Machine</span>
0659         
0660         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0661         cnfdata.SetpointData=[];
0662         cnfdata.MonitorData=[];
0663         
0664         
0665         [cnfdata.SetpointData,cnfdata.MonitorData]=getmachineconfig(<span class="string">'online'</span>);
0666         
0667         setappdata(h,<span class="string">'configguidata'</span>,cnfdata);
0668         
0669         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowActiveFamilies'</span>);
0670         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowLastGet'</span>);
0671         
0672         set(cnfdata.handles.GetMachineTime,<span class="string">'String'</span>,datestr(now,0));
0673         set(cnfdata.handles.configname,<span class="string">'String'</span>, <span class="string">'Machine Configuration'</span>);
0674         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Get Configuration from Machine '</span>);
0675         
0676     <span class="comment">%============================================================</span>
0677     <span class="keyword">case</span> <span class="string">'GetDesiredConfig'</span>
0678     <span class="comment">%============================================================</span>
0679         <span class="comment">% get configuration from Desired Setpoints (SPEAR 3)</span>
0680         
0681         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0682         <span class="comment">%get configuration from machine</span>
0683         [cnfdata.SetpointData,cnfdata.MonitorData]=getmachineconfig(<span class="string">'online'</span>);
0684         <span class="comment">%load Desired values into Data field</span>
0685         ao=getao;
0686         <span class="keyword">for</span> k=1:length(cnfdata.families)
0687             family=cnfdata.families{k};
0688             <span class="keyword">if</span> isfield(ao.(family),<span class="string">'Desired'</span>);
0689                 cnfdata.SetpointData.(family).Data=getpv(family,<span class="string">'Desired'</span>,[]);
0690                 cnfdata.MonitorData.(family).Data=cnfdata.SetpointData.(family).Data;
0691             <span class="keyword">end</span>
0692         <span class="keyword">end</span>
0693         
0694         setappdata(h,<span class="string">'configguidata'</span>,cnfdata);
0695         
0696         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowActiveFamilies'</span>);
0697         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowLastGet'</span>);
0698         
0699         
0700         set(cnfdata.handles.configname,<span class="string">'String'</span>, <span class="string">'Desired Setpoint Configuration'</span>);
0701         set(cnfdata.handles.GetDesiredTime,<span class="string">'String'</span>,datestr(now,0));
0702         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Load Desired Setpoints into Machine Configuration'</span>);
0703         
0704     <span class="comment">%============================================================</span>
0705     <span class="keyword">case</span> <span class="string">'GetFileConfig'</span>
0706     <span class="comment">%============================================================</span>
0707         <span class="comment">%load configuration file via browser</span>
0708         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0709         
0710         DirSpec   =  getfamilydata(<span class="string">'Directory'</span>,<span class="string">'ConfigData'</span>);           <span class="comment">%default to Configuration data directory</span>
0711         FileName  =  [];                                <span class="comment">%no default file</span>
0712         [FileName, DirSpec] = uigetfile(<span class="string">'*.mat'</span>,<span class="string">'Select Configuration File'</span>,[DirSpec FileName]);
0713         FileSpec = [DirSpec FileName];
0714         
0715         <span class="keyword">try</span>
0716             cnf=load([DirSpec FileName]);          <span class="comment">%load configuration from archive</span>
0717         <span class="keyword">catch</span>
0718             <span class="keyword">return</span>
0719         <span class="keyword">end</span>
0720         
0721         cnfdata.SetpointData=[];
0722         cnfdata.MonitorData=[];
0723         
0724         cnfdata.SetpointData=cnf.ConfigSetpoint;
0725         cnfdata.MonitorData =cnf.ConfigMonitor;
0726         
0727         set(cnfdata.handles.configname,<span class="string">'String'</span>, [<span class="string">'File Configuration: '</span> FileName]);
0728         
0729         setappdata(h,<span class="string">'configguidata'</span>,cnfdata);
0730         
0731         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowActiveFamilies'</span>);
0732         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowLastGet'</span>);
0733         
0734         
0735         set(cnfdata.handles.GetFileTime,<span class="string">'String'</span>,datestr(now,0));
0736         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Get Configuration from File '</span>);
0737         
0738     <span class="comment">%============================================================</span>
0739     <span class="keyword">case</span> <span class="string">'GetGoldenConfig'</span>
0740     <span class="comment">%============================================================</span>
0741         <span class="comment">% get configuration from Golden File (PhysData)</span>
0742         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0743         cnfdata.SetpointData=[];
0744         cnfdata.MonitorData=[];
0745         
0746         FileName = getfamilydata(<span class="string">'OpsData'</span>, <span class="string">'LatticeFile'</span>);
0747         DirectoryName = getfamilydata(<span class="string">'Directory'</span>, <span class="string">'OpsData'</span>);
0748         cnf=load([DirectoryName FileName]);
0749         
0750         cnfdata.SetpointData=cnf.ConfigSetpoint;
0751         cnfdata.MonitorData =cnf.ConfigMonitor;
0752         
0753         setappdata(h,<span class="string">'configguidata'</span>,cnfdata);
0754         
0755         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowActiveFamilies'</span>);
0756         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowLastGet'</span>);
0757         
0758         
0759         set(cnfdata.handles.configname,<span class="string">'String'</span>, <span class="string">'File Configuration: Golden'</span>);
0760         set(cnfdata.handles.GetGoldenTime,<span class="string">'String'</span>,datestr(now,0));
0761         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Get Golden Configuration '</span>);
0762         
0763    <span class="comment">%============================================================</span>
0764     <span class="keyword">case</span> <span class="string">'GetSimulatorConfig'</span>
0765    <span class="comment">%============================================================</span>
0766         <span class="comment">% get configuration from Simulator</span>
0767         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0768         cnfdata.SetpointData=[];
0769         cnfdata.MonitorData=[];
0770         [cnfdata.SetpointData,cnfdata.MonitorData] = getmachineconfig(<span class="string">'simulator'</span>);
0771         
0772         setappdata(h,<span class="string">'configguidata'</span>,cnfdata);
0773         
0774         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowActiveFamilies'</span>);
0775         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowLastGet'</span>);
0776         
0777         set(cnfdata.handles.configname,<span class="string">'String'</span>, <span class="string">'Simulator Configuration'</span>);
0778         set(cnfdata.handles.GetSimulatorTime,<span class="string">'String'</span>,datestr(now,0));
0779         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Get Configuration from Simulator '</span>);
0780         
0781     <span class="comment">%============================================================</span>
0782     <span class="keyword">case</span> <span class="string">'GetWorkspaceConfig'</span>
0783     <span class="comment">%============================================================</span>
0784         <span class="comment">% get configuration from Workspace</span>
0785         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0786         
0787         <span class="comment">%load setpoint data</span>
0788         evalin(<span class="string">'base'</span>,[<span class="string">'if exist(''SetpointData'');'</span>,<span class="keyword">...</span>
0789                 <span class="string">'h=findobj(0,''Tag'',''cnffig'');'</span>,<span class="keyword">...</span>
0790                 <span class="string">'cnfdata=getappdata(h,''configguidata'');'</span>,<span class="keyword">...</span>
0791                 <span class="string">'cnfdata.SetpointData=SetpointData;'</span>,<span class="keyword">...</span>
0792                 <span class="string">'setappdata(h,''configguidata'',cnfdata);'</span>,<span class="keyword">...</span>
0793                 <span class="string">'disp(''   Setpoint configuration found in workspace'');'</span>,<span class="keyword">...</span>
0794                 <span class="string">'else;'</span>,<span class="keyword">...</span>
0795                 <span class="string">'disp(''   No Setpoint configuration found in workspace'');'</span>,<span class="keyword">...</span>
0796                 <span class="string">'end;'</span>]);
0797         
0798         <span class="comment">%load monitor data</span>
0799         evalin(<span class="string">'base'</span>,[<span class="string">'if exist(''MonitorData'');'</span>,<span class="keyword">...</span>
0800                 <span class="string">'h=findobj(0,''Tag'',''cnffig'');'</span>,<span class="keyword">...</span>
0801                 <span class="string">'cnfdata=getappdata(h,''configguidata'');'</span>,<span class="keyword">...</span>
0802                 <span class="string">'cnfdata.MonitorData=MonitorData;'</span>,<span class="keyword">...</span>
0803                 <span class="string">'setappdata(h,''configguidata'',cnfdata);'</span>,<span class="keyword">...</span>
0804                 <span class="string">'disp(''   Monitor configuration found in workspace'');'</span>,<span class="keyword">...</span>
0805                 <span class="string">'else;'</span>,<span class="keyword">...</span>
0806                 <span class="string">'disp(''   No Monitor configuration found in workspace'');'</span>,<span class="keyword">...</span>
0807                 <span class="string">'end;'</span>]);
0808         
0809         
0810         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowActiveFamilies'</span>);
0811         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'ShowLastGet'</span>);
0812         
0813         set(cnfdata.handles.configname,<span class="string">'String'</span>, <span class="string">'Workspace Configuration'</span>);
0814         set(cnfdata.handles.GetWorkspaceTime,<span class="string">'String'</span>,datestr(now,0));
0815         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Get Configuration from Workspace '</span>);
0816         
0817         
0818     <span class="comment">%============================================================</span>
0819     <span class="keyword">case</span> <span class="string">'ShowLastGet'</span>
0820     <span class="comment">%============================================================</span>
0821         <span class="comment">%Turn last 'Get' pushbutton green</span>
0822         
0823         
0824         set(cnfdata.handles.GetMachine,<span class="string">'BackGroundColor'</span>,[1 1 1]);
0825         set(cnfdata.handles.GetDesired,<span class="string">'BackGroundColor'</span>,[1 1 1]);
0826         set(cnfdata.handles.GetFile,<span class="string">'BackGroundColor'</span>,[1 1 1]);
0827         set(cnfdata.handles.GetGolden,<span class="string">'BackGroundColor'</span>,[1 1 1]);
0828         set(cnfdata.handles.GetSimulator,<span class="string">'BackGroundColor'</span>,[1 1 1]);
0829         set(cnfdata.handles.GetWorkspace,<span class="string">'BackGroundColor'</span>,[1 1 1]);
0830         
0831         set(gcbo,<span class="string">'BackGroundColor'</span>,<span class="string">'g'</span>);
0832         
0833     <span class="comment">%============================================================</span>
0834     <span class="keyword">case</span> <span class="string">'SetMachineConfig'</span>
0835     <span class="comment">%============================================================</span>
0836         <span class="comment">%Set/Load configuration to machine</span>
0837         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0838         <span class="keyword">if</span>      strcmpi(cnfdata.field,<span class="string">'setpoint'</span>)
0839             cnf=cnfdata.SetpointData;
0840         <span class="keyword">elseif</span>  strcmpi(cnfdata.field,<span class="string">'monitor'</span>)
0841             cnf=cnfdata.MonitorData;
0842         <span class="keyword">end</span>
0843         
0844         <span class="comment">%find which families are active</span>
0845         config=[];
0846         <span class="keyword">for</span> k=1:length(cnfdata.families)
0847             family=cnfdata.families{k};
0848             <span class="keyword">if</span> get(cnfdata.handles.([family <span class="string">'chk'</span>]),<span class="string">'Value'</span>)==1
0849                 config.(family)=cnf.(family);
0850             <span class="keyword">end</span>
0851         <span class="keyword">end</span>
0852         
0853         <span class="keyword">if</span> isempty(config)
0854             <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' No families loaded Online '</span>);
0855             <span class="keyword">return</span>
0856         <span class="keyword">end</span>
0857         
0858         <span class="keyword">if</span> getappdata(gcf,<span class="string">'cycling'</span>)
0859             disp(<span class="string">'cycling not implemented yet!!!'</span>)
0860         <span class="keyword">end</span>
0861         setmachineconfig(config,<span class="string">'online'</span>);
0862         
0863         set(cnfdata.handles.LoadMachineTime,<span class="string">'String'</span>,datestr(now,0));
0864         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Load Configuration to Machine '</span>);
0865         
0866     <span class="comment">%============================================================</span>
0867     <span class="keyword">case</span> <span class="string">'SetDesiredConfig'</span>
0868     <span class="comment">%============================================================</span>
0869         <span class="comment">%Set configuration to Desired Setpoints (SPEAR 3 application)</span>
0870         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0871         <span class="keyword">for</span> k=1:length(cnfdata.families)
0872             family=cnfdata.families{k};
0873             <span class="keyword">if</span> get(cnfdata.handles.([family <span class="string">'chk'</span>]),<span class="string">'Value'</span>)==1
0874                 <span class="keyword">if</span> (~strcmpi(family,<span class="string">'HCOR'</span>) &amp;&amp; ~strcmpi(family,<span class="string">'VCOR'</span>) &amp;&amp; ~strcmpi(family,<span class="string">'SkewQuad'</span>) &amp; ~strcmpi(family,<span class="string">'BEND'</span>))
0875                     DeviceList=family2dev(family);
0876                     Desired=cnfdata.SetpointData.(family).Data;
0877                     setpv(family,<span class="string">'Desired'</span>,Desired,DeviceList);
0878                 <span class="keyword">end</span>
0879             <span class="keyword">end</span>
0880         <span class="keyword">end</span>
0881         
0882         set(cnfdata.handles.LoadDesiredTime,<span class="string">'String'</span>,datestr(now,0));
0883         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Load Configuration to Desired Setpoints'</span>);
0884         
0885     <span class="comment">%============================================================</span>
0886     <span class="keyword">case</span> <span class="string">'SetFileConfig'</span>
0887     <span class="comment">%============================================================</span>
0888         <span class="comment">%Set/Write configuration to file</span>
0889         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0890         <span class="comment">% Determine file and directory name</span>
0891         FileName = getfamilydata(<span class="string">'Default'</span>,<span class="string">'CNFArchiveFile'</span>);
0892         DirectoryName = getfamilydata(<span class="string">'Directory'</span>,<span class="string">'ConfigData'</span>);
0893         FileName = appendtimestamp(FileName, clock);
0894         [FileName, DirectoryName] = uiputfile(<span class="string">'*.mat'</span>,<span class="string">'Save Lattice to ...'</span>, [DirectoryName FileName]);
0895         <span class="keyword">if</span> FileName == 0 
0896             fprintf(<span class="string">'   File not saved (getmachineconfig)\n'</span>);
0897             <span class="keyword">return</span>;
0898         <span class="keyword">end</span>
0899         
0900         <span class="comment">% Save all data in structure to file</span>
0901         DirStart = pwd;
0902         [DirectoryName, DirectoryErrorFlag] = gotodirectory(DirectoryName);  
0903         ConfigSetpoint=cnfdata.SetpointData;
0904         ConfigMonitor=cnfdata.MonitorData;
0905         <span class="keyword">try</span>
0906             save(FileName, <span class="string">'ConfigSetpoint'</span>, <span class="string">'ConfigMonitor'</span>);
0907         <span class="keyword">catch</span>
0908             cd(DirStart);
0909             <span class="keyword">return</span>
0910         <span class="keyword">end</span>
0911         cd(DirStart);
0912         
0913         set(cnfdata.handles.LoadFileTime,<span class="string">'String'</span>,datestr(now,0));
0914         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Write Configuration to File '</span>);
0915         
0916     <span class="comment">%============================================================</span>
0917     <span class="keyword">case</span> <span class="string">'SetGoldenConfig'</span>
0918     <span class="comment">%============================================================</span>
0919         <span class="comment">%Set/Write configuration to Golden</span>
0920         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0921         FileName = getfamilydata(<span class="string">'OpsData'</span>,<span class="string">'LatticeFile'</span>);
0922         DirectoryName = getfamilydata(<span class="string">'Directory'</span>,<span class="string">'OpsData'</span>);
0923         AnswerString = questdlg(strvcat(<span class="string">'Are you sure you want to overwrite the default lattice file?'</span>,sprintf(<span class="string">'File: %s'</span>,[DirectoryName FileName])),<span class="string">'Default Lattice'</span>,<span class="string">'Yes'</span>,<span class="string">'No'</span>,<span class="string">'No'</span>);
0924         <span class="keyword">if</span> strcmp(AnswerString,<span class="string">'Yes'</span>)
0925             [DirectoryName, DirectoryErrorFlag] = gotodirectory(DirectoryName);
0926             FileName = getfamilydata(<span class="string">'OpsData'</span>, <span class="string">'LatticeFile'</span>);
0927             DirectoryName = getfamilydata(<span class="string">'Directory'</span>, <span class="string">'OpsData'</span>);
0928             ConfigSetpoint=cnfdata.SetpointData;
0929             ConfigMonitor=cnfdata.MonitorData;
0930             save(FileName, <span class="string">'ConfigMonitor'</span>, <span class="string">'ConfigSetpoint'</span>);
0931         <span class="keyword">else</span>
0932             fprintf(<span class="string">'   File not saved (getmachineconfig)\n'</span>);
0933             <span class="keyword">return</span>;
0934         <span class="keyword">end</span>
0935         
0936         set(cnfdata.handles.LoadGoldenTime,<span class="string">'String'</span>,datestr(now,0));
0937         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Write Configuration to Golden '</span>);
0938         
0939     <span class="comment">%============================================================</span>
0940     <span class="keyword">case</span> <span class="string">'SetSimulatorConfig'</span>
0941     <span class="comment">%============================================================</span>
0942         <span class="comment">%Set/Load configuration to simulator</span>
0943         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0944         <span class="comment">%find which families are active</span>
0945         families=[];
0946         <span class="keyword">for</span> k=1:length(cnfdata.families)
0947             family=cnfdata.families{k};
0948             <span class="keyword">if</span> get(cnfdata.handles.([family <span class="string">'chk'</span>]),<span class="string">'Value'</span>)==1
0949                 families.([<span class="string">'f'</span> num2str(k)])=family;
0950             <span class="keyword">end</span>
0951         <span class="keyword">end</span>
0952         
0953         <span class="keyword">if</span> isempty(families)
0954             <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' No families loaded to Simulator '</span>);
0955             <span class="keyword">return</span>
0956         <span class="keyword">else</span>
0957             families=struct2cell(families);
0958         <span class="keyword">end</span>
0959         
0960         <span class="keyword">if</span>      strcmpi(cnfdata.field,<span class="string">'setpoint'</span>)
0961             config=cnfdata.SetpointData;
0962         <span class="keyword">elseif</span>  strcmpi(cnfdata.field,<span class="string">'monitor'</span>)
0963             config=cnfdata.MonitorData;
0964         <span class="keyword">end</span>
0965         
0966         setmachineconfig(families,config,<span class="string">'simulator'</span>);
0967         
0968         set(cnfdata.handles.LoadSimulatorTime,<span class="string">'String'</span>,datestr(now,0));
0969         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Load Configuration to Simulator '</span>);
0970         
0971     <span class="comment">%============================================================</span>
0972     <span class="keyword">case</span> <span class="string">'SetWorkspaceConfig'</span>
0973     <span class="comment">%============================================================</span>
0974         <span class="comment">%Set/Load configuration to workspace</span>
0975         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWait'</span>);
0976         <span class="comment">%find which families are active</span>
0977         families=[];
0978         <span class="keyword">for</span> k=1:length(cnfdata.families)
0979             family=cnfdata.families{k};
0980             <span class="keyword">if</span> get(cnfdata.handles.([family <span class="string">'chk'</span>]),<span class="string">'Value'</span>)==1
0981                 families.([<span class="string">'f'</span> num2str(k)])=family;
0982             <span class="keyword">end</span>
0983         <span class="keyword">end</span>
0984         
0985         <span class="keyword">if</span> isempty(families)
0986             <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' No families loaded to Workspace '</span>);
0987             <span class="keyword">return</span>
0988         <span class="keyword">end</span>
0989         
0990         <span class="keyword">if</span>      isfield(cnfdata,<span class="string">'SetpointData'</span>)
0991             evalin(<span class="string">'base'</span>,[<span class="string">'h=findobj(0,''Tag'',''cnffig'');'</span>,<span class="keyword">...</span>
0992                     <span class="string">'cnfdata=getappdata(h,''configguidata'');'</span>,<span class="keyword">...</span>
0993                     <span class="string">'SetpointData=cnfdata.SetpointData;'</span>,<span class="keyword">...</span>
0994                     <span class="string">'clear h;'</span>, <span class="string">'clear cnfdata;'</span>]);
0995             disp(<span class="string">'   Setpoint configuration data loaded to workspace as SetpointData'</span>);
0996         <span class="keyword">else</span>
0997             disp(<span class="string">'   No Setpoint data available'</span>);
0998         <span class="keyword">end</span>
0999         <span class="keyword">if</span>      isfield(cnfdata,<span class="string">'MonitorData'</span>)
1000             evalin(<span class="string">'base'</span>,[<span class="string">'h=findobj(0,''Tag'',''cnffig'');'</span>,<span class="keyword">...</span>
1001                     <span class="string">'cnfdata=getappdata(h,''configguidata'');'</span>,<span class="keyword">...</span>
1002                     <span class="string">'MonitorData=cnfdata.MonitorData;'</span>,<span class="keyword">...</span>
1003                     <span class="string">'clear h;'</span>, <span class="string">'clear cnfdata;'</span>]);
1004             disp(<span class="string">'   Monitor configuration data loaded to workspace as MonitorData'</span>);
1005         <span class="keyword">else</span>
1006             disp(<span class="string">'   No Monitor data available'</span>);
1007         <span class="keyword">end</span>
1008         
1009         
1010         set(cnfdata.handles.LoadWorkspaceTime,<span class="string">'String'</span>,datestr(now,0));
1011         <a href="configgui.html" class="code" title="function varargout = configgui(action, varargin)">configgui</a>(<span class="string">'LBoxWriteLast'</span>,<span class="string">' Load Configuration to Workspace '</span>);
1012         
1013     <span class="comment">%============================================================</span>
1014     <span class="keyword">case</span> <span class="string">'SelectAll'</span>
1015     <span class="comment">%============================================================</span>
1016     <span class="comment">%select all families for configuration load</span>
1017         <span class="keyword">for</span> k=1:length(cnfdata.families)
1018             <span class="keyword">if</span> get(cnfdata.handles.([cnfdata.families{k} <span class="string">'flag'</span>]),<span class="string">'Userdata'</span>) == 1;   <span class="comment">%contains valid data</span>
1019                 set(cnfdata.handles.([cnfdata.families{k} <span class="string">'chk'</span>]),<span class="string">'Value'</span>,1);
1020             <span class="keyword">end</span>
1021         <span class="keyword">end</span>
1022 
1023     <span class="comment">%============================================================</span>
1024     <span class="keyword">case</span> <span class="string">'SelectAllQuad'</span>
1025     <span class="comment">%============================================================</span>
1026     <span class="comment">%select all families for configuration load</span>
1027         <span class="keyword">for</span> k = 1:length(cnfdata.families)
1028             <span class="keyword">if</span> ~isempty(regexp(cnfdata.families{k},<span class="string">'Q[0-9]'</span>))
1029                 <span class="keyword">if</span> get(cnfdata.handles.([cnfdata.families{k} <span class="string">'flag'</span>]),<span class="string">'Userdata'</span>) == 1;   <span class="comment">%contains valid data</span>
1030                     set(cnfdata.handles.([cnfdata.families{k} <span class="string">'chk'</span>]),<span class="string">'Value'</span>,1);
1031                 <span class="keyword">end</span>
1032             <span class="keyword">end</span>
1033         <span class="keyword">end</span>
1034     
1035     <span class="comment">%============================================================</span>
1036     <span class="keyword">case</span> <span class="string">'SelectAllSextu'</span>
1037     <span class="comment">%============================================================</span>
1038     <span class="comment">%select all families for configuration load</span>
1039         <span class="keyword">for</span> k=1:length(cnfdata.families)
1040             <span class="keyword">if</span> ~isempty(regexp(cnfdata.families{k},<span class="string">'S[0-9]'</span>))
1041                 <span class="keyword">if</span> get(cnfdata.handles.([cnfdata.families{k} <span class="string">'flag'</span>]),<span class="string">'Userdata'</span>) == 1;   <span class="comment">%contains valid data</span>
1042                     set(cnfdata.handles.([cnfdata.families{k} <span class="string">'chk'</span>]),<span class="string">'Value'</span>,1);
1043                 <span class="keyword">end</span>
1044             <span class="keyword">end</span>
1045         <span class="keyword">end</span>
1046 
1047     <span class="comment">%============================================================</span>
1048     <span class="keyword">case</span> <span class="string">'SelectNone'</span>
1049     <span class="comment">%============================================================</span>
1050     <span class="comment">%select no families for configuration load</span>
1051         <span class="keyword">for</span> k=1:length(cnfdata.families)
1052             set(cnfdata.handles.([cnfdata.families{k} <span class="string">'chk'</span>]),<span class="string">'Value'</span>,0);
1053         <span class="keyword">end</span>
1054         
1055     <span class="comment">%============================================================</span>
1056     <span class="keyword">case</span> <span class="string">'ShowActiveFamilies'</span>
1057     <span class="comment">%============================================================</span>
1058     <span class="comment">%turn box green for valid families</span>
1059         
1060         <span class="keyword">for</span> k=1:length(cnfdata.families)
1061             set(cnfdata.handles.([cnfdata.families{k} <span class="string">'flag'</span>]),<span class="string">'BackGroundColor'</span>,<span class="string">'r'</span>,<span class="string">'Userdata'</span>,0);
1062         <span class="keyword">end</span>
1063         
1064         <span class="keyword">if</span> strcmpi(cnfdata.field,<span class="string">'setpoint'</span>);
1065             <span class="keyword">if</span> isempty(cnfdata.SetpointData) <span class="keyword">return</span>; <span class="keyword">end</span>
1066             familynames=fieldnames(cnfdata.SetpointData);
1067         <span class="keyword">elseif</span> strcmpi(cnfdata.field,<span class="string">'monitor'</span>);
1068             <span class="keyword">if</span> isempty(cnfdata.MonitorData) <span class="keyword">return</span>; <span class="keyword">end</span>
1069             familynames=fieldnames(cnfdata.MonitorData);
1070         <span class="keyword">end</span>
1071         
1072         <span class="comment">%indicate valid families</span>
1073         <span class="keyword">for</span> k=1:length(cnfdata.families)
1074             <span class="keyword">for</span> l=1:length(familynames)
1075                 <span class="keyword">if</span> strcmpi(cnfdata.families{k},familynames{l})
1076                     <span class="comment">%disp(familynames{l})</span>
1077                     set(cnfdata.handles.([familynames{l} <span class="string">'flag'</span>]),<span class="string">'BackGroundColor'</span>,<span class="string">'g'</span>,<span class="string">'Userdata'</span>,1);
1078                 <span class="keyword">end</span>
1079             <span class="keyword">end</span>
1080         <span class="keyword">end</span>
1081         
1082     <span class="comment">%===========================================================</span>
1083     <span class="keyword">case</span> <span class="string">'LBoxWriteLast'</span>                          <span class="comment">%*** LBoxWriteLast ***</span>
1084     <span class="comment">%===========================================================</span>
1085     <span class="comment">%load latest sequence of strings into graphical display listbox</span>
1086         comment=varargin{1};
1087         ts = datestr(now,0);
1088         addstr={[ts  <span class="string">': '</span> comment]};
1089         str=get(cnfdata.handles.listbox,<span class="string">'String'</span>);
1090         
1091         [ione,itwo]=size(str);
1092         <span class="keyword">if</span> ione&gt;0
1093             str=[str(1:end-1); addstr];
1094         <span class="keyword">else</span>
1095             str=addstr;
1096         <span class="keyword">end</span>
1097         nentry=50;
1098         <span class="keyword">if</span> ione&gt;=nentry                <span class="comment">%keep only top entries</span>
1099             str=str(ione-nentry+1:ione,1);
1100             [ione,itwo]=size(str);
1101         <span class="keyword">end</span>
1102         set(cnfdata.handles.listbox,<span class="string">'String'</span>,str,<span class="string">'listboxtop'</span>,ione);
1103         
1104         
1105     <span class="comment">%===========================================================</span>
1106     <span class="keyword">case</span> <span class="string">'LBoxWait'</span>                          <span class="comment">%*** LBoxWait ***</span>
1107     <span class="comment">%===========================================================</span>
1108     <span class="comment">%load latest sequence of strings into graphical display listbox</span>
1109         
1110         addstr={<span class="string">'... Working ...'</span> };
1111         str=get(cnfdata.handles.listbox,<span class="string">'String'</span>);
1112         str=[str; addstr];
1113         [ione,itwo]=size(str);
1114         nentry=50;
1115         <span class="keyword">if</span> ione&gt;=nentry                <span class="comment">%keep only top entries</span>
1116             str=str(ione-nentry+1:ione,1);
1117             [ione,itwo]=size(str);
1118         <span class="keyword">end</span>
1119         set(cnfdata.handles.listbox,<span class="string">'String'</span>,str,<span class="string">'listboxtop'</span>,ione);
1120         sleep(0.01);        
1121         
1122     <span class="comment">%===========================================================</span>
1123     <span class="keyword">case</span> <span class="string">'ShowConfiguration'</span>          <span class="comment">%*** ShowConfiguration ***</span>
1124     <span class="comment">%===========================================================</span>
1125     <span class="comment">%display setpoint and monitors for families in cnfdata structure</span>
1126         
1127         families=cnfdata.families;
1128         filename = tempname;
1129         fid = fopen(filename,<span class="string">'w'</span>);
1130 
1131         <span class="keyword">for</span> k=1:length(families)
1132             Family=families{k};
1133             <span class="keyword">if</span> ~isfield(cnfdata.SetpointData,Family)   
1134                 disp([<span class="string">'   Warning: family not available... '</span>, Family]);  
1135             <span class="keyword">else</span>
1136                 DeviceList     =family2dev(Family);
1137                 Field          =<span class="string">'Setpoint'</span>;
1138                 SetpointPV     =getfamilydata(Family,Field,<span class="string">'TangoNames'</span>);
1139                 SetpointData   =cnfdata.SetpointData.(Family).(Field).Data;
1140                 PhysicsSetpoint=hw2physics(Family,Field,SetpointData);
1141                 Field = <span class="string">'Monitor'</span>;
1142                 MonitorPV      =getfamilydata(Family,Field,<span class="string">'TangoNames'</span>);
1143                 MonitorData    =cnfdata.MonitorData.(Family).(Field).Data;
1144                 PhysicsMonitor =hw2physics(Family,<span class="string">'Monitor'</span>, MonitorData);
1145                                 
1146                 <span class="comment">%display hardware values</span>
1147                 fprintf(fid,<span class="string">'%s\n'</span>,[<span class="string">'   Family  DeviceList  HWSetpoint PhysicsSetpoint     HWReadback    PhysicsReadback )'</span>]);
1148                 
1149                 <span class="keyword">for</span> jj=1:size(DeviceList,1)
1150                     fprintf(fid,<span class="string">'%8s    [%2d,%d] %14.5f %14.5f %14.5f %14.5f \n'</span>,<span class="keyword">...</span>
1151                         Family,DeviceList(jj,1),DeviceList(jj,2),SetpointData(jj),PhysicsSetpoint(jj),<span class="keyword">...</span>
1152                         MonitorData(jj),PhysicsMonitor(jj));
1153                 <span class="keyword">end</span>
1154             <span class="keyword">end</span> 
1155         <span class="keyword">end</span>
1156         fclose(fid);
1157         system([<span class="string">'nedit '</span>, filename, <span class="string">' &amp;'</span>]);  <span class="comment">% much faster</span>
1158         
1159     <span class="comment">%===========================================================</span>
1160     <span class="keyword">case</span> <span class="string">'ShowMainConfiguration'</span>       <span class="comment">%*** ShowMainConfiguration ***</span>
1161     <span class="comment">%===========================================================</span>
1162     <span class="comment">%display setpoint and monitors for families in cnfdata structure</span>
1163         
1164         families=cnfdata.families;
1165         fprintf(<span class="string">'%s\n'</span>,[<span class="string">'   Family     HWSetpoint    PhysicsSetpoint'</span>]);
1166         
1167         <span class="keyword">for</span> k=1:length(families)
1168             Family=families{k};
1169             <span class="keyword">if</span> ~isfield(cnfdata.SetpointData,Family)   
1170                 disp([<span class="string">'   Warning: family not available... '</span>, Family]);  
1171             <span class="keyword">else</span>
1172                 DeviceList     =family2dev(Family);
1173                 Field = <span class="string">'Setpoint'</span>;
1174                 SetpointPV     =getfamilydata(Family,Field,<span class="string">'TangoNames'</span>);
1175                 SetpointData   =cnfdata.SetpointData.(Family).(Field).Data;
1176                 PhysicsSetpoint=hw2physics(Family,Field,SetpointData);
1177                 Field = <span class="string">'Monitor'</span>;
1178                 MonitorPV      =getfamilydata(Family,Field,<span class="string">'TangoNames'</span>);
1179                 MonitorData    =cnfdata.MonitorData.(Family).(Field).Data;
1180                 PhysicsMonitor =hw2physics(Family,Field, MonitorData);
1181                 <span class="comment">%display hardware values</span>
1182                 <span class="keyword">if</span> ~strcmpi(Family,<span class="string">'HCOR'</span>) &amp;&amp; ~strcmpi(Family,<span class="string">'VCOR'</span>) &amp;&amp; ~strcmpi(Family,<span class="string">'SkewQuad'</span>)
1183                     fprintf(<span class="string">'%8s  %14.5f %14.5f\n'</span>,Family,SetpointData(1),PhysicsSetpoint(1));
1184                 <span class="keyword">end</span>
1185                 disp(<span class="string">' '</span>);
1186             <span class="keyword">end</span> 
1187         <span class="keyword">end</span>
1188     <span class="keyword">otherwise</span>
1189         disp([<span class="string">'Warning: no CASE found in configgui: '</span> action]);
1190         disp(action);
1191 <span class="keyword">end</span>  <span class="comment">%end switchyard</span>
1192 
1193</pre></div>
<hr><address>Generated on Mon 21-May-2007 15:35:27 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>