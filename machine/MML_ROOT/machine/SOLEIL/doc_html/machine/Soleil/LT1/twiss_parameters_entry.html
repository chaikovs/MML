<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of twiss_parameters_entry</title>
  <meta name="keywords" content="twiss_parameters_entry">
  <meta name="description" content="TWISS_PARAMETERS_ENTRY - Panel used by LT1_optics for modifying input">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../../index.html">Home</a> &gt;  <a href="#">machine</a> &gt; <a href="#">Soleil</a> &gt; <a href="index.html">LT1</a> &gt; twiss_parameters_entry.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../../index.html"><img alt="<" border="0" src="../../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for machine/Soleil/LT1&nbsp;<img alt=">" border="0" src="../../../right.png"></a></td></tr></table>-->

<h1>twiss_parameters_entry
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>TWISS_PARAMETERS_ENTRY - Panel used by LT1_optics for modifying input</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="box"><strong>function varargout = twiss_parameters_entry(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre class="comment">  TWISS_PARAMETERS_ENTRY - Panel used by LT1_optics for modifying input
                           twiss parameters
 
  Written by M.A Tordeux
  Modified by L. Nadolski</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../../../matlabicon.gif)">
</ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<ul style="list-style-image:url(../../../matlabicon.gif)">
<li><a href="#_sub1" class="code">function twiss_parameters_entry_OpeningFcn(hObject, eventdata, handles, varargin)</a></li><li><a href="#_sub2" class="code">function appliquer_pushbutton_Callback(hObject, eventdata, handles)</a></li><li><a href="#_sub3" class="code">function plot_axes(handles,quoi)</a></li><li><a href="#_sub4" class="code">function varargout = twiss_parameters_entry_OutputFcn(hObject, eventdata, handles)</a></li></ul>
<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function varargout = twiss_parameters_entry(varargin)</a>
0002 <span class="comment">%  TWISS_PARAMETERS_ENTRY - Panel used by LT1_optics for modifying input</span>
0003 <span class="comment">%                           twiss parameters</span>
0004 <span class="comment">%</span>
0005 <span class="comment">%  Written by M.A Tordeux</span>
0006 <span class="comment">%  Modified by L. Nadolski</span>
0007 
0008 <span class="comment">% Begin initialization code - DO NOT EDIT</span>
0009 gui_Singleton = 1;
0010 gui_State = struct(<span class="string">'gui_Name'</span>,       mfilename, <span class="keyword">...</span>
0011                    <span class="string">'gui_Singleton'</span>,  gui_Singleton, <span class="keyword">...</span>
0012                    <span class="string">'gui_OpeningFcn'</span>, @<a href="#_sub1" class="code" title="subfunction twiss_parameters_entry_OpeningFcn(hObject, eventdata, handles, varargin)">twiss_parameters_entry_OpeningFcn</a>, <span class="keyword">...</span>
0013                    <span class="string">'gui_OutputFcn'</span>,  @<a href="#_sub4" class="code" title="subfunction varargout = twiss_parameters_entry_OutputFcn(hObject, eventdata, handles)">twiss_parameters_entry_OutputFcn</a>, <span class="keyword">...</span>
0014                    <span class="string">'gui_LayoutFcn'</span>,  [] , <span class="keyword">...</span>
0015                    <span class="string">'gui_Callback'</span>,   []);
0016 <span class="keyword">if</span> nargin &amp; isstr(varargin{1})
0017     gui_State.gui_Callback = str2func(varargin{1});
0018 <span class="keyword">end</span>
0019 
0020 <span class="keyword">if</span> nargout
0021     [varargout{1:nargout}] = gui_mainfcn(gui_State, varargin{:});
0022 <span class="keyword">else</span>
0023     gui_mainfcn(gui_State, varargin{:});
0024 <span class="keyword">end</span>
0025 <span class="comment">% End initialization code - DO NOT EDIT</span>
0026 
0027 
0028 
0029 <span class="comment">% --- Executes just before twiss_parameters_entry is made visible.</span>
0030 <a name="_sub1" href="#_subfunctions" class="code">function twiss_parameters_entry_OpeningFcn(hObject, eventdata, handles, varargin)</a>
0031 <span class="comment">% This function has no output args, see OutputFcn.</span>
0032 <span class="comment">% hObject    handle to figure</span>
0033 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0034 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0035 <span class="comment">% varargin   command line arguments to twiss_parameters_entry (see VARARGIN)</span>
0036 
0037 <span class="comment">% Choose default command line output for twiss_parameters_entry</span>
0038 handles.output = hObject;
0039 
0040 <span class="keyword">if</span> iscell(varargin) &amp;&amp; ~isempty(varargin)
0041     
0042     <span class="comment">% store handle from caller</span>
0043     handles.caller = varargin{1}.figure1;
0044     
0045     <span class="comment">% Get values from Application-Defined data</span>
0046     handles.twissdatain = getappdata(handles.caller, <span class="string">'twissdatain'</span>);
0047     handles.axes1=findobj(allchild(handles.caller),<span class="string">'Tag'</span>,<span class="string">'axes1'</span>);
0048     handles.popupmenu_x = findobj(allchild(handles.caller), <span class="string">'Tag'</span>,<span class="string">'popupmenu_x'</span>);
0049     handles.popupmenu_y = findobj(allchild(handles.caller), <span class="string">'Tag'</span>,<span class="string">'popupmenu_y'</span>);
0050     <span class="comment">% Update handles structure</span>
0051     guidata(hObject, handles);
0052 
0053 <span class="keyword">else</span>
0054     
0055 <span class="keyword">end</span>
0056 
0057 <span class="comment">% Update handles structure</span>
0058 guidata(hObject, handles);
0059 
0060 
0061 <span class="comment">% affichage des valeurs th�oriques de optics</span>
0062 betax = handles.twissdatain.beta(1);
0063 betay = handles.twissdatain.beta(2);
0064 alphax = handles.twissdatain.alpha(1);
0065 alphay = handles.twissdatain.alpha(2);
0066 gammax = (1 + alphax * alphax) / betax;
0067 gammay = (1 + alphay * alphay) / betay;
0068 
0069 set(handles.betah_edit,<span class="string">'String'</span>,sprintf(<span class="string">'%3.2f'</span>,betax));
0070 set(handles.gammah_edit,<span class="string">'String'</span>,sprintf(<span class="string">'%3.2f'</span>,gammax));
0071 set(handles.alphah_edit,<span class="string">'String'</span>,sprintf(<span class="string">'%3.2f'</span>,alphax));
0072 set(handles.betav_edit,<span class="string">'String'</span>,sprintf(<span class="string">'%3.2f'</span>,betay));
0073 set(handles.gammav_edit,<span class="string">'String'</span>,sprintf(<span class="string">'%3.2f'</span>,gammay));
0074 set(handles.alphav_edit,<span class="string">'String'</span>,sprintf(<span class="string">'%3.2f'</span>,alphay));
0075 
0076 <a name="_sub2" href="#_subfunctions" class="code">function appliquer_pushbutton_Callback(hObject, eventdata, handles)</a>
0077 <span class="comment">% hObject    handle to appliquer_pushbutton (see GCBO)</span>
0078 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0079 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0080 
0081 <span class="comment">% Hints: get(hObject,'String') returns contents of appliquer_pushbutton as text</span>
0082 <span class="comment">%        str2double(get(hObject,'String')) returns contents of appliquer_pushbutton as a double</span>
0083 
0084 <span class="comment">% prise en compte des nouvelles valeurs des param�tres de Twiss a l'entree</span>
0085 handles.twissdatain.beta(1) = str2double(get(handles.betah_edit,<span class="string">'String'</span>) );
0086 handles.twissdatain.alpha(1)  = str2double(get(handles.alphah_edit,<span class="string">'String'</span>));
0087 set(handles.gammah_edit,<span class="string">'String'</span>,<span class="keyword">...</span>
0088     sprintf(<span class="string">'%3.2f'</span>,(1 +handles.twissdatain.alpha(1)*handles.twissdatain.alpha(1))/handles.twissdatain.beta(1) ));
0089 
0090 handles.twissdatain.beta(2) = str2double(get(handles.betav_edit,<span class="string">'String'</span>) );
0091 handles.twissdatain.alpha(2)  = str2double(get(handles.alphav_edit,<span class="string">'String'</span>));
0092 set(handles.gammav_edit,<span class="string">'String'</span>,<span class="keyword">...</span>
0093     sprintf(<span class="string">'%3.2f'</span>,(1 +handles.twissdatain.alpha(2)*handles.twissdatain.alpha(2))/handles.twissdatain.beta(1) ));
0094 
0095 setappdata(handles.caller,<span class="string">'twissdatain'</span>,handles.twissdatain);
0096 
0097 <span class="keyword">global</span> THERING;
0098 
0099 <span class="comment">% get twiss paramaters everywhere</span>
0100 TD = twissline(THERING,0.0,handles.twissdatain,1:length(THERING),<span class="string">'chroma'</span>);
0101 
0102 handles.beta  = cat(1,TD.beta);
0103 handles.cod   = cat(2,TD.ClosedOrbit)';
0104 handles.eta   = cat(2,TD.Dispersion)';
0105 handles.spos  = cat(1,TD.SPos);
0106 handles.phase = cat(1,TD.mu);
0107 
0108 <span class="comment">% lecture des popup menu de optics</span>
0109 valeur = get(handles.popupmenu_x, <span class="string">'Value'</span>);
0110 str = get(handles.popupmenu_x, <span class="string">'String'</span>);
0111 handles.xtype = str{valeur};
0112 valeur = get(handles.popupmenu_y, <span class="string">'Value'</span>);
0113 str = get(handles.popupmenu_y, <span class="string">'String'</span>);
0114 handles.ytype = str{valeur};
0115 
0116 <span class="comment">% Replot everything</span>
0117 <a href="#_sub3" class="code" title="subfunction plot_axes(handles,quoi)">plot_axes</a>(handles,handles.ytype);
0118 <span class="comment">%mat</span>
0119         ylim([0 130]);
0120 <span class="comment">%-----------------------------------------------------------------------</span>
0121 <a name="_sub3" href="#_subfunctions" class="code">function plot_axes(handles,quoi)</a>
0122 <span class="comment">%%% fonction generique</span>
0123 
0124 axes(handles.axes1); cla; hold on;
0125 
0126 <span class="keyword">switch</span> handles.xtype
0127     <span class="keyword">case</span> <span class="string">'spos'</span>
0128         x=handles.(handles.xtype);
0129     <span class="keyword">case</span> <span class="string">'phase'</span>
0130         x=handles.(handles.xtype); x = x(:,1);
0131 <span class="keyword">end</span>
0132 
0133 <span class="keyword">switch</span> quoi
0134     <span class="keyword">case</span> <span class="string">'beta'</span>
0135         plot(x,handles.beta(:,1),<span class="string">'r.-'</span>); 
0136         plot(x,handles.beta(:,2),<span class="string">'b.-'</span>); 
0137         ylabel(<span class="string">'\beta (m)'</span>);
0138         <span class="comment">%mat</span>
0139         ylim([0 130]);
0140     <span class="keyword">case</span> <span class="string">'eta'</span>        
0141         plot(x,handles.eta(:,1),<span class="string">'r.-'</span>);
0142         plot(x,handles.eta(:,3),<span class="string">'b.-'</span>);
0143         ylabel(<span class="string">'\eta (m)'</span>);
0144     <span class="keyword">case</span> <span class="string">'cod'</span>        
0145         plot(x,handles.cod(:,1)*1e3,<span class="string">'r.-'</span>);
0146         plot(x,handles.cod(:,3)*1e3,<span class="string">'b.-'</span>);
0147         ylabel(<span class="string">'cod (mm)'</span>);
0148     <span class="keyword">case</span> <span class="string">'phase'</span>        
0149         plot(x,handles.phase(:,1),<span class="string">'r.-'</span>);
0150         plot(x,handles.phase(:,2),<span class="string">'b.-'</span>);
0151         ylabel(<span class="string">'phase '</span>);
0152 <span class="keyword">end</span>
0153 axis([x(1) x(end) -inf inf]);
0154 datalabel on
0155 
0156 
0157 <span class="comment">% --- Outputs from this function are returned to the command line.</span>
0158 <a name="_sub4" href="#_subfunctions" class="code">function varargout = twiss_parameters_entry_OutputFcn(hObject, eventdata, handles)</a>
0159 <span class="comment">% varargout  cell array for returning output args (see VARARGOUT);</span>
0160 <span class="comment">% hObject    handle to figure</span>
0161 <span class="comment">% eventdata  reserved - to be defined in a future version of MATLAB</span>
0162 <span class="comment">% handles    structure with handles and user data (see GUIDATA)</span>
0163 
0164 <span class="comment">% Get default command line output from handles structure</span>
0165 varargout{1} = handles.output;  <span class="comment">% ???</span>
0166 <span class="comment">%disp('c''est fini')</span></pre></div>
<hr><address>Generated on Mon 21-May-2007 15:35:27 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>