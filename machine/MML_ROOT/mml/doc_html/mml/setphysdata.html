<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of setphysdata</title>
  <meta name="keywords" content="setphysdata">
  <meta name="description" content="SETPHYSDATA - Set physics data">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mml</a> &gt; setphysdata.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mml&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>setphysdata
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>SETPHYSDATA - Set physics data</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function setphysdata(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">SETPHYSDATA - Set physics data
  For vector inputs:
  setphysdata(Family, Field, Data, DeviceList)
  setphysdata(Family, Field, Data)

  For structure inputs:
  setphysdata(DataStruct, Field)   % Family, Data, and DeviceList are in DataStruct
  setphysdata(Family, DataStruct)  % DataStruct is the entire family structure
  setphysdata(DataStruct)          % DataStruct is the entire Physics Data Structure

  INPUTS
  1. Family = Family name (or first field name in the physdata structure)
  2. Field  = Field  name ('Offset', 'Gain', 'Golden', etc)
  3. Data = New data values
  4. DeviceList = Device list for that family
         or 
  1. DataStruct = .FamilyName, .DeviceList, and .Data fields are used if they exist
                  or DataStruct is saved according to the Field/Family
  2. Field = Field name ('Offset', 'Gain', 'Golden', etc)

  NOTE
  1. If Data is a cell array, then Family, Field, and DeviceList must also be a cell arrays.
  2. If the family or field does not exist, then it will be created!
     When a new field is created a message will be printed to the screen.

  EXAMPLES
  1. To set the offset orbit for BPM(3,2) to 1.234
     setphysdata('BPMx', 'Offset', 1.234, [3 2]);</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="elem2dev.html" class="code" title="function Output = elem2dev(Family, ElementList)">elem2dev</a>	ELEM2DEV - Converts a device list to an element list</li><li><a href="getfamilydata.html" class="code" title="function [Data, ErrorFlag] = getfamilydata(Family, Field1, Field2, DeviceList)">getfamilydata</a>	GETFAMILYDATA - Gets data associated with the accelerator control</li><li><a href="getlist.html" class="code" title="function DeviceList = getlist(varargin)">getlist</a>	GETLIST - Returns Device List for a Family</li><li><a href="getphysdata.html" class="code" title="function [Data, iNotFound] = getphysdata(Family, Field, DeviceList)">getphysdata</a>	GETPHYSDATA - Gets physics data</li><li><a href="setphysdata.html" class="code" title="function setphysdata(varargin)">setphysdata</a>	SETPHYSDATA - Set physics data</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="setphysdata.html" class="code" title="function setphysdata(varargin)">setphysdata</a>	SETPHYSDATA - Set physics data</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function savephysdatalocal(PhysData, ArchiveFlag)</a></li></ul>
<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function setphysdata(varargin)</a>
0002 <span class="comment">%SETPHYSDATA - Set physics data</span>
0003 <span class="comment">%  For vector inputs:</span>
0004 <span class="comment">%  setphysdata(Family, Field, Data, DeviceList)</span>
0005 <span class="comment">%  setphysdata(Family, Field, Data)</span>
0006 <span class="comment">%</span>
0007 <span class="comment">%  For structure inputs:</span>
0008 <span class="comment">%  setphysdata(DataStruct, Field)   % Family, Data, and DeviceList are in DataStruct</span>
0009 <span class="comment">%  setphysdata(Family, DataStruct)  % DataStruct is the entire family structure</span>
0010 <span class="comment">%  setphysdata(DataStruct)          % DataStruct is the entire Physics Data Structure</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%  INPUTS</span>
0013 <span class="comment">%  1. Family = Family name (or first field name in the physdata structure)</span>
0014 <span class="comment">%  2. Field  = Field  name ('Offset', 'Gain', 'Golden', etc)</span>
0015 <span class="comment">%  3. Data = New data values</span>
0016 <span class="comment">%  4. DeviceList = Device list for that family</span>
0017 <span class="comment">%         or</span>
0018 <span class="comment">%  1. DataStruct = .FamilyName, .DeviceList, and .Data fields are used if they exist</span>
0019 <span class="comment">%                  or DataStruct is saved according to the Field/Family</span>
0020 <span class="comment">%  2. Field = Field name ('Offset', 'Gain', 'Golden', etc)</span>
0021 <span class="comment">%</span>
0022 <span class="comment">%  NOTE</span>
0023 <span class="comment">%  1. If Data is a cell array, then Family, Field, and DeviceList must also be a cell arrays.</span>
0024 <span class="comment">%  2. If the family or field does not exist, then it will be created!</span>
0025 <span class="comment">%     When a new field is created a message will be printed to the screen.</span>
0026 <span class="comment">%</span>
0027 <span class="comment">%  EXAMPLES</span>
0028 <span class="comment">%  1. To set the offset orbit for BPM(3,2) to 1.234</span>
0029 <span class="comment">%     setphysdata('BPMx', 'Offset', 1.234, [3 2]);</span>
0030 
0031 <span class="comment">%</span>
0032 <span class="comment">%  NOTE: MML creators are phasing out the use of physdata.</span>
0033 <span class="comment">%</span>
0034 <span class="comment">%  Written by Greg Portmann</span>
0035 
0036 
0037 <span class="comment">% ArchiveFlag is a backup to DataRoot\PhysData</span>
0038 ArchiveFlag = 1;    
0039 
0040 <span class="comment">% Look for keywords on the input line</span>
0041 <span class="keyword">for</span> i = length(varargin):-1:1
0042     <span class="keyword">if</span> isstruct(varargin{i})
0043         <span class="comment">% Ignor structures</span>
0044     <span class="keyword">elseif</span> iscell(varargin{i})
0045         <span class="comment">% Ignor cells</span>
0046     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'NoArchive'</span>)
0047         ArchiveFlag = 0;    
0048         varargin(i) = [];
0049     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'Archive'</span>)
0050         ArchiveFlag = 1;    
0051         varargin(i) = [];
0052     <span class="keyword">end</span>
0053 <span class="keyword">end</span>
0054 
0055 <span class="comment">% setphysdata(Family, Field, Data, DeviceList)</span>
0056 <span class="keyword">if</span> length(varargin) == 0
0057     error(<span class="string">'At least one input required'</span>);
0058 <span class="keyword">end</span>
0059 <span class="keyword">if</span> length(varargin) &gt;= 1
0060     Family = varargin{1};
0061 <span class="keyword">end</span>
0062 <span class="keyword">if</span> length(varargin) &gt;= 2
0063     Field = varargin{2};
0064 <span class="keyword">end</span>
0065 <span class="keyword">if</span> length(varargin) &gt;= 3
0066     Data = varargin{3};
0067 <span class="keyword">end</span>
0068 <span class="keyword">if</span> length(varargin) &gt;= 4
0069     DeviceList = varargin{4};
0070 <span class="keyword">else</span>
0071     DeviceList = [];
0072 <span class="keyword">end</span>
0073 
0074 <span class="comment">%%%%%%%%%%%%%%%%%%%%</span>
0075 <span class="comment">% Cell array input %</span>
0076 <span class="comment">%%%%%%%%%%%%%%%%%%%%</span>
0077 <span class="keyword">if</span> iscell(Family)
0078     <span class="keyword">if</span> length(varargin) &lt; 2
0079         error(<span class="string">'For cell array inputs, Data and Family must exist'</span>);
0080     <span class="keyword">end</span>
0081     <span class="keyword">if</span> ~iscell(Family)
0082         error(<span class="string">'If Data is a cell array, then Family must be a cell array.'</span>);
0083     <span class="keyword">end</span>        
0084     <span class="keyword">if</span> length(Family) ~= length(Data)
0085         error(<span class="string">'Data and Family must be the same size cell arrays'</span>);
0086     <span class="keyword">end</span>
0087     <span class="keyword">if</span> length(varargin) &gt;= 3
0088         <span class="keyword">if</span> ~iscell(Field)
0089             error(<span class="string">'If Data is a cell array, then Field must be a cell array.'</span>);
0090         <span class="keyword">end</span>        
0091         <span class="keyword">if</span> length(Family) ~= length(Field)
0092             error(<span class="string">'Data and Field must be the same size cell arrays'</span>);
0093         <span class="keyword">end</span>
0094     <span class="keyword">end</span>    
0095     <span class="keyword">if</span> length(varargin) &gt;= 4
0096         <span class="keyword">if</span> ~iscell(DeviceList)
0097             error(<span class="string">'If Data is a cell array, then DeviceList must be a cell array.'</span>);
0098         <span class="keyword">end</span>        
0099         <span class="keyword">if</span> length(Family) ~= length(DeviceList)
0100             error(<span class="string">'Data and DeviceList must be the same size cell arrays'</span>);
0101         <span class="keyword">end</span>
0102     <span class="keyword">end</span>    
0103     <span class="keyword">for</span> i = 1:length(Data)
0104         <span class="keyword">if</span> length(varargin) == 2
0105             <a href="setphysdata.html" class="code" title="function setphysdata(varargin)">setphysdata</a>(Family{i}, Field{i});
0106         <span class="keyword">elseif</span> length(varargin) == 3
0107             <a href="setphysdata.html" class="code" title="function setphysdata(varargin)">setphysdata</a>(Family{i}, Field{i}, Data{i});
0108         <span class="keyword">else</span>
0109             <a href="setphysdata.html" class="code" title="function setphysdata(varargin)">setphysdata</a>(Family{i}, Field{i}, Data{i}, DeviceList{i});
0110         <span class="keyword">end</span>
0111     <span class="keyword">end</span>
0112     <span class="keyword">return</span>    
0113 <span class="keyword">end</span>  <span class="comment">% End cell inputs</span>
0114 
0115 
0116 <span class="comment">%%%%%%%%%%%%%%%%</span>
0117 <span class="comment">% Set the data %</span>
0118 <span class="comment">%%%%%%%%%%%%%%%%</span>
0119 
0120 <span class="keyword">if</span> length(varargin) == 1
0121     <span class="keyword">if</span> isstruct(Family)
0122         PhysData = Family;
0123         fprintf(<span class="string">'   WARNING: The entire Physics Data Structure will be written over!'</span>);
0124         <a href="#_sub1" class="code" title="subfunction savephysdatalocal(PhysData, ArchiveFlag)">savephysdatalocal</a>(PhysData, ArchiveFlag);
0125     <span class="keyword">else</span>
0126         error(<span class="string">'For 1 input, the Data input must be the entire Physics Data Structure'</span>);
0127     <span class="keyword">end</span>
0128     <span class="keyword">return</span>;
0129 <span class="keyword">end</span>
0130 
0131 
0132 <span class="comment">% Get the entire structure</span>
0133 PhysData = <a href="getphysdata.html" class="code" title="function [Data, iNotFound] = getphysdata(Family, Field, DeviceList)">getphysdata</a>;
0134 
0135 
0136 <span class="keyword">if</span> isstruct(Family)
0137     <span class="keyword">if</span> isfield(Family, <span class="string">'FamilyName'</span>)
0138         <span class="comment">% setphysdata(DataStruct, Field)</span>
0139         DeviceList = Family.DeviceList;
0140         Data = Family.Data;
0141         Family = Family.FamilyName;
0142     <span class="keyword">else</span>
0143         error(<span class="string">'When using setphysdata(DataStruct, Field), DataStruct must have .FamilyName, .Data, .DeviceList fields'</span>);
0144     <span class="keyword">end</span>
0145 <span class="keyword">elseif</span> isstruct(Field)
0146     <span class="comment">% setphysdata(Family, Data)</span>
0147     <span class="comment">% The data is in the field input</span>
0148     <span class="keyword">if</span> ~isfield(PhysData, Family)
0149         fprintf(<span class="string">'   %s family will be created in the Physics Data Structure'</span>, Family);
0150     <span class="keyword">end</span>
0151     PhysData.(Family) = Field;  
0152     <a href="#_sub1" class="code" title="subfunction savephysdatalocal(PhysData, ArchiveFlag)">savephysdatalocal</a>(PhysData, ArchiveFlag);
0153     <span class="keyword">return</span>
0154 <span class="keyword">else</span>
0155     <span class="keyword">if</span> length(varargin) == 2
0156         error(<span class="string">'The Physics Data Structure for a family should be a structure'</span>);
0157     <span class="keyword">end</span>
0158     <span class="keyword">if</span> length(varargin) == 3
0159         DeviceList = [];
0160     <span class="keyword">end</span>
0161 <span class="keyword">end</span>
0162 <span class="keyword">if</span> isempty(DeviceList)
0163     <span class="keyword">try</span>
0164         DeviceList = <a href="getlist.html" class="code" title="function DeviceList = getlist(varargin)">getlist</a>(Family, 0);
0165     <span class="keyword">catch</span>
0166         <span class="comment">% Not a family.  Set the entire field</span>
0167         <span class="keyword">if</span> length(varargin) ~= 3
0168             error(<span class="string">'When not using a family the number of inputs must be 3 (Family, Field, Data)'</span>);
0169         <span class="keyword">end</span>
0170         DataOld = PhysData.(Family).(Field);
0171         <span class="keyword">if</span> any(size(DataOld) ~= size(Data))
0172             fprintf(<span class="string">'\n   WARNING:  Data is not part of a family and length of old data does not match the length of the new data.\n'</span>);
0173             fprintf(<span class="string">'             If that is not ok, hopefully you saved a backup file\n\n'</span>);
0174         <span class="keyword">end</span>
0175         PhysData.(Family).(Field) = Data;
0176         <a href="#_sub1" class="code" title="subfunction savephysdatalocal(PhysData, ArchiveFlag)">savephysdatalocal</a>(PhysData, ArchiveFlag);
0177         <span class="keyword">return</span>
0178     <span class="keyword">end</span>
0179 <span class="keyword">end</span>
0180 
0181 
0182 <span class="comment">% If Data is a structure, then use the Data and DeviceList field</span>
0183 <span class="keyword">if</span> isstruct(Data)
0184     <span class="keyword">if</span> length(varargin) &gt;= 4
0185         fprintf(<span class="string">'WARNING: Input DeviceList ignored.  Using the DeviceList in the data structure.'</span>);
0186     <span class="keyword">end</span>
0187     <span class="keyword">if</span> isfield(Data, <span class="string">'DeviceList'</span>)
0188         DeviceList = Data.DeviceList;
0189     <span class="keyword">else</span>
0190         DeviceList = Data.Monitor.DeviceList;
0191     <span class="keyword">end</span>
0192     Data = Data.Data;
0193 <span class="keyword">end</span>
0194 
0195 <span class="keyword">if</span> ~isfield(PhysData, Family)
0196     fprintf(<span class="string">'   %s family, %s field will be created in the Physics Data Structure'</span>, Family, Field);
0197     PhysData.(Family) = [];
0198 <span class="keyword">else</span>
0199     <span class="keyword">if</span> ~isfield(PhysData.(Family), Field)
0200         fprintf(<span class="string">'   %s field will be created in the %s family in the Physics Data Structure'</span>, Field, Family);
0201         PhysData.(Family).(Field) = [];
0202     <span class="keyword">end</span>
0203 <span class="keyword">end</span>
0204 
0205 <span class="keyword">if</span> size(DeviceList,2) == 1
0206     DeviceList = <a href="elem2dev.html" class="code" title="function Output = elem2dev(Family, ElementList)">elem2dev</a>(Family, DeviceList);
0207 <span class="keyword">end</span>
0208 
0209 
0210 DeviceListTotal = <a href="getlist.html" class="code" title="function DeviceList = getlist(varargin)">getlist</a>(Family, 0);
0211 
0212 [i, iNotFound] = findrowindex(DeviceList, DeviceListTotal);  
0213 <span class="keyword">if</span> ~isempty(iNotFound)
0214     error(<span class="string">'Device not found in the family'</span>);
0215 <span class="keyword">end</span>
0216 
0217 <span class="comment">% Save data as a vector using the entire family (or change the device list in the structure?)</span>
0218 <span class="keyword">if</span> isfield(PhysData.(Family).(Field), <span class="string">'DeviceList'</span>)
0219     <span class="comment">% A data structure was stored.  Convert it to an entire family list.</span>
0220     j = findrowindex(PhysData.(Family).(Field).DeviceList, DeviceListTotal);  
0221     DataTotal = NaN * ones(size(DeviceListTotal,1), size(PhysData.(Family).(Field).Data,2));
0222     DataTotal(j,:) = PhysData.(Family).(Field).Data;
0223     
0224     <span class="comment">% Fill the new data to the structure</span>
0225     DataTotal(i,:) = Data;
0226     PhysData.(Family).(Field).Data = DataTotal;
0227     PhysData.(Family).(Field).DeviceList = DeviceListTotal;
0228     <span class="keyword">if</span> isfield(PhysData.(Family).(Field),<span class="string">'Status'</span>)
0229         <span class="comment">% Status isn't relevant</span>
0230         PhysData.(Family).(Field) = rmfield(PhysData.(Family).(Field),<span class="string">'Status'</span>);
0231     <span class="keyword">end</span>
0232 <span class="keyword">elseif</span> isfield(PhysData.(Family).(Field), <span class="string">'Monitor'</span>)
0233     <span class="comment">% A data structure was stored.  Convert it to an entire family list.</span>
0234     j = findrowindex(PhysData.(Family).(Field).Monitor.DeviceList, DeviceListTotal);  
0235     DataTotal = NaN * ones(size(DeviceListTotal,1), size(PhysData.(Family).(Field).Data,2));
0236     DataTotal(j,:) = PhysData.(Family).(Field).Data;
0237     
0238     <span class="comment">% Fill the new data to the structure</span>
0239     DataTotal(i,:) = Data;
0240     PhysData.(Family).(Field).Data = DataTotal;
0241     PhysData.(Family).(Field).DeviceList = DeviceListTotal;
0242     <span class="keyword">if</span> isfield(PhysData.(Family).(Field),<span class="string">'Status'</span>)
0243         <span class="comment">% Status isn't relevant</span>
0244         PhysData.(Family).(Field) = rmfield(PhysData.(Family).(Field),<span class="string">'Status'</span>);
0245     <span class="keyword">end</span>
0246 <span class="keyword">else</span>
0247     <span class="comment">% Fill the new data</span>
0248     DataTotal = PhysData.(Family).(Field);
0249     DataTotal(i,:) = Data;
0250     PhysData.(Family).(Field) = DataTotal;
0251 <span class="keyword">end</span>    
0252 
0253 
0254 <span class="comment">% if length(i) == size(Data,1)</span>
0255 <span class="comment">%     DataVec = getphysdata(Family, Field);</span>
0256 <span class="comment">%     DataVec(i) = Data;</span>
0257 <span class="comment">%     PhysData.(Family).(Field) = DataVec;</span>
0258 <span class="comment">% elseif length(Data) == 1</span>
0259 <span class="comment">%     PhysData.(Family).(Field) = Data;</span>
0260 <span class="comment">% else</span>
0261 <span class="comment">%     error('The number of elements in the input data vector does not match the DeviceList');</span>
0262 <span class="comment">% end</span>
0263 
0264 
0265 <a href="#_sub1" class="code" title="subfunction savephysdatalocal(PhysData, ArchiveFlag)">savephysdatalocal</a>(PhysData, ArchiveFlag);
0266 
0267 
0268 
0269 <a name="_sub1" href="#_subfunctions" class="code">function savephysdatalocal(PhysData, ArchiveFlag)</a>
0270 
0271 <span class="comment">% Physics data is saved in this file</span>
0272 FileName = <a href="getfamilydata.html" class="code" title="function [Data, ErrorFlag] = getfamilydata(Family, Field1, Field2, DeviceList)">getfamilydata</a>(<span class="string">'OpsData'</span>,<span class="string">'PhysDataFile'</span>);
0273 
0274 <span class="comment">%FileName = [getfamilydata('Directory','OpsData') getfamilydata('OpsData','PhysDataFile')];</span>
0275 
0276 <span class="comment">%Machine = lower(getfamilydata('Machine'));</span>
0277 <span class="comment">%FileName = which([Machine, 'physdata','.mat']);</span>
0278 
0279 <span class="keyword">if</span> ArchiveFlag
0280     tmp = questdlg({<span class="keyword">...</span>
0281             sprintf(<span class="string">'%s'</span>, FileName), <span class="keyword">...</span>
0282             <span class="string">'is where many important parameters are saved to operate'</span>, <span class="keyword">...</span>
0283             <span class="string">'this machine.  A backup of this file will be made first.  However, '</span>, <span class="keyword">...</span>
0284             <span class="string">'Are you sure you want to change the Physics Data Structure?'</span>},<span class="keyword">...</span>
0285         <span class="string">'SETPHYSDATA'</span>,<span class="string">'YES'</span>,<span class="string">'NO'</span>,<span class="string">'NO'</span>);
0286 <span class="keyword">else</span>
0287     tmp = questdlg({<span class="keyword">...</span>
0288             sprintf(<span class="string">'%s'</span>, FileName), <span class="keyword">...</span>
0289             <span class="string">'is where many important parameters are saved to operate'</span>, <span class="keyword">...</span>
0290             <span class="string">'this machine.  You are about to change this file without a backup!'</span>, <span class="keyword">...</span>
0291             <span class="string">'Are you sure you want to change the Physics Data Structure?'</span>},<span class="keyword">...</span>
0292         <span class="string">'SETPHYSDATA'</span>,<span class="string">'YES'</span>,<span class="string">'NO'</span>,<span class="string">'NO'</span>);
0293 <span class="keyword">end</span>
0294 <span class="keyword">if</span> ~strcmpi(tmp,<span class="string">'YES'</span>)
0295     fprintf(<span class="string">'   No change made to the Physics Data Structure\n'</span>);
0296     <span class="keyword">return</span>
0297 <span class="keyword">end</span>
0298 
0299 <span class="keyword">if</span> ArchiveFlag
0300     <span class="comment">% Save a backup first</span>
0301     DirStart = pwd;
0302     <span class="comment">%DirectoryBackUp = getfamilydata('Directory','DataRoot');</span>
0303     <span class="comment">%DirectoryBackUp = fullfile(DirectoryBackUp,'PhysData');</span>
0304     DirectoryBackUp = [<a href="getfamilydata.html" class="code" title="function [Data, ErrorFlag] = getfamilydata(Family, Field1, Field2, DeviceList)">getfamilydata</a>(<span class="string">'Directory'</span>,<span class="string">'DataRoot'</span>), <span class="string">'Backup'</span>, filesep];
0305 
0306     <span class="comment">%FileNameBackUp = appendtimestamp('Physdata');</span>
0307     FileNameBackUp  = prependtimestamp(<span class="string">'Physdata'</span>);
0308 
0309     [DirectoryBackUp, DirectoryErrorFlag] = gotodirectory(DirectoryBackUp);            
0310     save(FileNameBackUp, <span class="string">'PhysData'</span>);
0311     fprintf(<span class="string">'   Physics Data Structure backup to  %s\n'</span>, [pwd, filesep, FileNameBackUp]);
0312     cd(DirStart);
0313     <span class="keyword">if</span> DirectoryErrorFlag
0314         fprintf(<span class="string">'   WARNING: The PhysData file was saved, but it did not go the desired directory!\n            Look in %s\n'</span>, DirectoryBackUp);
0315     <span class="keyword">end</span>
0316 <span class="keyword">end</span>
0317 
0318 save(FileName, <span class="string">'PhysData'</span>);    
0319 fprintf(<span class="string">'   Physics Data Structure updated in %s\n'</span>, FileName);</pre></div>
<hr><address>Generated on Mon 21-May-2007 15:29:18 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>