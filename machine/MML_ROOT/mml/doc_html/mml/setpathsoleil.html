<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of setpathsoleil</title>
  <meta name="keywords" content="setpathsoleil">
  <meta name="description" content="SETPATHSOLEIL - Initializes the Matlab Middle Layer (MML) for Soleil">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mml</a> &gt; setpathsoleil.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mml&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>setpathsoleil
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>SETPATHSOLEIL - Initializes the Matlab Middle Layer (MML) for Soleil</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathsoleil(varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">SETPATHSOLEIL - Initializes the Matlab Middle Layer (MML) for Soleil
  [MachineName, SubMachineName, OnlineLinkMethod, MMLROOT] = setpathsoleil(SubMachineName)

  INPUTS
  1. SubMachineName - 'StorageRing', 'Booster', 'LT2', 'LT1'

  See Also setoperationalmode, <a href="setpathsoleil.html" class="code" title="function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathsoleil(varargin)">setpathsoleil</a>, aoinit, soleilinit</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="getmmlroot.html" class="code" title="function MMLROOT = getmmlroot(varargin)">getmmlroot</a>	GETMMLROOT - Returns root directory of the Matlab Middle Layer</li><li><a href="setpathmml.html" class="code" title="function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathmml(varargin)">setpathmml</a>	SETPATHMML -  Initialize the Matlab MiddleLayer (MML) path</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathsoleil(varargin)</a>
0002 <span class="comment">%SETPATHSOLEIL - Initializes the Matlab Middle Layer (MML) for Soleil</span>
0003 <span class="comment">%  [MachineName, SubMachineName, OnlineLinkMethod, MMLROOT] = setpathsoleil(SubMachineName)</span>
0004 <span class="comment">%</span>
0005 <span class="comment">%  INPUTS</span>
0006 <span class="comment">%  1. SubMachineName - 'StorageRing', 'Booster', 'LT2', 'LT1'</span>
0007 <span class="comment">%</span>
0008 <span class="comment">%  See Also setoperationalmode, setpathsoleil, aoinit, soleilinit</span>
0009 
0010 <span class="comment">%</span>
0011 <span class="comment">%  Written by Gregory J. Portmann</span>
0012 <span class="comment">%  Adapted by Laurent S. Nadolski</span>
0013 
0014 Machine = <span class="string">'Soleil'</span>;
0015 
0016 <span class="comment">%%%%%%%%%%%%%%%%%</span>
0017 <span class="comment">% Input Parsing %</span>
0018 <span class="comment">%%%%%%%%%%%%%%%%%</span>
0019 
0020 <span class="comment">% First strip-out the link method (although it should not be there)</span>
0021 LinkFlag = <span class="string">''</span>;
0022 <span class="keyword">for</span> i = length(varargin):-1:1
0023     <span class="keyword">if</span> ~ischar(varargin{i})
0024         <span class="comment">% Ignore input</span>
0025     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'LabCA'</span>)
0026         LinkFlag = <span class="string">'LabCA'</span>;
0027         varargin(i) = [];
0028     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'MCA'</span>)
0029         LinkFlag = <span class="string">'MCA'</span>;
0030         varargin(i) = [];
0031     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'SCA'</span>)
0032         LinkFlag = <span class="string">'SCA'</span>;
0033         varargin(i) = [];
0034     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'SLC'</span>)
0035         LinkFlag = <span class="string">'SLC'</span>;
0036         varargin(i) = [];
0037     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'Tango'</span>)
0038         LinkFlag = <span class="string">'Tango'</span>;
0039         varargin(i) = [];
0040     <span class="keyword">elseif</span> strcmpi(varargin{i},<span class="string">'UCODE'</span>)
0041         LinkFlag = <span class="string">'UCODE'</span>;
0042         varargin(i) = [];
0043     <span class="keyword">end</span>
0044 <span class="keyword">end</span>
0045 
0046 <span class="keyword">if</span> isempty(LinkFlag)
0047     LinkFlag = <span class="string">'Tango'</span>;
0048 <span class="keyword">end</span>
0049 
0050 
0051 <span class="comment">% Get the submachine name</span>
0052 <span class="keyword">if</span> length(varargin) &gt;= 1
0053     SubMachineName = varargin{1};
0054 <span class="keyword">else</span>
0055     SubMachineName = <span class="string">'StorageRing'</span>;
0056 <span class="keyword">end</span>
0057 
0058 <span class="keyword">if</span> isempty(SubMachineName)
0059     SubMachineNameCell = {<span class="string">'LT1'</span>, <span class="string">'Booster'</span>, <span class="string">'LT2'</span>, <span class="string">'Storage Ring'</span>};
0060     [i, ok] = listdlg(<span class="string">'PromptString'</span>, <span class="string">'Select an accelerator:'</span>,<span class="keyword">...</span>
0061         <span class="string">'SelectionMode'</span>, <span class="string">'Single'</span>,<span class="keyword">...</span>
0062         <span class="string">'Name'</span>, <span class="string">'Soleil'</span>, <span class="keyword">...</span>
0063         <span class="string">'ListString'</span>, SubMachineNameCell);
0064     <span class="keyword">if</span> ok
0065         SubMachineName = SubMachineNameCell{i};
0066     <span class="keyword">else</span>
0067         fprintf(<span class="string">'Initialization cancelled (no path change).\n'</span>);
0068         <span class="keyword">return</span>;
0069     <span class="keyword">end</span>
0070 <span class="keyword">end</span>
0071 
0072 <span class="keyword">if</span> any(strcmpi(SubMachineName, {<span class="string">'Storage Ring'</span>,<span class="string">'Ring'</span>}))
0073     SubMachineName = <span class="string">'StorageRing'</span>;
0074 <span class="keyword">end</span>
0075 
0076 <span class="comment">% Common path at SOLEIL</span>
0077    <span class="keyword">try</span>
0078        MMLROOT = <a href="getmmlroot.html" class="code" title="function MMLROOT = getmmlroot(varargin)">getmmlroot</a>;
0079        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>));
0080        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'naff'</span>, <span class="string">'naffutils'</span>));
0081        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'naff'</span>, <span class="string">'naffutils'</span>, <span class="string">'touscheklifetime'</span>));
0082        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'naff'</span>, <span class="string">'nafflib'</span>));
0083        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'archiving'</span>));
0084        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'database'</span>));
0085        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'synchro'</span>));
0086        addpath(fullfile(MMLROOT, <span class="string">'mml'</span>, <span class="string">'plotfamily'</span>)); <span class="comment">% greg version</span>
0087        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'plotfamily'</span>));
0088        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'configurations'</span>));
0089        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'cycling'</span>));
0090        addpath(fullfile(MMLROOT, <span class="string">'machine'</span>, <span class="string">'Soleil'</span>, <span class="string">'common'</span>, <span class="string">'diag'</span>, <span class="string">'DserverBPM'</span>));
0091        addpath(fullfile(MMLROOT, <span class="string">'applications'</span>, <span class="string">'mmlviewer'</span>));  
0092    <span class="keyword">catch</span>
0093        disp(<span class="string">'Path loading failed'</span>);
0094    <span class="keyword">end</span>
0095    
0096    
0097 <span class="keyword">if</span> strcmpi(SubMachineName,<span class="string">'StorageRing'</span>)
0098     [MachineName, SubMachineName, LinkFlag, MMLROOT] = <a href="setpathmml.html" class="code" title="function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathmml(varargin)">setpathmml</a>(Machine, <span class="string">'StorageRing'</span>, <span class="string">'StorageRing'</span>, LinkFlag);
0099 <span class="keyword">elseif</span> strcmpi(SubMachineName,<span class="string">'LT1'</span>)
0100     [MachineName, SubMachineName, LinkFlag, MMLROOT] = <a href="setpathmml.html" class="code" title="function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathmml(varargin)">setpathmml</a>(Machine, <span class="string">'LT1'</span>,         <span class="string">'Transport'</span>,   LinkFlag);
0101 <span class="keyword">elseif</span> strcmpi(SubMachineName,<span class="string">'Booster'</span>)
0102     [MachineName, SubMachineName, LinkFlag, MMLROOT] = <a href="setpathmml.html" class="code" title="function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathmml(varargin)">setpathmml</a>(Machine, <span class="string">'Booster'</span>,     <span class="string">'Booster'</span>,     LinkFlag);
0103 <span class="keyword">elseif</span> strcmpi(SubMachineName,<span class="string">'LT2'</span>)
0104     [MachineName, SubMachineName, LinkFlag, MMLROOT] = <a href="setpathmml.html" class="code" title="function [MachineName, SubMachineName, LinkFlag, MMLROOT] = setpathmml(varargin)">setpathmml</a>(Machine, <span class="string">'LT2'</span>,         <span class="string">'Transport'</span>,   LinkFlag);
0105 <span class="keyword">else</span>
0106     error(<span class="string">'SubMachineName %s unknown'</span>, SubMachineName);
0107 <span class="keyword">end</span>
0108 
0109 <span class="keyword">try</span>
0110   <span class="comment">%% Proprietes par defauts</span>
0111     <span class="comment">%% Impression</span>
0112     set(0,<span class="string">'DefaultFigurePaperType'</span>,<span class="string">'a4'</span>);
0113     set(0,<span class="string">'DefaultFigurePaperUnits'</span>,<span class="string">'centimeters'</span>);
0114     <span class="comment">% commande type pour imprimer</span>
0115     <span class="comment">% print</span>
0116     <span class="comment">% l'imprimante Color</span>
0117     <span class="comment">% print -Pcolor</span>
0118     <span class="comment">% postcript level 2 en couleur</span>
0119     <span class="comment">% print -dps2c -Pcolor</span>
0120 
0121     warning off MATLAB:dispatcher:InexactMatch
0122 
0123     <span class="comment">% cycling over 15 different color</span>
0124     set(0,<span class="string">'DefaultAxesColorOrder'</span>,(colordg(1:15)));
0125 
0126     <span class="comment">% Repertoire par defaut</span>
0127     <span class="keyword">if</span> ispc
0128         cd(getenv(<span class="string">'HOME_OPERATION'</span>));
0129     <span class="keyword">else</span>
0130         <span class="comment">% default starting directory</span>
0131         cd(getenv(<span class="string">'HOME'</span>));
0132     <span class="keyword">end</span>
0133     disp(<span class="string">'Ready'</span>)
0134 <span class="keyword">catch</span>
0135     disp(<span class="string">'Error'</span>)
0136 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 21-May-2007 15:29:18 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>