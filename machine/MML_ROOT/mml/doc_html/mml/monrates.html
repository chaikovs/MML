<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of monrates</title>
  <meta name="keywords" content="monrates">
  <meta name="description" content="MONRATES - Tests the analog monitor data rate for BPMs and corrector magnets">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html &copy; 2003 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">mml</a> &gt; monrates.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for mml&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>monrates
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>MONRATES - Tests the analog monitor data rate for BPMs and corrector magnets</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function monrates </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">MONRATES - Tests the analog monitor data rate for BPMs and corrector magnets

  Tests the analog monitor data rate for BPMs and corrector magnets 
  This test will only work if the AM value is very noisy.  (But it 
  always is, if the BPMs are calibrated.)</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="getlist.html" class="code" title="function DeviceList = getlist(varargin)">getlist</a>	GETLIST - Returns Device List for a Family</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->


<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function monrates</a>
0002 <span class="comment">%MONRATES - Tests the analog monitor data rate for BPMs and corrector magnets</span>
0003 <span class="comment">%</span>
0004 <span class="comment">%  Tests the analog monitor data rate for BPMs and corrector magnets</span>
0005 <span class="comment">%  This test will only work if the AM value is very noisy.  (But it</span>
0006 <span class="comment">%  always is, if the BPMs are calibrated.)</span>
0007 
0008 <span class="comment">%</span>
0009 <span class="comment">% Written by Gregory J. Portmann, ALS</span>
0010 <span class="comment">%</span>
0011 <span class="comment">% TODO: adaptation for SOLEIL</span>
0012 
0013 alsglobe
0014 
0015 
0016 <span class="comment">% BPM Sample Rates</span>
0017 <span class="comment">%StanRate = input('  What is the Stanford timer rate [Hz] = ');</span>
0018 List = <a href="getlist.html" class="code" title="function DeviceList = getlist(varargin)">getlist</a>(<span class="string">'BPMx'</span>);
0019 <span class="keyword">if</span> strcmp(computer, <span class="string">'PCWIN'</span>)
0020    [BPMxrate, HCMn] = getrate(<span class="string">'BPMx'</span>, List, 4);
0021 <span class="keyword">else</span>
0022    [BPMxrate, HCMn] = getrate(<span class="string">'BPMx'</span>, List, 10);
0023 <span class="keyword">end</span>
0024 disp(<span class="string">'  '</span>);
0025 
0026 figure; clf
0027 subplot(4,1,1);
0028 sector = 1+((1:96)-1)/8 + 1/16;
0029 bar(sector(BPMelem), BPMxrate);
0030 set(gca,<span class="string">'XTick'</span>,1:12)
0031 xaxis([1 13]);
0032 <span class="comment">%title(['BPM Sample Rates (Stanford Timer at ', num2str(StanRate),' Hz)', ' ', date]);</span>
0033 title([<span class="string">'BPM Data Rates'</span>]);
0034 xlabel(<span class="string">'Sector Number'</span>);
0035 ylabel(<span class="string">'Data Rate [Hz]'</span>);
0036 
0037 
0038 <span class="comment">% IDBPM Sample Rates</span>
0039 List = <a href="getlist.html" class="code" title="function DeviceList = getlist(varargin)">getlist</a>(<span class="string">'IDBPMx'</span>);
0040 <span class="keyword">if</span> strcmp(computer, <span class="string">'PCWIN'</span>)
0041    [IDBPMxrate, HCMn] = getrate(<span class="string">'IDBPMx'</span>, List, 4);
0042 <span class="keyword">else</span>
0043    [IDBPMxrate, HCMn] = getrate(<span class="string">'IDBPMx'</span>, List, 10);
0044 <span class="keyword">end</span>
0045 disp(<span class="string">'  '</span>);
0046 
0047 subplot(4,1,2);
0048 sector = 1+(IDBPMelem-1)/2 + 1/4;
0049 bar(sector,IDBPMxrate);
0050 set(gca,<span class="string">'XTick'</span>,1:12)
0051 xaxis([1 13]);
0052 title([<span class="string">'IDBPM Data Rates'</span>]);
0053 xlabel(<span class="string">'Sector'</span>);
0054 ylabel(<span class="string">'Data Rate [Hz]'</span>);
0055 
0056 
0057 <span class="comment">% HCM sample rates</span>
0058 [HCMrate, HCMn] = getrate(<span class="string">'HCM'</span>, HCMlist, 4);
0059 disp(<span class="string">'  '</span>);
0060 
0061 subplot(4,1,3);
0062 sector = 1+((1:96)-1)/8 + 1/16;
0063 bar(sector(HCMelem), HCMrate);
0064 set(gca,<span class="string">'XTick'</span>,1:12)
0065 xaxis([1 13]);
0066 title([<span class="string">'Horizontal Corrector Magnet Analog Monitor Data Rate'</span>]);
0067 xlabel(<span class="string">'Sector'</span>);
0068 ylabel(<span class="string">'Data Rate [Hz]'</span>);
0069 
0070 
0071 <span class="comment">% VCM sample rates</span>
0072 [VCMrate, VCMn] = getrate(<span class="string">'VCM'</span>, VCMlist, 4);
0073 disp(<span class="string">'  '</span>);
0074 
0075 subplot(4,1,4);
0076 sector = 1+((1:96)-1)/8 + 1/16;
0077 bar(sector(VCMelem), VCMrate);
0078 set(gca,<span class="string">'XTick'</span>,1:12)
0079 xaxis([1 13]);
0080 title([<span class="string">'Vertical Corrector Magnet Analog Monitor Data Rates'</span>]);
0081 xlabel(<span class="string">'Sector'</span>);
0082 ylabel(<span class="string">'Data Rate [Hz]'</span>);
0083 
0084 
0085 addlabel(sprintf(<span class="string">'%.1f GeV, %s'</span>, GLOBAL_SR_GEV, date));
0086 orient tall</pre></div>
<hr><address>Generated on Mon 21-May-2007 15:29:18 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/">m2html</a></strong> &copy; 2003</address>
</body>
</html>