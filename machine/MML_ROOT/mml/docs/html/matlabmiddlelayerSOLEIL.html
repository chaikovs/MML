<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-15">
	<TITLE>Matlab Middle Layer</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.1  (Linux)">
	<META NAME="AUTHOR" CONTENT="Nadolski">
	<META NAME="CREATED" CONTENT="20040315;16160000">
	<META NAME="CHANGEDBY" CONTENT="Laurent Nadolski">
	<META NAME="CHANGED" CONTENT="20040601;11141000">
	<META NAME="DESCRIPTION" CONTENT="Version 0">
	<STYLE>
	<!--
		@page { size: 8.27in 11.69in; margin-left: 1.04in; margin-right: 0.99in; margin-top: 0.98in; margin-bottom: 0.49in }
		P { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: justify; widows: 2; orphans: 2; page-break-before: auto }
		P.western { font-family: "Times New Roman", serif; font-size: 12pt; so-language: fr-FR }
		P.cjk { font-family: "Times New Roman", serif; font-size: 12pt }
		P.ctl { font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		P.alinéa-western { text-indent: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: fr-FR }
		P.alinéa-cjk { text-indent: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt }
		P.alinéa-ctl { text-indent: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		P.alinéa-négatif-western { margin-left: 0.39in; text-indent: -0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: fr-FR }
		P.alinéa-négatif-cjk { margin-left: 0.39in; text-indent: -0.2in; font-family: "Times New Roman", serif; font-size: 12pt }
		P.alinéa-négatif-ctl { margin-left: 0.39in; text-indent: -0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		P.retrait-du-corps-de-texte--western { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: fr-FR }
		P.retrait-du-corps-de-texte--cjk { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt }
		P.retrait-du-corps-de-texte--ctl { margin-left: 0.2in; font-family: "Times New Roman", serif; font-size: 12pt; so-language: ar-SA }
		H1 { margin-top: 0in; margin-bottom: 0in; direction: ltr; color: #000000; text-align: justify; widows: 2; orphans: 2; page-break-before: auto }
		H1.western { font-family: "Arial", sans-serif; font-size: 14pt; so-language: fr-FR }
		H1.cjk { font-family: "Times New Roman", serif; font-size: 14pt }
		H1.ctl { font-family: "Arial", sans-serif; font-size: 12pt; so-language: ar-SA }
		H2 { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: justify; widows: 2; orphans: 2; page-break-before: auto }
		H2.western { font-family: "Bitstream Vera Sans", sans-serif; font-size: 14pt; so-language: fr-FR; font-style: italic }
		H2.cjk { font-family: "Mincho"; font-size: 14pt; font-style: italic }
		H2.ctl { font-size: 14pt; so-language: ar-SA; font-style: italic }
		H3 { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: justify; widows: 2; orphans: 2; page-break-before: auto }
		H3.western { font-family: "Bitstream Vera Sans", sans-serif; so-language: fr-FR }
		H3.cjk { font-family: "Mincho" }
		H3.ctl { so-language: ar-SA }
		H4 { margin-top: 0in; margin-bottom: 0in; direction: ltr; color: #000000; text-align: justify; widows: 2; orphans: 2; page-break-before: auto }
		H4.western { font-family: "Times New Roman", serif; so-language: fr-FR }
		H4.cjk { font-family: "Times New Roman", serif }
		H4.ctl { font-family: "Times New Roman", serif; so-language: ar-SA }
		H5 { margin-bottom: 0.08in; direction: ltr; color: #000000; text-align: justify; widows: 2; orphans: 2; page-break-before: auto }
		H5.western { font-family: "Bitstream Vera Sans", sans-serif; font-size: 11pt; so-language: fr-FR }
		H5.cjk { font-family: "Mincho"; font-size: 11pt }
		H5.ctl { font-size: 11pt; so-language: ar-SA }
		P.sdfootnote-western { margin-left: 0.2in; text-indent: -0.2in; margin-bottom: 0in; font-family: "Times New Roman", serif; font-size: 10pt; so-language: fr-FR }
		P.sdfootnote-cjk { margin-left: 0.2in; text-indent: -0.2in; margin-bottom: 0in; font-family: "Times New Roman", serif; font-size: 10pt }
		P.sdfootnote-ctl { margin-left: 0.2in; text-indent: -0.2in; margin-bottom: 0in; font-family: "Times New Roman", serif; font-size: 10pt; so-language: ar-SA }
		A.sdfootnoteanc { font-size: 57% }
	-->
	</STYLE>
</HEAD>
<BODY LANG="fr-FR" TEXT="#000000" DIR="LTR">
<DIV TYPE=HEADER>
	<P STYLE="margin-bottom: 0.2in"><B>	Document en cours de r&eacute;daction	</B></P>
</DIV>
<P LANG="" CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_m46ac6f87.gif" ALIGN=LEFT><BR>
</P>
<P LANG="" CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_m1b6465fa.gif" ALIGN=LEFT HSPACE=14><SPAN ID="Cadre2" DIR="LTR" STYLE="float: left; width: 6.37in; height: 0.92in; border: none; padding: 0in; background: #ffffff">
	<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><FONT SIZE=6>Matlab
	Middle Layer &agrave; SOLEIL : contr&ocirc;le commande des
	installations via Matlab</FONT></P>
</SPAN>
<SPAN ID="Cadre1" DIR="LTR" STYLE="float: left; width: 7.13in; height: 5.13in; border: none; padding: 0in; background: #ffffff">
	<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
	</P>
	<CENTER>
		<TABLE DIR="LTR" WIDTH=749 BORDER=1 BORDERCOLOR="#000000" CELLPADDING=5 CELLSPACING=0 FRAME=BELOW RULES=GROUPS>
			<COL WIDTH=151>
			<COL WIDTH=106>
			<COL WIDTH=106>
			<COL WIDTH=106>
			<COL WIDTH=116>
			<COL WIDTH=106>
			<TBODY>
				<TR VALIGN=TOP>
					<TD WIDTH=151 HEIGHT=34>
						<P CLASS="western"><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 11pt"><B>Diffusion&nbsp;:</B></FONT></FONT></P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western"><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western"><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western"><BR>
						</P>
					</TD>
					<TD WIDTH=116>
						<P CLASS="western"><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western"><BR>
						</P>
					</TD>
				</TR>
				<TR>
					<TD COLSPAN=6 WIDTH=739 HEIGHT=92 VALIGN=TOP>
						<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE=2><I>Liste
						de diffusion&nbsp;:</I></FONT></FONT></P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="Arial, sans-serif"><FONT SIZE=2><I>Groupe
						Physique Machine</I></FONT></FONT></P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
						</P>
						<P CLASS="western"><BR>
						</P>
					</TD>
				</TR>
			</TBODY>
			<TBODY>
				<TR>
					<TD WIDTH=151 HEIGHT=34>
						<P CLASS="western" ALIGN=CENTER><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 9pt"><B>Date&nbsp;:</B></FONT></FONT></P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 9pt"><B>R&eacute;dacteur&nbsp;:</B></FONT></FONT></P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 9pt"><B>V&eacute;rificateur&nbsp;:</B></FONT></FONT></P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 9pt"><B>Approbateur&nbsp;:</B></FONT></FONT></P>
					</TD>
					<TD WIDTH=116>
						<P CLASS="western" ALIGN=CENTER><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 9pt"><B>Modifications&nbsp;:</B></FONT></FONT></P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><FONT FACE="Arial, sans-serif"><FONT SIZE=2 STYLE="font-size: 9pt"><B>Indice&nbsp;:</B></FONT></FONT></P>
					</TD>
				</TR>
			</TBODY>
			<TBODY>
				<TR>
					<TD WIDTH=151 HEIGHT=34 SDVAL="38107" SDNUM="1036;0;JJ/MM/AA">
						<P CLASS="western" ALIGN=CENTER>30/04/04</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER>L. Nadolski</P>
					</TD>
					<TD WIDTH=106>
						<P ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=116>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
				</TR>
			</TBODY>
			<TBODY>
				<TR>
					<TD WIDTH=151 HEIGHT=34>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=116>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
				</TR>
			</TBODY>
			<TBODY>
				<TR>
					<TD WIDTH=151 HEIGHT=34>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=116>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
				</TR>
			</TBODY>
			<TBODY>
				<TR>
					<TD WIDTH=151 HEIGHT=33>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=116>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
					<TD WIDTH=106>
						<P CLASS="western" ALIGN=CENTER><BR>
						</P>
					</TD>
				</TR>
			</TBODY>
		</TABLE>
	</CENTER>
	<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
	</P>
</SPAN><BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in; page-break-before: always">
<BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in; page-break-before: always">
<BR>
</P>
<DIV ID="Table des mati&egrave;res1" DIR="LTR" STYLE="background: transparent">
	<DIV ID="Table des mati&egrave;res1_Head" DIR="LTR">
		<P STYLE="margin-top: 0.17in; page-break-after: avoid"><FONT FACE="Bitstream Vera Sans, sans-serif"><FONT SIZE=4 STYLE="font-size: 16pt"><B>Table
		des mati&egrave;res</B></FONT></FONT></P>
	</DIV>
	<P STYLE="margin-bottom: 0in">1.Introduction	6</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.1 Historique	6</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.2 Pr&eacute;sentation	7</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.3 Sch&eacute;ma
	de principe	7</P>
	<P STYLE="margin-bottom: 0in">2 Nomenclature du &laquo;&nbsp;Matlab
	Middle Layer&nbsp;&raquo; 	9</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">2.1
	Familles/devices	9</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">2.2 Fonctions	9</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">2.3 Familles
	d&eacute;finies dans le middle layer 	10</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">2.4 Les modes	12</P>
	<P STYLE="margin-bottom: 0in">3 Fonctions de bases de la couche
	interm&eacute;diaire	12</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.1 Introduction
		12</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.2 Fonctions de
	base du MML	13</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.2.1  Fonctions
	de base lecture/&eacute;criture	13</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.2.2 Fonctions
	pour changer de mode de la session Matlab	13</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.3 Fonctions de
	conversion entre les diff&eacute;rentes nomenclatures	14</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.4 Fonctions pour
	obtenir des donn&eacute;es du MML 	14</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.5
	Sauvegarde/restauration d'une configuration machine	16</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.5.1 La fonction
	getmachineconfig	16</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.5.2 La fonction
	setmachineconfig	16</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.5.3 IHM
	configgui	17</P>
	<P STYLE="margin-bottom: 0in">4 Alias de fonctions courantes	17</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.1 D&eacute;finition	17</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.2 Quelques alias
	de la fonction getpv	18</P>
	<P STYLE="margin-bottom: 0in">5 Fonctions sp&eacute;ciales	18</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">5.1
	Introduction	18</P>
	<P STYLE="margin-bottom: 0in">6 Fonctions pour la Physique
	Machine	19</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.1
	Introduction	19</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.2 Fonctions
	g&eacute;n&eacute;rales pour la Physique Machine	19</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.3 Matrices
	r&eacute;ponse	20</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.4 Feedforward
	pour les insertions	21</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.5 V&eacute;rification
	du syst&egrave;me	21</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.6 Fonctions
	propre au mod&egrave;le en ligne	22</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">6.7 Fonctions
	diverses	23</P>
	<P STYLE="margin-bottom: 0in">7 Gestion de donn&eacute;es	23</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">7.1
	Introduction	23</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">7.2 Donn&eacute;es
	machine quasi statiques	24</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">7.3 Donn&eacute;es
	physiques n&eacute;cessitant une mise &agrave; jour r&eacute;guli&egrave;re	24</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">7.4 Sauvegarde et
	restauration de param&egrave;tres machine	25</P>
	<P STYLE="margin-bottom: 0in">8 Structuration des donn&eacute;es	25</P>
	<P STYLE="margin-bottom: 0in">9 Mesure de matrices r&eacute;ponse	26</P>
	<P STYLE="margin-bottom: 0in">10 Fonctions de contr&ocirc;le
	commande de haut niveau	28</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">10.1
	Introduction	28</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">10.2 Liste de
	fonctions et applications	29</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">10.3 Correction de
	l'orbite ferm&eacute;e (SETORBIT)	30</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">10.4 Bump local
	d'orbite ferm&eacute;e	30</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">10.5 Interfaces
	graphiques 	31</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">10.5.1 Affichage
	(plotfamily)	31</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">10.5.2 Correction
	d'orbite	31</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">10.5.3 BEAM BASED
	ALIGNMENT	31</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">10.5.4 MML pour
	le d&eacute;marrage et l'op&eacute;ration des installations	31</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">Annexe 1 R&eacute;sum&eacute;
	de commandes utiles	32</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.1
	Mesurer/sauvegarder une orbite	32</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.2 Les fonctions
	getpv et setpv	33</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.4 Lire la valeur
	de consigne et de relecture / sp&eacute;cifier une nouvelle valeur
	de consigne sur une alimentation	38</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.5 Mesure d&rsquo;une
	matrice r&eacute;ponse	39</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.6 Pr&eacute;parer
	 un fichier pour une analyse avec LOCO	40</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.7 Get/Set/Step
	RF frequency	40</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.8 Mesurer,
	sauvegarder, dessiner la fonction dispersion	40</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.9 Nombres
	d'ondes	41</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">1.9.1 Lire et
	changer les nombres d'ondes	42</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">1.9.2 Mesure de
	la matrice r&eacute;ponse des nombres d&rsquo;onde	42</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">1.9.4 Changements
	relatifs des nombres d&rsquo;ondes	42</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.10
	Chromaticit&eacute;s	43</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">1.10.1 Mesure de
	la chromaticit&eacute;	43</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">1.10.2 Mesure de
	la matrice r&eacute;ponse des chromaticit&eacute;s	44</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">1.10.3 Variations
	relatives des chromaticit&eacute;s et mesure de la matrice
	r&eacute;ponse	44</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.11
	Sauvegarde/restauration	45</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.12 &laquo;&nbsp;Beam
	based alignment&nbsp;&raquo;	45</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.14 Fonctions
	pour manipuler les insertions	45</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.15 Fonctions
	propres au mod&egrave;le AT	45</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">1.16 Exemple de
	script Matlab pour corriger l'orbite ferm&eacute;e	46</P>
	<P STYLE="margin-bottom: 0in">Annexe 2 Installation du MML	48</P>
	<P STYLE="margin-bottom: 0in">Annexe 3 Aides de programmation	48</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.1 R&egrave;gles
	de programmation	48</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.2 Aide en
	ligne	48</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.3 Gestion des
	erreurs	49</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">3.4 G&eacute;n&eacute;ration
	de documentation	49</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.4.1 Contenu
	d'un r&eacute;pertoire	49</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.4.2 G&eacute;n&eacute;ration
	de documentation html<BR>	49</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">3.4.3 Note
	importante	50</P>
	<P STYLE="margin-bottom: 0in">Annexe 4  Cr&eacute;ation de
	familles	51</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.1.1
	Introduction	51</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.2 Structure
	principale pour l&rsquo;agencement des donn&eacute;es	51</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.3 Sub-family
	structure for monitors	52</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.4 Sub-family
	structure for setpoints	52</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.5 R&egrave;gles
	g&eacute;n&eacute;rales	53</P>
	<P STYLE="margin-left: 0.2in; margin-bottom: 0in">4.6 Champs
	suppl&eacute;mentaires pour utiliser l&rsquo;Accelerator Toolbox.	54</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">4.6.1
	AcceleratorObject.(Family).AT (simulateur uniquement)	54</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">4.6.2 Notes
	concernant le simulateur	54</P>
	<P STYLE="margin-bottom: 0in">Annexe 5 Stockage des donn&eacute;es<BR>	55</P>
	<P STYLE="margin-bottom: 0in">5.1 Introduction	55</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">5.2 Accelerator
	Object (AO) 	55</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">5.4 Accelerator
	Data (AD)	55</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">5.6 Physics Data
		56</P>
	<P STYLE="margin-bottom: 0in">Annexe 6 Unit&eacute;s hardware et
	physique	57</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">6.1
	Introduction	57</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">6.2 Unit&eacute;s
	mat&eacute;rielles (&laquo;&nbsp;Hardware Units&nbsp;&raquo;)	57</P>
	<P STYLE="margin-left: 0.39in; margin-bottom: 0in">6.4 Unit&eacute;s
	physiques (&laquo;&nbsp;Physics Units&nbsp;&raquo;)	57</P>
</DIV>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><H1 CLASS="western" STYLE="page-break-before: always">Introduction</H1>
</OL>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Ce document d&eacute;crit
la couche logicielle entre le <SPAN LANG="en-US">binding</SPAN>
Tango/Matlab &eacute;crit par Nicolas Leclercq et les interfaces
Matlab de haut niveau pour le contr&ocirc;le commande. Cette couche
vise &agrave; d&eacute;finir un niveau d&rsquo;abstraction entre les
commandes Tango et les actions que les physiciens des acc&eacute;l&eacute;rateurs
veulent mettre en oeuvre. Elle a pour vocation de rendre plus
transparent le contr&ocirc;le des installations de SOLEIL en
d&eacute;finissant un jeu de commandes haut niveau, riche, intuitif
et facile d&rsquo;utilisation pour un non expert du syst&egrave;me de
contr&ocirc;le commande. L&rsquo;ensemble de ce travail repose sur
les d&eacute;veloppements faits par Gregory J. Portmann &agrave;
l&rsquo;Advanced Light Source (Berkeley) et  &agrave; SPEAR3 
(Stanford, USA).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	L&rsquo;essentiel du
travail a consist&eacute; dans un premier temps &agrave; substituer
la couche EPICS par la couche TANGO. Ensuite, un jeu de commandes
compl&eacute;mentaires a &eacute;t&eacute; ajout&eacute; afin de
permettre une utilisation plus ais&eacute;e &agrave; SOLEIL.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; border: 2.50pt solid #800000; padding: 0.02in">
<B>IMPORTANT :</B> Ce document est reprend en fran&ccedil;ais une
grande partie de la note technique intitul&eacute;e &laquo;&nbsp;Middle
Layer Sofware For Accelerator Control&nbsp;&raquo;, Note SPEAR3,
November 2003, Gregogy J. Portmann, Jeff Corbett, and Andrei
Terebilo.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">1.1 Historique</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	Hiroshi Nishimura propose en 19?? d&rsquo;utiliser
Matlab[1] dans une salle de contr&ocirc;le. Gregory Portmann d&eacute;cide
d&rsquo;&eacute;crire un jeu de fonctions pour l&rsquo;ALS. A SSRL,
Andrei Terebilo &eacute;crit l&rsquo;Accelerator Toolbox (AT) comme
simulateur de faisceau. Cette partie est effectivement une boite &agrave;
outils (&laquo;&nbsp;<SPAN LANG="en-US">toolbox</SPAN>&nbsp;&raquo;)
de Matlab reprenant le coeur du code de simulation Tracy 2 d&eacute;velopp&eacute;
&agrave; l&rsquo;ALS au d&eacute;but des ann&eacute;es 90 par Johan
Bengsston, Etienne Forest et Hiroshi Nishimura. R&eacute;cemment
(199?), James Safranek et Gregory Portmann ont &eacute;galement port&eacute;
le programme LOCO sous Matlab. En vue de d&eacute;velopper le syst&egrave;me
de contr&ocirc;le de SPEAR3, La grande majorit&eacute; des fonctions
&eacute;crites &agrave; l&rsquo;ALS ont &eacute;t&eacute; port&eacute;es
&agrave; SPEAR3. Ces routines d&eacute;finissent le &laquo;&nbsp;<SPAN LANG="en-US">middle</SPAN>
layer&nbsp;&raquo; qui simplifie le d&eacute;veloppement
d&rsquo;application de haut niveau tout en masquant les d&eacute;tails
du syst&egrave;me de contr&ocirc;le (routines de bas niveau,
nomenclature TANGO).</P>
<P CLASS="western">	A l'ALS , Matlab est utilis&eacute; pour le
contr&ocirc;le de l'anneau de stockage depuis une dizaine d'ann&eacute;es.
Ce qui inclut la mont&eacute;e en &eacute;nergie de tous les aimants
de 1.5 GeV &agrave; 1.9 GeV, la sauvegarde et restauration des
configurations machine, le feedback lent d'orbite, le beam based
alignement, la correction des nombres d'ondes, des chromaticit&eacute;s,
les mesures de matrices r&eacute;ponse, les scripts et programmes
d&eacute;di&eacute;s au run de physique machine et &agrave;
l'op&eacute;ration. La toolbox &laquo;&nbsp;Simple Channel Access&nbsp;&raquo;
a &eacute;t&eacute; d&eacute;velopp&eacute;e pour faire le pont
logiciel en Matlab et le monde EPICS <SPAN STYLE="text-decoration: none"><FONT FACE="Arial, sans-serif"><FONT COLOR="#000000">[2][3].</FONT></FONT></SPAN></P>
<P CLASS="western">	A SSRL, en vue de SPEAR3, une nouvelle toolbox,
Matlab Channel Access (MCA) a &eacute;t&eacute; &eacute;crite pour
communiquer avec EPICS. Matlab est utilis&eacute; maintenant utilis&eacute;
de mani&egrave;re similaire &agrave; l'ALS. Le concept est porteur et
permet d'&ecirc;tre rapidement adapt&eacute; pour une utilisation
dans une autre acc&eacute;l&eacute;rateur. Par exmple, le source de
troisi&egrave;me g&eacute;n&eacute;ration canadienne (CLS) a
&eacute;galement adapt&eacute; Matlab en salle de contr&ocirc;le et
la toolbox MCA.	</P>
<H2 CLASS="western">1.2 Pr&eacute;sentation</H2>
<P CLASS="western">	Le &laquo;&nbsp;Matlab M<SPAN LANG="en-US">iddle</SPAN>
Layer&nbsp;&raquo; (MML) est con&ccedil;u de mani&egrave;re
ind&eacute;pendante de l&rsquo;acc&eacute;l&eacute;rateur &agrave;
piloter. Seule la couche bas niveau d&eacute;pend du type de syst&egrave;me
de contr&ocirc;le commande. Elle repose soit sur EPICS [4] (Spear3 [5],
ALS [6], CLS [7]) ou TANGO [8] (SOLEIL). C'est cette partie qui a
d'abord due &ecirc;tre cr&eacute;&eacute;e et &eacute;crite pour
SOLEIL. De ce fait, tout le reste est commun entre les acc&eacute;l&eacute;rateurs,
ce qui permet d&rsquo;utiliser les d&eacute;veloppements r&eacute;alis&eacute;s
ailleurs et de partager de nouvelles fonctionnalit&eacute;s.</P>
<P CLASS="western">	Concr&egrave;tement, pour une machine donn&eacute;e,
il suffit de d&eacute;finir dans un fichier d&rsquo;initialisation
les param&egrave;tres sp&eacute;cifiques &agrave; l&rsquo;acc&eacute;l&eacute;rateur
comme les param&egrave;tres physiques (&eacute;nergie, &eacute;mittance,
mod&egrave;le) et les param&egrave;tres de contr&ocirc;le (&laquo;&nbsp;<SPAN LANG="en-US">channel</SPAN>
<SPAN LANG="en-US">names</SPAN>&nbsp;&raquo; pour le monde EPICS, les
noms des <SPAN LANG="en-US">devices, </SPAN>attributs et commandes
pour le monde TANGO).</P>
<P CLASS="western">	Le &laquo;&nbsp;Matlab Middle Layer&nbsp;&raquo;
est construit autour de deux structures Matlab contenant toute la
configuration physique et contr&ocirc;le de l&rsquo;acc&eacute;l&eacute;rateur.</P>
<P CLASS="western"><BR><BR>
</P>
<OL>
	<LI><P CLASS="alin&eacute;a-western" ALIGN=JUSTIFY STYLE="text-indent: 0in">
	<B>La structure AO (Accelerator Object) </B>
	</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	Cette structure
contient la description de chaque &eacute;l&eacute;ment et famille
d&rsquo;&eacute;l&eacute;ments (indice des &eacute;l&eacute;ments,
nomenclature TANGO, etc.), les fonctions &agrave; appeler pour
communiquer avec le monde TANGO, les fonctions de conversion entre
les unit&eacute;s mat&eacute;rielles (&laquo;&nbsp;display unit&nbsp;&raquo;
au sens TANGO) et les unit&eacute;s physiques&nbsp; (i.e. dans le
syst&egrave;me international ou encore &laquo;&nbsp;standard unit&nbsp;&raquo;
au sens TANGO). 
</P>
<P CLASS="alin&eacute;a-western" ALIGN=JUSTIFY STYLE="text-indent: 0in">
<BR><BR>
</P>
<OL START=2>
	<LI><P CLASS="alin&eacute;a-western" ALIGN=JUSTIFY STYLE="text-indent: 0in">
	<B>La structure AD (Accelerator Data)</B></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	Cette structure
contient les noms de fichiers, r&eacute;pertoires pour les
sauvegardes, configurations, les param&egrave;tres acc&eacute;l&eacute;rateurs.</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les structures AO et
AD sont stock&eacute;es dans l&rsquo;objet Matlab <I>ApplicationData(0)</I>
(cf. <I>getappdata(0)</I>). Ces deux structures sont accessibles dans
l&rsquo;espace de travail Matlab &agrave; l&rsquo;aide des commandes
respectives <I>getao</I> et <I>getad</I><SPAN STYLE="font-style: normal">.
La commande </SPAN><I>aoinit</I><SPAN STYLE="font-style: normal">
permet d&rsquo;initialiser ces deux structures, voir aussi le fichier
</SPAN><I>soleilinit.m</I><SPAN STYLE="font-style: normal">.</SPAN></P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">1.3 Sch&eacute;ma de principe</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Le Matlab Middle Layer
d&eacute;finit une biblioth&egrave;que de fonctions permettant
d'acc&eacute;der ou bien au monde Tango via le binding Tango/Matlab[9],
ou bien au simulateur : l'Accelerator Toolbox [2]. Il y a &eacute;galement
la possibilit&eacute; de se connecter &agrave; un mod&egrave;le
virtuel de la machine tournant sous Tango et simulant les &eacute;quipements
(pseudo devices Tango) et/ou la machine via le serveur Tracy2 (cf.
Illustration 0.1). Le serveur Tracy2 permet de simuler la machine
sans passer par l'Accelerator Toolbox (AT). La bo&icirc;te &agrave;
outil AT manipule une structure (<I>THERING</I>) d&eacute;crivant
l'acc&eacute;l&eacute;rateur d&eacute;fini localement sur
l'ordinateur o&ugrave; tourne Matlab. 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN ID="Cadre4" DIR="LTR" STYLE="float: left; width: 5.96in; height: 3.22in; border: none; padding: 0in; background: #ffffff">
	<P STYLE="margin-top: 0.08in"><SPAN ID="Cadre6" DIR="LTR" STYLE="float: left; width: 100%; height: 255%; border: 1px solid #000000; padding: 0.02in; background: #ccccff">
		<P STYLE="margin-top: 0.08in"><IMG SRC="matlabmiddlelayerSOLEIL_html_m7e2faabb.gif" NAME="Objet1" ALIGN=LEFT WIDTH=100%><BR CLEAR=LEFT><FONT SIZE=2><I>Illustration
		0.1Principe du Matlab Middle Layer</I></FONT></P>
	</SPAN><BR CLEAR=LEFT><BR><BR>
	</P>
</SPAN><BR CLEAR=LEFT><BR>
</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Une des principales
fonctions du MML est de traduire la nomenclature des attributs des
&eacute;quipements des acc&eacute;l&eacute;rateurs en noms facilement
maniables par des personnes non expertes du syst&egrave;me de
contr&ocirc;le commande. Ainsi, les &eacute;quipements sont organis&eacute;s
en groupes, appel&eacute;s familles, sous groupes (champs de ces
familles) et &laquo;&nbsp;device<A CLASS="sdfootnoteanc" NAME="sdfootnote1anc" HREF="#sdfootnote1sym"><SUP>1</SUP></A>&nbsp;&raquo;
(&eacute;quipement). Ainsi est-il possible de dialoguer avec les
&eacute;quipements de mani&egrave;re transparente en utilisant les
m&ecirc;mes noms, et ceci que la communication se fasse avec la
machine en ligne ou avec le simulateur.</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Le coeur  du MML est
la structure Matlab appel&eacute;e Accelerator Object (AO). Elle
contient les d&eacute;finitions de tous les &eacute;l&eacute;ments
des diff&eacute;rentes familles, la nomenclature Tango des
&eacute;quipements et de leurs attributs, les facteurs de conversion
entre les unit&eacute;s physique et hardware, etc. Cette structure
est facilement &eacute;ditable et configurable puisque que c'est un
simple fichier texte (soleilinit.m). L'AO r&eacute;side en m&eacute;moire
local l&nbsp;'espace de travail de Matlab dans la structure
ApplicationData. Une structure compl&eacute;mentaire appel&eacute;e
Accelerator Data (AD) contient l'arborescence des fichiers et
r&eacute;pertoires de sauvegardes, les param&egrave;tres de
l'acc&eacute;l&eacute;rateur. Comme l'AO, cette structure r&eacute;side
dans l'espace de travail de Matlab. La commande <I>aoinit</I><SPAN STYLE="font-style: normal">
permet de configurer ces deux structures. L'annexe page 54 d&eacute;taille
comment faire l'initialisation.</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western">2 Nomenclature du &laquo;&nbsp;Matlab Middle
Layer&nbsp;&raquo; 
</H1>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	La convention pour la nomenclature du MML se
d&eacute;cline (en anglais) de la fa&ccedil;on suivante :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">2.1 Familles/<SPAN LANG="en-US">devices</SPAN></H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western">	Le Tableau 2.1 contient les champ principaux
usuels requis pour chaque familles du MML.</P>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=686 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=125>
	<COL WIDTH=277>
	<COL WIDTH=260>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western"><B>Champ</B></P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western"><B>Description</B></P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western"><B>Type Matlab</B></P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western">Family 
				</P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western">Descripteur de groupe  
				</P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western">cha&icirc;ne de caract&egrave;res</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">Field
				</FONT>
				</P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">Champ
				associ&eacute; au descripteur </FONT>
				</P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">cha&icirc;ne
				de caract&egrave;res</FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">DeviceList
				</FONT>
				</P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">[Cellule
				El&eacute;ment_dans_cellule]</FONT></P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">matrice
				deux colonnes</FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">ElementList</FONT></P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">Num&eacute;ro
				d'&eacute;l&eacute;ment dans la famille</FONT></P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">vecteur
				colonne</FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">CommonName</FONT></P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">Nom
				commun</FONT></P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western"><FONT FACE="CG Times (W1), Times New Roman, serif">cha&icirc;ne
				de caract&egrave;res (facultatif)</FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=125>
				<P CLASS="western">DeviceName</P>
			</TD>
			<TD WIDTH=277>
				<P CLASS="western">Nom du device TANGO</P>
			</TD>
			<TD WIDTH=260>
				<P CLASS="western">cha&icirc;ne de caract&egrave;res</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 2.1Principaux
champs pour une famille de l'Accelerator Object.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="CG Times (W1), Times New Roman, serif">	La
nomenclature TANGO est d&eacute;finie dans la note &laquo;&nbsp;Nomenclature
TANGO&nbsp;&raquo; [10].</FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">2.2 Fonctions</H2>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P CLASS="western">	Le nom des fonctions suit une nomenclature qui
d&eacute;pend du type d&rsquo;action effectu&eacute;e (cf. Tableau 2.2).</P>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: auto; page-break-inside: auto">
	<COL WIDTH=126>
	<COL WIDTH=564>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL>
					<P CLASS="western" ALIGN=CENTER><B>Pr&eacute;fixe</B></P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>R&ocirc;le de la fonction</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL>
					<LI><P CLASS="western">anal&hellip;</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Analyse d'un jeu de donn&eacute;es</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=2>
					<LI><P CLASS="western">calc...</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Calcul ou conversion &agrave; partir
					d'un jeu pr&eacute;existant de donn&eacute;es 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=3>
					<LI><P CLASS="western"><SPAN LANG="en-US">get</SPAN>&hellip;</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Lecture d'un param&egrave;tre, d'un
					attribut, d'un signal (valeurs de consigne non modifi&eacute;es)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=4>
					<LI><P CLASS="western" STYLE="margin-right: -0.25in"><SPAN LANG="en-US">meas</SPAN>&hellip;</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.25in">&ndash;
					Effectue une mesure et retourne un r&eacute;sultat (la valeurs
					de consigne son en g&eacute;n&eacute;ral modifi&eacute;es)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=5>
					<LI><P CLASS="western">mon...</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Surveille un groupe d'attribut</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=6>
					<LI><P LANG="en-US" CLASS="western">ramp...</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Monte un &eacute;nergie un groupe
					d'attributs</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=7>
					<LI><P CLASS="western">set...</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Assigne la nouvelle valeur de
					consigne</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=8>
					<LI><P LANG="en-US" CLASS="western">step...</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Incr&eacute;mente une valeur de
					consigne 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=126>
				<OL START=9>
					<LI><P LANG="en-US" CLASS="western">model...</P>
				</OL>
			</TD>
			<TD WIDTH=564>
				<OL START=0>
					<P CLASS="western">&ndash; Action sp&eacute;cifique au mod&egrave;le
					AT en ligne</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 2.2Nomenclature
des fonctions</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">2.3 Familles d&eacute;finies dans le <SPAN LANG="en-US">middle</SPAN>
layer 
</H2>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Du point du vue du
contr&ocirc;le commande, chaque signal ou commande relative &agrave;
un &eacute;quipement a une nomenclature unique (nom de <SPAN LANG="en-US">device</SPAN>,
nom de l&rsquo;attribut). Cependant cette nomenclature n&rsquo;est
jamais simple &agrave; manipuler. Le physicien des acc&eacute;l&eacute;rateurs
a, de plus, l&rsquo;habitude de raisonner en termes de familles
d&rsquo;&eacute;quipements, en nombre d&rsquo;&eacute;quipements
d&rsquo;une famille donn&eacute;e, dans une cellule donn&eacute;e. En
effet, &agrave; chaque aimant sont, par exemple, associ&eacute;es une
position, une force multip&ocirc;laire, une longueur etc.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western">	Les familles d&rsquo;&eacute;quipements pour
SOLEIL sont donn&eacute;es par le Tableau 2.3.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: auto">
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" ALIGN=CENTER STYLE="page-break-inside: avoid; page-break-after: avoid">
				<B>Famille</B></P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" ALIGN=CENTER STYLE="page-break-inside: avoid; page-break-after: avoid">
				<B>Fonction</B></P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				BEND</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Dip&ocirc;le</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.02in; margin-right: 0in; page-break-inside: avoid; page-break-after: avoid">
				Q1 &agrave; Q10</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Quadrup&ocirc;les de la famille 1 &agrave; 10</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				S1 &agrave; S10</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Sextup&ocirc;les de la famille 1 &agrave; 10</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				QT</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Quadrup&ocirc;les tourn&eacute;s</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				HCOR, VCOR</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Correcteurs lents H et V</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				FHCOR, FVCOR</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Correcteurs rapides H et V</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				BPMx, BPMz</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				BPM H et V</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				TUNE</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Nombres d'ondes</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				RF</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Fr&eacute;quence RF</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				DCCT</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				Courant</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				MachineParameters</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: avoid; page-break-after: avoid">
				mode    
				</P>
				<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: avoid; page-break-after: avoid">
				<SPAN LANG="en-US">energy</SPAN>  
				</P>
				<P CLASS="western" STYLE="margin-bottom: 0in; page-break-inside: avoid; page-break-after: avoid">
				<SPAN LANG="en-US">current</SPAN> 
				</P>
				<P LANG="en-US" CLASS="western" STYLE="page-break-inside: avoid; page-break-after: avoid">
				lifetime</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 2.3Familles
d&eacute;finies pour l'anneau</I></FONT></P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-right: 0.38in; margin-bottom: 0in; page-break-inside: avoid; page-break-after: avoid">
<BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.01in">
	De mani&egrave;re similaire &agrave; la majorit&eacute; des codes de
simulation, la MML utilise ce type de convention mais associe pour
chaque &eacute;quipement un index pour l&rsquo;&eacute;l&eacute;ment
d&rsquo;une famille (<I>element index) </I>ainsi qu&rsquo;un couple
de valeur [cellule &eacute;l&eacute;ment_dans_la_cellule] pour le
&laquo;<SPAN STYLE="font-style: normal">&nbsp;device&nbsp;</SPAN>&raquo;
(<I>device index pair). </I><SPAN STYLE="font-style: normal">L&rsquo;indexation
des &eacute;l&eacute;ments correspond &agrave; leur position physique
dans l&rsquo;anneau (voir Tableau 2.4). Par exemple, le troisi&egrave;me
correcteur lent horizontal de l&rsquo;anneau est d&eacute;sign&eacute;
selon cette convention par (HCOR, 3). De mani&egrave;re &eacute;quivalente,
en utilisant la paire [cellule, &eacute;l&eacute;ment], il est
d&eacute;sign&eacute; par (HCOR3, [1 3]). Les deux mani&egrave;res
pour acc&eacute;der &agrave; un &eacute;quipement sont &eacute;quivalentes.
Suivant l&rsquo;application, l&rsquo;une ou l&rsquo;autre sera
privil&eacute;gi&eacute;e.</SPAN></P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in">	Par
exemple, il y a 56 correcteurs lents dans chaque plan pour corriger
l&rsquo;orbite ferm&eacute;e. L&rsquo;anneau poss&egrave;de 16
cellules. Le<FONT FACE="CG Times (W1), Times New Roman, serif"> Tableau 2.4
illustre comment ces deux m&eacute;thodes fonctionnent.  En g&eacute;n&eacute;ral,
il est bien plus ais&eacute; d&rsquo;utiliser et de se souvenir des
&eacute;quipements en termes de familles et localisation qu&rsquo;en
termes de nomenclature TANGO</FONT>.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in">	Par
exemple, la fonction <I>getam</I> est utilis&eacute;e pour obtenir la
valeur de relecture d&rsquo;un attribut; <I>getam(&rsquo;HCOR&rsquo;,4)</I>
retourne la valeur de relecture du quatri&egrave;me correcteur lent
horizontal de l&rsquo;anneau.  De mani&egrave;re &eacute;quivalente,
le m&ecirc;me r&eacute;sultat peut &ecirc;tre obtenu par la commande 
<I>getam(&rsquo;HCOR&rsquo;,[2 1])</I>.  Toutes les fonctions
acceptent des entr&eacute;es sous forme de vecteurs. Autre  exemple,
la commande <I>getam(&rsquo;HCOR&rsquo;,[1 2;1 3;7 1])</I> retourne
les valeurs de relecture des deuxi&egrave;me et troisi&egrave;me
correcteurs de la cellule 1 ainsi que celle du premier correcteur de
la cellule 7; <I>getam(&rsquo;HCOR&rsquo;) ou getam(&rsquo;HCOR&rsquo;,
[])</I> retourne tous les &eacute;l&eacute;ments de la famille HCOR<I>.</I></P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=681 BORDER=2 BORDERCOLOR="#000000" CELLPADDING=8 CELLSPACING=0 RULES=COLS STYLE="page-break-after: avoid">
	<COL WIDTH=206>
	<COL WIDTH=194>
	<COL WIDTH=229>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><B>M&eacute;thode
				Famille</B></P>
				<P CLASS="western" ALIGN=CENTER><B>index &eacute;l&eacute;ment </B>
				</P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><B>M&eacute;thode
				Famille </B>
				</P>
				<P CLASS="western" ALIGN=CENTER><B>[cellule &eacute;l&eacute;ment]</B></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><B>Nom
				complet de </B>
				</P>
				<P CLASS="western" ALIGN=CENTER><B>l'attribut TANGO</B></P>
			</TD>
		</TR>
	</TBODY>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				1</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[1,1]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C01/AEsim/S1-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				2</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[1,2]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">Non
				existant aujourd'hui (r&eacute;serv&eacute;)</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				4</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[1,4]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C01/AEsim/S6-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				7</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[1,7]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C01/AEsim/S4-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				8</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[2,1]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C02/AEsim/S8.1-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				11</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[2,4]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C02/AEsim/S10.1-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				12</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[2,5]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C02/AEsim/S10.2-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				15</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[2,8]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C02/AEsim/S8.2-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">-
				- -</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">-
				- -</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=CENTER><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">
				HCOR, 117</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[16,5]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C16/AEsim/S4-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=206>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">
				HCOR, 120</SPAN></P>
			</TD>
			<TD WIDTH=194>
				<P CLASS="western" ALIGN=CENTER><SPAN STYLE="background: transparent">HCOR,
				[16,7]</SPAN></P>
			</TD>
			<TD WIDTH=229>
				<P CLASS="western" ALIGN=LEFT><FONT SIZE=2><SPAN STYLE="background: transparent">ANS-C16/AEsim/S1-CH/current</SPAN></FONT></P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 2.4 Famille/
index &eacute;l&eacute;ment, Famille/{cellule &eacute;l&eacute;ment],
nomenclature TANGO pour les correcteurs lents horizontaux de SOLEIL.</I></FONT></P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><FONT FACE="CG Times (W1), Times New Roman, serif">	Il
est important de ne pas modifier la nomenclature en cours du
fonctionnement de SOLEIL, ce qui implique que la  liste [cellule
&eacute;l&eacute;ment] et l'index de l'&eacute;l&eacute;ment dans
l'anneau ne doivent pas changer m&ecirc;me si de nouveaux &eacute;quipements
sont introduits dans l'acc&eacute;l&eacute;rateur au fil des ann&eacute;es.
Par exemple, chacun des 120 sextup&ocirc;les de l'anneau est
&eacute;quipements de bobinages secondaires pour r&eacute;aliser les
fonctions de correcteurs horizontaux, verticaux et de quadrup&ocirc;les
tourn&eacute;s. Bien qu'au d&eacute;marrage de SOLEIL, seuls 56 (sur
120) correcteurs dans les deux plans et 32 (sur 120) quadrup&ocirc;les
tourn&eacute;s soient pr&eacute;vus, <SPAN STYLE="background: transparent">l'emplacement
des autres est r&eacute;serv&eacute;.</SPAN> Les fonctions <I>dev2elem</I>
et <I>elem2dev</I></FONT> permettent de passer d'une liste index&eacute;e
&laquo;&nbsp;element&nbsp;&raquo; &agrave; une liste &laquo;&nbsp;device&nbsp;&raquo;
([cellule &eacute;l&eacute;ment]). Toutes les fonctions du MML
utilisent ces deux fonctions. Il est &eacute;galement possible de
r&eacute;f&eacute;rencer un attribut d'un &eacute;quipement par sa
nomenclature TANGO et par une nom commun (&laquo;&nbsp;commonname&nbsp;&raquo;).
Pour plus de d&eacute;tails, le lecteur est pri&eacute; de se
reporter en annexe page 54.</P>
<P CLASS="western"><BR><BR>
</P>
<H2 CLASS="western">2.4 Les modes</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Chaque commande de
base peut &ecirc;tre appel&eacute;e en sp&eacute;cifiant comme
argument un &laquo;&nbsp;mode&nbsp;&raquo; pouvant l'un de ceux du Tableau 2.5.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=55*>
	<COL WIDTH=201*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">&laquo;&nbsp;Online&nbsp;&raquo;</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western"><FONT FACE="Symbol">-</FONT> Acc&egrave;s &agrave;
				Tango (machine en ligne)</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">&laquo;&nbsp;Simulator&nbsp;&raquo; 
				</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western"><FONT FACE="Symbol">- A</FONT>cc&egrave;s au
				simulateur AT</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">&laquo;&nbsp;Model&nbsp;&raquo;</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western"><FONT FACE="Symbol">- I</FONT>dem simulateur ?</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=21%>
				<P CLASS="western">&laquo;&nbsp;Manual&nbsp;&raquo;</P>
			</TD>
			<TD WIDTH=79%>
				<P CLASS="western"><FONT FACE="Symbol">- L</FONT>'utilisateur
				entre &agrave; la main la valeur</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 2.5 Diff&eacute;rents
modes de fonctionnement des commandes du MML.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><U>Exemples :</U></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getam('Q1',1,&nbsp;
	'Online')</I></P>
	<OL>
		<P CLASS="western" STYLE="margin-bottom: 0in">Lecture de l'attribut
		TANGO &laquo;&nbsp;courant&nbsp;&raquo; du premier quadrup&ocirc;le
		de la famille Q1</P>
	</OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getam('Q1',1,&nbsp;
	'Simulator')</I></P>
	<OL>
		<P CLASS="western" STYLE="margin-bottom: 0in">Lecture du courant du
		premier quadrup&ocirc;le de la famille Q1 du mod&egrave;le AT</P>
	</OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getam('Q1',1,&nbsp;
	Manual)</I></P>
	<OL>
		<P CLASS="western" STYLE="margin-bottom: 0in">% Matlab demande la
		valeur de relecture de Q1 [1 1] &agrave; l'utilisateur</P>
		<P CLASS="western" STYLE="margin-bottom: 0in">&gt;&gt; Manual
		input:  Q1(1,1) [ampere] =</P>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	</P>
<H1 CLASS="western">3 Fonctions de bases de la couche interm&eacute;diaire</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">3.1 Introduction 
</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="Times New Roman, serif">	Bien
que la biblioth&egrave;que de fonctions de la MML soit bien &eacute;tablie,
elle ne va pas cess&eacute;e d'&ecirc;tre compl&eacute;t&eacute;e au
cours des ans. </FONT>A chaque fois que possible, toute nouvelle
fonction doit &ecirc;tre &eacute;crite de mani&egrave;re ind&eacute;pendante
de la machine. Bien sur, cette r&egrave;gle est parfois difficile &agrave;
suivre. La pr&eacute;sente section d&eacute;crit les fonctions de
bases n&eacute;cessaires au bon fonctionnement du MML.</P>
<H2 CLASS="western"><B>3.2 Fonctions de base du MML</B></H2>
<H3 CLASS="western"><B>3.2.1 	Fonctions de base lecture/&eacute;criture</B></H3>
<P CLASS="western"><B>	</B><SPAN STYLE="font-weight: medium">Ces
fonctions (cf. Tableau 5.1) permettent de communiquer avec les
&eacute;quipements en ligne, les devices serveurs TANGO, ou
l'Accelerator Toolbox. Les deux fonctions  &laquo;&nbsp;m&egrave;re&nbsp;&raquo;
de cette classe de fonctions sont <I>getpv</I><SPAN STYLE="font-style: normal">
(lecture d'une valeur de contr&ocirc;le &ndash; </SPAN><I>Process
variable</I><SPAN STYLE="font-style: normal">) et </SPAN><I>setpv</I><SPAN STYLE="font-style: normal">
(assignation d'une valeur de contr&ocirc;le &ndash; </SPAN><I>Process
variable</I><SPAN STYLE="font-style: normal">)</SPAN></SPAN>. Ces
deux fonctions peuvent &ecirc;tre appel&eacute;es avec une multitude
d'arguments (familles, ensembles d'&eacute;quipements h&eacute;t&eacute;rog&egrave;nes,
information temporelle, etc.). Pour plus d'information sur ces deux
fonctions clefs, le lecteur voudra bien se reporter aux annexes page
. Les suffixes des diff&eacute;rentes fonctions acc&eacute;dant aux
donn&eacute;es (&laquo;&nbsp;database access functions&nbsp;&raquo;)
sont :</P>
<UL>
	<LI><P CLASS="western"><B>pv</B> &ndash; Process Variable : valeur
	de contr&ocirc;le</P>
	<LI><P CLASS="western"><B>am</B> &ndash; Analog Monitor : valeur de
	relecture</P>
	<LI><P CLASS="western"><B>sp</B> &ndash; Setpoint : valeur de
	consigne</P>
</UL>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=695 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=121>
	<COL WIDTH=558>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL>
					<OL>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL>
					<P CLASS="western"><I>getpv</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  Lit un groupe de variables de
					contr&ocirc;le</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>setpv</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  &Eacute;crit un groupe de variables
					de contr&ocirc;le</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>steppv</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  &Eacute;crit par incr&eacute;ments
					un groupe de variables de contr&ocirc;le 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>getam</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  Lit la valeur de relecture d'un
					groupe d'attributs</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>getsp</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  Lit la valeur de consigne d'un
					groupe d'attributs</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>setsp</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  Assigne un groupe de valeurs de
					consigne</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>stepsp</I></P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  Assigne par incr&eacute;ment la
					valeur de consigne d'un groupe d'attributs</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=121>
				<OL START=0>
					<P CLASS="western"><I>ramppv </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=558>
				<OL START=0>
					<P CLASS="western">&ndash;  <FONT COLOR="#000000">&laquo;&nbsp;Rampe&nbsp;&raquo;
					un groupe de valeurs de contr&ocirc;le</FONT></P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 3.1Fonctions
pour &eacute;crire ou lire une valeur de contr&ocirc;le</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H3 CLASS="western">3.2.2 Fonctions pour changer de mode de la
session Matlab</H3>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Le Tableau 3.2
contient les noms des fonctions &agrave; appeler pour changer le
comportement global du MML pour passer en unit&eacute; physiques
(&laquo;&nbsp;Physics&nbsp;&raquo;), mat&eacute;rielles
(&laquo;&nbsp;Hardware&nbsp;&raquo;) et pour passer du simulateur &agrave;
la machine en ligne. 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=157>
	<COL WIDTH=533>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=157>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=533>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=157>
				<P CLASS="western"><I>switch2sim</I></P>
			</TD>
			<TD WIDTH=533>
				<P CLASS="western">&ndash; Change le mode courant en mode
				simulateur</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=157>
				<P CLASS="western"><I>switch2online </I>
				</P>
			</TD>
			<TD WIDTH=533>
				<P CLASS="western">&ndash; Change le mode courant en mode machine
				en ligne</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=157>
				<P CLASS="western"><I>switch2physics </I>
				</P>
			</TD>
			<TD WIDTH=533>
				<P CLASS="western">&ndash; Change l'unit&eacute; courante en
				unit&eacute; physique (SI)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=157>
				<P CLASS="western"><I>switch2hw </I>
				</P>
			</TD>
			<TD WIDTH=533>
				<P CLASS="western">&ndash; Change l'unit&eacute; courante en
				unit&eacute; hardware</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 3.2Fonctions
pour modifier le comportement du MML</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">3.3 <B>Fonctions de conversion entre les
diff&eacute;rentes nomenclatures</B></H2>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
	Les principales fonctions pour passer d'une nomenclature &agrave;
une autre sont donn&eacute;es par le Tableau 3.3.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
 
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=217>
	<COL WIDTH=473>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL>
					<P CLASS="western"><I>tango2dev </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion TANGO/liste [cellule
					&eacute;quipement]</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>tango2family </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion TANGO/famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>tango2common </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion TANGO/nom commun</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>tango2handle </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion TANGO/r&eacute;f&eacute;rence</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>common2dev </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion nom commun/liste [cellule
					&eacute;quipement]</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>common2tango</I></P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion nom commun/TANGO</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>common2family</I></P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion nom commun/famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>common2handle </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion nom commun/r&eacute;f&eacute;rence</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>dev2elem </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion liste &eacute;quipement/liste
					index &eacute;l&eacute;ments</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>elem2dev </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion liste &eacute;l&eacute;ment/liste
					[cellule &eacute;quipement]</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>family2dev</I><SUP><I><A CLASS="sdfootnoteanc" NAME="sdfootnote2anc" HREF="#sdfootnote2sym"><SUP>2</SUP></A></I></SUP><I>
					</I><SPAN STYLE="font-style: normal">ou</SPAN><I> getlist </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion famille/liste [cellule
					&eacute;quipement]</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>family2tango</I></P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion famille/TANGO</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>family2common</I></P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion famille/nom commun</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>family2handle</I></P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion famille/r&eacute;f&eacute;rence</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=217>
				<OL START=0>
					<P CLASS="western"><I>family2status</I></P>
				</OL>
			</TD>
			<TD WIDTH=473>
				<OL START=0>
					<P CLASS="western">&ndash; Donne le statut d'un &eacute;quipement
					(1 - en op&eacute;ration, 0 - retir&eacute; de la liste)</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 3.3Fonctions de
passage d'une nomenclature &agrave; une autre.</I></FONT></P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"> 
	</P>
</OL>
<H2 CLASS="western">3.4 Fonctions pour obtenir des donn&eacute;es du
MML 
</H2>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">	Les
principales fonctions servant &agrave; obtenir des donn&eacute;es
provenant de diverses sources (fichiers, configuration, etc.) sont :</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">
	La fonction <I>getfamilydata</I> fournit des param&egrave;tres sur
	une famille d'&eacute;quipements et sur les param&egrave;tres du
	syst&egrave;me de contr&ocirc;le commande.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">
	La fonction <I>getphysdata</I> fournit des donn&eacute;es physiques.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">
	La fonction <I>getdata</I> permet de charger des donn&eacute;es &agrave;
	partir d'un fichier.</P>
	<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">	La
plupart des fonctions &eacute;num&eacute;r&eacute;es ci-apr&egrave;s
(Tableau 3.4) ne sont que des alias vers ces trois fonctions.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: auto">
	<COL WIDTH=87*>
	<COL WIDTH=169*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL>
					<P CLASS="western"><I>getfamilylist</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la liste des familles</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getfamilytype</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la liste des types de
					familles</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getfamilydata </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne un champ donn&eacute; pour
					une famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>setfamilydata </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Assigne un champ donn&eacute; pour
					une famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getphysdata</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne les valeurs de calibration
					(gain, offset, etc.)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>setphysdata </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Assigne les valeurs de calibration</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getgolden </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne les valeurs de r&eacute;f&eacute;rence
					pour une famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getoffset</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne les offsets d'une famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>gettol </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la tol&eacute;rance accept&eacute;e
					entre valeurs de  consigne et de relecture</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>family2tol</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la tol&eacute;rance valeur
					de (relecture-consigne) pour un champ d'une famille</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getminsp </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la valeur minimum de
					consigne 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getmaxsp</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la valeur maximum de
					consigne 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getspos </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne la position &laquo;&nbsp;s&nbsp;&raquo;
					d'un &eacute;l&eacute;ment dans l'anneau</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getsigma</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne l'&eacute;cart type qui a
					&eacute;t&eacute; pr&eacute;c&eacute;demment mesur&eacute;</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>isfamily </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; V&eacute;rifie que la famille est
					d&eacute;finie</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>ismemberof</I></P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; V&eacute;rifie que la famille est
					membre d'un groupe donn&eacute;</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=34%>
				<OL START=0>
					<P CLASS="western"><I>getdata </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=66%>
				<OL START=0>
					<P CLASS="western">&ndash; Recherche dans un fichier une
					structure correspondant &agrave; la famille sp&eacute;cifi&eacute;e.</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 3.4Fonctions
g&eacute;n&eacute;rales et g&eacute;n&eacute;riques pour acc&eacute;der
aux donn&eacute;es du MML</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">Exemples :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getfamilydata('BPMx')</I><BR>Renvoie
	le champ AO.BPMx</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getfamilydata('BPMx','Monitor')<BR></I><SPAN STYLE="font-style: normal">Renvoie
	le champ AO.BPMx.Monitor</SPAN></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getfamilydata('BPMx','Monitor','Units')<BR>Renvoie
	le champ AO.BPMx.Units</I></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getfamilydata('HCOR',
	'Status')<BR></I><SPAN STYLE="font-style: normal">Renvoie le champ
	AO.HCOR.Status</SPAN></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getphysdata(Family,
	'Golden')<BR></I><SPAN STYLE="font-style: normal">Renvoie  les
	valeurs de r&eacute;f&eacute;rence de la famille Family</SPAN></P>
</OL>
<H2 CLASS="western">3.5 Sauvegarde/restauration d'une configuration
machine</H2>
<H3 CLASS="western">3.5.1 La fonction <I>getmachineconfig</I></H3>
<OL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	La fonction
<I>getmachinconfig </I><SPAN STYLE="font-style: normal">l</SPAN>it
les valeurs de consignes des aimants et l'orbite puis les sauvegarde
dans un fichier ou une variable. Voir l'aide en ligne (<I>help
getmachinconfig</I>) pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><U>Notes </U>:</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getmachineconfig</I>
	sauvegarde toutes les valeurs d'alimentation (si elles sont membres
	de 'MachineConfig' ou de 'RF' et l'orbite 'BPM') dans le fichier
	<I>GoldenLattice.mat</I></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Utiliser
	<I>setmachineconfig</I> pour sauvegarder dans un fichier la sortie
	de la commande pr&eacute;c&eacute;dente</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Utiliser
	<I>getmachineconfig('Archive')</I> pour archiver la configuration
	dans un fichier</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Les familles
	inconnues sont ignor&eacute;es</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Utiliser
	<I>getmachineconfig('Golden')</I> pour faire de la configuration
	actuelle la configuration de r&eacute;f&eacute;rence</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getmachineconfig('Q1','monfichier')</I><SPAN STYLE="font-style: normal">
	archive la configuration actuelle pour la famille 'Q1' dans le
	fichier </SPAN><I>monfichier</I></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>Q1conf
	=getmachineconfig('Q1')</I><SPAN STYLE="font-style: normal"> fait la
	m&ecirc;me chose que pr&eacute;c&eacute;demment sans archiver.</SPAN></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H3 CLASS="western">3.5.2 La fonction <I>setmachineconfig</I></H3>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="western" STYLE="margin-bottom: 0in">	La fonction
<I>setmachineconfig</I><SPAN STYLE="font-style: normal"> assigne</SPAN>
&agrave; l'acc&eacute;l&eacute;rateur les valeurs consignes lues dans
un fichier de configuration ou depuis la structure produite par la
commande <I>getmachineconfig</I>. Voir l'aide en ligne (<I>help
setmachinconfig</I>) pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><U>Notes </U>:</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>setmachineconfig
	</I><SPAN STYLE="font-style: normal">restaure toutes les valeurs de
	consignes pour les familles membres de 'MachineConfig', 'RF' ou
	'BPM' &agrave; partir d'un fichier de configuration (fen&ecirc;tre
	interactive)</SPAN></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal">
	<I>setmachineconfig </I>restaure toutes les valeurs de consignes &agrave;
	partir du fichier de r&eacute;f&eacute;rence <I>GoldenLattice.mat</I></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>setmachineconfig({'HCOR','VCOR'},
	'Golden')</I> ne restaure que les valeurs de consignes des
	correcteurs lents (valeurs de r&eacute;f&eacute;rence)</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>setmachineconfig({'HCOR','VCOR'},
	'Golden','Simulator')</I> ne restaure que les valeurs de consignes
	des correcteurs lents (valeurs de r&eacute;f&eacute;rence) dans le
	simulateur</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H3 CLASS="western">3.5.3 IHM configgui</H3>
<P CLASS="western" STYLE="margin-bottom: 0in">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in">L'IHM <I>configui</I>
(Illustration 3.1) permet de r&eacute;aliser ces deux fonctions
graphiquement que ce soit pour une famille ou un ensemble de familles
d'&nbsp;&eacute;quipements.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN ID="Cadre5" DIR="LTR" STYLE="float: left; width: 6.24in; height: 4.12in; border: none; padding: 0in; background: #ffffff">
	<P STYLE="margin-top: 0.08in"><IMG SRC="matlabmiddlelayerSOLEIL_html_360f224b.png" NAME="Image1" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=2><I>Illustration
	3.1</I><SPAN STYLE="font-style: normal">Interface</SPAN><I>
	graphique </I><SPAN STYLE="font-style: normal"><SPAN STYLE="font-weight: medium">configui</SPAN>
	pour sauvegarder et restaurer une configuration machine.</SPAN></FONT></P>
</SPAN><BR CLEAR=LEFT><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western">4 Alias de fonctions courantes</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">4.1 D&eacute;finition</H2>
<P CLASS="western">	</P>
<P CLASS="western">	Pour les fonctions les plus utilis&eacute;es, il
est agr&eacute;able de ne pas avoir &agrave; chaque fois &agrave;
entrer une multitude d'arguments. C'est pour cette raison que des
fonctions dites raccourcies (alias) ont &eacute;t&eacute; d&eacute;finies.
Par exemple, les fonctions <I>getam</I> et <I>getsp</I><SPAN STYLE="font-style: normal">
sont toutes deux des alias de la fonction g&eacute;n&eacute;rique
</SPAN><I>getpv</I><SPAN STYLE="font-style: normal"> avec l'argument</SPAN>
'Monitor' et 'Setpoint' respectivement.  Il en est de m&ecirc;me pour
les fonctions <I>setsp</I> et <I>stepsp</I>.</P>
<H2 CLASS="western">4.2 Quelques alias de la fonction getpv</H2>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
	Quelques alias usuels de fonctions sont donn&eacute;es par le Tableau 4.1.
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<TABLE WIDTH=636 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=134>
	<COL WIDTH=486>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL>
					<P CLASS="western"><I>getbpm </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne l'orbite horizontale et
					verticale</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL START=0>
					<P CLASS="western"><I>getdcct </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne le courant stock</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL START=0>
					<P CLASS="western"><I>getrf/setrf </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne/assigne la fr&eacute;quence
					RF</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL START=0>
					<P CLASS="western"><I>gettune </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne les nombres d'ondes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL START=0>
					<P CLASS="western"><I>getx </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne l'orbite horizontale</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=134>
				<OL START=0>
					<P CLASS="western"><I>getz </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=486>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne l'orbite verticale</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 4.1Exemples
d'alias de fonction</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western"><U>Notes</U><SPAN STYLE="text-decoration: none"> :</SPAN></P>
<P CLASS="western" STYLE="text-decoration: none"><BR><BR>
</P>
<OL>
	<LI><P CLASS="western">Certains de ces raccourcis appartiennent aux
	fonctions qui sont introduites dans la section suivante. Par
	exemple, si 'TUNE' est une famille, alors la fonction<SPAN STYLE="background: transparent">
	<I>gettune</I> est juste un alias vers la fonction <I>getam</I>(<FONT SIZE=2>&rsquo;TUNE&rsquo;</FONT>).
	 Cependant, faire de 'TUNE' une famille peut ne pas avoir de sens
	dans certains acc&eacute;l&eacute;rateurs. C'est pourquoi il a &eacute;t&eacute;
	choisi de faire une cat&eacute;gorie de fonctions sp&eacute;ciales. </SPAN>
	</P>
	<LI><P CLASS="western"><SPAN STYLE="background: transparent">L'utilisation
	de fonctions comme alias d'autres fonctions permet d'&eacute;crire
	plus facilement des fonctions de haut niveau tout en conservant une
	ind&eacute;pendance par rapport &agrave; une machine sp&eacute;cifique.
	 </SPAN>
	</P>
</OL>
<P CLASS="western"><BR><BR>
</P>
<H1 CLASS="western">5 Fonctions sp&eacute;ciales</H1>
<P CLASS="western"><BR><BR>
</P>
<H2 CLASS="western">5.1 Introduction</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	Certains &eacute;quipements ne peuvent pas
facilement &ecirc;tre introduits dans l'Accelerator Object. Des
fonctions particuli&egrave;res ont ainsi &eacute;t&eacute; &eacute;crites
pour un acc&egrave;s direct.  Ceci peut &ecirc;tre le cas pour
acc&eacute;der &agrave; des variables ne d&eacute;pendant pas
express&eacute;ment de TANGO. Le fichier de configuration de
l'Accelerator Object peut souvent &ecirc;tre encore utilis&eacute;
pour d&eacute;finir ces cas particuliers. Par exemple, les nombres
d'ondes sont obtenus via une fonction sp&eacute;ciale et constituent
encore une famille de l'AO. Les fonctions sp&eacute;ciales qui ne se
r&eacute;f&eacute;rent pas &agrave; l'AO ne sont plus ind&eacute;pendantes
de la machine. Le Tableau 5.1 donne quelques exemples.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">adcquantization
					</SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="font-style: normal"><SPAN STYLE="background: #ffff00">&ndash;
					Retourne le LSB d'un ADC</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">dacquantization
					</SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="font-style: normal"><SPAN STYLE="background: #ffff00">&ndash;
					Retourne le LSB d'un DAC</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">getid/setid
					</SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="font-style: normal"><SPAN STYLE="background: #ffff00">&ndash;
					Lit/assigne la valeur d'entrefer et la vitesse d'un &eacute;l&eacute;ment
					d'insertion</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">getepu/setepu
					</SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="font-style: normal"><SPAN STYLE="background: #ffff00">&ndash;
					Lit/assigne la phase longitudinale d'un Apple II</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">getlifetime
					</SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="font-style: normal"><SPAN STYLE="background: #ffff00">&ndash;
					Lit la dur&eacute;e de vie (si l'attribut n'existe pas, utiliser
					la fonction <I>measlifetime</I>)</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">getrfcavitytemperature/setrfcavitytemperature</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="font-style: normal"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">getrfpower
					/ setrfpower</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="font-style: normal"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">getscrap/setscrap
					</SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="font-style: normal"><SPAN STYLE="background: #ffff00">&ndash;
					Lit/assigne la position des scrapers</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in"><I><SPAN STYLE="background: #ffff00">getbpmv</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in; font-style: normal">
					<SPAN STYLE="background: #ffff00"> </SPAN>
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in"><I><SPAN STYLE="background: #ffff00">power
					supply functions</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in"><I><SPAN STYLE="background: #ffff00">temperature
					monitors</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in"><I><SPAN STYLE="background: #ffff00">vacuum
					pressure functions</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 5.1Exemples de
fonctions sp&eacute;ciales</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western">6 Fonctions pour la Physique Machine</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">6.1 Introduction</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western">	Le premier objectif des fonctions du MML est de
fournir un support pour acc&eacute;der (lecture/&eacute;criture) &agrave;
la fois aux &eacute;quipements des acc&eacute;l&eacute;rateurs et au
simulateur de faisceau. L'&eacute;tape suivante consiste &agrave;
compl&eacute;ter ces biblioth&egrave;ques de fonctions pour faire de
la Physique des Acc&eacute;l&eacute;rateurs.  Cette section devrait
s'enrichir au fur et &agrave; mesure de la vie de l'acc&eacute;l&eacute;rateur
et en fonction des besoins des utilisateurs du Matlab Middle Layer.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">6.2 Fonctions g&eacute;n&eacute;rales pour la
Physique Machine</H2>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<B>	</B><SPAN STYLE="font-weight: medium">Tableau 6.1 contient une
liste de fonctions g&eacute;n&eacute;rales relatives &agrave; la
Physiques Machine. Ce tableau sera compl&eacute;t&eacute; si besoin.</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<TABLE WIDTH=697 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=190>
	<COL WIDTH=490>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">amps2mm </SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
					Convertit un changement en courant d'un correcteur en un
					changement d'orbite (utilise une matrice r&eacute;ponse)</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">mm2amps</SPAN></I></P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
					Convertit un changement en un changement en courant d'un
					correcteur (utilise une matrice r&eacute;ponse)</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"></P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>bend2gev </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Convertit un courant dipolaire en
					variation d'&eacute;nergie (Possibilit&eacute; d'introduire la
					contribution des correcteurs)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>gev2bend </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Convertit l'&eacute;nergie du
					faisceau en courant des dip&ocirc;les</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>hw2physcis </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion d'unit&eacute; hardware
					vers unit&eacute; physique</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>physics2hw </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Conversion d'unit&eacute; physique
					vers unit&eacute; hardware 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>raw2real </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Convertit donn&eacute;es brutes (raw)
					en donn&eacute;es calibr&eacute;es (real)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>real2raw </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Convertit donn&eacute;es calibr&eacute;es
					(real) en donn&eacute;es brutes (raw)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>bpm2orbit </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Calcule l'angle et la position au
					centre d'une insertion &agrave; partir des lectures de IDBPM.</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">bumpinj </SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
					Cr&eacute;e un bump d'injection</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">monbpm </SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
					Surveille, dessine et calcule les moments statistiques des BPM</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>measbpmsigma </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure l'&eacute;cart type des
					orbites H et V</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">monmags </SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
					Surveille, dessine et calcule les moments statistiques des
					courant des aimants</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>getenergy</I></P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne l'&eacute;nergie de l'anneau</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>getbrho</I></P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne le Brho de l'anneau</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>getmcf</I></P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Retourne le momentum compaction
					factor</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>settune </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Change les valeurs des nombres
					d'ondes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>steptune </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Incr&eacute;mente les valeurs des
					nombres d'ondes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>setchro </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Change les valeurs valeurs de
					chromaticit&eacute;s</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>stepchro </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Incr&eacute;mente les valeurs de
					chromaticit&eacute;s</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>measchro </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure les chromaticit&eacute;s</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>measdisp </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure les fonctions dispersion</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.25in"><I>measlifetime
					</I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.25in">&ndash; Calcul
					la dur&eacute;e de vie du faisceau &agrave; partir de la lecture
					de courant par un algorithme des moindres carr&eacute;s</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I><SPAN STYLE="background: #ffff00">turnoff </SPAN></I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash; Met
					lentement &agrave; z&eacute;ro une famille d'aimants</SPAN></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=190>
				<OL START=0>
					<P CLASS="western"><I>buildlocoinput </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=490>
				<OL START=0>
					<P CLASS="western">&ndash; Construit un fichier d'entr&eacute;e
					pour LOCO</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 6.1Fonctions
g&eacute;n&eacute;rales pour la Physique Machine</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">6.3 Matrices r&eacute;ponse</H2>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="font-weight: medium">	Les
fonctions permettant de lire et mesurer les matrices r&eacute;ponses
sont donn&eacute;es par le Tableau 6.2.</SPAN> Les fichiers de
r&eacute;f&eacute;rence pour les matrices r&eacute;ponses sont
obtenus par la commande <I>getfamilydata('OpsData','RespFiles') </I><SPAN STYLE="font-style: normal">:</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal">&gt;&gt;
'GoldenBPMResp'    'GoldenTuneResp'    'GoldenChroResp'   
'GoldenDispResp'</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">Voir
l'annexe page 41 pour savoir comment faire d'une matrice r&eacute;ponse
mesur&eacute;e la matrice de r&eacute;f&eacute;rence.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=154>
	<COL WIDTH=536>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<P CLASS="western"><I>getrespmat </I>
				</P>
			</TD>
			<TD WIDTH=536>
				<OL>
					<P CLASS="western">&ndash; Lit une matrice r&eacute;ponse &agrave;
					partir d'un fichier (fonction g&eacute;n&eacute;rale)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL>
						<LI><P CLASS="western"><I>getbpmresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Lit une matrice r&eacute;ponse des
					BPM</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=2>
						<LI><P CLASS="western"><I>gettuneresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; <FONT SIZE=1 STYLE="font-size: 8pt"><FONT SIZE=3>Lit
					une matrice r&eacute;ponse des nombres d'ondes</FONT></FONT></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=3>
						<LI><P CLASS="western"><I>getchroresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Lit une matrice r&eacute;ponse des
					chromaticit&eacute;s</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=4>
						<LI><P CLASS="western"><I>getdispresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western"><FONT COLOR="#000000">&ndash; Lit une matrice
					r&eacute;ponse de la dispersion <SPAN STYLE="background: #ffff00">(non
					&eacute;crit)</SPAN></FONT></P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<P CLASS="western"><I>measrespmat </I>
				</P>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure une matrice r&eacute;ponse
					(fonction g&eacute;n&eacute;rale)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL>
						<LI><P CLASS="western"><I>measbpmresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure une matrice r&eacute;ponse des
					BPM</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=2>
						<LI><P CLASS="western"><I>measdispresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure une matrice r&eacute;ponse des
					BPM (<SPAN STYLE="background: #ffff00">facteur d'Amman?</SPAN>) 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=3>
						<LI><P CLASS="western"><I>measchroresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure une matrice r&eacute;ponse des
					chromaticit&eacute;s</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<OL>
					<OL START=4>
						<LI><P CLASS="western"><I>meastuneresp </I>
						</P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western">&ndash; Mesure une matrice r&eacute;ponse des
					nombres d'ondes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=154>
				<P CLASS="western" STYLE="margin-right: -0.38in"><I>plotbpmresp </I>
				</P>
			</TD>
			<TD WIDTH=536>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Affiche
					la matrice r&eacute;ponse des BPM <SPAN STYLE="background: #ffff00">(&agrave;
					&eacute;crire)</SPAN></P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 6.2Fonctions
manipulant les matrices r&eacute;ponse</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">6.4 Feedforward pour les insertions</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	<SPAN STYLE="background: #ffff00">A faire plus
tard ... Ces fonctions n'ont pas encore &eacute;t&eacute; test&eacute;es
&agrave; SOLEIL</SPAN></P>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=155>
	<COL WIDTH=535>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=535>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL>
					<P CLASS="western"><I>ffgettbl </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=535>
				<OL START=0>
					<P CLASS="western">&ndash; Lit une nouvelle table de feedforward</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western"><I>fftest </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=535>
				<OL START=0>
					<P CLASS="western">&ndash; Teste la table actuelle de
					feedforward</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western"><I>ffanal </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=535>
				<OL START=0>
					<P CLASS="western">&ndash; Analyse la table actuelle de
					feedforward</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 6.3Fonctions
relatives au feedforward des insertions.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">6.5 V&eacute;rification du syst&egrave;me</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	<SPAN STYLE="background: #ffff00">A faire plus
tard ... Ces fonctions n'ont pas encore &eacute;t&eacute; test&eacute;es
&agrave; SOLEIL</SPAN></P>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: auto">
	<COL WIDTH=221>
	<COL WIDTH=469>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL>
					<P CLASS="western" STYLE="margin-right: -0.38in"><I>getrate </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash;
					measures the data rate for a channel (channel must be noisy, ie,
					changes every update)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>checkbpms </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western">&ndash; checks if the BPMs are functioning
					(based on response matrix)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>checkmags </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western">&ndash; checks the magnets (setpoint,
					tolerance, on/off, etc)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>checkorbit </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western">&ndash; checks the orbit (based on golden
					orbit)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>magstep </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western">&ndash; checks the step response of a
					corrector magnet</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>checkmachine </I>
					</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<OL START=0>
					<P CLASS="western">&ndash; look for errors in the storage ring 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>Power supply problems</I></P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>Orbit errors</I></P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>Temperatures</I></P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western"><I>Vacuum</I></P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=221>
				<OL START=0>
					<P CLASS="western">&hellip;</P>
				</OL>
			</TD>
			<TD WIDTH=469>
				<P CLASS="western"><BR>
				</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 6.4Fonctions
pour v&eacute;rifier le bon fonctionnement  du syst&egrave;me de
contr&ocirc;le commande et des &eacute;quipements.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">6.6 Fonctions propre au mod&egrave;le en ligne</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	Le Matlab Middle Layer peut fonctionner
ind&eacute;pendamment de l'Accelerator Toolbox (AT). Cependant, il
est tr&egrave;s pratique de pouvoir passer rapidement du mod&egrave;le
&agrave; la machine en ligne, et vice-versa. Les deux fonctions 
s<I>witch2sim </I><SPAN STYLE="font-style: normal">et </SPAN><I>switch2online</I><SPAN STYLE="font-style: normal">
permettent de passer d'un mode &agrave; l'autre de mani&egrave;re
ais&eacute;e. Il est &eacute;galement possible de sp&eacute;cifier
l'un des deux modes en argument d'une fonction donn&eacute;e. Il est
n&eacute;anmoins utile de pouvoir disposer d'un jeu de fonctions
d&eacute;di&eacute;es au mod&egrave;le AT. Le Tableau 6.5  contient
ces fonctions propres au mod&egrave;le en ligne. </SPAN>
</P>
<P CLASS="western"><BR><BR>
</P>
<TABLE WIDTH=694 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=155>
	<COL WIDTH=523>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL>
					<P CLASS="western">modelbeta 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Calcule les fonctions b&ecirc;tatrons</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modelchro 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Calcule les chromaticit&eacute;s 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modeldisp 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Calcule les fonctions dispersion</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modelmcf 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Calcul le momentum compaction factor</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modeltune 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Calcul les nombres d'ondes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modeltwiss</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Calcule mes fonctions de Twiss</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">machine2sim 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Copie les valeurs de consigne de la
					machine dans le mod&egrave;le</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">sim2machine 
					</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Copie les valeurs de consigne du
					mod&egrave;le dans la machine</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modelsextu_on</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Allume les sextup&ocirc;les dans le
					mod&egrave;le AT</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=155>
				<OL START=0>
					<P CLASS="western">modelsextu_off</P>
				</OL>
			</TD>
			<TD WIDTH=523>
				<OL START=0>
					<P CLASS="western">&ndash; Eteint les sextup&ocirc;les dans le
					mod&egrave;le AT</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 6.5Fonctions
propres au mod&egrave;le AT</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<H2 CLASS="western">6.7 Fonctions diverses</H2>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<B>	</B></P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium; page-break-after: avoid">
	Afin de faciliter l'utilisation de Matlab, la biblioth&egrave;que de
fonctions de Matlab a &eacute;t&eacute; enrichie (Tableau 6.6).</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=166>
	<COL WIDTH=524>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL>
					<OL START=0>
						<P CLASS="western" ALIGN=LEFT><I><B>Nom</B></I></P>
					</OL>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
				</OL>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL>
					<P CLASS="western">addlabel 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western">&ndash; Ajoute une l&eacute;gende &agrave;
					une figure</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western">appendtimestamp 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western">&ndash; Ajoute la date et l'heure &agrave;
					une cha&icirc;ne de caract&egrave;res.</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western">gettime 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western">&ndash; Temps en secondes (t0 diff&eacute;rents
					sous Windows et Linux)</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">popplot 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Extrait
					un syst&egrave;me d'axe dans une nouvelle figure 
					</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western">sleep 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western">&ndash; Suspend une fonction pendant &laquo;&nbsp;n&nbsp;&raquo;
					secondes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">xaxis 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Modifie
					uniquement l'axe horizontal d'un syst&egrave;me d'axes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">xaxiss</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Modifie
					tous les axes horizontaux d'une figure</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">yaxis 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Modifie
					uniquement l'axe vertical d'un syst&egrave;me d'axes</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">yaxiss</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Modifie
					tous les axes verticaux d'une figure</P>
				</OL>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=166>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">zaxis 
					</P>
				</OL>
			</TD>
			<TD WIDTH=524>
				<OL START=0>
					<P CLASS="western" STYLE="margin-right: -0.38in">&ndash; Modifie
					uniquement l'axe des cotes d'un syst&egrave;me d'axes</P>
				</OL>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 6.6Fonctions
diverses enrichissant les biblioth&egrave;ques de Matlab.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western">7 Gestion de donn&eacute;es</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">7.1 Introduction</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western">	G&eacute;rer l'ensemble des donn&eacute;es
n&eacute;cessaires au d&eacute;marrage, r&eacute;glage et
fonctionnement des diff&eacute;rents acc&eacute;l&eacute;rateurs
exige un travail consid&eacute;rable. Pour centraliser les donn&eacute;es,
l'utilisation de bases de donn&eacute;es simplifie grandement cette
t&acirc;che. Cependant, une telle solution requiert &agrave;
collaboration et la coordination de personnes de diff&eacute;rents
groupes (Physique Machine, Groupe Diagnostics, Groupe ICA, etc.). A
SOLEIL, il est pr&eacute;vu d'avoir &agrave; terme un syst&egrave;me
de gestion de donn&eacute;es centralis&eacute;es. En attendant, pour
&eacute;viter que le chaos ne s'&eacute;tablisse, une partie de cette
gestion est prise en compte par le MML. Cette solution, fond&eacute;e
sur l'utilisation de fichiers, est temporaire. Notons que d&egrave;s
aujourd'hui une partie des donn&eacute;es de configuration est d&eacute;j&agrave;
obtenu en interrogeant  la base de donn&eacute;es statique de TANGO.
Un outil g&eacute;n&eacute;rique de gestion des fichiers de consigne
est &eacute;galement en cours de d&eacute;veloppement au sein de la
division informatique. 
</P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	Les donn&eacute;es pr&eacute;c&eacute;demment
cit&eacute;es peuvent &ecirc;tre class&eacute;es sous plusieurs
cat&eacute;gories :</P>
<OL>
	<LI><P CLASS="western">Des donn&eacute;es quasi-statiques</P>
	<LI><P CLASS="western">Des donn&eacute;es n&eacute;cessitant une
	mise &agrave; jour r&eacute;guli&egrave;re.</P>
	<LI><P CLASS="western"><SPAN STYLE="background: #ffff00">Des donn&eacute;es
	relatives archivables</SPAN></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">7.2 Donn&eacute;es machine quasi statiques</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Ces donn&eacute;es
sont par exemple celles :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Permettant de
	faire la conversion entre les unit&eacute;s physiques et
	mat&eacute;rielles.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">D&eacute;finissant
	les valeurs maximales et minimales pour les valeurs de consignes.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">D&eacute;finissant
	la position des &eacute;quipements dans l'anneau</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Relatives au
	cyclage des aimants (hyst&eacute;r&eacute;sis)</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Relatives &agrave;
	la calibration des aimants 
	</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Autant que possible,
nous chercherons &agrave; centraliser ces donn&eacute;es physique
quasi-statiques dans une base de donn&eacute;es (&agrave; d&eacute;finir).
Une partie de ces donn&eacute;es est obtenue &agrave; partir de la
base de donn&eacute;es statique de TANGO.</P>
<H2 CLASS="western">7.3 Donn&eacute;es physiques n&eacute;cessitant
une mise &agrave; jour r&eacute;guli&egrave;re</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Ces donn&eacute;es
sont obtenues par exemples :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">lors d'un
	r&eacute;-alignement de la machine</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">lors du &laquo;&nbsp;beam
	based alignement&nbsp;&raquo; (recherche du centre des quadrup&ocirc;les)</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">lors de la
	calibration du mod&egrave;le (utilisation de LOCO)</P>
	<OL>
		<P CLASS="western" STYLE="margin-bottom: 0in">Param&egrave;tres de
		r&eacute;f&eacute;rence (&laquo;&nbsp;Golden parameters&nbsp;&raquo;)</P>
	</OL>
</OL>
<OL>
	<OL>
		<UL>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Orbite</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Nombres d'ondes</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Chromaticit&eacute;s</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Param&egrave;tres
			RF</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Feedbacks</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Injection</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">Couplage</P>
			<LI><P CLASS="western" STYLE="margin-bottom: 0in">etc.</P>
		</UL>
	</OL>
</OL>
<OL START=4>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Fichiers de
	consignes : sauvegarde/restauration partielle ou totale d'un &eacute;tat
	des acc&eacute;l&eacute;rateurs.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Matrices r&eacute;ponse</P>
</OL>
<OL>
	<UL>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in">des correcteurs
		aux BPM 
		</P>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in">des quadrup&ocirc;les
		aux nombres d'ondes 
		</P>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in">des sextup&ocirc;les
		aux chromaticit&eacute;s</P>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in">des fonctions
		dispersion aux quadrup&ocirc;les</P>
	</UL>
</OL>
<OL START=6>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Les offsets des
	BPM, aimants</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Les tables de
	feedforward pour compenser l'effet des insertions sur la dynamique
	faisceau</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">etc.</P>
</OL>
<OL>
	<P CLASS="western" STYLE="margin-bottom: 0in"> 
	</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">7.4 Sauvegarde et restauration de param&egrave;tres
machine</H2>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">	Bien que la plupart des attributs et param&egrave;tres
soient sauvegard&eacute;s dans la base de donn&eacute;es historique
et la base de donn&eacute;es interm&eacute;diaires selon diff&eacute;rents
modes, il est n&eacute;cessaire, actuellement, d'avoir &eacute;galement
un archivage propre au MML pour les raisons suivantes. Tout d'abord,
il est souvent plus pratique de sauvegarder directement des donn&eacute;es
sans passer par une base de donn&eacute;es ; il est souvent difficile
de retrouver simplement et rapidement des donn&eacute;es dans une
base donn&eacute;es (granularit&eacute;, difficult&eacute; &agrave;
parcourir les donn&eacute;es archiv&eacute;es ...). Ensuite, un
certain nombres de donn&eacute;es physiques ne sont pas associ&eacute;es
&agrave; un &eacute;quipement, mais sont d&eacute;riv&eacute;es de
mesures indirectes plus ou moins complexes, de calculs physique (la
dispersion, la chromaticit&eacute;, ...).</P>
<P CLASS="western">	Actuellement l'ensemble de ces donn&eacute;es est
sauvegard&eacute; dans des fichiers dont l'arborescence est d&eacute;finie
dans l'objet &laquo;&nbsp;Accelerator Data&nbsp;&raquo; (<I>getad).</I></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><I><SPAN STYLE="background: #ffff00">Exemples et
aborescence ...</SPAN></I></P>
<P CLASS="western"><BR><BR>
</P>
<H1 CLASS="western">8 Structuration des donn&eacute;es</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western">	Par soucis d&rsquo;homog&eacute;n&eacute;it&eacute;,
les donn&eacute;es sont sauvegard&eacute;es dans un format
consistant.  Les commandes <I>getpv, getam, getsp, getx,</I> <I>gety,</I>
<I>getrf, getdisp, getchro,</I><SPAN STYLE="font-style: normal"> etc</SPAN>
utilis&eacute;es avec le param&egrave;tre facultatif  &lsquo;Struct&rsquo;,
retournent la structure suivante d&eacute;finie par le Tableau 8.1.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=50*>
	<COL WIDTH=148*>
	<COL WIDTH=57*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				<B>Champ</B></P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				<B>Contenu</B></P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="western"><B>Type Matlab</B></P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Data</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Donn&eacute;es 
				</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				vecteur</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				FamilyName</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Nom de la famille</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="western">string</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Field</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Field to set of get (string)</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="western">string</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				DeviceList</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Device list (2-column matrix)</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Matrice colonne</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Mode</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Online&rsquo; ou &lsquo;Simulator&rsquo;</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				string</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Status</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				1-device ok</P>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				0-device bad</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				entier</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				t</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Temps de d&eacute;but de mesure</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				vecteur</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				tout</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Temps de fin de mesure</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				vecteur</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				TimeStamp</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Heure Matlab</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				double</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				GeV</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Energie (Gev)</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				double</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Units</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				&rsquo;Physics&rsquo;</P>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				&lsquo;Hardware&rsquo;</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="western">string</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				UnitsString</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				unit&eacute;s de mesure</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="western">string</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				DataDescriptor</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Description (&lsquo;Horizontal Orbit&rsquo;, &lsquo;Vertical
				Dispersion)</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				string</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=20%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				CreatedBy</P>
			</TD>
			<TD WIDTH=58%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				Nom de l'application g&eacute;n&eacute;rant les donn&eacute;es</P>
			</TD>
			<TD WIDTH=22%>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
				string</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 8.1 Format type
pour une mesure dans le MML</I></FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.02in">
<BR><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	A chaque fois que
possible, il est recommand&eacute; de d&eacute;finir le format de
cette structure tel que d&eacute;fini par le Tableau 8.1. Un grand
nombre de fonctions ont une option 'Archivage' qui sauvegarde
automatiquement des donn&eacute;es sous cette forme dans un sous
r&eacute;pertoire du r&eacute;pertoire &lt;DataRoot&gt; (Voir la
commande <I>DataRoot=getfamilydata(&rsquo;Directory&rsquo;,
&lsquo;DataRoot&rsquo;) </I><SPAN STYLE="font-style: normal">pour
conna&icirc;tre la localisation des fichiers de sauvegarde).</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les matrices r&eacute;ponses
retourn&eacute;es par les commandes <I>measrespmat, measbpmresp, etc,
</I><SPAN STYLE="font-style: normal">ont un format de structure
l&eacute;g&egrave;rement diff&eacute;rent.</SPAN>  Voir <I>help
measrespmat</I> et la section suivante pour plus de d&eacute;tails.
La chromaticit&eacute; et la fonction dispersion ont une structure de
retour proche de celle des matrices r&eacute;ponse avec des champs
suppl&eacute;mentaires n&eacute;cessaires pour des mesures
sp&eacute;cifiques (voir  <I>help</I> <I>measdisp</I> et <I>meachro</I>
pour plus de d&eacute;tails).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western">9 Mesure de matrices r&eacute;ponse</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	La fonction
<I>measrespmat</I> est la fonction utilis&eacute;e pour toute mesure
de matrice r&eacute;ponse entre familles d'actionneurs (correcteur,
quadrup&ocirc;les, sextup&ocirc;les) et familles d'observables (BPM,
nombres d'ondes, chromaticit&eacute;s).  
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">&gt;&gt;
help measrespmat</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">For
family name, device list inputs:</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">S
= measrespmat(MonitorFamily, MonitorDeviceList, ActuatorFamily,
ActuatorDeviceList, </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
               <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ActuatorDelta,
ModulationMethod, WaitFlag, ExtraDelay)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">For
data structure inputs: </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">S
= measrespmat(MonitorStruct, ActuatorStruct, ActuatorDelta,
ModulationMethod, </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
               <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">WaitFlag,
ExtraDelay)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">Inputs:</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">MonitorFamily
      - AcceleratorObjects family name for monitors</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">MonitorDeviceList
  - AcceleratorObjects device list for monitors (element or device)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">or
MonitorStruct can replace MonitorFamily and MonitorDeviceList</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ActuatorFamily
     - AcceleratorObjects family name for actuators</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ActuatorDeviceList
 - AcceleratorObjects device list for actuators </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                       <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">(element
or device) or ActuatorStruct can replace</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                       <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ActuatorFamily
and ActuatorDeviceList</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ActuatorDelta
   - AcceleratorObjects family name for monitors</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ModulationMethod
- Method for changing the ActuatorFamily</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                    <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">bipolar'
changes the ActuatorFamily by +/- ActuatorDelta </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                             <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">on
each step {default}</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                    <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">unipolar'
changes the ActuatorFamily from 0 to ActuatorDelta </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                              <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">on
each step</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">WaitFlag
        - (see setpv for WaitFlag definitions) {default: -1}</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">ExtraDelay
      - extra time delay [seconds] after a setpoint change to wait
before</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                    <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">reading
the MonitorFamily {default: 0}</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">Output:</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">S
= the response matrix.</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">If
'struct'  is an input, the output will be a response matrix structure
</FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                           <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">{default
for data structure inputs}</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
 <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">If
'numeric' is an input, the output will be a numeric matrix </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                           <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">{default
for non-data structure inputs}</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">Notes:</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">1.
If MonitorFamily and  MonitorDeviceList are cell arrrays, then S is a
cell array </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">of
response matrices.</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">2.
ActuatorFamily, ActuatorDeviceList, ActuatorDelta, ModulationMethod,
WaitFlag are</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">not
cell arrrays.</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">3.
If ActuatorDeviceList is empty, then the entire family is change
together.</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">4.
Bipolar mode changes the actuator by +/- ActuatorDelta/2</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">5.
Unipolar mode changes the actuator by ActuatorDelta</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">6.
Return values are MonitorChange/ActuatorDelta (normalized)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">7.
When using cell array inputs don't mix structure data input with
non-structure data</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">Examples:</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">1.
2x2 tune response matrix for QF and QD families (delay for tune
matrix will need </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">to
be addjusted):</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
      <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">TuneRmatrix
= [measrespmat('TUNE',[1;2],'QF',[],2,'unipolar') ... </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                     <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">measrespmat('TUNE',[1;2],'QD',[],2,'unipolar')];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">2.
Orbit response matrix for all the horizontal correctors (+/-1 amp
kick size):</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">Smat
= measrespmat({'BPMx','BPMy'}, {getlist('BPMx'),getlist('BPMy')},
'HCM', ...</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                                 
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">getlist('HCM'),ones(size(getlist('HCM'),1),1),
...</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
                                  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">'bipolar',-2);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">The
output is stored in a cell array.  Smat{1} is the horizontal plane
and Smat{2} </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">is
the vertical cross plane.</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">For
struct outputs,</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
  <FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">Smat
= measrespmat({'BPMx','BPMy'}, {getlist('BPMx'),getlist('BPMy')},
'HCM', </FONT></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in">  
        
<FONT FACE="r_ansi, monospace"><FONT SIZE=1 STYLE="font-size: 8pt">getlist('HCM'),ones(size(getlist('HCM'),1),1),'bipolar',-2,'struct');</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	La matrice r&eacute;ponse,
Rmat, est sauvegard&eacute;e en respectant le format d&eacute;fini
dans le Tableau 9.1.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=82*>
	<COL WIDTH=174*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">Data:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">[Response matrix]</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">Monitor:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">[Data Structure for the Monitor]</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">Actuator:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">[Data Structure for the Actuator]</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">ActuatorDelta:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">[Delta change in the Actuator]</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">GeV:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">Energy</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">TimeStamp: 
				</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">Output of <I>clock</I>, e.g. [2003 6 17 20 27
				25.0770]</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">DCCT: 
				</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">Beam current</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">ModulationMethod: 
				</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">'bipolar' or 'unipolar'</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">WaitFlag:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">WaitFlag 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">ExtraDelay:</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">ExtraDelay</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">DataType: 
				</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">'Response Matrix'</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=32%>
				<P CLASS="western">CreatedBy: 
				</P>
			</TD>
			<TD WIDTH=68%>
				<P CLASS="western">'measrespmat'</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 9.1Format de
sauvegarde d'une matrice r&eacute;ponse</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Pour l'op&eacute;ration
de tous les acc&eacute;l&eacute;rateurs, les matrices r&eacute;ponses
sont utilis&eacute;es quotidiennement. Comme ces matrices sont
souvent utilis&eacute;es et g&eacute;n&eacute;r&eacute;es plusieurs
fois au cours d'une ann&eacute;e, une fonction sp&eacute;cifique a
&eacute;t&eacute; &eacute;crite pour forcer un format consistant,
prenant en compte qu'un &eacute;quipement ne fonctionne pas, et
permettant un archivage ais&eacute;. Les principales fonctions pour
acc&eacute;der &agrave; une matrice r&eacute;ponse d&eacute;j&agrave;
mesur&eacute;e et archiv&eacute;e sont maintenant rappel&eacute;es :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"> 
</P>
<UL SRC="matlabmiddlelayerSOLEIL_html_424a8468.gif" WIDTH=12 HEIGHT=12 ALIGN=ABSMIDDLE>
	<P CLASS="western" STYLE="margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_424a8468.gif" WIDTH=12 HEIGHT=12 ALIGN=ABSMIDDLE>
	gettuneresp &ndash; matrice r&eacute;ponse des nombres d'ondes</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_424a8468.gif" WIDTH=12 HEIGHT=12 ALIGN=ABSMIDDLE>
	getchromresp &ndash; matrice r&eacute;ponse des chromaticit&eacute;s</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_424a8468.gif" WIDTH=12 HEIGHT=12 ALIGN=ABSMIDDLE>
	getdispresp &ndash; matrice r&eacute;ponse pour corriger la
	dispersion</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_424a8468.gif" WIDTH=12 HEIGHT=12 ALIGN=ABSMIDDLE>
	getrespmat &ndash; fonction g&eacute;n&eacute;rique</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="western" STYLE="margin-bottom: 0in">La fonction g&eacute;n&eacute;rique
<I>getrespmat</I><SPAN STYLE="font-style: normal"> peut s'utiliser
comme suit :</SPAN>  
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><I>S =
getrespmat(BPMFamily, BPMDevList, CorrFamily, CorrDevList, FileName,
GeV)</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Cette fonction est
tr&egrave;s polyvalente : la matrice r&eacute;ponse peut &ecirc;tre
lue depuis un fichier donn&eacute;, si sp&eacute;cifi&eacute; en
argument (<I>FileName,</I>); sinon la matrice r&eacute;ponse est
recherch&eacute;e parmi les fichiers de r&eacute;f&eacute;rence dont
les noms peuvent &ecirc;tre obtenu en utilisant la commande 
<I>getfamilydata</I> <I>('OpsData','RespFiles')</I>, e.g.
{<I>'GoldenBPMResp', 'GoldenTuneResp'</I>}. La fonction <I>getrespmat</I>
recherche alors parmi toutes les variables du fichier (et &agrave;
travers chaque cellule et tableau de structure s'ils sont d&eacute;finis)
si la matrice recherch&eacute;e avec les bons champs &laquo;&nbsp;Monitor&nbsp;&raquo;
(observables) et &laquo;&nbsp;Actuator&nbsp;&raquo; (actionneur)
existe. L'exemple suivant permet de lire la matrice r&eacute;ponse
horizontale pour faire la correction d'orbite de l'anneau.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.51in; margin-bottom: 0in"><FONT SIZE=2 STYLE="font-size: 11pt"><I>&gt;&gt;
HCORsp = getsp('HCOR', 'Struct');</I></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.51in; margin-bottom: 0in"><FONT SIZE=2 STYLE="font-size: 11pt"><I>&gt;&gt;
BPMam = getam('BPMx', 'Struct'); </I></FONT>
</P>
<P CLASS="western" STYLE="margin-left: 0.51in; margin-bottom: 0in"><FONT SIZE=2 STYLE="font-size: 11pt"><I>&gt;&gt;
R = getrespmat(BPMam, HCORsp);</I></FONT></P>
<P CLASS="western" STYLE="margin-left: -0.01in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: -0.01in; margin-bottom: 0in"><BR>
</P>
<H1 CLASS="western">10 Fonctions de contr&ocirc;le commande de haut
niveau</H1>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">10.1 Introduction</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Une des raisons
principales qui ont pouss&eacute; le d&eacute;veloppement du Matlab
Middle Layer est de pouvoir &eacute;crire plus facilement des scripts
pour contr&ocirc;ler les acc&eacute;l&eacute;rateurs et pour &eacute;crire
des application de contr&ocirc;le de haut niveau. Comme illustration,
nous pouvons prendre le script permettant de faire fonctionner le
feedback lent de l'ALS. L'agorithme utilis&eacute; est la
d&eacute;composition en valeurs singuli&egrave;res (SVD). Ici seules
les 24 premi&egrave;res valeurs sont utilis&eacute;es pour faire la
correction.</P>
<P CLASS="western" STYLE="margin-left: -0.01in; margin-right: -0.75in; margin-bottom: 0in">
<BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>	% ALS orbit correction example</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>Sx=getrespmat('BPMx',[ ],'HCM',[ ]);	% Get the proper
response matrix</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>X = getx;	% Gets all 96 horizontal BPMs (96x1 vector)</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>Ivec = 1:24;	% Use singular vectors 1 thru 24</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>[U, S, V] = svd(Sx);	% Computes the SVD of the response
matrix, Sx(96x94)</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>DeltaAmps = -V(:,Ivec)*((U(:,Ivec)*S(Ivec,Ivec))\X) ;	%
Find the corrector changes (94x1 vector)</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>stepsp('HCM', DeltaAmps);	% Changes the current in all
94 horizontal corrector magnets</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-right: -0.75in; margin-bottom: 0in">
<FONT SIZE=2>plot(1:96, X, 'b', 1:96, getx, 'r');	% Plot new orbit</FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western"><B>10.2 Liste de fonctions et applications</B></H2>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<SPAN STYLE="background: #ffff00">Non test&eacute;es ...</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" ALIGN=CENTER><B>Nom</B></P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" ALIGN=CENTER><B>Fonctionnalit&eacute;</B></P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">findrf </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash; one
				method of finding an &ldquo;optimal&rdquo; RF frequency based on
				dispersion</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">findqfa </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
				optimizes the setpoint of the quadrupole in the center of arcs.</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">goldenpage
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				displays the important settings and setpoints (like tune,
				chromaticity, etc)</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">plotfamily </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
				general plotting GUI for families (see section 11 for details)</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">rmdisp </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
				adjusts the RF frequency to remove the dispersion component of
				the orbit by fitting the orbit to the dispersion orbit (fitting
				the mean is optional).</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">setorbit </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
				general purpose global orbit correction function</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">srcycle
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				cycles the storage ring magnets</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">srramp
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				energy ramping (with beam) of the storage ring</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">setlocalbump
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				general purpose local bump function</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">quadcenter,
				quadplot, quaderror </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
				finds the quadrupole center of one magnet at a time</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">setorbitquadcenter
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				corrects the orbit to the quadrupole centers</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">srsetup </SPAN>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><SPAN STYLE="background: #ffff00">&ndash;
				launch pad for setup applications</SPAN></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">srcontrol
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				GUI for storage ring operations</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">scanbpms
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				local bump scan in the straight sections checking the linearity
				of the BPMs</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">scanpipe
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				used for scanning the electron beam in the straight sections and
				checking the lifetime (physical aperture)</SPAN></FONT></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">scantune
				</SPAN></FONT>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><FONT COLOR="#ff0000"><SPAN STYLE="background: #ffff00">&ndash;
				scan in tune space and record the lifetime (or loss monitors)</SPAN></FONT></P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 10.1Applications
de contr&ocirc;le de haut niveau.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">10.3 <B>Correction de l'orbite ferm&eacute;e
(<I>SETORBIT</I>)</B></H2>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<H4 CLASS="western"><SPAN STYLE="background: #ffff00">Correction sans
ajustement de la fr&eacute;quence RF</SPAN></H4>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">SVD
	(choix du nombre de valeurs singuli&egrave;res)</SPAN></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Pond&eacute;ration
	des BPM</SPAN></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Nombre
	d'it&eacute;ration ajustable</SPAN></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Changement
	absolu ou incr&eacute;mental de l'orbite</SPAN></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H4 CLASS="western"><SPAN STYLE="background: #ffff00">Correction avec
ajustement de la fr&eacute;quence RF</SPAN></H4>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">La
	fonction dispersion est ajout&eacute;e dans la matrice r&eacute;ponse
	comme une colonne suppl&eacute;mentaire. Plusieurs choix de
	fonctions dispersion sont possibles :<BR></SPAN><BR>
	</P>
	<OL>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">dispersion
		entr&eacute;e par l'utilisateur</SPAN></P>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">dispersion
		mesur&eacute;e</SPAN></P>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">dispersion
		du mod&egrave;le</SPAN></P>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">dispersion
		de r&eacute;f&eacute;rence (Golden dispersion)<BR></SPAN><BR>
		</P>
	</OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">correction
	utilisant l'algorithme SVD </SPAN>
	</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Note
:</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">&laquo;&nbsp;Instead
of fitting the RF frequency one could also remove the dispersion
component of the orbit use <I>rmdisp</I> or <I>findrf</I> before
calling <I>setorbit</I>.  At the ALS the RF is manually adjusted to
fix energy shift of the horizontal correctors to zero by iterating
orbit correction and RF frequency adjustment.  Accomplishing this as
an energy constraint within the orbit correction algorithm is a
planned future improvement.&nbsp;&raquo;</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">10.4 Bump local d'orbite ferm&eacute;e</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><I><B><SPAN STYLE="background: #ffff00">A
faire ..</SPAN></B></I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H2 CLASS="western">10.5 Interfaces graphiques 
</H2>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<H3 CLASS="western">10.5.1 <B>Affichage (<I>plotfamily</I>)</B></H3>
<OL>
	<OL>
		<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	</OL>
</OL>
<DIV ID="Cadre9" DIR="LTR" STYLE="float: left; width: 6.67in; height: 3.36in; border: none; padding: 0in; background: #ffffff">
	<P STYLE="margin-top: 0.08in"><IMG SRC="matlabmiddlelayerSOLEIL_html_mc91e8a5.png" NAME="Image2" ALIGN=LEFT WIDTH=100% BORDER=0><BR CLEAR=LEFT><FONT SIZE=2><I>Illustration
	10.1Application plotfamily.</I></FONT></P>
</DIV><BR CLEAR=LEFT>
<P LANG="" CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">
<BR>
</P>
<H3 CLASS="western">10.5.2 Correction d'orbite</H3>
<P CLASS="western" ALIGN=CENTER STYLE="margin-right: 1.13in; margin-bottom: 0in">
<I><B><SPAN STYLE="background: #ffff00">A FAIRE</SPAN></B></I></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<H3 CLASS="western">10.5.3 BEAM BASED ALIGNMENT</H3>
<OL>
	<OL>
		<OL>
			<P CLASS="western" STYLE="margin-bottom: 0in"></P>
		</OL>
	</OL>
</OL>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Un quadrup&ocirc;les</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Tous les
	quadrup&ocirc;les 
	</P>
</OL>
<P CLASS="western" ALIGN=CENTER STYLE="margin-right: 1.13in; margin-bottom: 0in">
<I><B><SPAN STYLE="background: #ffff00">A FAIRE</SPAN></B></I></P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<H3 CLASS="western">10.5.4 MML pour le d&eacute;marrage et
l'op&eacute;ration des installations</H3>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><I><B><SPAN STYLE="background: #ffff00">A
FAIRE</SPAN></B></I></P>
<P ALIGN=CENTER STYLE="margin-top: 0.17in; page-break-before: always; page-break-after: avoid">
<FONT FACE="Bitstream Vera Sans, sans-serif"><FONT SIZE=6 STYLE="font-size: 28pt"><B>Annexes</B></FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><H2 CLASS="western">R&eacute;sum&eacute; des commandes utiles</H2>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-western">Les exemples peuvent &ecirc;tre
directement utilis&eacute;s dans Matlab par copier/coller.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<LI><H2 CLASS="western">Mesurer/sauvegarder une orbite</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL TYPE=a>
	<P CLASS="western" STYLE="margin-bottom: 0in"><U>Mesurer une orbite</U></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in">x
= <I>getx</I>; % ou x = <I>getam</I>('BPMx'); 
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in">z
= <I>getz</I>; % ou z = <I>getam</I>('BPMz'); 
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL TYPE=a START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in">Notes</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">L'option 'Struct'
	permet d'obtenir en retour de commande une structure
	autodescriptive.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Pour visualiser
	une orbite, utiliser l'interface <I>familyplot.</I></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL TYPE=a START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"><U>Sauvegarder une
	orbite dans le r&eacute;pertoire par d&eacute;faut</U></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>getx('archive');
% ou getx archive </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>getz('archive');
% ou getz archive</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in">Notes</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">getfamilydata('Directory','BPMData')
	est le r&eacute;pertoire de sauvegarde par d&eacute;faut 
	</P>
</OL>
<OL TYPE=a START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><U>Obtenir
l'orbite de r&eacute;f&eacute;rence (goldenorbit) des BPM </U>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>Xgolden
= getgolden('BPMx'); %plan horizontal </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>Zgolden
= getgolden('BPMz'); %plan vertical </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><U>Obtenir
les offsets des BPM </U>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>Xoffset
= getoffset('BPMx'); %plan horizontal </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>Zoffset
= getoffset('BPMz'); %plan vertical </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><U>Sauvegarder
l'orbite pr&eacute;sente comme orbite de r&eacute;f&eacute;rence </U>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in">Premi&egrave;re
m&eacute;thode 
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>BPMGolden
= {getx('struct'),getz('struct')}; </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>FileName
= getfamilydata('OpsData','BPMGoldenFile'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>DirName
= getfamilydata('Directory','OpsData'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>save([DirName
FileName], 'BPMGolden'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in">Deuxi&egrave;me
m&eacute;thode 
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>BPMxData
= getx('struct');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>BPMzData
= getz('struct'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>FileName
= getfamilydata('OpsData','BPMGoldenFile'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>DirName
= getfamilydata('Directory','OpsData'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>save([DirName
FileName], 'BPMxData', 'BPMzData'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><U>Sauvegarder
de l'orbite actuelle comme offset d'orbite de r&eacute;f&eacute;rence</U></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>BPMOffset
= {getx('struct'),getz('struct')}; </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>FileName
= getfamilydata('OpsData','BPMOffsetFile');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>DirName
= getfamilydata('Directory','OpsData');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>save([DirName
FileName], 'BPMOffset');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in; text-decoration: none">
Notes</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Les <SPAN LANG="en-US">offsets</SPAN>
	sont normalement d&eacute;termin&eacute;s en mesurant le centre des
	quadrup&ocirc;les, voir le programme de &laquo;&nbsp;<SPAN LANG="en-US">beam</SPAN>
	<SPAN LANG="en-US">based</SPAN> <SPAN LANG="en-US">alignment</SPAN>&nbsp;&raquo;
		</P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><U>D&eacute;terminer
et sauvegarder les &eacute;carts-type de l'orbite</U></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>BPMSigma
= measbpmsigma('struct');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>FileName
= getfamilydata('OpsData','BPMSigmaFile');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>DirName
= getfamilydata('Directory','OpsData');</I></P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><I>save([DirName
FileName], 'BPMSigma'); </I>
</P>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=2>
		<LI><H2 CLASS="western"><A NAME="getpv"></A>Les fonctions getpv et
		setpv</H2>
		<P CLASS="western"></P>
	</OL>
</OL>
<P CLASS="western"><FONT SIZE=2>% &gt;&gt; help getpv</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>% GETPV - Gets a TANGO attribute (or
AT simulated attribute)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  FamilyName/DeviceList Method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  [AM, tout, ErrorFlag] =
getpv(Family, Field, DeviceList, t, FreshDataFlag, TimeOutPeriod)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  [AM, tout, ErrorFlag] =
getpv(DataStructure, t, FreshDataFlag, TimeOutPeriod)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  TangoName Method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  [AM, tout, ErrorFlag] =
getpv(TangoName, t, FreshDataFlag, TimeOutPeriod)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  CommonName Method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  [AM, tout, ErrorFlag] =
getpv(Family, Field, CommonName, t, FreshDataFlag, TimeOutPeriod)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  INPUTS</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  1. Family = Family Name </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%              Data Structure</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              Tango Name</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              Accelerator Object</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              For CommonNames,
Family=[] searches all families</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              (or Cell Array of
inputs)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  2. Field = Accelerator Object
field name ('Monitor', 'Setpoint', etc) {'Monitor'}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%             Cell Array of fields</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  3. TangoName =   Access using
Tango name (scalar or vector outputs), </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                   Matrix of Tango
names (scalar outputs only)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                   Cell array of
Tango names</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  4. CommonName = Common name
(scalar or vector outputs), </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                  Matrix of common
names (scalar outputs only)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                  Cell array of
common names</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  5. DeviceList = [Sector Device #]
or [element #] list {default or empty list: whole family}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                  Cell array of
DeviceLists </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                  Note: if input 1
is a cell array then DeviceList must be a cell array</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  6. t = Time vector (t can not be a
cell) {default: 0}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  7. FreshDataFlag =  0   -&gt;
Return after first measurement {default}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                     else -&gt;
Return after FreshDataFlag number of new measurements have been read</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                     ie,
getpv('BPMx',[1 1],0,2) measures the orbit then continues to read the
orbit</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                         until 2 new
orbits have been measured and returns the last measurement. </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%  8. TimeOutPeriod = Time-out period
when waiting for fresh data {10 seconds}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  9. 'Struct' will return a data
structure {default for data structure inputs}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     'Numeric' will return numeric
outputs {default for non-data structure inputs}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  10. 'Physics'  - Use physics 
units (optional override of units)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%      'Hardware' - Use hardware
units (optional override of units)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  11. 'Online' - Get data online
(optional override of the mode)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%      'Model'  - Get data from the
model (optional override of the mode)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%      'Manual' - Get data manually
(optional override of the mode)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  OUTPUTS</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  1. AM   = Monitor values (Column
vector or matrix where each column is a data point in time)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  2. tout = Time when measurement
was completed (row vector)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  3. ErrorFlag =  0   -&gt; no
errors</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                 else -&gt; error or
warning occurred</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  The output will be a data
structure if the input is a data structure or the word 'struct' </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%  appears somewhere on the input
line.</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  NOTES</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  1. For data structure inputs:</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     Family     =
DataStructure.FamilyName</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     Field      =
DataStructure.Field</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     DeviceList =
DataStructure.DeviceList</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     Units      =
DataStructure.Units  (Units can be overridden on the input line)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     (The Mode field is ignored!)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  2. diff(t) should not be too
small.  If the desired time to collect the data is too </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%     short then the data collecting
will not be able to keep up.  Always check tout. </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%     (t - tout) is the time it took
to collect the data on each iteration.   </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>% </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%  3. An easy way to measure N
averaged monitors is:</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     PVmean =
mean(getpv(Family,DeviceList,1:N)')';   % 1 second between
measurements</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  4. Tango name method is always
Online!</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  5. For cell array inputs: </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%     a. Input 1 defines the size of
all cells</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     b. All of the cell array inputs
must be the same size or size=[1 1]</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     c. t (if used) can not be a
cell!</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     d. FreshDataFlag and
TimeOutPeriod can be a cell but they don't have to be</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  See also getam, getsp, getx, getz,
setpv</FONT></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><FONT SIZE=2>% &gt;&gt; help setpv</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>% SETPV - Absolute setpoint change
via MATLAB Tango access or AT simulator</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  FamilyName/DeviceList Method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  ErrorFlag = setpv(FamilyName,
Field, NewSP, DeviceList, WaitFlag)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  ErrorFlag = setpv(DataStructure,
WaitFlag)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  TangoName Method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  ErrorFlag = setpv(TangoName,
NewSP)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  CommonName Method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  ErrorFlag = setpv(FamilyName,
Field, NewSP, CommonNames, WaitFlag)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  INPUTS</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  1. Family = FamilyName </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%              Data Structure</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              Tango Name</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              AcceleratorObject</FONT></P>
<P CLASS="western"><FONT SIZE=2>%              Use Family=[] in
CommonName method to search all Families</FONT></P>
<P CLASS="western"><FONT SIZE=2>%             (or Cell Array of
inputs)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  2. TangoName = Tango access Tango
name (scalar or vector inputs)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                   Matrix of Tango
names (scalar inputs only)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                   Cell array of
Tango names</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  3. CommonName = CommonNames
(scalar or vector inputs) </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                  Matrix of
CommonNames (scalar inputs only)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                  Cell array of
CommonNames</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                  Must use Family=[]
in to search all Families</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  4. Field = AcceleratorObject Field
name ('Monitor', 'Setpoint', etc) {'Monitor'}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%             If Family is a cell
array then Field must be a cell array</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  5. NewSP = New Setpoints or cell
array of Setpoints</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  6. DeviceList = ([Sector Device #]
or [element #]) {default or empty list: whole family}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                  Note: all
numerical inputs must be column vectors</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  7. WaitFlag = 0    -&gt; return
immediately</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                &gt; 0  -&gt; wait
until ramping is done then adds an extra delay equal to WaitFlag </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                = -1 -&gt; wait
until ramping is done {SLAC default}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                = -2 -&gt; wait
until ramping is done then adds an extra delay for fresh data </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                        from the
BPMs  {ALS default}</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                = -3 -&gt; wait
until ramping is done then adds an extra delay for fresh data </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%                        from the
tune measurement system</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                = -4 -&gt; wait
until ramping is done then wait for a carriage return</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                else -&gt; wait
until ramping is done</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                Note: change
WaitFlag default in setpv.m and BPM delay in the Accelerator Data
structure </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  8. ErrorFlag = 0 -&gt; OK</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                -1 -&gt; MATLAB
Tango Access error</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                -2 -&gt; SP-AM
warning, i.e. setpoint minus analogmonitor not within tolerance (only
if WaitFlag=1)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  9. 'Physics'  - Use physics  units
(optional override of units)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     'Hardware' - Use hardware units
(optional override of units)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  10. 'Online' - Set data online
(optional override of the mode)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%      'Model'  - Set data on the
model (optional override of the mode)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%      'Manual' - Set data manually
(optional override of the mode)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                      </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%  NOTES</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  1. For data structure inputs:</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     Family     =
DataStructure.FamilyName</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     Field      =
DataStructure.Field</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     NewSP      = DataStructure.Data</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     DeviceList =
DataStructure.DeviceList</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     Units      =
DataStructure.Units  (Units can be overridden on the input line)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     (The Mode field is ignored!)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  2. The number of colomns of NewSP
and DeviceList must be equal,</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     or NewSP must be a scalar.  If
NewSP is a scalar, then all</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     devices in DeviceList will be
set to the same value. </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  3. When using cell array all
inputs must be the same size cell array</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     and the output will also be a
cell array.  Field and WaitFlag can be </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%     cells but they don't have to
be.</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  4. For Familys and
AcceleratorObject structures unknown devices or elements are ignored.</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  5. TangoName method is always
Online!</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  6. For cell array inputs: </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%     a. Input 1 defines the maximum
size of all cells</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     b. The cell array size must be
1 or equal to the number of cell in input #1</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     c. WaitFlag can be a cell but
it doesn't have to be</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  7. WaitFlag</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     a. If no change is seen on the
AM then an error will occur.  The tolerance for this</FONT></P>
<P CLASS="western"><FONT SIZE=2>%        may need to be changed
depending on the accelerator (edit the end of this function to do so)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%     b. The delay for WaitFlag = -2
is in the AD.  It is often better to use the FreshDataFlag when </FONT>
</P>
<P CLASS="western"><FONT SIZE=2>%        getting BPM data but the
data must to noisy for this to work.</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  EXAMPLES</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  1. setpv('HCOR','Setpoint',1.23); 
             Sets the entire HCOR family to 1.23</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  2.
setpv({'HCOR','VCOR'},'Setpoint',{10.4,5.3}); Sets the entire HCOR
family to 10.4 and VCOR family to 5.3</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  3. setpv('HCOR','Setpoint',1.23,[1
3]);    Simple DeviceList method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  4. setpv('HCOR','Setpoint',1.23,
3);       Simple ElementList method</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  5.
setpv(AO('HCOR'),'Setpoint',1.5,[1 2]);     If AO is a properly
formatted AcceleratorObject Structure</FONT></P>
<P CLASS="western"><FONT SIZE=2>%                                    
               then this sets the 1st sector, 2nd element to 1.5</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  6.
setpv('HCOR','Setpoint',1.23,'1CX3');   CommonName method with Family
specified (spear3 naming convection)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  7.
setpv([],'Setpoint',1.23,'1CX3');      CommonName method without
Family (spear3 naming convection)</FONT></P>
<P CLASS="western"><FONT SIZE=2>%</FONT></P>
<P CLASS="western"><FONT SIZE=2>%  See also getam, getsp, getpv,
setsp, steppv, stepsp</FONT></P>
<OL>
	<OL START=4>
		<LI><H2 CLASS="western">Lire la valeur de consigne et de relecture
		/ sp&eacute;cifier une nouvelle valeur de consigne sur une
		alimentation</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.49in; margin-bottom: 0in"><BR>
</P>
<OL TYPE=a>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Lire toutes les
	valeurs de consigne sur les correcteurs lents horizontaux 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><I>sp = getsp('HCOR')</I></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Lire toutes les
	valeurs de relecture sur les correcteurs lents horizontaux 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><I>am = getam('HCOR') </I>
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Assigner 0.5 A sur
	HCOR(2,1) et 0.33 A sur HCOR(4,2) 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><I>setsp('HCOR', [0.5;
	0.33], [ 2 1; 2 4]) </I>
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Assigner 0 A sur
	tous les correcteurs horizontaux</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><I>setsp('HCOR', 0);</I></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><U>Notes</U></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>getfamilylist</I>
	revoies le nom de toutes les familles d'&eacute;l&eacute;ments</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><I>plotfamily</I>
	permet de tracer les valeurs de relecture et de consigne d'une
	famille d'&eacute;quipements. 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<OL>
	<OL START=5>
		<LI><H2 CLASS="western"><A NAME="Matrice R&eacute;ponse"></A>Mesure
		d&rsquo;une matrice r&eacute;ponse</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-western">La commande <I>measbpmrep</I> permet
de mesurer la matrice r&eacute;ponse pour les correcteurs par d&eacute;faut,
ie les correcteurs lents. Pour utiliser un autre jeu de correcteurs,
il suffit sp&eacute;cifier les correcteurs &agrave; utiliser en
param&egrave;tres d&rsquo;entr&eacute;e de la fonction. Voir l&rsquo;aide
en ligne pour plus de d&eacute;tails (<I>help measbpmresp</I>).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="Times, serif"><U>Commande
	pour une <FONT FACE="Avant Garde Gothic">mesure</FONT> en ligne de
	la matrice r&eacute;ponse</U></FONT></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="retrait-du-corps-de-texte--western"><I>% this command</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>R = measbpmresp;</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>%    is the same as,</I></P>
<P CLASS="alin&eacute;a-n&eacute;gatif-western"><I>R =
measbpmresp(&rsquo;BPMx&rsquo;, &lsquo;BPMz&rsquo;, &lsquo;HCOR&rsquo;,
&lsquo;VCOR&rsquo;, &lsquo;Online&rsquo;,  &lsquo;Numeric&rsquo;,
&lsquo;Archive&rsquo;);</I></P>
<P CLASS="alin&eacute;a-n&eacute;gatif-western"><BR><BR>
</P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"><U>Commande pour une
	mesure d'apr&egrave;s le mod&egrave;le</U></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="retrait-du-corps-de-texte--western"><I>% Defaults for model
response matrices</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>R =
measbpmresp(&rsquo;Model&rsquo;);</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>%    is the same as,</I></P>
<P CLASS="alin&eacute;a-n&eacute;gatif-western"><I>R =
measbpmresp(&rsquo;BPMx&rsquo;, &lsquo;BPMz&rsquo;, &lsquo;HCOR&rsquo;,
&lsquo;VCOR&rsquo;, &lsquo;Model&rsquo;, &lsquo;Numeric&rsquo;,
&lsquo;NoArchive&rsquo;, &lsquo;FixedPathLength&rsquo;, &lsquo;Full&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-western"><U>Matrice r&eacute;ponse en ligne
pour 3 BPM et 2 correcteurs sans sauvegarde</U></P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="retrait-du-corps-de-texte--western"><I>% Get a response
matrix for 3 BPMs and 2 Correctors (w/o saving data)</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>% The data is
usually saved to disk.  The &lsquo;NoArchive&rsquo; flag stops this.</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>R1 =
measbpmresp(&rsquo;BPMx&rsquo;, [1 1;2 2;6 3], &lsquo;BPMz', [1 1;2
2;6 3], &lsquo;HCOR&rsquo;, [1 1; 1 3], &lsquo;VCOR&rsquo;, [1 1; 1
2], &lsquo;NoArchive&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-right: -0.75in; margin-bottom: 0in">
<BR>
</P>
<P CLASS="alin&eacute;a-western"><U>Matrice r&eacute;ponse mod&egrave;le
pour 3 BPM et 2 correcteurs sans sauvegarde</U></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>% Get a the same
data from the model</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>% The default for
the model is not to save data to disk.</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>R2 =
measbpmresp(&rsquo;BPMx&rsquo;, [1 1;2 2;6 3], &lsquo;BPMy&rsquo;, [1
1;2 2;6 3], &lsquo;HCM&rsquo;, [1 1; 1 3], &lsquo;VCM&rsquo;, [1 1; 1
2], &lsquo;Model&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"><U>Comparaison</U></P>
</UL>
<P CLASS="retrait-du-corps-de-texte--western">% Compare a column (ie,
a corrector magnet response)</P>
<P CLASS="retrait-du-corps-de-texte--western">plot(R2(:,1) &ndash;
R1(:,1));</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Get a the same data
from the model w/ a FixedMomentum, Linear model</P>
<P CLASS="alin&eacute;a-n&eacute;gatif-western">R2 =
measbpmresp(&rsquo;BPMx&rsquo;, &lsquo;BPMz&rsquo;, &lsquo;HCOR&rsquo;,
[1 1; 1 3], &lsquo;VCOR&rsquo;, [1 1; 1 2], &lsquo;FixedMomentum&rsquo;,
&lsquo;Linear&rsquo;, &lsquo;Model&rsquo;);</P>
<P CLASS="western" STYLE="text-indent: -0.01in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="text-indent: -0.01in; margin-bottom: 0in"><U>Le
r&eacute;pertoire et fichier de sauvegarde par d&eacute;faut est :</U></P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="alin&eacute;a-n&eacute;gatif-western">&lt;DataRoot&gt;\Response\BPM\BPMRespMat&lt;Date&gt;&lt;Time&gt;.mat</P>
<P CLASS="western" STYLE="text-indent: -0.01in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="text-indent: -0.01in; margin-bottom: 0in"><U>Pour
que cette matrice r&eacute;ponse devienne la matrice utilis&eacute;e
par les programme, il faut la copier &agrave; :</U></P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<P CLASS="alin&eacute;a-n&eacute;gatif-western">&lt;OpsData&gt;\GoldenBPMResp.mat</P>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</UL>
<OL>
	<OL START=6>
		<LI><H2 CLASS="western">Pr&eacute;parer  un fichier pour une
		analyse avec LOCO</H2>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
	</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
	<SPAN STYLE="background: #ffff00">LOCO requires an orbit response
matrix and the standard deviations of the BPM difference orbits. 
Measure a new orbit response matrix with <I>measbpmres</I> and new
BPM standard deviations <I>measbpmsigma</I>.  Combine the output from
these functions with <I>makelocoinput</I>.  <B><I>(this function is
still under development)</I></B></SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=7>
		<LI><H2 CLASS="western">Get/Set/Step RF frequency</H2>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western"><BR><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">(to be written)</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=8>
		<LI><H2 CLASS="western">Mesurer, sauvegarder, dessiner la fonction
		dispersion</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.01in; margin-bottom: 0in">	</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.01in">
	La fonction <I>measdisp </I><SPAN STYLE="font-style: normal">permet
de mesurer la fonction dispersion. En fin de mesure, le d&eacute;placement
d&rsquo;orbite en fonction de la fr&eacute;quence RF est affich&eacute;.</SPAN>
 <SPAN STYLE="background: #ffff00">A termes, l<SPAN STYLE="font-style: normal">e
d&eacute;placement d&rsquo;orbite en fonction de l&rsquo;&eacute;nergie
sera &eacute;galement affich&eacute;.</SPAN></SPAN><SPAN STYLE="font-style: normal">
Les unit&eacute;s par d&eacute;faut pour la dispersion sont
actuellement le changement d&rsquo;orbite par unit&eacute; de
fr&eacute;quence</SPAN> [mm/MHz] (unit&eacute; &laquo;&nbsp;Hardware&nbsp;&raquo;).
 Cependant, il est possible de s&eacute;lectionner d&rsquo;autres
unit&eacute;s [meters/(dp/p)] (unit&eacute;s &laquo;&nbsp;Physics&nbsp;&raquo;)
en ajoutant le param&egrave;tre &lsquo;Physics&rsquo; or &lsquo;Zeta&rsquo;
&agrave; l&rsquo;appel de la fonction.  La fonction renvoie une
structure si le param&egrave;tre &lsquo;Struct&rsquo; est ajout&eacute;.
 Les champs de la structure sont semblables &agrave; ceux de la
structure la matrice r&eacute;ponse (variation d&rsquo;orbite pour
une variation de la fr&eacute;quence RF) pour pouvoir &ecirc;tre
utilis&eacute;s par le programme LOCO.  La fonction <I>plotdisp</I>
permet de tracer une mesure ancienne de la dispersion.  Voir <I>help</I>
<I>measdisp</I> pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-left: 0.75in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Measure the
dispersion (vector output)</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dz] = measdisp;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Measure the
dispersion (structure output)</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dz] =
measdisp(&rsquo;Struct&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><FONT FACE="Times, serif">%
Measure the dispersion in physics units [1/(dp/p)]</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dz] = measdisp
(&rsquo;Struct&rsquo;, &lsquo;Physics&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Measure the
dispersion and archive (output is optional)</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>measdisp
(&rsquo;Archive&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Measure and plot the
dispersion</P>
<P CLASS="retrait-du-corps-de-texte--western">% No outputs or
&lsquo;Display&rsquo; on the input line will automatically plot</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dz] =
measdisp(&rsquo;Display&rsquo;);</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>measdisp;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"> 
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Plot using plotdisp
function</P>
<P CLASS="retrait-du-corps-de-texte--western">[Dx, Dz] =
measdisp(&rsquo;Struct&rsquo;);</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>plotdisp(Dx, Dz);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Model dispersion
(override the Mode to Simulate)</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dz] =
measdisp(&rsquo;Simulate&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Model dispersion
(calls AT directly)</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dy] =
measdisp(&rsquo;Model&rsquo;);  % calls modeldisp</I></P>
<P CLASS="western" STYLE="margin-left: 0.75in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=9>
		<LI><H2 CLASS="western">Nombres d'ondes</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL>
			<LI><H3 CLASS="western">Lire et changer les nombres d'ondes</H3>
		</OL>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western"><BR><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Measure the tune and
return a 2x1 vector</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Tune = gettune;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Measure the tune and
return a structure</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Tune =
gettune(&rsquo;Struct&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL START=2>
			<LI><H3 CLASS="western">Mesure de la matrice r&eacute;ponse des
			nombres d&rsquo;onde</H3>
			<P CLASS="retrait-du-corps-de-texte--western"></P>
		</OL>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western"><SPAN STYLE="font-style: normal">La
fonction </SPAN><I>meastuneresp</I> permet de mesurer la matrice
r&eacute;ponse des nombres d&rsquo;ondes.  L&rsquo;unit&eacute; de la
matrice est  [nombre d&rsquo;onde fractionnaire/Amplitude] (hardware
units).  Voir <I>help</I> <I>meastuneresp</I> pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">Le r&eacute;pertoire et
fichier de sauvegarde par d&eacute;faut est :</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>&lt;DataRoot&gt;\Response\Tune\TuneRespMat&lt;Date&gt;&lt;Time&gt;.mat</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">Pour faire de cette
matrice la matrice de r&eacute;f&eacute;rence des nombre d&rsquo;onde,
il suffit de la copier dans :</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>&lt;OpsData&gt;\GoldenTuneResp.mat</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL START=4>
			<LI><H3 CLASS="western">Changements relatifs des nombres d&rsquo;ondes</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><SPAN STYLE="font-weight: medium">Pour
modifier les nombres d&rsquo;ondes de </SPAN> [-.05; .05], il suffit
d&rsquo;utiliser la commande  <I>steptune</I>.</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>steptune([-.05;
.05]);</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">On peut v&eacute;rifier
&agrave; la main ce que la commande pr&eacute;c&eacute;dente fait :</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% On mesure les nombres
d&rsquo;ondes</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Tune1 = gettune;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% on mesure la matrice
des nombres d&rsquo;ondes</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>m = gettuneresp;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% On calcule les
variations de courant pour les deux familles de quadrip&ocirc;les et
on applique la correction:</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>DeltaAmps = inv(m) *
[-.05; .05];</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>setsp({&rsquo;Q9&rsquo;,
&lsquo;Q7&rsquo;}, {getsp(&rsquo;Q7&rsquo;)+DeltaAmps(1),
getsp(&rsquo;Q9&rsquo;)+DeltaAmps(2)});</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% On mesure de nouveau
les nombres d&rsquo;onde et v&eacute;rifie la varation effectu&eacute;e:</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Tune2 = gettune;</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>DeltaTune = Tune2 &ndash;
Tune1</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=10>
		<LI><H2 CLASS="western">Chromaticit&eacute;s</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL>
			<LI><H3 CLASS="western">Mesure de la chromaticit&eacute;</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.01in">
	La commande <I>measchro </I><SPAN STYLE="font-style: normal">permet
de mesurer la chromaticit&eacute;</SPAN><I>.</I> Les variations des
nombres d&rsquo;ondes avec la fr&eacute;quence RF ou l&rsquo;&eacute;nergie
sont trac&eacute;es.  Les chromaticit&eacute;s sont les parties
lin&eacute;aire des ajustements des courbes.  A chaque mesure, bien
v&eacute;rifier que la courbe a une allure correcte.   Note : Lorsque
la chromaticit&eacute; est proche de z&eacute;ro de petites erreurs
sur les nombre d&rsquo;ondes peuvent engendrer une mesure de
chromaticit&eacute; in correcte.  L&rsquo;unit&eacute; par d&eacute;faut
de la chromaticit&eacute; est le variation du nombre d&rsquo;onde par
unit&eacute; de fr&eacute;quence RF [1/MHz] (&laquo;&nbsp;Hardware
units&nbsp;&raquo;).  Cependant, il es possible de s&eacute;lectionner
comme unit&eacute;, la variation de nombre d&rsquo;onde en fonction
de l&rsquo;&eacute;nergie  [1/(dp/p)] (&laquo;&nbsp;Physics units&nbsp;&raquo;)
en sp&eacute;cifiant <FONT FACE="Arial, sans-serif">&lsquo;Physics&rsquo;
ou &lsquo;Zeta&rsquo;</FONT> en param&egrave;tre de la commande.  Le
format de sortie par d&eacute;faut est un vecteur de chromaticit&eacute;s
2x1. Pour obtenir une structure, il suffit de pr&eacute;ciser
<FONT FACE="Arial, sans-serif">&lsquo;Struct&rsquo;</FONT> en
argument de la fonction.  Les champs de la structure sont similaires
&agrave; ceux de la matrice r&eacute;ponse. <SPAN STYLE="font-style: normal">La
fonction</SPAN><I> measchro</I> dessine automatiquement les courbes
de variation des nombres d&rsquo;ondes avec l&rsquo;&eacute;nergie et
par ajustement d&eacute;termine les chromaticit&eacute;s lin&eacute;aire
et d&rsquo;ordre 2.  Voir <I>help measchro</I> pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Mesure de la
chromaticit&eacute;, vecteur 2x1 (units [1/MHz])</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Chro = measchro;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">%  Mesure de la
chromaticit&eacute; avec le r&eacute;sultat sous forme de structure</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>ChroStruct =
measchro(&rsquo;Struct&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><FONT FACE="Arial, sans-serif">%
Mesure de la chromaticit&eacute; en unit&eacute;s physiques
</FONT>[1/(dp/p)]</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>ChroStruct =
measchro(&rsquo;Struct&rsquo;, &lsquo;Physics&rsquo;);</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Mesure de la
chromaticit&eacute; et archivage</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>measchro(&rsquo;Archive&rsquo;);
            % Output is optional</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL START=2>
			<LI><H3 CLASS="western">Mesure de la matrice r&eacute;ponse des
			chromaticit&eacute;s</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.01in">
<SPAN STYLE="font-style: normal">	La commande </SPAN><I>measchroresp</I>
permet de mesurer a matrice r&eacute;ponse des  chromaticit&eacute;
en utilisant les familles de sextup&ocirc;les par d&eacute;faut.  Les
unit&eacute;s sont exprim&eacute;es en [1/MHz] (hardware units). 
Taper help <I>measchroresp</I> pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">R&eacute;pertoire et
fichier de sauvegarde par d&eacute;faut :</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>&lt;DataRoot&gt;\Response\Chromaticity\ChroRespMat&lt;Date&gt;&lt;Time&gt;.mat</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">Pour faire ce cette
matrice, la matrice de r&eacute;f&eacute;rence pour modifier la
chromaticit&eacute; :</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>&lt;OpsData&gt;\GoldenChroResp.mat</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL START=3>
			<LI><H3 CLASS="western">Variations relatives des chromaticit&eacute;s
			et mesure de la matrice r&eacute;ponse</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">Pour changer les
valeurs de chromaticit&eacute; de [-.25; .25] [1/MHz], il suffit
d&rsquo;utiliser la commande :</P>
<P CLASS="retrait-du-corps-de-texte--western">stepchro([-.25; .25]);</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">	Si les chromaticit&eacute;s
ont &eacute;t&eacute; mesur&eacute;es en unit&eacute;s physiques et
si la matrice r&eacute;ponse a &eacute;t&eacute; prise en unit&eacute;
hardware, il suffit de la convertir avant d&rsquo;utiliser la
commande  <I>stepchro</I>.   Pour,  RF=352.2 et MCF=0.001016,</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><I><FONT FACE="Arial, sans-serif">stepchro([.1346;
-.1346] /</FONT> -RF / MCF<FONT FACE="Arial, sans-serif">);</FONT></I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">Cependant il est
recommander d&rsquo;avoir les m&ecirc;mes unit&eacute;s durant
l&rsquo;ensemble des mesures.</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">La fonction <I>stepchro</I>
peut &ecirc;tre facilement r&eacute;alis&eacute;e &agrave; la main :</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Mesure la
chromaticit&eacute; pour v&eacute;rifier &agrave; la fin le r&eacute;sultat</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>figure(1);</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Chro1 = measchro;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Lecture de la matrice
r&eacute;ponse des chromaticit&eacute; en utilisant les familles par
d&eacute;faut</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>m = getchroresp;</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Calcul des variations
en courant pour les deux familles de sectup&ocirc;les et application
des nouvelles valeurs de consigne.</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>DeltaAmps = inv(m) *
[-.25; .25];</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>setsp({&rsquo;S9&rsquo;,
&lsquo;S10&rsquo;}, {getsp(&rsquo;S9&rsquo;)+DeltaAmps(1),
getsp(&rsquo;S10&rsquo;)+DeltaAmps(2)});</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Mesure finale des
chromaticit&eacute;s et v&eacute;rification des r&eacute;sultats:</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>figure(2);</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>Chro2 = measchro;</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>DeltaCrho = Chro2 &ndash;
Chro1</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<LI><H2 CLASS="western">Sauvegarde/restauration</H2>
	</OL>
</OL>
<UL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Archiver
	une maille</SPAN></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Faire
	de la maille actuelle, la maille pour l'op&eacute;ration courante.</SPAN></P>
</UL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=12>
		<LI><H2 CLASS="western">&laquo;&nbsp;Beam based alignment&nbsp;&raquo;</H2>
		<P CLASS="western"></P>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western"><SPAN STYLE="background: #ffff00">(to
be written)</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=14>
		<LI><H2 CLASS="western">Fonctions pour manipuler les insertions</H2>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western"><BR><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western"><SPAN STYLE="background: #ffff00">(&agrave;
venir)</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=15>
		<LI><H2 CLASS="western">Fonctions propres au mod&egrave;le AT</H2>
	</OL>
</OL>
<P CLASS="retrait-du-corps-de-texte--western"><BR><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">Exemple d'utilisation :</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Model dispersion
function</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>modeldisp;          
        % Plots with units mm/MHz</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>modeldisp(&rsquo;BPMx&rsquo;,
&lsquo;BPMz&rsquo;);   % Plots at &lsquo;BPMx&rsquo;, &lsquo;BPMz&rsquo;
families [mm/MHz]</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>modeldisp(&rsquo;Physics&rsquo;);
  % Plots with units meters/(dp/p)</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Dx, Dy] =
modeldisp;  % Returns Dx, Dy with units mm/MHz</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Model beta function</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>modeltwiss(&rsquo;beta&rsquo;);
               % Plot beta</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>modeltwiss(&rsquo;beta&rsquo;,
&lsquo;BPMx&rsquo;);   % Plot beta at the BPMx family</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[Betax, Betaz] =
modeltwiss(&rsquo;beta&rsquo;, &lsquo;BPMx&rsquo;);   % Returns beta
at BPMx</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western">% Model closed orbit</P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[x, y] =
modeltwiss(&rsquo;ClosedOrbit&rsquo;);    % Closed orbit at all AT
elements</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>[x, z] =
modeltwiss(&rsquo;x&rsquo;);                     % Closed orbit at
all AT elements</I></P>
<P CLASS="retrait-du-corps-de-texte--western"><I>z = modeltwiss(&rsquo;z&rsquo;,
&lsquo;BPMz&rsquo;);              % Vertical orbit at BPMy family</I></P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=16>
		<LI><H2 CLASS="western">Exemple de script Matlab pour corriger
		l'orbite ferm&eacute;e</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-left: 0.38in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Introduce an orbit error</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
setsp(&rsquo;HCOR&rsquo;,rand(72,1));</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Get the response matrix</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
%Sx = getrespmat(&rsquo;BPMx&rsquo;,&rsquo;HCOR&rsquo;);</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
Sx = measbpmresp(&rsquo;BPMx&rsquo;, &lsquo;BPMz&rsquo;,&rsquo;HCOR&rsquo;,
&lsquo;VCOR&rsquo;, &lsquo;Model&rsquo;);</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
Sx = Sx(1,1).Data;</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Gets all horizontal BPMs (vector)</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
X = getx;</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Computes the SVD of the response matrix, Sx(120x56)</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Use singular vectors 1 thru 24</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
Ivec = 1:24;</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
[U, S, V] = svd(Sx);</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Find the corrector changes (vector)</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
DeltaAmps = -V(:,Ivec)*((U(:,Ivec)*S(Ivec,Ivec))\X) ;</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Changes the current in all horizontal corrector magnets</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
stepsp(&rsquo;HCOR&rsquo;, DeltaAmps);</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
% Plot new orbit</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
plot(getspos(&rsquo;BPMx&rsquo;), X, &lsquo;b&rsquo;,
getspos(&rsquo;BPMx&rsquo;), getx, &lsquo;r&rsquo;);</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0in">
xlabel(&rsquo;BPM Position [meters]&rsquo;);</P>
<OL START=2>
	<LI><H1 CLASS="western" STYLE="page-break-before: always">Installation
	du MML</H1>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">A
	FAIRE</SPAN></P>
	<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<OL START=3>
	<LI><H1 CLASS="western">Aides de programmation</H1>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<OL>
	<OL>
		<LI><H2 CLASS="western">R&egrave;gles de programmation</H2>
	</OL>
</OL>
<OL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<OL>
		<P CLASS="western" STYLE="margin-bottom: 0in"><B>La langue de
		Matlab est l'anglais</B></P>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"><B>Casse des fonctions
	</B>: Tous les noms de fonctions sont en minuscules.  Unix est
	sensible &agrave; la casse contrairement &agrave; Windows.</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"><B>Nom des fonctions :</B>
	Ne pas utiliser un nom commun lorsqu'une nouvelle fonction est
	d&eacute;finie. V&eacute;rifier que le nom est valide (&gt;&gt;
	<I>which</I> nom_fonction  ou &gt;&gt; <I>genvarname</I> pour Matlab
	R14).</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"><B>Nom des familles :</B>
	Les applications doivent &ecirc;tre &eacute;crites en utilisant des
	noms de fonctions g&eacute;n&eacute;riques.  Ainsi changer de nom de
	famille ne demande pas de r&eacute;crire les applications. Ceci est
	vital pour la portabilit&eacute; et la robustesse des applications.</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in"><B>Arborescence :</B>
	L'arborescence des r&eacute;pertoires ne doit pas &ecirc;tre &eacute;crite
	en dur dans une application. La racine de l'arborescence peut &ecirc;tre
	obtenue gr&acirc;ce &agrave; la fonction <I>getfamilydata('Directory',
	'DataRoot')</I>.  Les donn&eacute;es doivent &ecirc;tre sauvegard&eacute;es
	dans un sous r&eacute;pertoire par type, date et temps.</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=2>
		<LI><H2 CLASS="western">Aide en ligne</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">	Toute
fonction doit &ecirc;tre accompagn&eacute;e d'une aide en ligne. Le
minimum minimorum est une ent&ecirc;te (voir ci-apr&egrave;s).</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT COLOR="#ff3366"><B>	La
langue de Matlab est l'anglais : la documentation est &eacute;crite
dans cette langue</B></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Pour rester consistant
avec l'aide en ligne de Matlab, l'ent&ecirc;te souhait&eacute;e pour
fonctions est la suivante :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%FUNCTIONNAME &ndash; Description</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  [Out1, Out2, &hellip;] = functionname(Input1, Input2,
&hellip;)</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><FONT SIZE=2>%</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  INPUTS</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  1.</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  2.</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><FONT SIZE=2>%</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  OUTPUTS</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  1.</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  2.</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><FONT SIZE=2>%</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  NOTES</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  1.</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  2.</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><FONT SIZE=2>%</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  EXAMPLES</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  1.</FONT></P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  2.</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><FONT SIZE=2>%</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><FONT SIZE=2>%
See also</FONT></P>
<P CLASS="western" STYLE="margin-left: 0.19in; margin-bottom: 0in"><BR>
</P>
<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: 0.19in">
<FONT SIZE=2>%  Written by ____</FONT></P>
<OL START=0>
	<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium"></P>
	<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">Note
	: le saut d'une ligne apr&egrave;s &laquo;&nbsp;See Also&nbsp;&raquo;
	est requis pour ne pas avoir appara&icirc;tre la ligne &laquo;&nbsp;Written
	by&nbsp;&raquo; &agrave; chaque fois que l'aide en ligne est
	appel&eacute;e.</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<OL>
	<OL START=3>
		<LI><H2 CLASS="western"><B>Gestion des erreurs</B></H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; font-weight: medium">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="font-weight: medium">	Il
est recommand&eacute; d'utiliser &agrave; chaque fois que possible
les fonctions</SPAN> <I>error</I> or <I>mexerror, </I><SPAN STYLE="font-style: normal">et
d'&eacute;viter l'emploi de drapeau (Flag). </SPAN> Cela &eacute;vite
ainsi d'avoir &agrave; v&eacute;rifier le statut des erreurs apr&egrave;s
chaque ex&eacute;cution d'une fonction. Pour les cas complexes,
l'utilisation du m&eacute;canisme  try/catch est fortement recommand&eacute;
(Attention cependant car ce dernier n'est pas supporter par le Matlab
Compiler !).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=4>
		<LI><H2 CLASS="western">G&eacute;n&eacute;ration de documentation</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL>
			<LI><H3 CLASS="western"><B>Contenu d'un r&eacute;pertoire</B></H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"> <BR><I>mkcontnt</I> :
cr&eacute;e un fichier contents.m en reprenant la H1 ligne de chaque
fichier '.m' du r&eacute;pertoire<BR>Le fichier contents.m est
afficher lorsque la commande <I>help repertoire</I><SPAN STYLE="text-decoration: none"><SPAN STYLE="font-style: normal">
 ou </SPAN></SPAN><I>doc repertoire</I> est tap&eacute; dans Matlab.
<I>Repertoire </I><SPAN STYLE="font-style: normal">est le repertoire
contenant les fichiers Matlab.</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal"><BR>
</P>
<OL>
	<OL>
		<OL START=2>
			<LI><H3 CLASS="western"><B>G&eacute;n&eacute;ration de
			documentation html</B><BR><BR><BR>
			</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal">La
commande docgen permet de g&eacute;n&eacute;rer une documentation
html associ&eacute; &agrave; une arborescence Matlab. Voir <I>help
docgen</I> pour plus de d&eacute;tails.</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal"><BR>
</P>
<OL>
	<OL>
		<OL START=3>
			<LI><H3 CLASS="western">Note importante</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal">	Les
commandes   <I>mkcontnt </I>et <I>docgen</I> ne sont pas des
commandes natives de Matlab.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=4>
	<LI><H1 CLASS="western" STYLE="page-break-before: always"><A NAME="Initialisation"></A>
	 Cr&eacute;ation de familles</H1>
</OL>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0.01in"><BR><BR>
</P>
<OL>
	<OL>
		<OL>
			<LI><H2 CLASS="western">Introduction</H2>
		</OL>
	</OL>
</OL>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in"><BR><BR>
</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in">	Les quatre
fonctions principales pour lire ou assigner une valeur de consigne ou
relecture sont  <I>getam</I>, <I>getsp</I>, <I>setsp</I>, <I>stepsp ;
</I><SPAN STYLE="font-style: normal">ces fonctions sont
habituellement utilis&eacute;es sur des familles d&rsquo;&eacute;l&eacute;ments.
Leur r&ocirc;le principale est soit de lire, soit d&rsquo;&eacute;crire
un attribut, que ce dernier soit un &laquo;&nbsp;attribut&nbsp;&raquo;
TANGO correspondant &agrave; la machine en ligne ou au simulateur.
Ces deux fonctions principales sont les fonctions </SPAN><I>getpv</I><SPAN STYLE="font-style: normal">
and </SPAN><I>setpv </I><SPAN STYLE="font-style: normal">dont
d&eacute;rivent entre autres les quatres fonctions principales
pr&eacute;cit&eacute;es :</SPAN></P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in; font-style: normal">
<BR><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal; font-weight: medium">
	La fonction <I>getpv</I> permet d'aller lire une valeur de contr&ocirc;le
	(Process Variable).</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal; font-weight: medium">
	La fonction <I>setpv </I>permet d'&eacute;crire une valeur de
	contr&ocirc;le. 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal; font-weight: medium">
	</P>
</OL>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: -0.01in"><SPAN STYLE="font-weight: medium"><SPAN STYLE="font-style: normal">		Toutes
les informations n&eacute;cessaires pour le bon fonctionnement de ces
fonctions sont regroup&eacute;es dans une structure Matlab appel&eacute;e
Accelerator Object (AO), stock&eacute;e dans l&rsquo;objet
&laquo;&nbsp;application data&nbsp;&raquo; de la fen&ecirc;tre racine
d&rsquo;une session Matlab. L&rsquo;objet AO poss&egrave;de un grand
nombre de champs. Le premier d&rsquo;entre eux est le champ famille
(FamilyName). Le champ AO.(FamilyName) est lui m&ecirc;me une
structure contenant les informations n&eacute;cessaires au bon
fonctionnement des deux commandes </SPAN><I>getpv</I></SPAN> et
<SPAN STYLE="font-weight: medium"><I>setpv</I></SPAN>. Ce format est
maintenant d&eacute;taill&eacute;.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=2>
		<LI><H2 CLASS="western">Structure principale pour l&rsquo;agencement
		des donn&eacute;es</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western"><U>AcceleratorObject.(FamilyName)</U></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=162>
	<COL WIDTH=528>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				FamilyName</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Nom de la famille (&rsquo;BPMx&rsquo;, &lsquo;HCOR&rsquo;, etc.)
				 (unicit&eacute; requise)</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				FamilyType</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Nom de la cat&eacute;gorie d&rsquo;&eacute;l&eacute;ments, par
				exemple &lsquo;QUAD&rsquo; 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				MemberOf</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Tableau de cellules, par exemple {&rsquo;QUAD&rsquo;,  &lsquo;Magnet&rsquo;}</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				 Status</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-1 pour statut valide, 0 pour invalide 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				DeviceList</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Vecteur colonne [1 1; 1 2; 2 1, ...] 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				ElementList</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Vecteur colonne [1;2;3; ..; n] 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				Desired</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Structure (cf. infra) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				Monitor</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Structure (cf. infra)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				Setpoint</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Structure (cf. infra) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				DeviceNames</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Matrice de cellules pour le nom du device Tango 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				CommonNames</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Matrice de cha&icirc;ne de caract&egrave;res pour le nom commun 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				Position</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Vecteur colonne avec la position longitudinal le long de
				l&rsquo;anneau (m&egrave;tres) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				AT</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Structure pour le simulateur AT (facultatif) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=162>
				<P CLASS="retrait-du-corps-de-texte--western" ALIGN=LEFT STYLE="margin-left: 0.16in; margin-right: 0in">
				Golden</P>
			</TD>
			<TD WIDTH=528>
				<P CLASS="retrait-du-corps-de-texte--western" STYLE="margin-left: -0.05in; margin-right: 0in">
				-Structure avec les valeurs de r&eacute;f&eacute;rence
				(facultatif)</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.1Champs d'une
famille du MML.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=3>
		<LI><H2 CLASS="western">Sub-family structure for monitors</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-n&eacute;gatif-western"><U>AcceleratorObject.(FamilyName).Monitor</U></P>
<P CLASS="retrait-du-corps-de-texte--western"><BR><BR>
</P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=228>
	<COL WIDTH=462>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">DataType</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-&rsquo;Scalar&rsquo;
				or &lsquo;Vector&rsquo; depending on the EPICS type 
				</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">DataTypeIndex</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Sub-indexing of
				the EPICS record for 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">DataType</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-&rsquo;Vector&rsquo;
				(optional) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">Mode</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-&rsquo;Online&rsquo;,
				&lsquo;Simulator&rsquo;, &lsquo;Manual&rsquo; ou &lsquo;Special&rsquo;
								</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">SpecialFunction</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Nom de la fonction
				&agrave; utiliser si le Mode = &lsquo;Special&rsquo; 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">Units</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Unit&eacute;
				utilis&eacute;: &lsquo;Hardware&rsquo; ou &lsquo;Physics&rsquo; 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">HW2PhysicsFcn</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Fonction pour
				passer des unit&eacute;s &lsquo;Hardware&rsquo; &agrave;
				&lsquo;Physics&rsquo; (voir Appendix VI) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">HW2PhysicsParam</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Param&egrave;tres
				pour passer des unit&eacute;s &lsquo;Harware&rsquo; &agrave;
				&lsquo;Physics&rsquo;.</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">HWUnits</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Nom de l&rsquo;unit&eacute;
				&lsquo;Hardware&rsquo; (String) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">PhysicsUnits</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Nom de l&rsquo;unit&eacute;
				&lsquo;Physics&rsquo; (String) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">TangoNames</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Nomenclature
				compl&egrave;te de l&rsquo;attribut 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=228>
				<P CLASS="retrait-du-corps-de-texte--western">TANGO Handles</P>
			</TD>
			<TD WIDTH=462>
				<P CLASS="retrait-du-corps-de-texte--western">-Vecteur de
				r&eacute;f&eacute;rence (NaN if a channel has not been opened
				yet) Inutile pour TANGO ? <SPAN STYLE="background: #ffff00">Ou
				sont rang&eacute;es les r&eacute;f&eacute;rences ????</SPAN></P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.2Champs
&quot;Monitor&quot; d'une famille du MML.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=4>
		<LI><H2 CLASS="western">Sub-family structure for setpoints</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-n&eacute;gatif-western"><U>AcceleratorObject.(Family).Setpoint</U></P>
<TABLE WIDTH=706 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=211>
	<COL WIDTH=479>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">DataType:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-&rsquo;Scalar&rsquo;
				or &lsquo;Vector&rsquo; depending on the EPICS type 
				</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">DataTypeIndex:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Sub-indexing of
				the EPICS record for 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">DataType</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-&rsquo;Vector&rsquo;
				(optional)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Mode:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-&rsquo;Online&rsquo;,
				&lsquo;Simulator&rsquo;, &lsquo;Manual&rsquo; or &lsquo;Special&rsquo;
								</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">SpecialFunction:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Function name if
				Mode = &lsquo;Special&rsquo; 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Units:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-What units to work
				in: &lsquo;Hardware&rsquo; or &lsquo;Physics&rsquo; 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Physics2HWFcn:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Physics to
				hardware units conversion function (see Appendix VI) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Physics2HWParams:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Physics to
				hardware units conversion parameters 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">HWUnits: 
				</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-String name of the
				hardware units 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">PhysicsUnits: 
				</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-String name of the
				physics units 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">ChannelNames:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-String matrix of
				setpoint channel names 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Handles:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Handle vector (NaN
				if channel has not been opened yet) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Range:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-[Min Max] bornes
				de variation d&rsquo;une valeur de consigne 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">DeltaRespMat:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Incr&eacute;ments
				pour mesurer une matrice r&eacute;ponse (facultatif) 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=211>
				<P CLASS="retrait-du-corps-de-texte--western">Tolerance:</P>
			</TD>
			<TD WIDTH=479>
				<P CLASS="retrait-du-corps-de-texte--western">-Tol&eacute;rance
				pour comparaison entre valeur de consigne et de relecture SP-AM.</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.3Champs
&quot;Setpoint&quot; d'une famille du MML.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=5>
		<LI><H2 CLASS="western">R&egrave;gles g&eacute;n&eacute;rales</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: -0.01in">		Le
nombre de lignes des champs DeviceList, ElementList, CommonNames,
Positions, Range et Tolerance doit &ecirc;tre identique.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in"><SPAN STYLE="background: #ffff00">	Le
nombre de lignesTpour les champs ChannelNames and Handles must also
equal DeviceList if DataType=&rsquo;Scalar&rsquo;.  For
DataType=&rsquo;Vector&rsquo;, ChannelNames and Handles can only have
one row but the output of mcaget (or DataTypeIndex, if used) must
equal the number of rows of DeviceList.</SPAN> Bien qu&rsquo;il soit
ais&eacute; de cr&eacute;er une nouvelle famille, il est sage de se
tenir &agrave; un jeu donn&eacute; de familles pour un acc&eacute;l&eacute;rateur
sinon le partage des d&eacute;veloppements entre laboratoires s&rsquo;en
trouve compliqu&eacute;.</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in">	Le nombre
de champs de AO (Monitor, SetPoint, etc) d&eacute;pend du type de
famille. N&rsquo;importe quel nom de champ peut &ecirc;tre choisi.
Cependant les champs Monitor et SetPoint sont r&eacute;serv&eacute;s
aux fonctions <I>getam</I>, <I>getsp</I>, <I>setsp</I><SPAN STYLE="font-style: normal">
et </SPAN><I>stessp</I>. Il est hautement recommand&eacute;
d&rsquo;utiliser ces fonctions. Les commandes getpv et setpv sont
tr&egrave;s similaires &agrave; <I>getam</I> et <I>setsp</I> &agrave;
l&rsquo;exception que leurs arguments d&rsquo;entr&eacute;e
n&eacute;cessitent une structure de donn&eacute;es AO. En fait, les
fonctions  <I>getam, getsp, setsp </I><SPAN STYLE="font-style: normal">et</SPAN>
<I>stepsp</I><SPAN STYLE="font-style: normal"> peuvent &ecirc;tre
vues comme des fonctions raccourcis des fonctions de base </SPAN><I>getpv</I><SPAN STYLE="font-style: normal">
et </SPAN><I>setpv</I><SPAN STYLE="font-style: normal"> avec pour
argument d&rsquo;entr&eacute;e &lsquo;Monitor&rsquo; ou &lsquo;Setpoint&rsquo;.
Leur utilisation est plus ais&eacute;e et cache la complexit&eacute;
du syst&egrave;me de contr&ocirc;le.</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in; font-style: normal"><BR>
</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in">	<SPAN STYLE="background: #ffff00">However,
if it is appropriate to associate other channels with the family then
more fields can be added to the AO.  For instance, an on/off control
for a power supply could be added as AO.(Family).OnOffSetpoint.  One
would get the data by <I>getpv(Family, &lsquo;OnOffSetpoint&rsquo;).</I>
 It would not be accessible via <I>getsp</I> and <I>setsp</I>.  If it
is more desirable to create an On/Off family name, then one could
create a separate family for on/off control (like HCMonoff) and use
the standard <I>getam</I>, <I>getsp</I>, and <I>setsp</I> functions
(or create new aliases).  It&rsquo;s a matter of taste.</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=6>
		<LI><H2 CLASS="western">Champs suppl&eacute;mentaires pour utiliser
		l&rsquo;Accelerator Toolbox.</H2>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL>
			<LI><H3 CLASS="western">AcceleratorObject.(Family).AT (simulateur
			uniquement)</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=77*>
	<COL WIDTH=179*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=30%>
				<P CLASS="alin&eacute;a-western">ATType</P>
			</TD>
			<TD WIDTH=70%>
				<P CLASS="alin&eacute;a-western">'X&rsquo;, &lsquo;Z&rsquo;,
				&lsquo;BPMX&rsquo;, &lsquo;BPMZ&rsquo;, &lsquo;HCOR&rsquo;,
				&lsquo;VCOR&rsquo;, autrement ATParameterGroup est utilis&eacute;</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=30%>
				<P CLASS="retrait-du-corps-de-texte--western">ATParameterGroup</P>
			</TD>
			<TD WIDTH=70%>
				<P CLASS="retrait-du-corps-de-texte--western">Param&egrave;tre
				pour faire un groupe sous AT 
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=30%>
				<P CLASS="retrait-du-corps-de-texte--western">ATIndex</P>
			</TD>
			<TD WIDTH=70%>
				<P CLASS="retrait-du-corps-de-texte--western">Vecteur colonne
				d&rsquo;indice dans la maille AT</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.4 Sous champs
d'une familles dans AT</I></FONT></P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in"><BR><BR>
</P>
<P CLASS="alin&eacute;a-western" STYLE="text-indent: 0in">	Le
simulateur (AT) et la machine en ligne (pilotage des acc&eacute;l&eacute;rateurs)
peuvent coexister en param&eacute;trant correctement l&rsquo;objet
AO. Ainsi, si le Mode est en ligne, et que l&rsquo;on d&eacute;sire
calculer des param&egrave;tres &agrave; partir du mod&egrave;le, le
jeu de commande <I>model</I>(<I>twiss</I>, <I>beta</I> ...) est
disponible. On peut &eacute;galement sp&eacute;cifier &lsquo;Model&rsquo;
comme argument de toutes les fonctions pour forcer &agrave; utiliser
le mod&egrave;le (<I>getmcf(&rsquo;Model&rsquo;)</I>,
<I>getam(&rsquo;HCOR&rsquo;,&rsquo;Model&rsquo;)</I><SPAN STYLE="font-style: normal">)</SPAN>.
Ce raisonnement est encore valide si le mode actuel de la machine est
&lsquo;Online&rsquo;, &lsquo;Simulator&rsquo;, &lsquo;Manual&rsquo;
ou &lsquo;Special&rsquo;. En mode &lsquo;Simulator&rsquo;, les
param&egrave;tres ATType peuvent &ecirc;tre &lsquo;X&rsquo;, &lsquo;Z&rsquo;,
&lsquo;BPMx&rsquo;, &lsquo;BPMz&rsquo;, &lsquo;HCOR&rsquo;, &lsquo;VCOR&rsquo;,
ou un param&egrave;tre de groupe ATParameterGroup (voir l&rsquo;aide
en ligne  <I>help</I> <I>setparamgroup </I><SPAN STYLE="font-style: normal">pour
plus de d&eacute;tails).</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<OL START=2>
			<LI><H3 CLASS="western">Notes concernant le simulateur</H3>
		</OL>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">L'&eacute;l&eacute;ment
	Cavity doit &ecirc;tre allum&eacute; THERING{ }.PassMethod =
	'ThinCavityPass' afin que les fonctions touchant la RF
	fonctionnement correctement.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">La fr&eacute;quence
	RF ne modifie pas les nombres d'ondes.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Les unit&eacute;s
	physiques du simulateur doivent correspondre &agrave; celles de
	l'Accelerator Toolbox afin de fonctionner correctement.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Une attention
	particuli&egrave;re doit &ecirc;tre port&eacute;e au cas o&ugrave;
	les &eacute;l&eacute;ments de la maille AT sont d&eacute;coup&eacute;s
	en plusieurs morceaux. Par exemples, pour conna&icirc;tre la valeur
	des fonctions b&ecirc;tatrons au centre des quadrup&ocirc;les. Voir
	&agrave; ce sujet le param&egrave;tre ATParameterGroup.  
	</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Le mode simulateur
	(Simulate') ne fonctionnent que pour les champs 'Monitor' et 
	'Setpoint'. Cette limitation pourra &ecirc;tre lev&eacute;e par une
	meilleure utilisation du param&egrave;tre de groupe de l'AT.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Les noms TANGO et
	les noms communs ne fonctionnent pas correctement en mode
	simulateur.</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-before: always">
<BR>
</P>
<OL START=5>
	<LI><H1 CLASS="western">Stockage des donn&eacute;es<BR><BR>
	</H1>
	<OL>
		<LI><H1 CLASS="western">Introduction</H1>
	</OL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"> 	Actuellement, les
donn&eacute;es du syst&egrave;me de contr&ocirc;le, les donn&eacute;es
pour la Physique Machine et l'op&eacute;ration des installations sont
stock&eacute;es dans diff&eacute;rents endroits et formats.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=2>
		<LI><H3 CLASS="western">Accelerator Object (AO) 
		</H3>
		<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	</OL>
</OL>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">But 
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western">Information permettant la communication entre
				les familles et le syst&egrave;me de contr&ocirc;le/commmande</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.01in">Lieu de stockage</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.01in">Espace de travail
				de Matlab</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">Get/Set</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western"><I>getfamilydata</I> / <I>setfamilydata</I></P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.1Accelerator
Object</I></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=4>
		<LI><H3 CLASS="western">Accelerator Data (AD)</H3>
		<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	</OL>
</OL>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.03in; margin-right: -0in">
				But 
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.02in; margin-right: -0in">
				Variables li&eacute;es au MML</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.01in; margin-right: -0in">
				Lieu de stockage 
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.01in">Espace de travail
				de Matlab</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0in; margin-right: -0in; text-indent: -0.02in">
				Get/Set</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.01in; margin-right: -0in; text-indent: 0.01in">
				<I>getfamilydata</I> / <I>setfamilydata</I></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0in; margin-right: -0in; text-indent: -0.02in">
				<BR>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.01in; margin-right: -0in; text-indent: 0.01in">
				<BR>
				</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.01in">AD.Machine</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.01in">nom de la
				machine, eg. 'ALS' ou 'SOLEIL'</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">AD.Directory.DataRoot</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western">Racine de l'arborescence des fichiers de
				sauvegardes</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">AD.OpsData.RespFiles</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western">Tableau de cellules des fichiers de matrices
				r&eacute;ponses, eg. {'respmatbpm_08-06-2002', 'respmattune'}</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">AD.ATModel</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western">Nom de la maille AT</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">AD.BPMDelay</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western">Temps d'attente entre deux relectures des BPM
				(attendre que les donn&eacute;es soient renouvel&eacute;es)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western">AD.TUNEDelay</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western">Temps de delai pour les nombres d'ondes (cf.
				BPM)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0in; margin-right: -0in; text-indent: -0.02in">
				<BR>
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.01in; margin-right: -0in; text-indent: 0.01in">
				<BR>
				</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.2Accelerator
Data</I></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<OL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=6>
		<LI><H3 CLASS="western">Physics Data 
		</H3>
		<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	</OL>
</OL>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=128*>
	<COL WIDTH=128*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.03in; margin-right: -0in">
				But</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.03in; margin-right: -0in">
				Donn&eacute;e li&eacute;e &agrave; la Physique Machine</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.05in; margin-right: -0in">
				Lieu de stockage</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.02in; margin-right: -0in">
				Fichier (pour l'instant)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.05in; margin-right: -0in; text-indent: 0.01in">
				Fichier 
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.02in; margin-right: -0in; text-indent: -0.01in">
				getfamilydata('OpsData','PhysDataFile');</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.03in; margin-right: -0in">
				R&eacute;pertoire 
				</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0.03in; margin-right: -0in">
				getfamilydata('Directory','OpsData');</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: -0in; margin-right: -0in; text-indent: -0.02in">
				Get/Set</P>
			</TD>
			<TD WIDTH=50%>
				<P CLASS="western" STYLE="margin-left: 0.01in; margin-right: -0in; text-indent: 0.01in">
				<I>getphysdata</I> / <I>setphysdata</I></P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.3La structure
Physics Data pour les donn&eacute;es Physique Machine</I></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.01in; margin-bottom: 0in">	Le
fichier relatif aux donn&eacute;es Physique Machine contient une
structure dont le nom est <I>PhysData</I>.  Chacun des champs de
cette structure correspond &agrave; une famille d'&eacute;l&eacute;ments
(voir Tableau 0.4).    
</P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=368 BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=360>
	<THEAD>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.Golden</P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.Gain</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.Coupling</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.Offset</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.Sigma</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.PinCushion</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.Dispersion</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.DesignDispersion</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.BPMx.DesignBeta</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				<BR>
				</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.HCOR.Gain</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.HCOR.Offset</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.HCOR.Coupling</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				<BR>
				</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.Tune.Golden</P>
			</TD>
		</TR>
		<TR>
			<TD WIDTH=360 VALIGN=TOP>
				<P CLASS="western" ALIGN=LEFT STYLE="margin-left: 0.02in; margin-right: -0in">
				PhysData.Chro.Golden</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.4Exemples de
champs de la structure PhysData</I></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.25in; margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="font-style: normal">	La
fonction </SPAN><I>makephysdata</I> permet de cr&eacute;er une
structure par d&eacute;faut contenant tous les BPM et aimants de la
machine. Attention, si une telle structure existe avant l'appel de
fonction, alors elle est &eacute;cras&eacute;e (un confirmation est
n&eacute;anmoins demand&eacute;e &agrave; l'utilisateur).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=6>
	<LI><H1 CLASS="western">Unit&eacute;s hardware et physique</H1>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<OL>
	<OL>
		<LI><H3 CLASS="western">Introduction</H3>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les variables de
contr&ocirc;le (<I>process variables</I>) issues du monde EPICS
(<I>channel</I> access) ou TANGO (<I>attributs</I>) sont des signaux
exprim&eacute;es en unit&eacute; mat&eacute;rielle <SPAN STYLE="font-style: normal">(&laquo;&nbsp;Hardware
unit&nbsp;&raquo;).</SPAN>  Ces unit&eacute;s ne sont souvent pas
celles utilis&eacute;es par les physiciens machines. Le MML a &eacute;t&eacute;
&eacute;crit de mani&egrave;re &agrave; pouvoir passer simplement
d'un type d'unit&eacute; &agrave; l'autre, ie. des unit&eacute;s
&laquo;&nbsp;Hardward&nbsp;&raquo; aux unit&eacute;s &laquo;&nbsp;Physics&nbsp;&raquo;
et vice versa. Cette section d&eacute;crit comment configurer
l'Accelerator Object pour arriver &agrave; cela.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Le champ &laquo;&nbsp;Units&nbsp;&raquo;
doit &ecirc;tre configur&eacute; pour chaque famille, les deux
valeurs possibles sont :   
</P>
<P CLASS="western" STYLE="margin-left: 1in; margin-bottom: 0in"><I>AO.(Family).Monitor.Units	=
'Hardware' or 'Physics' </I>
</P>
<P CLASS="western" STYLE="margin-left: 1in; margin-bottom: 0in"><I>AO.(Family).Setpoint.Units	=
'Hardware' or 'Physics' </I>
</P>
<P CLASS="western" STYLE="margin-left: -0.01in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Bien qu'il soit
possible de choisir suivant les cas l'un ou l'autre mode, il est
fortement recommand&eacute; d'utiliser toujours le m&ecirc;me mode
pour toutes les applications.  Notons que la plupart des fonctions et
application permettent de modifier localement le mode et de passer
par exemple du mode unit&eacute; &laquo;&nbsp;Hardware&nbsp;&raquo;
au mode unit&eacute; &laquo;&nbsp;Physics&nbsp;&raquo;.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=2>
		<LI><H3 CLASS="western">Unit&eacute;s mat&eacute;rielles
		(&laquo;&nbsp;Hardware Units&nbsp;&raquo;)</H3>
		<P CLASS="western" STYLE="margin-bottom: 0in; text-decoration: none">
		</P>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	Toute application
communiquant avec TANGO utilise les unit&eacute;s Hardware (des
amp&egrave;res pour les alimentations, ...). Les applications qui
lisent des attribut TANGO ou qui assignent des nouvelles valeurs en
unit&eacute; Hardware, n'ont pas besoin de conversion d'unit&eacute;
si appel&eacute;es au travers des fonctions  <I>getpv</I> / <I>setpv</I>.
 L'unit&eacute; mat&eacute;riel est habituellement utilis&eacute;e
pour toutes les applications en ligne, comme par exemple les mesures
de matrices r&eacute;ponse, la correction d'orbite ferm&eacute;e. Les
deux fonctions prenant en compte les unit&eacute;s et conversions
&eacute;ventuelles sont   <I>getpv</I> et <I>setpv :</I></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Si la fonction
	<I>getpv</I> est appel&eacute;e avec AO.(Family).Monitor.Units =
	'Hardware', la valeur de relecture retourn&eacute;e par <I>getpv</I>
	est en unit&eacute; Hardware apr&egrave;s ex&eacute;cution de la
	commande <I>readattribute;</I></P>
	<P CLASS="western" STYLE="margin-right: 1.13in; margin-bottom: 0in"></P>
	<LI><P CLASS="western" STYLE="margin-right: 0.01in; margin-bottom: 0in">
	Si la fonction <I>setpv</I> est appel&eacute;e avec
	AO.(Family).Setpoint.Units = 'Hardware', la valeur de consigne est
	unitils&eacute;e telle quelle (sans conversion) lors de l'ex&eacute;cution
	de la commande  <I>writeattribute</I>.</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<LI><H3 CLASS="western">Unit&eacute;s physiques (&laquo;&nbsp;Physics
		Units&nbsp;&raquo;)</H3>
	</OL>
	<P CLASS="western" STYLE="margin-bottom: 0in; text-decoration: none">
	</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les unit&eacute;s
&laquo;&nbsp;Physics&nbsp;&raquo; sont utilis&eacute;es par toute
application calculant des param&egrave;tres et grandeurs acc&eacute;l&eacute;rateur
(valeur de gradient, radians pour des correcteurs, ...). Ainsi bien
que les applications puissent lire ou &eacute;crire des valeurs de
contr&ocirc;le en unit&eacute;s physiques, le syst&egrave;me de
contr&ocirc;le communique en unit&eacute;s mat&eacute;rielles. Ce qui
signifie que les fonction de bas niveau <I>getpv</I><SPAN STYLE="font-style: normal">
et </SPAN><I>setpv</I><SPAN STYLE="font-style: normal"> doivent faire
la conversion</SPAN>.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in">Lorsque la
		fonction <I>getpv</I> est appel&eacute;e avec 
		AO.(Family).Monitor.Units = 'Physics', l'attribut &agrave; lire est
		 converti  d'unit&eacute; &laquo;&nbsp;Hardware&nbsp;&raquo; (eg.
		Amp&egrave;re) en unit&eacute; physiques (eg. Radians) dans la
		fonction <I>getpv</I><SPAN STYLE="font-style: normal"> juste apr&egrave;s</SPAN>
		ex&eacute;cution de la commande <I>readattribute</I>.</P>
	</OL>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
	<OL>
		<LI><P CLASS="western" STYLE="margin-bottom: 0in">Lorsque la
		fonction  <I>setpv</I> est appel&eacute;e
		AO.(Family).Setpoint.Units = 'Physics',, la valeur de consigne est
		convertie d'unit&eacute; &laquo;&nbsp;Physics&nbsp;&raquo; (eg.
		radians)  en unit&eacute; Hardware (eg. amp&egrave;res) dans la
		fonction <I>setpv</I> juste avant l'appelle de la commande
		<I>writeattribute.</I></P>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=5>
		<LI><H5 CLASS="western">Fonctions de conversion</H5>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="font-style: normal">	Les
deux fonctions de conversion sont les fonctions</SPAN><I> hw2physics</I>
et <I>physics2hw</I> dans le MML. La premi&egrave;re (<I>hw2physics</I><SPAN STYLE="font-style: normal">)</SPAN><I>
</I>transforme des unit&eacute;s Hardware en unit&eacute;s Physics.
La seconde (<I>physics2hw</I>) des unit&eacute;s &laquo;&nbsp;Physics&nbsp;&raquo;
en unit&eacute;s &laquo;&nbsp;Hardware&nbsp;&raquo;. 
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	La conversion pour un
champ donn&eacute; en faite en appelant la fonction sp&eacute;cifi&eacute;e
dans le champ <I>HW2PhysicsFcn</I> ou <I>Physics2HWFcn</I> en
utilisant les param&egrave;tres d&eacute;finis dans les champs
<I>HW2PhysicsParams</I> ou <I>Physics2HWParams</I>. Si la fonction
d&eacute;finie dans le champ  <I>HW2PhysicsFcn</I> ou <I>Physics2HWFcn</I>
n'existe pas, alors la conversion revient juste &agrave; appliquer le
facteur de gain sp&eacute;cifi&eacute; par <I>HW2PhysicsParams</I> ou
<I>Physics2HWParams</I>.  
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><U>Note important</U></P>
<P CLASS="western" STYLE="margin-bottom: 0in">	</P>
<P CLASS="western" STYLE="margin-bottom: 0in">L'unit&eacute;
&laquo;&nbsp;Physics&nbsp;&raquo; doit correspondre &agrave; l'unit&eacute;
AT, lorsque que le simulatuer AT est utilis&eacute;.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><U>Exemples</U></P>
<P CLASS="western" STYLE="margin-bottom: 0in; text-decoration: none"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="text-decoration: none">	Si
l'objet AO est en unit&eacute;s &laquo;&nbsp;Hardware&nbsp;&raquo;,
la fonction </SPAN> <I>getsp</I> renvoie une valeur dans cette unit&eacute;.
La fonction <I>hw2physics</I> permet de convertir le courant du
quadrup&ocirc;le Q1, en valeur de gradient (K).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
val  = getsp('Q1');</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
Kval = hw2physics('Q1', 'Setpoint', val);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Pour s&eacute;lectionner
les quadrup&ocirc;les 1, 2 et 4 de la famille Q1, il suffit de
sp&eacute;cifier la liste de devices :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
val  = getsp('Q1',[1; 2; 4]);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
Kval = hw2physics('Q1', 'Setpoint', val, [1; 2; 4]);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=6>
		<LI><H5 CLASS="western">Configuration de l' &laquo;&nbsp;Accelerator
		Object&nbsp;&raquo; pour les conversions</H5>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Le Tableau 0.1
contient les diff&eacute;rents champs &agrave; sp&eacute;cifier afin
que le MML soit configur&eacute; pour les conversion d'unit&eacute;s.
Ces champs doivent &ecirc;tre d&eacute;finis pour chaque sous champ
d'une famille (&laquo;&nbsp;Monitor&nbsp;&raquo;, &laquo;&nbsp;Setpoint&nbsp;&raquo;,
etc).</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=4 CELLSPACING=0 STYLE="page-break-after: avoid">
	<COL WIDTH=72*>
	<COL WIDTH=184*>
	<THEAD>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western" STYLE="font-style: normal"><B>Champ</B></P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western" STYLE="font-style: normal"><B>Fonctionnalit&eacute;</B></P>
			</TD>
		</TR>
	</THEAD>
	<TBODY>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western"><I>HW2PhysicsFcn </I>
				</P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western">&ndash; Nom ou r&eacute;f&eacute;rence de
				fonction (&laquo;&nbsp;mapping function&nbsp;&raquo;) entre
				unit&eacute;s  &laquo;&nbsp;Hardware&nbsp;&raquo; et &laquo;&nbsp;Physics&nbsp;&raquo;.
								</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western"><I>HW2PhysicsParams </I>
				</P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western">&ndash; Matrice ou tableau de cellules de
				param&egrave;tres n&eacute;cessaires &agrave; la fonction
				<I>HW2PhysicsFcn</I></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western"><I>Physics2HWFcn  </I>
				</P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western">&ndash; Nom ou r&eacute;f&eacute;rence de
				fonction (&laquo;&nbsp;mapping function&nbsp;&raquo;) entre
				unit&eacute;s  &laquo;&nbsp;Physics&nbsp;&raquo; et &laquo;&nbsp;Hardware&nbsp;&raquo;.
								</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western"><I>Physics2HWParams </I>
				</P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western">&ndash; Matrice ou tableau de cellules de
				param&egrave;tres n&eacute;cessaires &agrave; la fonction
				<I>Physics2HWFcn</I></P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western"><I>PhysicsUnits  </I>
				</P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western">&ndash; Champ facultatif pour le nom d'unit&eacute;
				&laquo;&nbsp;Physics&nbsp;&raquo; (string)</P>
			</TD>
		</TR>
		<TR VALIGN=TOP>
			<TD WIDTH=28%>
				<P CLASS="western"><I>HWUnits  </I>
				</P>
			</TD>
			<TD WIDTH=72%>
				<P CLASS="western">&ndash; Champ facultatif pour le nom d'unit&eacute;
				&laquo;&nbsp;Hardware&nbsp;&raquo; (string)</P>
			</TD>
		</TR>
	</TBODY>
</TABLE>
<P STYLE="margin-top: 0.08in"><FONT SIZE=2><I>Tableau 0.1Champs de l'
&laquo;&nbsp;Accelerator Object&nbsp;&raquo; &agrave; configurer pour
la conversion entre unit&eacute;s.</I></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=7>
		<LI><H5 CLASS="western"><FONT SIZE=3>Fonctions de conversion et
		param&egrave;tres</FONT></H5>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les fonctions de
conversion ou leur r&eacute;f&eacute;rence (<I>handles</I><SPAN STYLE="font-style: normal">
au sens Matlab) sont stock&eacute; dans les champs </SPAN><I>HW2PhysicsFcn</I>
et  <I>Physics2HWFcn</I>. Les fonctions <I>physics2hw</I> et
<I>hw2phyics</I> appellent alors la fonction Matlab <I>feval</I> avec
en argument la liste de param&egrave;tres pour faire la conversion. 
Si le champ fonction n'est pas d&eacute;finit, alors la conversion
appliqu&eacute;e est juste un changement d'&eacute;chelles en
utilisant la listes de param&egrave;tres.</P>
<P CLASS="western" STYLE="margin-bottom: 0in">  
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les param&egrave;tres
pour les fonctions de conversion sont stock&eacute;s dans les champs
<I>HW2PhysicsParams</I> et <I>Physics2HWParams</I>.  Ils doivent
absolument &ecirc;tre consistants avec la syntaxe d'appel des
fonctions <I>HW2PhysicsFcn</I> et <I>Physics2HWFcn</I>.  Pour une
famille de M devices et N param&egrave;tres &agrave; passer &agrave;
la fonction de conversion alors les champs <I>HW2PhysicsParams</I> et
<I>Physics2HWParams</I> sont exprim&eacute;s dans un des cinq formats
suivants :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">vecteur 1xN  
	</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">matrice MxN</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">matrice de string
	avec M colonnes</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">tableau de
	cellules de N &eacute;l&eacute;ments o&ugrave; chaque &eacute;l&eacute;ment
	est un vecteur de dimension M</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">vide</P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Pour des matrices, le
nombre de colonnes soit &ecirc;tre &eacute;gal au nombre
d'&eacute;quipements de la famille. Il vaut 1 si tous les &eacute;quipements
sont trait&eacute;s de la m&ecirc;me mani&egrave;re. Chaque colonne
de la matrice, correspond &agrave; un argument diff&eacute;rent pour
les fonctions <I>HW2PhysicsFcn</I> et <I>Physics2HWFcn</I>.  Si la
matrice est de type string,  alors les colonnes correspondant au
&eacute;quipements sont consid&eacute;r&eacute;es comme argument
unique. Dans le cas de param&egrave;tre multiples de type non
scalaire, un tableau de cellule doit &ecirc;tre utilis&eacute;. Le
contenu de chaque cellule est pass&eacute; aux fonctions
<I>HW2PhysicsFcn</I> et <I>Physics2HWFcn</I> comme argument distinct
(Ce format n'est utilis&eacute; en pratique que tr&egrave;s rarement,
pour des cas compliqu&eacute;s). Si les champs restent vide, aucun
param&egrave;tre n'est pass&eacute; au fonction de conversion.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=8>
		<LI><H5 CLASS="western"><FONT SIZE=3>Exemples</FONT></H5>
		<P CLASS="western"></P>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	Quelques exemples de
configuration de l'Accelerator Object sont maintenant donn&eacute;s.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Si les champs
	<I>HW2PhysicsFcn</I> ou <I>Physics2HWFcn</I> ne sont pas d&eacute;finis,
	les param&egrave;tres <I>HW2PhysicsParams</I> et <I>Physics2HWParams</I>
	sont de changements d'&eacute;chelle. Si les unit&eacute;s
	&laquo;&nbsp;Physics&nbsp;&raquo; pour les BPM sont des m&egrave;tres,
	et des millim&egrave;tres pour les unit&eacute; &laquo;&nbsp;Hardware&nbsp;&raquo;,
	alors la configuration est la suivante :</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).FamilyName
              = 'BPMx';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.Units
           = 'Hardware';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.HW2PhysicsParams
=  1e-3;</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.Physics2HWParams
=  1000;</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.HWUnits
         = 'mm';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.PhysicsUnits
    = 'm';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=2>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Le champ
	<I>HW2PhysicsFcn</I> peut &ecirc;tre une fonction en ligne (<I>inline
	function</I> au sens Matlab).  Pour le m&ecirc;me exemple en
	ajoutant un offset &agrave; la conversion, la configuration devient
	:</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).FamilyName
              = 'BPMx';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.Units
           = 'Hardware';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.HW2PhysicsFcn
   = inline('P1.*x+P2', 2);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.Physics2HWFcn
   = inline('P1.*x+P2', 2);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.HW2PhysicsParams
=  [1e-3 0];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.Physics2HWParams
=  [1000 0];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.HWUnits
         = 'mm';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(BPMx).Monitor.PhysicsUnits
    = 'm';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL START=3>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Le champ
	<I>HW2PhysicsFcn</I> peut aussi &ecirc;tre une fonction  (voir plus
	loin la mani&egrave;re d&nbsp;'&eacute;crire cette fonction). Si les
	fonctions <I>amp2k</I> et <I>k2amp</I> permettent de convertir des
	amp&egrave;res et gradients (K) en utilisant une expression 
	polynomiale et un offset, la configuration devient : 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).FamilyName
              = 'Q1';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.Units
           = 'Hardware';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.HW2PhysicsFcn
   = @amp2k</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.Physics2HWFcn
   = @k2amp;</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.HW2PhysicsParams
= {[-0.06 .3 0], 0};</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.Physics2HWParams
= {[-0.06 .3 0], 0};</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.HWUnits
         = 'amperes';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>AO.(QF).Monitor.PhysicsUnits
    = 'K';</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Dans le cas o&ugrave;
les coefficients polynomiaux diff&egrave;rent d'un aimant &agrave;
l'autre, le champ <SPAN STYLE="font-style: normal">doit contenant les
coefficients doit &ecirc;tre une matrice dont le nombre de colonnes
correspond au nombre d'aimants</SPAN>.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=10>
		<LI><H5 CLASS="western"><FONT SIZE=3>Ecriture d'une fonction de
		conversion</FONT></H5>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Les fonctions de
conversion (eg. <I>k2amp</I> et <I>amp2k de l'exemple 4</I>) doivent
avoir les propri&eacute;t&eacute;s suivantes :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"> 
</P>
<OL>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">La fonction de
	conversion est ind&eacute;pendante du MML</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Son expression est
	la m&ecirc;me pour tous les &eacute;quipements d'une m&ecirc;me
	famille. Seuls les param&egrave;tres peuvent varier d'un &eacute;quipement
	&agrave; un autre.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">Tous les
	param&egrave;tres n&eacute;cessaire &agrave; la conversion sont
	pass&eacute;s comme arguments d'entr&eacute;e de la fonction de
	conversion.</P>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in">La fonction de
	conversion doit accepter des entr&eacute;es vectorielles pour
	traiter un esemble d'&eacute;quipements. 
	</P>
	<P CLASS="western" STYLE="margin-bottom: 0in"></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in">	La syntaxe g&eacute;n&eacute;rale
pour une fonction de conversion est :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="text-indent: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>myhw2physicsfcn(Val,
Param1, Param2, &hellip;, ParamN)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">avec  Val, la valeur de
consigne (issue de <I>hw2physics)</I> et les N param&egrave;tres
provenant du champ <I>HW2PhysicsParams</I>.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<OL>
	<OL START=11>
		<LI><H5 CLASS="western"><FONT SIZE=3>Exemple de fonction de
		conversion</FONT></H5>
	</OL>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Soit la conversion
suivante o&ugrave; x est la valeur &agrave; convertir et y le
r&eacute;sultat de conversion :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="text-indent: 0.51in; margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_4047242d.gif" NAME="Objet2" ALIGN=ABSMIDDLE WIDTH=185 HEIGHT=32>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">avec s comme facteur
d'&eacute;chelle, c0,  c1 comme coefficients polynomiaux.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"> 
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>function
Y = myhw2physicsfcn(X, s, c0, c1,c2)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>Y
= s * (c0 + c1*X + c2*X^2);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">Appel de la fonction :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
myhw2physicsfcn(1,2,3,4,5)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>ans
= 25</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">La m&ecirc;me fonction
peut s'&eacute;crire de mani&egrave;re vectorielle :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>function
Y = myhw2physicsfcn(X,s,c1,c2);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>Y
= s(:) .* (c0(:) + c1(:).*X(:) + c2(:).*X(:).^2);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">Exemple d'appel de la
fonction :</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
S = [1; 0.99; 1.01];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
C0 = [1; 2; 3];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
C1 = [4; 5; 6];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
C2 = [7; 8; 9];</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
myhw2physicsfcn( [pi; exp(1); sqrt(2)], S, C0; C1, C2)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>ans
= [82.6536</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
   <FONT FACE="r_ansi, monospace"><FONT SIZE=2>73.9568</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
   <FONT FACE="r_ansi, monospace"><FONT SIZE=2>29.7801]</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	Il est prudent de
v&eacute;rifier la consistance entre les deux fonctions
<I>myhw2physicsfcn</I> et <I>HW2PhysicsParams</I> en proc&eacute;dant
ainsi :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">Si  <I>HW2PhysicsParams</I>
est une matrice :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
feval(HW2PhysicsFcn,X,HW2PhysicsParams(:,1), &hellip;
HW2PhysicsParams(:,N))</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">Si <I>HW2PhysicsParams</I>
est un tableau de cellules :</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>&gt;&gt;
feval(HW2PhysicsFcn,X,HW2PhysicsParams{:})</FONT></FONT></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in">	La fonction pr&eacute;c&eacute;dente
peut &ecirc;tre g&eacute;n&eacute;ralis&eacute;e pour un nombre
arbitraire de coefficients polynomiaux. L'Illustration 0.1 pr&eacute;sente
le sch&eacute;ma g&eacute;n&eacute;rale de fonctions telles  <I>amp2k</I>
et <I>k2amp</I>.</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><IMG SRC="matlabmiddlelayerSOLEIL_html_m38742f6e.gif" NAME="Objet3" ALIGN=ABSMIDDLE WIDTH=270 HEIGHT=32></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>function
k = amp2k(Amps, C, ScaleFactor)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>%
C = [Cn &hellip; C2 C1 C0]</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>Amps
= Amps ./ ScaleFactor;</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>brho
= (10/2.998);</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><FONT FACE="r_ansi, monospace"><FONT SIZE=2>for
i = 1:length(Amps)</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
<FONT FACE="r_ansi, monospace"><FONT SIZE=2>if size(C,1) == 1</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
    <FONT FACE="r_ansi, monospace"><FONT SIZE=2>k(i,1) = polyval(C,
Amps(i)) / brho;</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
<FONT FACE="r_ansi, monospace"><FONT SIZE=2>else</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
    <FONT FACE="r_ansi, monospace"><FONT SIZE=2>k(i,1) =
polyval(C(i,:), Amps(i)) / brho;</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">   
<FONT FACE="r_ansi, monospace"><FONT SIZE=2>end</FONT></FONT></P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in">end</P>
<P CLASS="western" STYLE="margin-left: 0.5in; margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><FONT COLOR="#ff0000"><IMG SRC="matlabmiddlelayerSOLEIL_html_7246f13f.gif" NAME="Cadre7" ALT="Cadre7" ALIGN=BOTTOM></FONT></P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in; page-break-before: always">
<BR>
</P>
<OL START=7>
	<LI><P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
	<FONT SIZE=4 STYLE="font-size: 16pt"><B>Binding TANGO/Matlab</B></FONT></P>
</OL>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" ALIGN=CENTER STYLE="margin-bottom: 0in; page-break-after: avoid">
<SPAN STYLE="background: #ffff00">A FAIRE</SPAN></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; page-break-after: avoid">
<SPAN STYLE="background: #ffff00">getattribute</SPAN></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; page-break-after: avoid">
<SPAN STYLE="background: #ffff00">readattribute</SPAN></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; page-break-after: avoid">
<SPAN STYLE="background: #ffff00">writeattribute</SPAN></P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; page-break-after: avoid">
<BR>
</P>
<P CLASS="western" ALIGN=LEFT STYLE="margin-bottom: 0in; page-break-after: avoid">
<SPAN STYLE="background: #ffff00">le binding lui m&ecirc;me et les
fonctions ajout&eacute;es pour le MML et autres besoins.</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-before: always">
<BR>
</P>
<DIV ID="Index des tables1" DIR="LTR">
	<DIV ID="Index des tables1_Head" DIR="LTR">
		<P STYLE="margin-top: 0.17in; page-break-after: avoid"><FONT FACE="Bitstream Vera Sans, sans-serif"><FONT SIZE=4 STYLE="font-size: 16pt"><B>Index
		des tables</B></FONT></FONT></P>
	</DIV>
	<P STYLE="margin-bottom: 0in">Tableau 2.1Principaux champs pour une
	famille de l'Accelerator Object.	9</P>
	<P STYLE="margin-bottom: 0in">Tableau 2.2Nomenclature des
	fonctions	10</P>
	<P STYLE="margin-bottom: 0in">Tableau 2.3Familles d&eacute;finies
	pour l'anneau	11</P>
	<P STYLE="margin-bottom: 0in">Tableau 2.4 Famille/ index &eacute;l&eacute;ment,
	Famille/{cellule &eacute;l&eacute;ment], nomenclature TANGO pour les
	correcteurs lents horizontaux de SOLEIL.	11</P>
	<P STYLE="margin-bottom: 0in">Tableau 2.5 Diff&eacute;rents modes de
	fonctionnement des commandes du MML.	12</P>
	<P STYLE="margin-bottom: 0in">Tableau 3.1Fonctions pour &eacute;crire
	ou lire une valeur de contr&ocirc;le	13</P>
	<P STYLE="margin-bottom: 0in">Tableau 3.2Fonctions pour modifier le
	comportement du MML	14</P>
	<P STYLE="margin-bottom: 0in">Tableau 3.3Fonctions de passage d'une
	nomenclature &agrave; une autre.	14</P>
	<P STYLE="margin-bottom: 0in">Tableau 3.4Fonctions g&eacute;n&eacute;rales
	et g&eacute;n&eacute;riques pour acc&eacute;der aux donn&eacute;es
	du MML	15</P>
	<P STYLE="margin-bottom: 0in">Tableau 4.1Exemples d'alias de
	fonction	18</P>
	<P STYLE="margin-bottom: 0in">Tableau 5.1Exemples de fonctions
	sp&eacute;ciales	19</P>
	<P STYLE="margin-bottom: 0in">Tableau 6.1Fonctions g&eacute;n&eacute;rales
	pour la Physique Machine	20</P>
	<P STYLE="margin-bottom: 0in">Tableau 6.2Fonctions manipulant les
	matrices r&eacute;ponse	21</P>
	<P STYLE="margin-bottom: 0in">Tableau 6.3Fonctions relatives au
	feedforward des insertions.	21</P>
	<P STYLE="margin-bottom: 0in">Tableau 6.4Fonctions pour v&eacute;rifier
	le bon fonctionnement  du syst&egrave;me de contr&ocirc;le commande
	et des &eacute;quipements.	22</P>
	<P STYLE="margin-bottom: 0in">Tableau 6.5Fonctions propres au mod&egrave;le
	AT	23</P>
	<P STYLE="margin-bottom: 0in">Tableau 6.6Fonctions diverses
	enrichissant les biblioth&egrave;ques de Matlab.	23</P>
	<P STYLE="margin-bottom: 0in">Tableau 8.1 Format type pour une
	mesure dans le MML	26</P>
	<P STYLE="margin-bottom: 0in">Tableau 9.1Format de sauvegarde d'une
	matrice r&eacute;ponse	28</P>
	<P STYLE="margin-bottom: 0in">Tableau 10.1Applications de contr&ocirc;le
	de haut niveau.	30</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.1Champs d'une famille du
	MML.	52</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.2Champs &quot;Monitor&quot;
	d'une famille du MML.	52</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.3Champs &quot;Setpoint&quot;
	d'une famille du MML.	53</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.4 Sous champs d'une familles
	dans AT	54</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.1Accelerator Object	55</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.2Accelerator Data	55</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.3La structure Physics Data
	pour les donn&eacute;es Physique Machine	56</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.4Exemples de champs de la
	structure PhysData	56</P>
	<P STYLE="margin-bottom: 0in">Tableau 0.1Champs de l' &laquo;&nbsp;Accelerator
	Object&nbsp;&raquo; &agrave; configurer pour la conversion entre
	unit&eacute;s.	59</P>
</DIV>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<DIV ID="Index des illustrations1" DIR="LTR">
	<DIV ID="Index des illustrations1_Head" DIR="LTR">
		<P STYLE="margin-top: 0.17in; page-break-after: avoid"><FONT FACE="Bitstream Vera Sans, sans-serif"><FONT SIZE=4 STYLE="font-size: 16pt"><B>Index
		des illustrations</B></FONT></FONT></P>
	</DIV>
	<P STYLE="margin-bottom: 0in">Illustration 0.1Principe du Matlab
	Middle Layer	8</P>
	<P STYLE="margin-bottom: 0in">Illustration 0.2Principe du Matlab
	Middle Layer	8</P>
	<P STYLE="margin-bottom: 0in">Illustration 3.1Interface graphique
	configui pour sauvegarder et restaurer une configuration machine.	17</P>
	<P STYLE="margin-bottom: 0in">Illustration 10.1Application
	plotfamily.	31</P>
	<P STYLE="margin-bottom: 0in">Illustration 0.1Sch&eacute;ma de
	fonctionnement des commandes amp2k et k2amp (SPEAR3)	63</P>
</DIV>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in; page-break-before: always">
<BR>
</P>
<DIV ID="Bibliographie1" DIR="LTR" STYLE="background: transparent">
	<DIV ID="Bibliographie1_Head" DIR="LTR">
		<P STYLE="margin-top: 0.17in; page-break-after: avoid"><FONT FACE="Bitstream Vera Sans, sans-serif"><FONT SIZE=4 STYLE="font-size: 16pt"><B>Bibliographie</B></FONT></FONT></P>
	</DIV>
	<P STYLE="margin-bottom: 0in">1: , Matlab TM, ,
	http://www.mathworks.com/</P>
	<P STYLE="margin-bottom: 0in">2: Andrei Terebilo, Matlab Channel
	Access (MCA), 
	</P>
	<P STYLE="margin-bottom: 0in">3: Andrei Terebilo, AT Users Manual, 
	</P>
	<P STYLE="margin-bottom: 0in">4: , EPICS, , 
	</P>
	<P STYLE="margin-bottom: 0in">5: , Spear3, ,
	http://www-ssrl.slac.stanford.edu/spear3/</P>
	<P STYLE="margin-bottom: 0in">6: , , , http://www-als.lbl.gov/als/</P>
	<P STYLE="margin-bottom: 0in">7: , Canadian  Light Source, ,
	http://www.cls.usask.ca/</P>
	<P STYLE="margin-bottom: 0in">8: , , ,
	http://www.esrf.fr/computing/cs/tango/index.html</P>
	<P STYLE="margin-bottom: 0in">9: N. Leclercq, ??? Bindings
	TANGO/MATLAB, 
	</P>
	<P STYLE="margin-bottom: 0in">10: L. Nadolski, A. Loulergue,
	Nomenclature Tango, 
	</P>
</DIV>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">A
documenter:</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">GoldenPhysData</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" STYLE="text-decoration: none"><B>A faire&nbsp;:</B></P>
<UL>
	<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">int&eacute;gration
	des moniteurs de pertes</P>
	<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">int&eacute;gration
	des jauges</P>
	<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">int&eacute;gration
	des sondes de temp&eacute;rature</P>
	<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"></P>
	<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in">Fonction
	pour calcul de la PSD</P>
</UL>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">GETRUNFLAG
- Returns whether setpoint is reached or not</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">ISMEMBEROF
- Returns turn if the membership information of a family (cell of
strings)</SPAN></P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western" ALIGN=JUSTIFY STYLE="margin-bottom: 0in"><SPAN STYLE="background: #ffff00">Fonctions
utiles</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western"><SPAN STYLE="background: #ffff00">FileName =
appendtimestamp([getfamilydata(&rsquo;Default&rsquo;,
&lsquo;BPMArchiveFile&rsquo;) &lsquo;x&rsquo;], clock)</SPAN></P>
<P CLASS="western" STYLE="margin-bottom: 0in"><BR>
</P>
<P CLASS="western"><SPAN STYLE="background: #ffff00">BPMx_2004-04-15_18-26-15</SPAN></P>
<DIV ID="sdfootnote1">
	<P CLASS="sdfootnote-western"><B><A CLASS="sdfootnotesym" NAME="sdfootnote1sym" HREF="#sdfootnote1anc">1</A>Attention,
	cette notion de &laquo;&nbsp;device&nbsp;&raquo; n'est
	malheureusement pas identique &agrave; la notion de device TANGO.</B></P>
</DIV>
<DIV ID="sdfootnote2">
	<P CLASS="sdfootnote-western" STYLE="margin-left: 0in; margin-right: 0.13in; text-indent: 0in">
	<A CLASS="sdfootnotesym" NAME="sdfootnote2sym" HREF="#sdfootnote2anc">2</A>
	Le comportement par d&eacute;faut de la fonction family2dev est
	crucial car de nombreuses fonctions dont <I>getpv</I>/<I>setpv
	</I><SPAN STYLE="font-style: normal">utilisent cette</SPAN> fonction
	pour obtenir la liste par d&eacute;faut [cellule &eacute;l&eacute;ment]
	si elle n'est donn&eacute;e par l'utilisateur comme argument de la
	commande.</P>
</DIV>
<DIV TYPE=FOOTER>
	<P STYLE="margin-right: 0.25in; margin-top: 0.3in; margin-bottom: 0in">
	<SPAN ID="Cadre3" DIR="LTR" STYLE="position: absolute; top: 0in; left: 0in; width: 0.31in; height: 0.02in; border: none; padding: 0in; background: #ffffff">
		<P STYLE="margin-bottom: 0in"><SDFIELD TYPE=PAGE SUBTYPE=RANDOM FORMAT=PAGE>73</SDFIELD></P>
	</SPAN><SDFIELD TYPE=DOCINFO SUBTYPE=TITLE>Matlab Middle Layer</SDFIELD>
	-- chapitre  10.5.5 </P>
</DIV>
</BODY>
</HTML>